const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/IdentityManager-Diq0ZEik.js","assets/substitute-fdtPzFe2.js","assets/pe-wasm-BMYM3NE3.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/ElevationLayer-BQHkXF2P.js","assets/ArcGISCachedService-BPuDD4hy.js","assets/TileInfoTilemapCache-DlMgW5av.js","assets/TilemapCache-CZ6LPrnm.js","assets/ByteSizeUnit-BsxeN7wM.js","assets/layersCreator-BXto2E8l.js","assets/portalLayers-JonThmQa.js","assets/associatedFeatureServiceUtils-DsIe-ty2.js","assets/fetchService-DablJZai.js","assets/arcgisLayers-CyJaodJO.js","assets/geometryEngineBase-C0k-Dc0I.js","assets/webdocSaveUtils-ChvRCv3b.js","assets/originUtils-D69mHv66.js","assets/multiOriginJSONSupportUtils-C0wm8_Yw.js","assets/resourceUtils-D1GRkF0Y.js","assets/resourceUtils-C3dQOEyf.js","assets/saveUtils-BbjSkQM1.js","assets/WhereClause-BWgheUn_.js","assets/TimeOnly-DVJukkn2.js","assets/arcadeUtils-DFGO5x6Y.js","assets/languageUtils-C3meN75c.js","assets/ImmutableArray-BPVd6ESQ.js","assets/shared-DtBio8Eg.js","assets/number-BRZ2iyWI.js","assets/featureConversionUtils-CW0ryXfc.js","assets/OptimizedFeature-D3320lj0.js","assets/OptimizedFeatureSet-Blu9Ckm7.js","assets/webStyleSymbolUtils-ykljKkkD.js","assets/devEnvironmentUtils-CnNDiFMM.js","assets/geometryEngineJSON-RNRrFqly.js","assets/json-BLezgqVO.js","assets/statsWorker-v6_FZkqU.js","assets/utils-Cq48Jm3c.js","assets/utils-CQfU_RhP.js","assets/utils-MLLFkbKn.js","assets/ClassBreaksDefinition-CgPgUiwd.js","assets/geometryEngineWorker-l4nCS5hh.js","assets/CSVSourceWorker-rj6R6T3e.js","assets/date-Ctp1FiBW.js","assets/FeatureStore-hyYIP7K8.js","assets/BoundsStore-DNz3dAAA.js","assets/PooledRBush-DeR_SVZE.js","assets/timeSupport-CzHAgiUR.js","assets/queryUtils-CwRl2kBy.js","assets/optimizedFeatureQueryEngineAdapter-Cdt4PWly.js","assets/QueryEngine-B3OyySa_.js","assets/QueryEngineCapabilities-DjYb9CEb.js","assets/clientSideDefaults-DMrvHvE0.js","assets/capabilities-D6exRNM4.js","assets/EdgeProcessingWorker-BVzSgkLF.js","assets/InterleavedLayout-0DgpNlBM.js","assets/BufferView-BTSIaNVu.js","assets/types-D0PSWh4d.js","assets/Util-CmRrkheM.js","assets/edgeProcessing-Du3RX_30.js","assets/deduplicate-C42Xb_29.js","assets/Indices-D7gOIxSf.js","assets/VertexAttribute-BdZWZuT1.js","assets/glUtil-D_CjcsDX.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/ElevationSamplerWorker-BHXost3o.js","assets/MeshLocalVertexSpace-DAVvI3Z3.js","assets/vertexSpaceConversion-BdhAJlfF.js","assets/mat3f64-q3fE-ZOt.js","assets/mat4f64-CSKppSlJ.js","assets/spatialReferenceEllipsoidUtils-r_S_8DDe.js","assets/computeTranslationToOriginAndRotation-BhJmC_0D.js","assets/projectPointToVector-BSiCSeaS.js","assets/meshVertexSpaceUtils-Cu1f-oO7.js","assets/vec3-BwzP2Z1Q.js","assets/vec4-CHTwQPOE.js","assets/FeatureServiceSnappingSourceWorker-Dc9NXDoq.js","assets/pbfQueryUtils-RHZKJNMG.js","assets/pbf-C4M-aU-3.js","assets/query-fkZb4bFq.js","assets/GeoJSONSourceWorker-xxmH0ouc.js","assets/geojson-BLODqhp1.js","assets/sourceUtils-CdbpmgZ4.js","assets/MemorySourceWorker-B9gnt1pl.js","assets/objectIdUtils-4dd1rf9p.js","assets/PBFDecoderWorker-CLXNQrci.js","assets/FeaturePipelineWorker-C-0g1rk-.js","assets/AttributeStore-BSZEeOzN.js","assets/LabelMetric-CU7whMwu.js","assets/Program-Do7oUrQX.js","assets/BufferObject-DVepJ7vL.js","assets/UpdateTracking2D-CdU6XMPT.js","assets/BidiEngine-DbrA89if.js","assets/GeometryUtils-3SWYQTYM.js","assets/Rect-CUzevAry.js","assets/BindType-BmZEZMMh.js","assets/MeshWriterRegistry-CqIKQNYW.js","assets/PieChartMeshWriter-BkaZNDnU.js","assets/TurboLine-BEUnGm-H.js","assets/earcut-D9gy186-.js","assets/constants-F8oTIn7N.js","assets/grouping-CxYEBEEW.js","assets/ogcFeatureUtils-MszPDNvT.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-DG0biz5Q.js","assets/PointCloudWorker-Dqb6x0xO.js","assets/quat-DBd2Nb1m.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-nZdmKIgz.js","assets/PointCloudUniqueValueRenderer-Dyqp-rcc.js","assets/I3SBinaryReader-CDPL8-vh.js","assets/orientedBoundingBox-dyMOilX1.js","assets/plane-BzYZw24a.js","assets/RasterWorker-Bgr1h8kB.js","assets/dataUtils-BwYx82FC.js","assets/RasterSymbolizer-Cg6T42W_.js","assets/PolynomialTransform-D70jkiiT.js","assets/rasterProjectionHelper-RUQwASxj.js","assets/SceneLayerSnappingSourceWorker-CAAv4RHo.js","assets/lineSegment-DZB-cCmC.js","assets/sphere-BBWSjd6r.js","assets/Octree-BVenV00D.js","assets/SceneLayerWorker-DwjMKcHy.js","assets/I3SUtil-DlkE-9Qy.js","assets/projectVectorToVector-HH_mq-I9.js","assets/floatRGBA-DH80VCn0.js","assets/NormalAttribute.glsl-pVa3pd6e.js","assets/interfaces-DDtDqZYj.js","assets/WFSSourceWorker-DJmKgH5Z.js","assets/wfsUtils-DRbZ8mKh.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-uU_j_pkA.js","assets/enums-BRzLM11V.js","assets/config-BOD8--da.js","assets/StyleDefinition-DFIPW0dA.js","assets/SourceLayerData-vMjBDPVN.js","assets/StyleRepository-D9RGKctH.js","assets/HUDMaterial.glsl-ET0QFoXQ.js","assets/AttributeArray-tw_FYKnr.js","assets/requestImageUtils-Bl5FqN1K.js","assets/basicInterfaces-CZwQPxTp.js","assets/boundedPlane-CCkaeyY_.js","assets/renderState-Ck6HB2yG.js","assets/doublePrecisionUtils-B0owpBza.js","assets/NestedMap-GuqgquCN.js","assets/IntersectorInterfaces-dI_rFEZm.js","assets/VertexArrayObject-CdgTI6fD.js","assets/triangle-joELbrle.js","assets/editingSupport-C5jn2YP9.js","assets/infoFor3D-CxdEiWhp.js","assets/layersLoader-BKrNBhFe.js","assets/featureLayerUtils-Dq5iOT52.js","assets/utils-205DGh1O.js","assets/FeatureLayerSource-CWFd_ene.js","assets/External-B2AdFcDo.js","assets/MeshTransform-Dz9M0eog.js","assets/QueryTask-C5hWF969.js","assets/executeForIds-BRsfqoki.js","assets/executeQueryJSON-B6U6tpXU.js","assets/BinsQuery-qJkUAZxr.js","assets/queryAssociations-C1F-oN7L.js","assets/Association-xGwnr6Hv.js","assets/synthesizeAssociationGeometries-BoDW6CCR.js","assets/Popup-RCPl2OTZ.js","assets/ReactiveSet-BsrqoT-d.js","assets/AttachmentInfo-C4udtiBe.js","assets/utils-BgTZ1BKf.js","assets/cimSymbolUtils-BXUjeg3M.js","assets/layerViewUtils-D4hXBzvT.js","assets/webglDeps-DMj04D61.js","assets/ProgramTemplate-CrjRRSf3.js","assets/mapViewDeps-CJhIge4Y.js","assets/FeatureCommandQueue-BHjvkz0y.js","assets/WGLContainer-bPMGktCv.js","assets/Container-yTUYF4yS.js","assets/SDFHelper-C6MRXaob.js","assets/GridShader-DYQZPnC9.js","assets/testSVGPremultipliedAlpha-CT0XeZxx.js","assets/RenderingContext-wOrCor7n.js","assets/rasterizingUtils-ClnrCc4X.js","assets/utils-D5Cs32kf.js","assets/GraphicsView2D-Bm5etaSP.js","assets/normalizeUtilsSync-D3JWlL2G.js","assets/GraphicContainer-GLfpc-Lz.js","assets/AGraphicContainer-I6Mrvoq0.js","assets/TechniqueInstance-BSCwMDx7.js","assets/TileContainer-DsuZ5ROD.js","assets/scaleUtils-DsW0bhXV.js","assets/geodesicUtils-DrnU7BqE.js","assets/TileLayerView2D-CWroaeZq.js","assets/imageUtils-ShM920cm.js","assets/Bitmap-BKRHJoyg.js","assets/LayerView-B_LYWc0j.js","assets/HighlightGraphicContainer-A9aR2geO.js","assets/RefreshableLayerView-BDDQtAaz.js","assets/MapServiceLayerViewHelper-B0C9s2et.js","assets/floorFilterUtils-DZ5C6FQv.js","assets/drapedUtils-DfltPsBI.js","assets/sublayerUtils-ZMSUm0Ou.js","assets/popupUtils-BqD23xyi.js","assets/FeatureLayerView2D-JRnJ02Tg.js","assets/timeSupport-C5VLTK2s.js","assets/HighlightCounter-Czi-fdpx.js","assets/BaseDynamicLayerView2D-DBNz-Z7N.js","assets/BitmapContainer-DkwhejOh.js","assets/ExportStrategy-BPKl-22O.js","assets/CatalogLayerView2D-C_-fvgCl.js","assets/CatalogDynamicGroupLayerView2D-Dw2P64OU.js","assets/CatalogFootprintLayerView2D-o5mUFmdG.js","assets/GeoRSSLayerView2D-BlGOIoDf.js","assets/GraphicsLayerView2D-COkMVM1o.js","assets/GroupLayerView2D-DgI_-j29.js","assets/ImageryLayerView2D-DN9vFYx_.js","assets/RasterVFDisplayObject-DGrcedfJ.js","assets/ImageryTileLayerView2D-Br5p7yTr.js","assets/multidimensionalUtils-CaR7Z7aE.js","assets/rasterUtils-BZIMPhQM.js","assets/RawBlockCache-BFeyS2dV.js","assets/KMLLayerView2D-D9Y4qSLD.js","assets/kmlUtils-4Sek9kBE.js","assets/KnowledgeGraphLayerView2D-58ECuTFd.js","assets/MapImageLayerView2D-sbHaz4G5.js","assets/ExportImageParameters-x1rb-a9Z.js","assets/MapNotesLayerView2D-CDjdipt3.js","assets/MediaLayerView2D-BhkSW6yA.js","assets/perspectiveUtils-BD6zjHdk.js","assets/OverlayContainer-B9e7sW3l.js","assets/OGCFeatureLayerView2D-Bm-bXpnC.js","assets/RouteLayerView2D-Cy9hVeKA.js","assets/Stop-Ctt64Emf.js","assets/StreamLayerView2D-CiFsy-nA.js","assets/SubtypeGroupLayerView2D-CrfDmDKr.js","assets/VectorTileLayerView2D-CYjwJTqu.js","assets/VideoLayerView2D-mcxIoioO.js","assets/GraphicsLayer-BhUqc-Wo.js","assets/TelemetryDisplay-DEvnm5r4.js","assets/WMSLayerView2D-s63Opylc.js","assets/ExportWMSImageParameters-Bp4Vg8cB.js","assets/WMTSLayerView2D-Ds6Vxumw.js","assets/apng-DK0vyQ6X.js","assets/calcite-button-i_RwumFW.js","assets/form-C1ukae_a.js","assets/dom-BKPLlNUX.js","assets/interactive-_XlOZIAS.js","assets/label-B5PRbpQ2.js","assets/component-6CIDVndn.js","assets/loadable-CRaOMYtw.js","assets/locale-CV_TIHPK.js","assets/key-D63ExP77.js","assets/observers-Fc0P7oaF.js","assets/t9n-BUCds_WL.js","assets/icon-lYaBtOsi.js","assets/loader-Dpo1r2Oz.js","assets/guid-BxSjQh8J.js","assets/calcite-icon-J4sAtRdE.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Uz(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Y$={exports:{}},N_={},K$={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QN;function nK(){if(QN)return Ct;QN=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function b(H){return H===null||typeof H!="object"?null:(H=w&&H[w]||H["@@iterator"],typeof H=="function"?H:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,I={};function C(H,ce,nt){this.props=H,this.context=ce,this.refs=I,this.updater=nt||T}C.prototype.isReactComponent={},C.prototype.setState=function(H,ce){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ce,"setState")},C.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function N(){}N.prototype=C.prototype;function j(H,ce,nt){this.props=H,this.context=ce,this.refs=I,this.updater=nt||T}var z=j.prototype=new N;z.constructor=j,M(z,C.prototype),z.isPureReactComponent=!0;var U=Array.isArray,K=Object.prototype.hasOwnProperty,J={current:null},le={key:!0,ref:!0,__self:!0,__source:!0};function ue(H,ce,nt){var Xe,We={},Le=null,Pt=null;if(ce!=null)for(Xe in ce.ref!==void 0&&(Pt=ce.ref),ce.key!==void 0&&(Le=""+ce.key),ce)K.call(ce,Xe)&&!le.hasOwnProperty(Xe)&&(We[Xe]=ce[Xe]);var $t=arguments.length-2;if($t===1)We.children=nt;else if(1<$t){for(var Kt=Array($t),Kn=0;Kn<$t;Kn++)Kt[Kn]=arguments[Kn+2];We.children=Kt}if(H&&H.defaultProps)for(Xe in $t=H.defaultProps,$t)We[Xe]===void 0&&(We[Xe]=$t[Xe]);return{$$typeof:e,type:H,key:Le,ref:Pt,props:We,_owner:J.current}}function be(H,ce){return{$$typeof:e,type:H.type,key:ce,ref:H.ref,props:H.props,_owner:H._owner}}function xe(H){return typeof H=="object"&&H!==null&&H.$$typeof===e}function _e(H){var ce={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(nt){return ce[nt]})}var $e=/\/+/g;function je(H,ce){return typeof H=="object"&&H!==null&&H.key!=null?_e(""+H.key):ce.toString(36)}function Me(H,ce,nt,Xe,We){var Le=typeof H;(Le==="undefined"||Le==="boolean")&&(H=null);var Pt=!1;if(H===null)Pt=!0;else switch(Le){case"string":case"number":Pt=!0;break;case"object":switch(H.$$typeof){case e:case t:Pt=!0}}if(Pt)return Pt=H,We=We(Pt),H=Xe===""?"."+je(Pt,0):Xe,U(We)?(nt="",H!=null&&(nt=H.replace($e,"$&/")+"/"),Me(We,ce,nt,"",function(Kn){return Kn})):We!=null&&(xe(We)&&(We=be(We,nt+(!We.key||Pt&&Pt.key===We.key?"":(""+We.key).replace($e,"$&/")+"/")+H)),ce.push(We)),1;if(Pt=0,Xe=Xe===""?".":Xe+":",U(H))for(var $t=0;$t<H.length;$t++){Le=H[$t];var Kt=Xe+je(Le,$t);Pt+=Me(Le,ce,nt,Kt,We)}else if(Kt=b(H),typeof Kt=="function")for(H=Kt.call(H),$t=0;!(Le=H.next()).done;)Le=Le.value,Kt=Xe+je(Le,$t++),Pt+=Me(Le,ce,nt,Kt,We);else if(Le==="object")throw ce=String(H),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.");return Pt}function Et(H,ce,nt){if(H==null)return H;var Xe=[],We=0;return Me(H,Xe,"","",function(Le){return ce.call(nt,Le,We++)}),Xe}function wt(H){if(H._status===-1){var ce=H._result;ce=ce(),ce.then(function(nt){(H._status===0||H._status===-1)&&(H._status=1,H._result=nt)},function(nt){(H._status===0||H._status===-1)&&(H._status=2,H._result=nt)}),H._status===-1&&(H._status=0,H._result=ce)}if(H._status===1)return H._result.default;throw H._result}var Je={current:null},re={transition:null},Ne={ReactCurrentDispatcher:Je,ReactCurrentBatchConfig:re,ReactCurrentOwner:J};function he(){throw Error("act(...) is not supported in production builds of React.")}return Ct.Children={map:Et,forEach:function(H,ce,nt){Et(H,function(){ce.apply(this,arguments)},nt)},count:function(H){var ce=0;return Et(H,function(){ce++}),ce},toArray:function(H){return Et(H,function(ce){return ce})||[]},only:function(H){if(!xe(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Ct.Component=C,Ct.Fragment=n,Ct.Profiler=i,Ct.PureComponent=j,Ct.StrictMode=r,Ct.Suspense=h,Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ne,Ct.act=he,Ct.cloneElement=function(H,ce,nt){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var Xe=M({},H.props),We=H.key,Le=H.ref,Pt=H._owner;if(ce!=null){if(ce.ref!==void 0&&(Le=ce.ref,Pt=J.current),ce.key!==void 0&&(We=""+ce.key),H.type&&H.type.defaultProps)var $t=H.type.defaultProps;for(Kt in ce)K.call(ce,Kt)&&!le.hasOwnProperty(Kt)&&(Xe[Kt]=ce[Kt]===void 0&&$t!==void 0?$t[Kt]:ce[Kt])}var Kt=arguments.length-2;if(Kt===1)Xe.children=nt;else if(1<Kt){$t=Array(Kt);for(var Kn=0;Kn<Kt;Kn++)$t[Kn]=arguments[Kn+2];Xe.children=$t}return{$$typeof:e,type:H.type,key:We,ref:Le,props:Xe,_owner:Pt}},Ct.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:s,_context:H},H.Consumer=H},Ct.createElement=ue,Ct.createFactory=function(H){var ce=ue.bind(null,H);return ce.type=H,ce},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(H){return{$$typeof:a,render:H}},Ct.isValidElement=xe,Ct.lazy=function(H){return{$$typeof:_,_payload:{_status:-1,_result:H},_init:wt}},Ct.memo=function(H,ce){return{$$typeof:f,type:H,compare:ce===void 0?null:ce}},Ct.startTransition=function(H){var ce=re.transition;re.transition={};try{H()}finally{re.transition=ce}},Ct.unstable_act=he,Ct.useCallback=function(H,ce){return Je.current.useCallback(H,ce)},Ct.useContext=function(H){return Je.current.useContext(H)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(H){return Je.current.useDeferredValue(H)},Ct.useEffect=function(H,ce){return Je.current.useEffect(H,ce)},Ct.useId=function(){return Je.current.useId()},Ct.useImperativeHandle=function(H,ce,nt){return Je.current.useImperativeHandle(H,ce,nt)},Ct.useInsertionEffect=function(H,ce){return Je.current.useInsertionEffect(H,ce)},Ct.useLayoutEffect=function(H,ce){return Je.current.useLayoutEffect(H,ce)},Ct.useMemo=function(H,ce){return Je.current.useMemo(H,ce)},Ct.useReducer=function(H,ce,nt){return Je.current.useReducer(H,ce,nt)},Ct.useRef=function(H){return Je.current.useRef(H)},Ct.useState=function(H){return Je.current.useState(H)},Ct.useSyncExternalStore=function(H,ce,nt){return Je.current.useSyncExternalStore(H,ce,nt)},Ct.useTransition=function(){return Je.current.useTransition()},Ct.version="18.3.1",Ct}var eD;function RA(){return eD||(eD=1,K$.exports=nK()),K$.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tD;function rK(){if(tD)return N_;tD=1;var e=RA(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,h,f){var _,w={},b=null,T=null;f!==void 0&&(b=""+f),h.key!==void 0&&(b=""+h.key),h.ref!==void 0&&(T=h.ref);for(_ in h)r.call(h,_)&&!s.hasOwnProperty(_)&&(w[_]=h[_]);if(a&&a.defaultProps)for(_ in h=a.defaultProps,h)w[_]===void 0&&(w[_]=h[_]);return{$$typeof:t,type:a,key:b,ref:T,props:w,_owner:i.current}}return N_.Fragment=n,N_.jsx=o,N_.jsxs=o,N_}var nD;function iK(){return nD||(nD=1,Y$.exports=rK()),Y$.exports}var Pe=iK(),ub={},X$={exports:{}},Ri={},Q$={exports:{}},eM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rD;function sK(){return rD||(rD=1,function(e){function t(re,Ne){var he=re.length;re.push(Ne);e:for(;0<he;){var H=he-1>>>1,ce=re[H];if(0<i(ce,Ne))re[H]=Ne,re[he]=ce,he=H;else break e}}function n(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var Ne=re[0],he=re.pop();if(he!==Ne){re[0]=he;e:for(var H=0,ce=re.length,nt=ce>>>1;H<nt;){var Xe=2*(H+1)-1,We=re[Xe],Le=Xe+1,Pt=re[Le];if(0>i(We,he))Le<ce&&0>i(Pt,We)?(re[H]=Pt,re[Le]=he,H=Le):(re[H]=We,re[Xe]=he,H=Xe);else if(Le<ce&&0>i(Pt,he))re[H]=Pt,re[Le]=he,H=Le;else break e}}return Ne}function i(re,Ne){var he=re.sortIndex-Ne.sortIndex;return he!==0?he:re.id-Ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var h=[],f=[],_=1,w=null,b=3,T=!1,M=!1,I=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(re){for(var Ne=n(f);Ne!==null;){if(Ne.callback===null)r(f);else if(Ne.startTime<=re)r(f),Ne.sortIndex=Ne.expirationTime,t(h,Ne);else break;Ne=n(f)}}function U(re){if(I=!1,z(re),!M)if(n(h)!==null)M=!0,wt(K);else{var Ne=n(f);Ne!==null&&Je(U,Ne.startTime-re)}}function K(re,Ne){M=!1,I&&(I=!1,N(ue),ue=-1),T=!0;var he=b;try{for(z(Ne),w=n(h);w!==null&&(!(w.expirationTime>Ne)||re&&!_e());){var H=w.callback;if(typeof H=="function"){w.callback=null,b=w.priorityLevel;var ce=H(w.expirationTime<=Ne);Ne=e.unstable_now(),typeof ce=="function"?w.callback=ce:w===n(h)&&r(h),z(Ne)}else r(h);w=n(h)}if(w!==null)var nt=!0;else{var Xe=n(f);Xe!==null&&Je(U,Xe.startTime-Ne),nt=!1}return nt}finally{w=null,b=he,T=!1}}var J=!1,le=null,ue=-1,be=5,xe=-1;function _e(){return!(e.unstable_now()-xe<be)}function $e(){if(le!==null){var re=e.unstable_now();xe=re;var Ne=!0;try{Ne=le(!0,re)}finally{Ne?je():(J=!1,le=null)}}else J=!1}var je;if(typeof j=="function")je=function(){j($e)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,Et=Me.port2;Me.port1.onmessage=$e,je=function(){Et.postMessage(null)}}else je=function(){C($e,0)};function wt(re){le=re,J||(J=!0,je())}function Je(re,Ne){ue=C(function(){re(e.unstable_now())},Ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){M||T||(M=!0,wt(K))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):be=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(re){switch(b){case 1:case 2:case 3:var Ne=3;break;default:Ne=b}var he=b;b=Ne;try{return re()}finally{b=he}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,Ne){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var he=b;b=re;try{return Ne()}finally{b=he}},e.unstable_scheduleCallback=function(re,Ne,he){var H=e.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?H+he:H):he=H,re){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=he+ce,re={id:_++,callback:Ne,priorityLevel:re,startTime:he,expirationTime:ce,sortIndex:-1},he>H?(re.sortIndex=he,t(f,re),n(h)===null&&re===n(f)&&(I?(N(ue),ue=-1):I=!0,Je(U,he-H))):(re.sortIndex=ce,t(h,re),M||T||(M=!0,wt(K))),re},e.unstable_shouldYield=_e,e.unstable_wrapCallback=function(re){var Ne=b;return function(){var he=b;b=Ne;try{return re.apply(this,arguments)}finally{b=he}}}}(eM)),eM}var iD;function oK(){return iD||(iD=1,Q$.exports=sK()),Q$.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sD;function aK(){if(sD)return Ri;sD=1;var e=RA(),t=oK();function n(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,g=1;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(u,d){o(u,d),o(u+"Capture",d)}function o(u,d){for(i[u]=d,u=0;u<d.length;u++)r.add(d[u])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function b(u){return h.call(w,u)?!0:h.call(_,u)?!1:f.test(u)?w[u]=!0:(_[u]=!0,!1)}function T(u,d,g,S){if(g!==null&&g.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return S?!1:g!==null?!g.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function M(u,d,g,S){if(d===null||typeof d>"u"||T(u,d,g,S))return!0;if(S)return!1;if(g!==null)switch(g.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function I(u,d,g,S,E,$,A){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=S,this.attributeNamespace=E,this.mustUseProperty=g,this.propertyName=u,this.type=d,this.sanitizeURL=$,this.removeEmptyString=A}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){C[u]=new I(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var d=u[0];C[d]=new I(d,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){C[u]=new I(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){C[u]=new I(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){C[u]=new I(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){C[u]=new I(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){C[u]=new I(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){C[u]=new I(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){C[u]=new I(u,5,!1,u.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function j(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var d=u.replace(N,j);C[d]=new I(d,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var d=u.replace(N,j);C[d]=new I(d,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var d=u.replace(N,j);C[d]=new I(d,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){C[u]=new I(u,1,!1,u.toLowerCase(),null,!1,!1)}),C.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){C[u]=new I(u,1,!1,u.toLowerCase(),null,!0,!0)});function z(u,d,g,S){var E=C.hasOwnProperty(d)?C[d]:null;(E!==null?E.type!==0:S||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(M(d,g,E,S)&&(g=null),S||E===null?b(d)&&(g===null?u.removeAttribute(d):u.setAttribute(d,""+g)):E.mustUseProperty?u[E.propertyName]=g===null?E.type===3?!1:"":g:(d=E.attributeName,S=E.attributeNamespace,g===null?u.removeAttribute(d):(E=E.type,g=E===3||E===4&&g===!0?"":""+g,S?u.setAttributeNS(S,d,g):u.setAttribute(d,g))))}var U=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),J=Symbol.for("react.portal"),le=Symbol.for("react.fragment"),ue=Symbol.for("react.strict_mode"),be=Symbol.for("react.profiler"),xe=Symbol.for("react.provider"),_e=Symbol.for("react.context"),$e=Symbol.for("react.forward_ref"),je=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),Et=Symbol.for("react.memo"),wt=Symbol.for("react.lazy"),Je=Symbol.for("react.offscreen"),re=Symbol.iterator;function Ne(u){return u===null||typeof u!="object"?null:(u=re&&u[re]||u["@@iterator"],typeof u=="function"?u:null)}var he=Object.assign,H;function ce(u){if(H===void 0)try{throw Error()}catch(g){var d=g.stack.trim().match(/\n( *(at )?)/);H=d&&d[1]||""}return`
`+H+u}var nt=!1;function Xe(u,d){if(!u||nt)return"";nt=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(ae){var S=ae}Reflect.construct(u,[],d)}else{try{d.call()}catch(ae){S=ae}u.call(d.prototype)}else{try{throw Error()}catch(ae){S=ae}u()}}catch(ae){if(ae&&S&&typeof ae.stack=="string"){for(var E=ae.stack.split(`
`),$=S.stack.split(`
`),A=E.length-1,F=$.length-1;1<=A&&0<=F&&E[A]!==$[F];)F--;for(;1<=A&&0<=F;A--,F--)if(E[A]!==$[F]){if(A!==1||F!==1)do if(A--,F--,0>F||E[A]!==$[F]){var G=`
`+E[A].replace(" at new "," at ");return u.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",u.displayName)),G}while(1<=A&&0<=F);break}}}finally{nt=!1,Error.prepareStackTrace=g}return(u=u?u.displayName||u.name:"")?ce(u):""}function We(u){switch(u.tag){case 5:return ce(u.type);case 16:return ce("Lazy");case 13:return ce("Suspense");case 19:return ce("SuspenseList");case 0:case 2:case 15:return u=Xe(u.type,!1),u;case 11:return u=Xe(u.type.render,!1),u;case 1:return u=Xe(u.type,!0),u;default:return""}}function Le(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case le:return"Fragment";case J:return"Portal";case be:return"Profiler";case ue:return"StrictMode";case je:return"Suspense";case Me:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case _e:return(u.displayName||"Context")+".Consumer";case xe:return(u._context.displayName||"Context")+".Provider";case $e:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case Et:return d=u.displayName||null,d!==null?d:Le(u.type)||"Memo";case wt:d=u._payload,u=u._init;try{return Le(u(d))}catch{}}return null}function Pt(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(d);case 8:return d===ue?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function $t(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Kt(u){var d=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Kn(u){var d=Kt(u)?"checked":"value",g=Object.getOwnPropertyDescriptor(u.constructor.prototype,d),S=""+u[d];if(!u.hasOwnProperty(d)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var E=g.get,$=g.set;return Object.defineProperty(u,d,{configurable:!0,get:function(){return E.call(this)},set:function(A){S=""+A,$.call(this,A)}}),Object.defineProperty(u,d,{enumerable:g.enumerable}),{getValue:function(){return S},setValue:function(A){S=""+A},stopTracking:function(){u._valueTracker=null,delete u[d]}}}}function da(u){u._valueTracker||(u._valueTracker=Kn(u))}function ha(u){if(!u)return!1;var d=u._valueTracker;if(!d)return!0;var g=d.getValue(),S="";return u&&(S=Kt(u)?u.checked?"true":"false":u.value),u=S,u!==g?(d.setValue(u),!0):!1}function pa(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function ih(u,d){var g=d.checked;return he({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??u._wrapperState.initialChecked})}function sh(u,d){var g=d.defaultValue==null?"":d.defaultValue,S=d.checked!=null?d.checked:d.defaultChecked;g=$t(d.value!=null?d.value:g),u._wrapperState={initialChecked:S,initialValue:g,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function oh(u,d){d=d.checked,d!=null&&z(u,"checked",d,!1)}function bl(u,d){oh(u,d);var g=$t(d.value),S=d.type;if(g!=null)S==="number"?(g===0&&u.value===""||u.value!=g)&&(u.value=""+g):u.value!==""+g&&(u.value=""+g);else if(S==="submit"||S==="reset"){u.removeAttribute("value");return}d.hasOwnProperty("value")?ah(u,d.type,g):d.hasOwnProperty("defaultValue")&&ah(u,d.type,$t(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(u.defaultChecked=!!d.defaultChecked)}function Sl(u,d,g){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var S=d.type;if(!(S!=="submit"&&S!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+u._wrapperState.initialValue,g||d===u.value||(u.value=d),u.defaultValue=d}g=u.name,g!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,g!==""&&(u.name=g)}function ah(u,d,g){(d!=="number"||pa(u.ownerDocument)!==u)&&(g==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+g&&(u.defaultValue=""+g))}var fa=Array.isArray;function Ki(u,d,g,S){if(u=u.options,d){d={};for(var E=0;E<g.length;E++)d["$"+g[E]]=!0;for(g=0;g<u.length;g++)E=d.hasOwnProperty("$"+u[g].value),u[g].selected!==E&&(u[g].selected=E),E&&S&&(u[g].defaultSelected=!0)}else{for(g=""+$t(g),d=null,E=0;E<u.length;E++){if(u[E].value===g){u[E].selected=!0,S&&(u[E].defaultSelected=!0);return}d!==null||u[E].disabled||(d=u[E])}d!==null&&(d.selected=!0)}}function Tl(u,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return he({},d,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function Ei(u,d){var g=d.value;if(g==null){if(g=d.children,d=d.defaultValue,g!=null){if(d!=null)throw Error(n(92));if(fa(g)){if(1<g.length)throw Error(n(93));g=g[0]}d=g}d==null&&(d=""),g=d}u._wrapperState={initialValue:$t(g)}}function Af(u,d){var g=$t(d.value),S=$t(d.defaultValue);g!=null&&(g=""+g,g!==u.value&&(u.value=g),d.defaultValue==null&&u.defaultValue!==g&&(u.defaultValue=g)),S!=null&&(u.defaultValue=""+S)}function kf(u){var d=u.textContent;d===u._wrapperState.initialValue&&d!==""&&d!==null&&(u.value=d)}function Bu(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qu(u,d){return u==null||u==="http://www.w3.org/1999/xhtml"?Bu(d):u==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var xl,Rf=function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,g,S,E){MSApp.execUnsafeLocalFunction(function(){return u(d,g,S,E)})}:u}(function(u,d){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=d;else{for(xl=xl||document.createElement("div"),xl.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=xl.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;d.firstChild;)u.appendChild(d.firstChild)}});function ma(u,d){if(d){var g=u.firstChild;if(g&&g===u.lastChild&&g.nodeType===3){g.nodeValue=d;return}}u.textContent=d}var ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kg=["Webkit","ms","Moz","O"];Object.keys(ya).forEach(function(u){Kg.forEach(function(d){d=d+u.charAt(0).toUpperCase()+u.substring(1),ya[d]=ya[u]})});function lh(u,d,g){return d==null||typeof d=="boolean"||d===""?"":g||typeof d!="number"||d===0||ya.hasOwnProperty(u)&&ya[u]?(""+d).trim():d+"px"}function Hu(u,d){u=u.style;for(var g in d)if(d.hasOwnProperty(g)){var S=g.indexOf("--")===0,E=lh(g,d[g],S);g==="float"&&(g="cssFloat"),S?u.setProperty(g,E):u[g]=E}}var Lf=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uh(u,d){if(d){if(Lf[u]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,u));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function yo(u,d){if(u.indexOf("-")===-1)return typeof d.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ch=null;function dh(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Wu=null,go=null,_o=null;function Nf(u){if(u=Nl(u)){if(typeof Wu!="function")throw Error(n(280));var d=u.stateNode;d&&(d=fm(d),Wu(u.stateNode,u.type,d))}}function Df(u){go?_o?_o.push(u):_o=[u]:go=u}function Ff(){if(go){var u=go,d=_o;if(_o=go=null,Nf(u),d)for(u=0;u<d.length;u++)Nf(d[u])}}function jf(u,d){return u(d)}function zf(){}var hh=!1;function ie(u,d,g){if(hh)return u(d,g);hh=!0;try{return jf(u,d,g)}finally{hh=!1,(go!==null||_o!==null)&&(zf(),Ff())}}function jt(u,d){var g=u.stateNode;if(g===null)return null;var S=fm(g);if(S===null)return null;g=S[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(u=u.type,S=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!S;break e;default:u=!1}if(u)return null;if(g&&typeof g!="function")throw Error(n(231,d,typeof g));return g}var Ps=!1;if(a)try{var Xn={};Object.defineProperty(Xn,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",Xn,Xn),window.removeEventListener("test",Xn,Xn)}catch{Ps=!1}function Zu(u,d,g,S,E,$,A,F,G){var ae=Array.prototype.slice.call(arguments,3);try{d.apply(g,ae)}catch(ve){this.onError(ve)}}var Ie=!1,ze=null,sn=!1,Cs=null,Vf={onError:function(u){Ie=!0,ze=u}};function $i(u,d,g,S,E,$,A,F,G){Ie=!1,ze=null,Zu.apply(Vf,arguments)}function Ju(u,d,g,S,E,$,A,F,G){if($i.apply(this,arguments),Ie){if(Ie){var ae=ze;Ie=!1,ze=null}else throw Error(n(198));sn||(sn=!0,Cs=ae)}}function Xi(u){var d=u,g=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,d.flags&4098&&(g=d.return),u=d.return;while(u)}return d.tag===3?g:null}function it(u){if(u.tag===13){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function ph(u){if(Xi(u)!==u)throw Error(n(188))}function Uf(u){var d=u.alternate;if(!d){if(d=Xi(u),d===null)throw Error(n(188));return d!==u?null:u}for(var g=u,S=d;;){var E=g.return;if(E===null)break;var $=E.alternate;if($===null){if(S=E.return,S!==null){g=S;continue}break}if(E.child===$.child){for($=E.child;$;){if($===g)return ph(E),u;if($===S)return ph(E),d;$=$.sibling}throw Error(n(188))}if(g.return!==S.return)g=E,S=$;else{for(var A=!1,F=E.child;F;){if(F===g){A=!0,g=E,S=$;break}if(F===S){A=!0,S=E,g=$;break}F=F.sibling}if(!A){for(F=$.child;F;){if(F===g){A=!0,g=$,S=E;break}if(F===S){A=!0,S=$,g=E;break}F=F.sibling}if(!A)throw Error(n(189))}}if(g.alternate!==S)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?u:d}function Gf(u){return u=Uf(u),u!==null?Bf(u):null}function Bf(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=Bf(u);if(d!==null)return d;u=u.sibling}return null}var Yu=t.unstable_scheduleCallback,fh=t.unstable_cancelCallback,mh=t.unstable_shouldYield,dn=t.unstable_requestPaint,hn=t.unstable_now,qf=t.unstable_getCurrentPriorityLevel,yh=t.unstable_ImmediatePriority,Hf=t.unstable_UserBlockingPriority,Ku=t.unstable_NormalPriority,gh=t.unstable_LowPriority,ga=t.unstable_IdlePriority,Un=null,ui=null;function El(u){if(ui&&typeof ui.onCommitFiberRoot=="function")try{ui.onCommitFiberRoot(Un,u,void 0,(u.current.flags&128)===128)}catch{}}var D=Math.clz32?Math.clz32:et,se=Math.log,we=Math.LN2;function et(u){return u>>>=0,u===0?32:31-(se(u)/we|0)|0}var It=64,qt=4194304;function Ve(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Tt(u,d){var g=u.pendingLanes;if(g===0)return 0;var S=0,E=u.suspendedLanes,$=u.pingedLanes,A=g&268435455;if(A!==0){var F=A&~E;F!==0?S=Ve(F):($&=A,$!==0&&(S=Ve($)))}else A=g&~E,A!==0?S=Ve(A):$!==0&&(S=Ve($));if(S===0)return 0;if(d!==0&&d!==S&&!(d&E)&&(E=S&-S,$=d&-d,E>=$||E===16&&($&4194240)!==0))return d;if(S&4&&(S|=g&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=S;0<d;)g=31-D(d),E=1<<g,S|=u[g],d&=~E;return S}function Xg(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wf(u,d){for(var g=u.suspendedLanes,S=u.pingedLanes,E=u.expirationTimes,$=u.pendingLanes;0<$;){var A=31-D($),F=1<<A,G=E[A];G===-1?(!(F&g)||F&S)&&(E[A]=Xg(F,d)):G<=d&&(u.expiredLanes|=F),$&=~F}}function Fr(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function n1(){var u=It;return It<<=1,!(It&4194240)&&(It=64),u}function Xu(u){for(var d=[],g=0;31>g;g++)d.push(u);return d}function Qi(u,d,g){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-D(d),u[d]=g}function An(u,d){var g=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var S=u.eventTimes;for(u=u.expirationTimes;0<g;){var E=31-D(g),$=1<<E;d[E]=0,S[E]=-1,u[E]=-1,g&=~$}}function wo(u,d){var g=u.entangledLanes|=d;for(u=u.entanglements;g;){var S=31-D(g),E=1<<S;E&d|u[S]&d&&(u[S]|=d),g&=~E}}var Rt=0;function Qu(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var Zf,$l,Jf,Yf,_h,wh=!1,ec=[],es=null,vo=null,Os=null,vh=new Map,ht=new Map,Qn=[],Qt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qg(u,d){switch(u){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":vo=null;break;case"mouseover":case"mouseout":Os=null;break;case"pointerover":case"pointerout":vh.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(d.pointerId)}}function Ml(u,d,g,S,E,$){return u===null||u.nativeEvent!==$?(u={blockedOn:d,domEventName:g,eventSystemFlags:S,nativeEvent:$,targetContainers:[E]},d!==null&&(d=Nl(d),d!==null&&$l(d)),u):(u.eventSystemFlags|=S,d=u.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),u)}function e_(u,d,g,S,E){switch(d){case"focusin":return es=Ml(es,u,d,g,S,E),!0;case"dragenter":return vo=Ml(vo,u,d,g,S,E),!0;case"mouseover":return Os=Ml(Os,u,d,g,S,E),!0;case"pointerover":var $=E.pointerId;return vh.set($,Ml(vh.get($)||null,u,d,g,S,E)),!0;case"gotpointercapture":return $=E.pointerId,ht.set($,Ml(ht.get($)||null,u,d,g,S,E)),!0}return!1}function Kf(u){var d=Ll(u.target);if(d!==null){var g=Xi(d);if(g!==null){if(d=g.tag,d===13){if(d=it(g),d!==null){u.blockedOn=d,_h(u.priority,function(){Jf(g)});return}}else if(d===3&&g.stateNode.current.memoizedState.isDehydrated){u.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}u.blockedOn=null}function As(u){if(u.blockedOn!==null)return!1;for(var d=u.targetContainers;0<d.length;){var g=em(u.domEventName,u.eventSystemFlags,d[0],u.nativeEvent);if(g===null){g=u.nativeEvent;var S=new g.constructor(g.type,g);ch=S,g.target.dispatchEvent(S),ch=null}else return d=Nl(g),d!==null&&$l(d),u.blockedOn=g,!1;d.shift()}return!0}function Xf(u,d,g){As(u)&&g.delete(d)}function bh(){wh=!1,es!==null&&As(es)&&(es=null),vo!==null&&As(vo)&&(vo=null),Os!==null&&As(Os)&&(Os=null),vh.forEach(Xf),ht.forEach(Xf)}function En(u,d){u.blockedOn===d&&(u.blockedOn=null,wh||(wh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,bh)))}function ts(u){function d(E){return En(E,u)}if(0<ec.length){En(ec[0],u);for(var g=1;g<ec.length;g++){var S=ec[g];S.blockedOn===u&&(S.blockedOn=null)}}for(es!==null&&En(es,u),vo!==null&&En(vo,u),Os!==null&&En(Os,u),vh.forEach(d),ht.forEach(d),g=0;g<Qn.length;g++)S=Qn[g],S.blockedOn===u&&(S.blockedOn=null);for(;0<Qn.length&&(g=Qn[0],g.blockedOn===null);)Kf(g),g.blockedOn===null&&Qn.shift()}var Il=U.ReactCurrentBatchConfig,Sh=!0;function OE(u,d,g,S){var E=Rt,$=Il.transition;Il.transition=null;try{Rt=1,Th(u,d,g,S)}finally{Rt=E,Il.transition=$}}function r1(u,d,g,S){var E=Rt,$=Il.transition;Il.transition=null;try{Rt=4,Th(u,d,g,S)}finally{Rt=E,Il.transition=$}}function Th(u,d,g,S){if(Sh){var E=em(u,d,g,S);if(E===null)c(u,d,S,Qf,g),Qg(u,S);else if(e_(E,u,d,g,S))S.stopPropagation();else if(Qg(u,S),d&4&&-1<Qt.indexOf(u)){for(;E!==null;){var $=Nl(E);if($!==null&&Zf($),$=em(u,d,g,S),$===null&&c(u,d,S,Qf,g),$===E)break;E=$}E!==null&&S.stopPropagation()}else c(u,d,S,null,g)}}var Qf=null;function em(u,d,g,S){if(Qf=null,u=dh(S),u=Ll(u),u!==null)if(d=Xi(u),d===null)u=null;else if(g=d.tag,g===13){if(u=it(d),u!==null)return u;u=null}else if(g===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;u=null}else d!==u&&(u=null);return Qf=u,null}function Ot(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qf()){case yh:return 1;case Hf:return 4;case Ku:case gh:return 16;case ga:return 536870912;default:return 16}default:return 16}}var _a=null,ci=null,wa=null;function t_(){if(wa)return wa;var u,d=ci,g=d.length,S,E="value"in _a?_a.value:_a.textContent,$=E.length;for(u=0;u<g&&d[u]===E[u];u++);var A=g-u;for(S=1;S<=A&&d[g-S]===E[$-S];S++);return wa=E.slice(u,1<S?1-S:void 0)}function tm(u){var d=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&d===13&&(u=13)):u=d,u===10&&(u=13),32<=u||u===13?u:0}function tc(){return!0}function i1(){return!1}function jr(u){function d(g,S,E,$,A){this._reactName=g,this._targetInst=E,this.type=S,this.nativeEvent=$,this.target=A,this.currentTarget=null;for(var F in u)u.hasOwnProperty(F)&&(g=u[F],this[F]=g?g($):$[F]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?tc:i1,this.isPropagationStopped=i1,this}return he(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=tc)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=tc)},persist:function(){},isPersistent:tc}),d}var nc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},n_=jr(nc),Pl=he({},nc,{view:0,detail:0}),AE=jr(Pl),Mi,r_,rc,ns=he({},Pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ol,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==rc&&(rc&&u.type==="mousemove"?(Mi=u.screenX-rc.screenX,r_=u.screenY-rc.screenY):r_=Mi=0,rc=u),Mi)},movementY:function(u){return"movementY"in u?u.movementY:r_}}),i_=jr(ns),s1=he({},ns,{dataTransfer:0}),s_=jr(s1),kE=he({},Pl,{relatedTarget:0}),nm=jr(kE),o1=he({},nc,{animationName:0,elapsedTime:0,pseudoElement:0}),RE=jr(o1),LE=he({},nc,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),o_=jr(LE),NE=he({},nc,{data:0}),a_=jr(NE),a1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DE(u){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(u):(u=Cl[u])?!!d[u]:!1}function Ol(){return DE}var Ii=he({},Pl,{key:function(u){if(u.key){var d=a1[u.key]||u.key;if(d!=="Unidentified")return d}return u.type==="keypress"?(u=tm(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?rm[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ol,charCode:function(u){return u.type==="keypress"?tm(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?tm(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),l1=jr(Ii),u1=he({},ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c1=jr(u1),l_=he({},Pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ol}),u_=jr(l_),FE=he({},nc,{propertyName:0,elapsedTime:0,pseudoElement:0}),jE=jr(FE),d1=he({},ns,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),zE=jr(d1),rs=[9,13,27,32],va=a&&"CompositionEvent"in window,xh=null;a&&"documentMode"in document&&(xh=document.documentMode);var bo=a&&"TextEvent"in window&&!xh,h1=a&&(!va||xh&&8<xh&&11>=xh),Al=" ",p1=!1;function ic(u,d){switch(u){case"keyup":return rs.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function c_(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var So=!1;function VE(u,d){switch(u){case"compositionend":return c_(d);case"keypress":return d.which!==32?null:(p1=!0,Al);case"textInput":return u=d.data,u===Al&&p1?null:u;default:return null}}function ba(u,d){if(So)return u==="compositionend"||!va&&ic(u,d)?(u=t_(),wa=ci=_a=null,So=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return h1&&d.locale!=="ko"?null:d.data;default:return null}}var im={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function f1(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d==="input"?!!im[u.type]:d==="textarea"}function sm(u,d,g,S){Df(S),d=v(d,"onChange"),0<d.length&&(g=new n_("onChange","change",null,g,S),u.push({event:g,listeners:d}))}var Eh=null,di=null;function UE(u){w_(u,0)}function To(u){var d=Dl(u);if(ha(d))return u}function GE(u,d){if(u==="change")return d}var ks=!1;if(a){var sc;if(a){var om="oninput"in document;if(!om){var am=document.createElement("div");am.setAttribute("oninput","return;"),om=typeof am.oninput=="function"}sc=om}else sc=!1;ks=sc&&(!document.documentMode||9<document.documentMode)}function $h(){Eh&&(Eh.detachEvent("onpropertychange",lm),di=Eh=null)}function lm(u){if(u.propertyName==="value"&&To(di)){var d=[];sm(d,di,u,dh(u)),ie(UE,d)}}function um(u,d,g){u==="focusin"?($h(),Eh=d,di=g,Eh.attachEvent("onpropertychange",lm)):u==="focusout"&&$h()}function oc(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return To(di)}function cm(u,d){if(u==="click")return To(d)}function d_(u,d){if(u==="input"||u==="change")return To(d)}function m1(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var is=typeof Object.is=="function"?Object.is:m1;function Sa(u,d){if(is(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var g=Object.keys(u),S=Object.keys(d);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++){var E=g[S];if(!h.call(d,E)||!is(u[E],d[E]))return!1}return!0}function y1(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function h_(u,d){var g=y1(u);u=0;for(var S;g;){if(g.nodeType===3){if(S=u+g.textContent.length,u<=d&&S>=d)return{node:g,offset:d-u};u=S}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=y1(g)}}function g1(u,d){return u&&d?u===d?!0:u&&u.nodeType===3?!1:d&&d.nodeType===3?g1(u,d.parentNode):"contains"in u?u.contains(d):u.compareDocumentPosition?!!(u.compareDocumentPosition(d)&16):!1:!1}function p_(){for(var u=window,d=pa();d instanceof u.HTMLIFrameElement;){try{var g=typeof d.contentWindow.location.href=="string"}catch{g=!1}if(g)u=d.contentWindow;else break;d=pa(u.document)}return d}function f_(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d&&(d==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||d==="textarea"||u.contentEditable==="true")}function Rs(u){var d=p_(),g=u.focusedElem,S=u.selectionRange;if(d!==g&&g&&g.ownerDocument&&g1(g.ownerDocument.documentElement,g)){if(S!==null&&f_(g)){if(d=S.start,u=S.end,u===void 0&&(u=d),"selectionStart"in g)g.selectionStart=d,g.selectionEnd=Math.min(u,g.value.length);else if(u=(d=g.ownerDocument||document)&&d.defaultView||window,u.getSelection){u=u.getSelection();var E=g.textContent.length,$=Math.min(S.start,E);S=S.end===void 0?$:Math.min(S.end,E),!u.extend&&$>S&&(E=S,S=$,$=E),E=h_(g,$);var A=h_(g,S);E&&A&&(u.rangeCount!==1||u.anchorNode!==E.node||u.anchorOffset!==E.offset||u.focusNode!==A.node||u.focusOffset!==A.offset)&&(d=d.createRange(),d.setStart(E.node,E.offset),u.removeAllRanges(),$>S?(u.addRange(d),u.extend(A.node,A.offset)):(d.setEnd(A.node,A.offset),u.addRange(d)))}}for(d=[],u=g;u=u.parentNode;)u.nodeType===1&&d.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<d.length;g++)u=d[g],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var dm=a&&"documentMode"in document&&11>=document.documentMode,ac=null,lc=null,Mh=null,hm=!1;function _1(u,d,g){var S=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;hm||ac==null||ac!==pa(S)||(S=ac,"selectionStart"in S&&f_(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),Mh&&Sa(Mh,S)||(Mh=S,S=v(lc,"onSelect"),0<S.length&&(d=new n_("onSelect","select",null,d,g),u.push({event:d,listeners:S}),d.target=ac)))}function Ta(u,d){var g={};return g[u.toLowerCase()]=d.toLowerCase(),g["Webkit"+u]="webkit"+d,g["Moz"+u]="moz"+d,g}var uc={animationend:Ta("Animation","AnimationEnd"),animationiteration:Ta("Animation","AnimationIteration"),animationstart:Ta("Animation","AnimationStart"),transitionend:Ta("Transition","TransitionEnd")},xa={},m_={};a&&(m_=document.createElement("div").style,"AnimationEvent"in window||(delete uc.animationend.animation,delete uc.animationiteration.animation,delete uc.animationstart.animation),"TransitionEvent"in window||delete uc.transitionend.transition);function Ih(u){if(xa[u])return xa[u];if(!uc[u])return u;var d=uc[u],g;for(g in d)if(d.hasOwnProperty(g)&&g in m_)return xa[u]=d[g];return u}var w1=Ih("animationend"),Ls=Ih("animationiteration"),y_=Ih("animationstart"),g_=Ih("transitionend"),cc=new Map,v1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(u,d){cc.set(u,d),s(d,[u])}for(var kl=0;kl<v1.length;kl++){var pm=v1[kl],b1=pm.toLowerCase(),BE=pm[0].toUpperCase()+pm.slice(1);ss(b1,"on"+BE)}ss(w1,"onAnimationEnd"),ss(Ls,"onAnimationIteration"),ss(y_,"onAnimationStart"),ss("dblclick","onDoubleClick"),ss("focusin","onFocus"),ss("focusout","onBlur"),ss(g_,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S1=new Set("cancel close invalid load scroll toggle".split(" ").concat(dc));function __(u,d,g){var S=u.type||"unknown-event";u.currentTarget=g,Ju(S,d,void 0,u),u.currentTarget=null}function w_(u,d){d=(d&4)!==0;for(var g=0;g<u.length;g++){var S=u[g],E=S.event;S=S.listeners;e:{var $=void 0;if(d)for(var A=S.length-1;0<=A;A--){var F=S[A],G=F.instance,ae=F.currentTarget;if(F=F.listener,G!==$&&E.isPropagationStopped())break e;__(E,F,ae),$=G}else for(A=0;A<S.length;A++){if(F=S[A],G=F.instance,ae=F.currentTarget,F=F.listener,G!==$&&E.isPropagationStopped())break e;__(E,F,ae),$=G}}}if(sn)throw u=Cs,sn=!1,Cs=null,u}function en(u,d){var g=d[mc];g===void 0&&(g=d[mc]=new Set);var S=u+"__bubble";g.has(S)||(T1(d,u,2,!1),g.add(S))}function v_(u,d,g){var S=0;d&&(S|=4),T1(g,u,S,d)}var Ph="_reactListening"+Math.random().toString(36).slice(2);function hc(u){if(!u[Ph]){u[Ph]=!0,r.forEach(function(g){g!=="selectionchange"&&(S1.has(g)||v_(g,!1,u),v_(g,!0,u))});var d=u.nodeType===9?u:u.ownerDocument;d===null||d[Ph]||(d[Ph]=!0,v_("selectionchange",!1,d))}}function T1(u,d,g,S){switch(Ot(d)){case 1:var E=OE;break;case 4:E=r1;break;default:E=Th}g=E.bind(null,d,g,u),E=void 0,!Ps||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),S?E!==void 0?u.addEventListener(d,g,{capture:!0,passive:E}):u.addEventListener(d,g,!0):E!==void 0?u.addEventListener(d,g,{passive:E}):u.addEventListener(d,g,!1)}function c(u,d,g,S,E){var $=S;if(!(d&1)&&!(d&2)&&S!==null)e:for(;;){if(S===null)return;var A=S.tag;if(A===3||A===4){var F=S.stateNode.containerInfo;if(F===E||F.nodeType===8&&F.parentNode===E)break;if(A===4)for(A=S.return;A!==null;){var G=A.tag;if((G===3||G===4)&&(G=A.stateNode.containerInfo,G===E||G.nodeType===8&&G.parentNode===E))return;A=A.return}for(;F!==null;){if(A=Ll(F),A===null)return;if(G=A.tag,G===5||G===6){S=$=A;continue e}F=F.parentNode}}S=S.return}ie(function(){var ae=$,ve=dh(g),Se=[];e:{var ye=cc.get(u);if(ye!==void 0){var Re=n_,qe=u;switch(u){case"keypress":if(tm(g)===0)break e;case"keydown":case"keyup":Re=l1;break;case"focusin":qe="focus",Re=nm;break;case"focusout":qe="blur",Re=nm;break;case"beforeblur":case"afterblur":Re=nm;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=i_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=s_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=u_;break;case w1:case Ls:case y_:Re=RE;break;case g_:Re=jE;break;case"scroll":Re=AE;break;case"wheel":Re=zE;break;case"copy":case"cut":case"paste":Re=o_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=c1}var Ye=(d&4)!==0,zn=!Ye&&u==="scroll",Q=Ye?ye!==null?ye+"Capture":null:ye;Ye=[];for(var W=ae,ee;W!==null;){ee=W;var Ee=ee.stateNode;if(ee.tag===5&&Ee!==null&&(ee=Ee,Q!==null&&(Ee=jt(W,Q),Ee!=null&&Ye.push(y(W,Ee,ee)))),zn)break;W=W.return}0<Ye.length&&(ye=new Re(ye,qe,null,g,ve),Se.push({event:ye,listeners:Ye}))}}if(!(d&7)){e:{if(ye=u==="mouseover"||u==="pointerover",Re=u==="mouseout"||u==="pointerout",ye&&g!==ch&&(qe=g.relatedTarget||g.fromElement)&&(Ll(qe)||qe[Zt]))break e;if((Re||ye)&&(ye=ve.window===ve?ve:(ye=ve.ownerDocument)?ye.defaultView||ye.parentWindow:window,Re?(qe=g.relatedTarget||g.toElement,Re=ae,qe=qe?Ll(qe):null,qe!==null&&(zn=Xi(qe),qe!==zn||qe.tag!==5&&qe.tag!==6)&&(qe=null)):(Re=null,qe=ae),Re!==qe)){if(Ye=i_,Ee="onMouseLeave",Q="onMouseEnter",W="mouse",(u==="pointerout"||u==="pointerover")&&(Ye=c1,Ee="onPointerLeave",Q="onPointerEnter",W="pointer"),zn=Re==null?ye:Dl(Re),ee=qe==null?ye:Dl(qe),ye=new Ye(Ee,W+"leave",Re,g,ve),ye.target=zn,ye.relatedTarget=ee,Ee=null,Ll(ve)===ae&&(Ye=new Ye(Q,W+"enter",qe,g,ve),Ye.target=ee,Ye.relatedTarget=zn,Ee=Ye),zn=Ee,Re&&qe)t:{for(Ye=Re,Q=qe,W=0,ee=Ye;ee;ee=x(ee))W++;for(ee=0,Ee=Q;Ee;Ee=x(Ee))ee++;for(;0<W-ee;)Ye=x(Ye),W--;for(;0<ee-W;)Q=x(Q),ee--;for(;W--;){if(Ye===Q||Q!==null&&Ye===Q.alternate)break t;Ye=x(Ye),Q=x(Q)}Ye=null}else Ye=null;Re!==null&&P(Se,ye,Re,Ye,!1),qe!==null&&zn!==null&&P(Se,zn,qe,Ye,!0)}}e:{if(ye=ae?Dl(ae):window,Re=ye.nodeName&&ye.nodeName.toLowerCase(),Re==="select"||Re==="input"&&ye.type==="file")var Qe=GE;else if(f1(ye))if(ks)Qe=d_;else{Qe=oc;var at=um}else(Re=ye.nodeName)&&Re.toLowerCase()==="input"&&(ye.type==="checkbox"||ye.type==="radio")&&(Qe=cm);if(Qe&&(Qe=Qe(u,ae))){sm(Se,Qe,g,ve);break e}at&&at(u,ye,ae),u==="focusout"&&(at=ye._wrapperState)&&at.controlled&&ye.type==="number"&&ah(ye,"number",ye.value)}switch(at=ae?Dl(ae):window,u){case"focusin":(f1(at)||at.contentEditable==="true")&&(ac=at,lc=ae,Mh=null);break;case"focusout":Mh=lc=ac=null;break;case"mousedown":hm=!0;break;case"contextmenu":case"mouseup":case"dragend":hm=!1,_1(Se,g,ve);break;case"selectionchange":if(dm)break;case"keydown":case"keyup":_1(Se,g,ve)}var lt;if(va)e:{switch(u){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else So?ic(u,g)&&(ft="onCompositionEnd"):u==="keydown"&&g.keyCode===229&&(ft="onCompositionStart");ft&&(h1&&g.locale!=="ko"&&(So||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&So&&(lt=t_()):(_a=ve,ci="value"in _a?_a.value:_a.textContent,So=!0)),at=v(ae,ft),0<at.length&&(ft=new a_(ft,u,null,g,ve),Se.push({event:ft,listeners:at}),lt?ft.data=lt:(lt=c_(g),lt!==null&&(ft.data=lt)))),(lt=bo?VE(u,g):ba(u,g))&&(ae=v(ae,"onBeforeInput"),0<ae.length&&(ve=new a_("onBeforeInput","beforeinput",null,g,ve),Se.push({event:ve,listeners:ae}),ve.data=lt))}w_(Se,d)})}function y(u,d,g){return{instance:u,listener:d,currentTarget:g}}function v(u,d){for(var g=d+"Capture",S=[];u!==null;){var E=u,$=E.stateNode;E.tag===5&&$!==null&&(E=$,$=jt(u,g),$!=null&&S.unshift(y(u,$,E)),$=jt(u,d),$!=null&&S.push(y(u,$,E))),u=u.return}return S}function x(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function P(u,d,g,S,E){for(var $=d._reactName,A=[];g!==null&&g!==S;){var F=g,G=F.alternate,ae=F.stateNode;if(G!==null&&G===S)break;F.tag===5&&ae!==null&&(F=ae,E?(G=jt(g,$),G!=null&&A.unshift(y(g,G,F))):E||(G=jt(g,$),G!=null&&A.push(y(g,G,F)))),g=g.return}A.length!==0&&u.push({event:d,listeners:A})}var R=/\r\n?/g,V=/\u0000|\uFFFD/g;function X(u){return(typeof u=="string"?u:""+u).replace(R,`
`).replace(V,"")}function oe(u,d,g){if(d=X(d),X(u)!==d&&g)throw Error(n(425))}function me(){}var Oe=null,st=null;function bt(u,d){return u==="textarea"||u==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var er=typeof setTimeout=="function"?setTimeout:void 0,Gn=typeof clearTimeout=="function"?clearTimeout:void 0,hi=typeof Promise=="function"?Promise:void 0,zr=typeof queueMicrotask=="function"?queueMicrotask:typeof hi<"u"?function(u){return hi.resolve(null).then(u).catch(pc)}:er;function pc(u){setTimeout(function(){throw u})}function b_(u,d){var g=d,S=0;do{var E=g.nextSibling;if(u.removeChild(g),E&&E.nodeType===8)if(g=E.data,g==="/$"){if(S===0){u.removeChild(E),ts(d);return}S--}else g!=="$"&&g!=="$?"&&g!=="$!"||S++;g=E}while(g);ts(d)}function Ea(u){for(;u!=null;u=u.nextSibling){var d=u.nodeType;if(d===1||d===3)break;if(d===8){if(d=u.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return u}function x1(u){u=u.previousSibling;for(var d=0;u;){if(u.nodeType===8){var g=u.data;if(g==="$"||g==="$!"||g==="$?"){if(d===0)return u;d--}else g==="/$"&&d++}u=u.previousSibling}return null}var Rl=Math.random().toString(36).slice(2),Ns="__reactFiber$"+Rl,fc="__reactProps$"+Rl,Zt="__reactContainer$"+Rl,mc="__reactEvents$"+Rl,qE="__reactListeners$"+Rl,HE="__reactHandles$"+Rl;function Ll(u){var d=u[Ns];if(d)return d;for(var g=u.parentNode;g;){if(d=g[Zt]||g[Ns]){if(g=d.alternate,d.child!==null||g!==null&&g.child!==null)for(u=x1(u);u!==null;){if(g=u[Ns])return g;u=x1(u)}return d}u=g,g=u.parentNode}return null}function Nl(u){return u=u[Ns]||u[Zt],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function Dl(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(n(33))}function fm(u){return u[fc]||null}var WE=[],mm=-1;function yc(u){return{current:u}}function pn(u){0>mm||(u.current=WE[mm],WE[mm]=null,mm--)}function on(u,d){mm++,WE[mm]=u.current,u.current=d}var gc={},Vr=yc(gc),Pi=yc(!1),Ch=gc;function ym(u,d){var g=u.type.contextTypes;if(!g)return gc;var S=u.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===d)return S.__reactInternalMemoizedMaskedChildContext;var E={},$;for($ in g)E[$]=d[$];return S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=E),E}function Ci(u){return u=u.childContextTypes,u!=null}function E1(){pn(Pi),pn(Vr)}function bL(u,d,g){if(Vr.current!==gc)throw Error(n(168));on(Vr,d),on(Pi,g)}function SL(u,d,g){var S=u.stateNode;if(d=d.childContextTypes,typeof S.getChildContext!="function")return g;S=S.getChildContext();for(var E in S)if(!(E in d))throw Error(n(108,Pt(u)||"Unknown",E));return he({},g,S)}function $1(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||gc,Ch=Vr.current,on(Vr,u),on(Pi,Pi.current),!0}function TL(u,d,g){var S=u.stateNode;if(!S)throw Error(n(169));g?(u=SL(u,d,Ch),S.__reactInternalMemoizedMergedChildContext=u,pn(Pi),pn(Vr),on(Vr,u)):pn(Pi),on(Pi,g)}var Fl=null,M1=!1,ZE=!1;function xL(u){Fl===null?Fl=[u]:Fl.push(u)}function bY(u){M1=!0,xL(u)}function _c(){if(!ZE&&Fl!==null){ZE=!0;var u=0,d=Rt;try{var g=Fl;for(Rt=1;u<g.length;u++){var S=g[u];do S=S(!0);while(S!==null)}Fl=null,M1=!1}catch(E){throw Fl!==null&&(Fl=Fl.slice(u+1)),Yu(yh,_c),E}finally{Rt=d,ZE=!1}}return null}var gm=[],_m=0,I1=null,P1=0,Ds=[],Fs=0,Oh=null,jl=1,zl="";function Ah(u,d){gm[_m++]=P1,gm[_m++]=I1,I1=u,P1=d}function EL(u,d,g){Ds[Fs++]=jl,Ds[Fs++]=zl,Ds[Fs++]=Oh,Oh=u;var S=jl;u=zl;var E=32-D(S)-1;S&=~(1<<E),g+=1;var $=32-D(d)+E;if(30<$){var A=E-E%5;$=(S&(1<<A)-1).toString(32),S>>=A,E-=A,jl=1<<32-D(d)+E|g<<E|S,zl=$+u}else jl=1<<$|g<<E|S,zl=u}function JE(u){u.return!==null&&(Ah(u,1),EL(u,1,0))}function YE(u){for(;u===I1;)I1=gm[--_m],gm[_m]=null,P1=gm[--_m],gm[_m]=null;for(;u===Oh;)Oh=Ds[--Fs],Ds[Fs]=null,zl=Ds[--Fs],Ds[Fs]=null,jl=Ds[--Fs],Ds[Fs]=null}var os=null,as=null,vn=!1,xo=null;function $L(u,d){var g=Us(5,null,null,0);g.elementType="DELETED",g.stateNode=d,g.return=u,d=u.deletions,d===null?(u.deletions=[g],u.flags|=16):d.push(g)}function ML(u,d){switch(u.tag){case 5:var g=u.type;return d=d.nodeType!==1||g.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(u.stateNode=d,os=u,as=Ea(d.firstChild),!0):!1;case 6:return d=u.pendingProps===""||d.nodeType!==3?null:d,d!==null?(u.stateNode=d,os=u,as=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(g=Oh!==null?{id:jl,overflow:zl}:null,u.memoizedState={dehydrated:d,treeContext:g,retryLane:1073741824},g=Us(18,null,null,0),g.stateNode=d,g.return=u,u.child=g,os=u,as=null,!0):!1;default:return!1}}function KE(u){return(u.mode&1)!==0&&(u.flags&128)===0}function XE(u){if(vn){var d=as;if(d){var g=d;if(!ML(u,d)){if(KE(u))throw Error(n(418));d=Ea(g.nextSibling);var S=os;d&&ML(u,d)?$L(S,g):(u.flags=u.flags&-4097|2,vn=!1,os=u)}}else{if(KE(u))throw Error(n(418));u.flags=u.flags&-4097|2,vn=!1,os=u}}}function IL(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;os=u}function C1(u){if(u!==os)return!1;if(!vn)return IL(u),vn=!0,!1;var d;if((d=u.tag!==3)&&!(d=u.tag!==5)&&(d=u.type,d=d!=="head"&&d!=="body"&&!bt(u.type,u.memoizedProps)),d&&(d=as)){if(KE(u))throw PL(),Error(n(418));for(;d;)$L(u,d),d=Ea(d.nextSibling)}if(IL(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));e:{for(u=u.nextSibling,d=0;u;){if(u.nodeType===8){var g=u.data;if(g==="/$"){if(d===0){as=Ea(u.nextSibling);break e}d--}else g!=="$"&&g!=="$!"&&g!=="$?"||d++}u=u.nextSibling}as=null}}else as=os?Ea(u.stateNode.nextSibling):null;return!0}function PL(){for(var u=as;u;)u=Ea(u.nextSibling)}function wm(){as=os=null,vn=!1}function QE(u){xo===null?xo=[u]:xo.push(u)}var SY=U.ReactCurrentBatchConfig;function S_(u,d,g){if(u=g.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(n(309));var S=g.stateNode}if(!S)throw Error(n(147,u));var E=S,$=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===$?d.ref:(d=function(A){var F=E.refs;A===null?delete F[$]:F[$]=A},d._stringRef=$,d)}if(typeof u!="string")throw Error(n(284));if(!g._owner)throw Error(n(290,u))}return u}function O1(u,d){throw u=Object.prototype.toString.call(d),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function CL(u){var d=u._init;return d(u._payload)}function OL(u){function d(Q,W){if(u){var ee=Q.deletions;ee===null?(Q.deletions=[W],Q.flags|=16):ee.push(W)}}function g(Q,W){if(!u)return null;for(;W!==null;)d(Q,W),W=W.sibling;return null}function S(Q,W){for(Q=new Map;W!==null;)W.key!==null?Q.set(W.key,W):Q.set(W.index,W),W=W.sibling;return Q}function E(Q,W){return Q=$c(Q,W),Q.index=0,Q.sibling=null,Q}function $(Q,W,ee){return Q.index=ee,u?(ee=Q.alternate,ee!==null?(ee=ee.index,ee<W?(Q.flags|=2,W):ee):(Q.flags|=2,W)):(Q.flags|=1048576,W)}function A(Q){return u&&Q.alternate===null&&(Q.flags|=2),Q}function F(Q,W,ee,Ee){return W===null||W.tag!==6?(W=B$(ee,Q.mode,Ee),W.return=Q,W):(W=E(W,ee),W.return=Q,W)}function G(Q,W,ee,Ee){var Qe=ee.type;return Qe===le?ve(Q,W,ee.props.children,Ee,ee.key):W!==null&&(W.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===wt&&CL(Qe)===W.type)?(Ee=E(W,ee.props),Ee.ref=S_(Q,W,ee),Ee.return=Q,Ee):(Ee=tb(ee.type,ee.key,ee.props,null,Q.mode,Ee),Ee.ref=S_(Q,W,ee),Ee.return=Q,Ee)}function ae(Q,W,ee,Ee){return W===null||W.tag!==4||W.stateNode.containerInfo!==ee.containerInfo||W.stateNode.implementation!==ee.implementation?(W=q$(ee,Q.mode,Ee),W.return=Q,W):(W=E(W,ee.children||[]),W.return=Q,W)}function ve(Q,W,ee,Ee,Qe){return W===null||W.tag!==7?(W=zh(ee,Q.mode,Ee,Qe),W.return=Q,W):(W=E(W,ee),W.return=Q,W)}function Se(Q,W,ee){if(typeof W=="string"&&W!==""||typeof W=="number")return W=B$(""+W,Q.mode,ee),W.return=Q,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case K:return ee=tb(W.type,W.key,W.props,null,Q.mode,ee),ee.ref=S_(Q,null,W),ee.return=Q,ee;case J:return W=q$(W,Q.mode,ee),W.return=Q,W;case wt:var Ee=W._init;return Se(Q,Ee(W._payload),ee)}if(fa(W)||Ne(W))return W=zh(W,Q.mode,ee,null),W.return=Q,W;O1(Q,W)}return null}function ye(Q,W,ee,Ee){var Qe=W!==null?W.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number")return Qe!==null?null:F(Q,W,""+ee,Ee);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case K:return ee.key===Qe?G(Q,W,ee,Ee):null;case J:return ee.key===Qe?ae(Q,W,ee,Ee):null;case wt:return Qe=ee._init,ye(Q,W,Qe(ee._payload),Ee)}if(fa(ee)||Ne(ee))return Qe!==null?null:ve(Q,W,ee,Ee,null);O1(Q,ee)}return null}function Re(Q,W,ee,Ee,Qe){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return Q=Q.get(ee)||null,F(W,Q,""+Ee,Qe);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case K:return Q=Q.get(Ee.key===null?ee:Ee.key)||null,G(W,Q,Ee,Qe);case J:return Q=Q.get(Ee.key===null?ee:Ee.key)||null,ae(W,Q,Ee,Qe);case wt:var at=Ee._init;return Re(Q,W,ee,at(Ee._payload),Qe)}if(fa(Ee)||Ne(Ee))return Q=Q.get(ee)||null,ve(W,Q,Ee,Qe,null);O1(W,Ee)}return null}function qe(Q,W,ee,Ee){for(var Qe=null,at=null,lt=W,ft=W=0,yr=null;lt!==null&&ft<ee.length;ft++){lt.index>ft?(yr=lt,lt=null):yr=lt.sibling;var zt=ye(Q,lt,ee[ft],Ee);if(zt===null){lt===null&&(lt=yr);break}u&&lt&&zt.alternate===null&&d(Q,lt),W=$(zt,W,ft),at===null?Qe=zt:at.sibling=zt,at=zt,lt=yr}if(ft===ee.length)return g(Q,lt),vn&&Ah(Q,ft),Qe;if(lt===null){for(;ft<ee.length;ft++)lt=Se(Q,ee[ft],Ee),lt!==null&&(W=$(lt,W,ft),at===null?Qe=lt:at.sibling=lt,at=lt);return vn&&Ah(Q,ft),Qe}for(lt=S(Q,lt);ft<ee.length;ft++)yr=Re(lt,Q,ft,ee[ft],Ee),yr!==null&&(u&&yr.alternate!==null&&lt.delete(yr.key===null?ft:yr.key),W=$(yr,W,ft),at===null?Qe=yr:at.sibling=yr,at=yr);return u&&lt.forEach(function(Mc){return d(Q,Mc)}),vn&&Ah(Q,ft),Qe}function Ye(Q,W,ee,Ee){var Qe=Ne(ee);if(typeof Qe!="function")throw Error(n(150));if(ee=Qe.call(ee),ee==null)throw Error(n(151));for(var at=Qe=null,lt=W,ft=W=0,yr=null,zt=ee.next();lt!==null&&!zt.done;ft++,zt=ee.next()){lt.index>ft?(yr=lt,lt=null):yr=lt.sibling;var Mc=ye(Q,lt,zt.value,Ee);if(Mc===null){lt===null&&(lt=yr);break}u&&lt&&Mc.alternate===null&&d(Q,lt),W=$(Mc,W,ft),at===null?Qe=Mc:at.sibling=Mc,at=Mc,lt=yr}if(zt.done)return g(Q,lt),vn&&Ah(Q,ft),Qe;if(lt===null){for(;!zt.done;ft++,zt=ee.next())zt=Se(Q,zt.value,Ee),zt!==null&&(W=$(zt,W,ft),at===null?Qe=zt:at.sibling=zt,at=zt);return vn&&Ah(Q,ft),Qe}for(lt=S(Q,lt);!zt.done;ft++,zt=ee.next())zt=Re(lt,Q,ft,zt.value,Ee),zt!==null&&(u&&zt.alternate!==null&&lt.delete(zt.key===null?ft:zt.key),W=$(zt,W,ft),at===null?Qe=zt:at.sibling=zt,at=zt);return u&&lt.forEach(function(tK){return d(Q,tK)}),vn&&Ah(Q,ft),Qe}function zn(Q,W,ee,Ee){if(typeof ee=="object"&&ee!==null&&ee.type===le&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case K:e:{for(var Qe=ee.key,at=W;at!==null;){if(at.key===Qe){if(Qe=ee.type,Qe===le){if(at.tag===7){g(Q,at.sibling),W=E(at,ee.props.children),W.return=Q,Q=W;break e}}else if(at.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===wt&&CL(Qe)===at.type){g(Q,at.sibling),W=E(at,ee.props),W.ref=S_(Q,at,ee),W.return=Q,Q=W;break e}g(Q,at);break}else d(Q,at);at=at.sibling}ee.type===le?(W=zh(ee.props.children,Q.mode,Ee,ee.key),W.return=Q,Q=W):(Ee=tb(ee.type,ee.key,ee.props,null,Q.mode,Ee),Ee.ref=S_(Q,W,ee),Ee.return=Q,Q=Ee)}return A(Q);case J:e:{for(at=ee.key;W!==null;){if(W.key===at)if(W.tag===4&&W.stateNode.containerInfo===ee.containerInfo&&W.stateNode.implementation===ee.implementation){g(Q,W.sibling),W=E(W,ee.children||[]),W.return=Q,Q=W;break e}else{g(Q,W);break}else d(Q,W);W=W.sibling}W=q$(ee,Q.mode,Ee),W.return=Q,Q=W}return A(Q);case wt:return at=ee._init,zn(Q,W,at(ee._payload),Ee)}if(fa(ee))return qe(Q,W,ee,Ee);if(Ne(ee))return Ye(Q,W,ee,Ee);O1(Q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"?(ee=""+ee,W!==null&&W.tag===6?(g(Q,W.sibling),W=E(W,ee),W.return=Q,Q=W):(g(Q,W),W=B$(ee,Q.mode,Ee),W.return=Q,Q=W),A(Q)):g(Q,W)}return zn}var vm=OL(!0),AL=OL(!1),A1=yc(null),k1=null,bm=null,e$=null;function t$(){e$=bm=k1=null}function n$(u){var d=A1.current;pn(A1),u._currentValue=d}function r$(u,d,g){for(;u!==null;){var S=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,S!==null&&(S.childLanes|=d)):S!==null&&(S.childLanes&d)!==d&&(S.childLanes|=d),u===g)break;u=u.return}}function Sm(u,d){k1=u,e$=bm=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&d&&(Oi=!0),u.firstContext=null)}function js(u){var d=u._currentValue;if(e$!==u)if(u={context:u,memoizedValue:d,next:null},bm===null){if(k1===null)throw Error(n(308));bm=u,k1.dependencies={lanes:0,firstContext:u}}else bm=bm.next=u;return d}var kh=null;function i$(u){kh===null?kh=[u]:kh.push(u)}function kL(u,d,g,S){var E=d.interleaved;return E===null?(g.next=g,i$(d)):(g.next=E.next,E.next=g),d.interleaved=g,Vl(u,S)}function Vl(u,d){u.lanes|=d;var g=u.alternate;for(g!==null&&(g.lanes|=d),g=u,u=u.return;u!==null;)u.childLanes|=d,g=u.alternate,g!==null&&(g.childLanes|=d),g=u,u=u.return;return g.tag===3?g.stateNode:null}var wc=!1;function s$(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RL(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Ul(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function vc(u,d,g){var S=u.updateQueue;if(S===null)return null;if(S=S.shared,Nt&2){var E=S.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),S.pending=d,Vl(u,g)}return E=S.interleaved,E===null?(d.next=d,i$(S)):(d.next=E.next,E.next=d),S.interleaved=d,Vl(u,g)}function R1(u,d,g){if(d=d.updateQueue,d!==null&&(d=d.shared,(g&4194240)!==0)){var S=d.lanes;S&=u.pendingLanes,g|=S,d.lanes=g,wo(u,g)}}function LL(u,d){var g=u.updateQueue,S=u.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var E=null,$=null;if(g=g.firstBaseUpdate,g!==null){do{var A={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};$===null?E=$=A:$=$.next=A,g=g.next}while(g!==null);$===null?E=$=d:$=$.next=d}else E=$=d;g={baseState:S.baseState,firstBaseUpdate:E,lastBaseUpdate:$,shared:S.shared,effects:S.effects},u.updateQueue=g;return}u=g.lastBaseUpdate,u===null?g.firstBaseUpdate=d:u.next=d,g.lastBaseUpdate=d}function L1(u,d,g,S){var E=u.updateQueue;wc=!1;var $=E.firstBaseUpdate,A=E.lastBaseUpdate,F=E.shared.pending;if(F!==null){E.shared.pending=null;var G=F,ae=G.next;G.next=null,A===null?$=ae:A.next=ae,A=G;var ve=u.alternate;ve!==null&&(ve=ve.updateQueue,F=ve.lastBaseUpdate,F!==A&&(F===null?ve.firstBaseUpdate=ae:F.next=ae,ve.lastBaseUpdate=G))}if($!==null){var Se=E.baseState;A=0,ve=ae=G=null,F=$;do{var ye=F.lane,Re=F.eventTime;if((S&ye)===ye){ve!==null&&(ve=ve.next={eventTime:Re,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var qe=u,Ye=F;switch(ye=d,Re=g,Ye.tag){case 1:if(qe=Ye.payload,typeof qe=="function"){Se=qe.call(Re,Se,ye);break e}Se=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=Ye.payload,ye=typeof qe=="function"?qe.call(Re,Se,ye):qe,ye==null)break e;Se=he({},Se,ye);break e;case 2:wc=!0}}F.callback!==null&&F.lane!==0&&(u.flags|=64,ye=E.effects,ye===null?E.effects=[F]:ye.push(F))}else Re={eventTime:Re,lane:ye,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ve===null?(ae=ve=Re,G=Se):ve=ve.next=Re,A|=ye;if(F=F.next,F===null){if(F=E.shared.pending,F===null)break;ye=F,F=ye.next,ye.next=null,E.lastBaseUpdate=ye,E.shared.pending=null}}while(!0);if(ve===null&&(G=Se),E.baseState=G,E.firstBaseUpdate=ae,E.lastBaseUpdate=ve,d=E.shared.interleaved,d!==null){E=d;do A|=E.lane,E=E.next;while(E!==d)}else $===null&&(E.shared.lanes=0);Nh|=A,u.lanes=A,u.memoizedState=Se}}function NL(u,d,g){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var S=u[d],E=S.callback;if(E!==null){if(S.callback=null,S=g,typeof E!="function")throw Error(n(191,E));E.call(S)}}}var T_={},$a=yc(T_),x_=yc(T_),E_=yc(T_);function Rh(u){if(u===T_)throw Error(n(174));return u}function o$(u,d){switch(on(E_,d),on(x_,u),on($a,T_),u=d.nodeType,u){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:qu(null,"");break;default:u=u===8?d.parentNode:d,d=u.namespaceURI||null,u=u.tagName,d=qu(d,u)}pn($a),on($a,d)}function Tm(){pn($a),pn(x_),pn(E_)}function DL(u){Rh(E_.current);var d=Rh($a.current),g=qu(d,u.type);d!==g&&(on(x_,u),on($a,g))}function a$(u){x_.current===u&&(pn($a),pn(x_))}var $n=yc(0);function N1(u){for(var d=u;d!==null;){if(d.tag===13){var g=d.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var l$=[];function u$(){for(var u=0;u<l$.length;u++)l$[u]._workInProgressVersionPrimary=null;l$.length=0}var D1=U.ReactCurrentDispatcher,c$=U.ReactCurrentBatchConfig,Lh=0,Mn=null,tr=null,fr=null,F1=!1,$_=!1,M_=0,TY=0;function Ur(){throw Error(n(321))}function d$(u,d){if(d===null)return!1;for(var g=0;g<d.length&&g<u.length;g++)if(!is(u[g],d[g]))return!1;return!0}function h$(u,d,g,S,E,$){if(Lh=$,Mn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,D1.current=u===null||u.memoizedState===null?MY:IY,u=g(S,E),$_){$=0;do{if($_=!1,M_=0,25<=$)throw Error(n(301));$+=1,fr=tr=null,d.updateQueue=null,D1.current=PY,u=g(S,E)}while($_)}if(D1.current=V1,d=tr!==null&&tr.next!==null,Lh=0,fr=tr=Mn=null,F1=!1,d)throw Error(n(300));return u}function p$(){var u=M_!==0;return M_=0,u}function Ma(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?Mn.memoizedState=fr=u:fr=fr.next=u,fr}function zs(){if(tr===null){var u=Mn.alternate;u=u!==null?u.memoizedState:null}else u=tr.next;var d=fr===null?Mn.memoizedState:fr.next;if(d!==null)fr=d,tr=u;else{if(u===null)throw Error(n(310));tr=u,u={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},fr===null?Mn.memoizedState=fr=u:fr=fr.next=u}return fr}function I_(u,d){return typeof d=="function"?d(u):d}function f$(u){var d=zs(),g=d.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=u;var S=tr,E=S.baseQueue,$=g.pending;if($!==null){if(E!==null){var A=E.next;E.next=$.next,$.next=A}S.baseQueue=E=$,g.pending=null}if(E!==null){$=E.next,S=S.baseState;var F=A=null,G=null,ae=$;do{var ve=ae.lane;if((Lh&ve)===ve)G!==null&&(G=G.next={lane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),S=ae.hasEagerState?ae.eagerState:u(S,ae.action);else{var Se={lane:ve,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null};G===null?(F=G=Se,A=S):G=G.next=Se,Mn.lanes|=ve,Nh|=ve}ae=ae.next}while(ae!==null&&ae!==$);G===null?A=S:G.next=F,is(S,d.memoizedState)||(Oi=!0),d.memoizedState=S,d.baseState=A,d.baseQueue=G,g.lastRenderedState=S}if(u=g.interleaved,u!==null){E=u;do $=E.lane,Mn.lanes|=$,Nh|=$,E=E.next;while(E!==u)}else E===null&&(g.lanes=0);return[d.memoizedState,g.dispatch]}function m$(u){var d=zs(),g=d.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=u;var S=g.dispatch,E=g.pending,$=d.memoizedState;if(E!==null){g.pending=null;var A=E=E.next;do $=u($,A.action),A=A.next;while(A!==E);is($,d.memoizedState)||(Oi=!0),d.memoizedState=$,d.baseQueue===null&&(d.baseState=$),g.lastRenderedState=$}return[$,S]}function FL(){}function jL(u,d){var g=Mn,S=zs(),E=d(),$=!is(S.memoizedState,E);if($&&(S.memoizedState=E,Oi=!0),S=S.queue,y$(UL.bind(null,g,S,u),[u]),S.getSnapshot!==d||$||fr!==null&&fr.memoizedState.tag&1){if(g.flags|=2048,P_(9,VL.bind(null,g,S,E,d),void 0,null),mr===null)throw Error(n(349));Lh&30||zL(g,d,E)}return E}function zL(u,d,g){u.flags|=16384,u={getSnapshot:d,value:g},d=Mn.updateQueue,d===null?(d={lastEffect:null,stores:null},Mn.updateQueue=d,d.stores=[u]):(g=d.stores,g===null?d.stores=[u]:g.push(u))}function VL(u,d,g,S){d.value=g,d.getSnapshot=S,GL(d)&&BL(u)}function UL(u,d,g){return g(function(){GL(d)&&BL(u)})}function GL(u){var d=u.getSnapshot;u=u.value;try{var g=d();return!is(u,g)}catch{return!0}}function BL(u){var d=Vl(u,1);d!==null&&Io(d,u,1,-1)}function qL(u){var d=Ma();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:I_,lastRenderedState:u},d.queue=u,u=u.dispatch=$Y.bind(null,Mn,u),[d.memoizedState,u]}function P_(u,d,g,S){return u={tag:u,create:d,destroy:g,deps:S,next:null},d=Mn.updateQueue,d===null?(d={lastEffect:null,stores:null},Mn.updateQueue=d,d.lastEffect=u.next=u):(g=d.lastEffect,g===null?d.lastEffect=u.next=u:(S=g.next,g.next=u,u.next=S,d.lastEffect=u)),u}function HL(){return zs().memoizedState}function j1(u,d,g,S){var E=Ma();Mn.flags|=u,E.memoizedState=P_(1|d,g,void 0,S===void 0?null:S)}function z1(u,d,g,S){var E=zs();S=S===void 0?null:S;var $=void 0;if(tr!==null){var A=tr.memoizedState;if($=A.destroy,S!==null&&d$(S,A.deps)){E.memoizedState=P_(d,g,$,S);return}}Mn.flags|=u,E.memoizedState=P_(1|d,g,$,S)}function WL(u,d){return j1(8390656,8,u,d)}function y$(u,d){return z1(2048,8,u,d)}function ZL(u,d){return z1(4,2,u,d)}function JL(u,d){return z1(4,4,u,d)}function YL(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function KL(u,d,g){return g=g!=null?g.concat([u]):null,z1(4,4,YL.bind(null,d,u),g)}function g$(){}function XL(u,d){var g=zs();d=d===void 0?null:d;var S=g.memoizedState;return S!==null&&d!==null&&d$(d,S[1])?S[0]:(g.memoizedState=[u,d],u)}function QL(u,d){var g=zs();d=d===void 0?null:d;var S=g.memoizedState;return S!==null&&d!==null&&d$(d,S[1])?S[0]:(u=u(),g.memoizedState=[u,d],u)}function eN(u,d,g){return Lh&21?(is(g,d)||(g=n1(),Mn.lanes|=g,Nh|=g,u.baseState=!0),d):(u.baseState&&(u.baseState=!1,Oi=!0),u.memoizedState=g)}function xY(u,d){var g=Rt;Rt=g!==0&&4>g?g:4,u(!0);var S=c$.transition;c$.transition={};try{u(!1),d()}finally{Rt=g,c$.transition=S}}function tN(){return zs().memoizedState}function EY(u,d,g){var S=xc(u);if(g={lane:S,action:g,hasEagerState:!1,eagerState:null,next:null},nN(u))rN(d,g);else if(g=kL(u,d,g,S),g!==null){var E=fi();Io(g,u,S,E),iN(g,d,S)}}function $Y(u,d,g){var S=xc(u),E={lane:S,action:g,hasEagerState:!1,eagerState:null,next:null};if(nN(u))rN(d,E);else{var $=u.alternate;if(u.lanes===0&&($===null||$.lanes===0)&&($=d.lastRenderedReducer,$!==null))try{var A=d.lastRenderedState,F=$(A,g);if(E.hasEagerState=!0,E.eagerState=F,is(F,A)){var G=d.interleaved;G===null?(E.next=E,i$(d)):(E.next=G.next,G.next=E),d.interleaved=E;return}}catch{}finally{}g=kL(u,d,E,S),g!==null&&(E=fi(),Io(g,u,S,E),iN(g,d,S))}}function nN(u){var d=u.alternate;return u===Mn||d!==null&&d===Mn}function rN(u,d){$_=F1=!0;var g=u.pending;g===null?d.next=d:(d.next=g.next,g.next=d),u.pending=d}function iN(u,d,g){if(g&4194240){var S=d.lanes;S&=u.pendingLanes,g|=S,d.lanes=g,wo(u,g)}}var V1={readContext:js,useCallback:Ur,useContext:Ur,useEffect:Ur,useImperativeHandle:Ur,useInsertionEffect:Ur,useLayoutEffect:Ur,useMemo:Ur,useReducer:Ur,useRef:Ur,useState:Ur,useDebugValue:Ur,useDeferredValue:Ur,useTransition:Ur,useMutableSource:Ur,useSyncExternalStore:Ur,useId:Ur,unstable_isNewReconciler:!1},MY={readContext:js,useCallback:function(u,d){return Ma().memoizedState=[u,d===void 0?null:d],u},useContext:js,useEffect:WL,useImperativeHandle:function(u,d,g){return g=g!=null?g.concat([u]):null,j1(4194308,4,YL.bind(null,d,u),g)},useLayoutEffect:function(u,d){return j1(4194308,4,u,d)},useInsertionEffect:function(u,d){return j1(4,2,u,d)},useMemo:function(u,d){var g=Ma();return d=d===void 0?null:d,u=u(),g.memoizedState=[u,d],u},useReducer:function(u,d,g){var S=Ma();return d=g!==void 0?g(d):d,S.memoizedState=S.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},S.queue=u,u=u.dispatch=EY.bind(null,Mn,u),[S.memoizedState,u]},useRef:function(u){var d=Ma();return u={current:u},d.memoizedState=u},useState:qL,useDebugValue:g$,useDeferredValue:function(u){return Ma().memoizedState=u},useTransition:function(){var u=qL(!1),d=u[0];return u=xY.bind(null,u[1]),Ma().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,g){var S=Mn,E=Ma();if(vn){if(g===void 0)throw Error(n(407));g=g()}else{if(g=d(),mr===null)throw Error(n(349));Lh&30||zL(S,d,g)}E.memoizedState=g;var $={value:g,getSnapshot:d};return E.queue=$,WL(UL.bind(null,S,$,u),[u]),S.flags|=2048,P_(9,VL.bind(null,S,$,g,d),void 0,null),g},useId:function(){var u=Ma(),d=mr.identifierPrefix;if(vn){var g=zl,S=jl;g=(S&~(1<<32-D(S)-1)).toString(32)+g,d=":"+d+"R"+g,g=M_++,0<g&&(d+="H"+g.toString(32)),d+=":"}else g=TY++,d=":"+d+"r"+g.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},IY={readContext:js,useCallback:XL,useContext:js,useEffect:y$,useImperativeHandle:KL,useInsertionEffect:ZL,useLayoutEffect:JL,useMemo:QL,useReducer:f$,useRef:HL,useState:function(){return f$(I_)},useDebugValue:g$,useDeferredValue:function(u){var d=zs();return eN(d,tr.memoizedState,u)},useTransition:function(){var u=f$(I_)[0],d=zs().memoizedState;return[u,d]},useMutableSource:FL,useSyncExternalStore:jL,useId:tN,unstable_isNewReconciler:!1},PY={readContext:js,useCallback:XL,useContext:js,useEffect:y$,useImperativeHandle:KL,useInsertionEffect:ZL,useLayoutEffect:JL,useMemo:QL,useReducer:m$,useRef:HL,useState:function(){return m$(I_)},useDebugValue:g$,useDeferredValue:function(u){var d=zs();return tr===null?d.memoizedState=u:eN(d,tr.memoizedState,u)},useTransition:function(){var u=m$(I_)[0],d=zs().memoizedState;return[u,d]},useMutableSource:FL,useSyncExternalStore:jL,useId:tN,unstable_isNewReconciler:!1};function Eo(u,d){if(u&&u.defaultProps){d=he({},d),u=u.defaultProps;for(var g in u)d[g]===void 0&&(d[g]=u[g]);return d}return d}function _$(u,d,g,S){d=u.memoizedState,g=g(S,d),g=g==null?d:he({},d,g),u.memoizedState=g,u.lanes===0&&(u.updateQueue.baseState=g)}var U1={isMounted:function(u){return(u=u._reactInternals)?Xi(u)===u:!1},enqueueSetState:function(u,d,g){u=u._reactInternals;var S=fi(),E=xc(u),$=Ul(S,E);$.payload=d,g!=null&&($.callback=g),d=vc(u,$,E),d!==null&&(Io(d,u,E,S),R1(d,u,E))},enqueueReplaceState:function(u,d,g){u=u._reactInternals;var S=fi(),E=xc(u),$=Ul(S,E);$.tag=1,$.payload=d,g!=null&&($.callback=g),d=vc(u,$,E),d!==null&&(Io(d,u,E,S),R1(d,u,E))},enqueueForceUpdate:function(u,d){u=u._reactInternals;var g=fi(),S=xc(u),E=Ul(g,S);E.tag=2,d!=null&&(E.callback=d),d=vc(u,E,S),d!==null&&(Io(d,u,S,g),R1(d,u,S))}};function sN(u,d,g,S,E,$,A){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(S,$,A):d.prototype&&d.prototype.isPureReactComponent?!Sa(g,S)||!Sa(E,$):!0}function oN(u,d,g){var S=!1,E=gc,$=d.contextType;return typeof $=="object"&&$!==null?$=js($):(E=Ci(d)?Ch:Vr.current,S=d.contextTypes,$=(S=S!=null)?ym(u,E):gc),d=new d(g,$),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=U1,u.stateNode=d,d._reactInternals=u,S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=E,u.__reactInternalMemoizedMaskedChildContext=$),d}function aN(u,d,g,S){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(g,S),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(g,S),d.state!==u&&U1.enqueueReplaceState(d,d.state,null)}function w$(u,d,g,S){var E=u.stateNode;E.props=g,E.state=u.memoizedState,E.refs={},s$(u);var $=d.contextType;typeof $=="object"&&$!==null?E.context=js($):($=Ci(d)?Ch:Vr.current,E.context=ym(u,$)),E.state=u.memoizedState,$=d.getDerivedStateFromProps,typeof $=="function"&&(_$(u,d,$,g),E.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(d=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),d!==E.state&&U1.enqueueReplaceState(E,E.state,null),L1(u,g,E,S),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308)}function xm(u,d){try{var g="",S=d;do g+=We(S),S=S.return;while(S);var E=g}catch($){E=`
Error generating stack: `+$.message+`
`+$.stack}return{value:u,source:d,stack:E,digest:null}}function v$(u,d,g){return{value:u,source:null,stack:g??null,digest:d??null}}function b$(u,d){try{console.error(d.value)}catch(g){setTimeout(function(){throw g})}}var CY=typeof WeakMap=="function"?WeakMap:Map;function lN(u,d,g){g=Ul(-1,g),g.tag=3,g.payload={element:null};var S=d.value;return g.callback=function(){J1||(J1=!0,N$=S),b$(u,d)},g}function uN(u,d,g){g=Ul(-1,g),g.tag=3;var S=u.type.getDerivedStateFromError;if(typeof S=="function"){var E=d.value;g.payload=function(){return S(E)},g.callback=function(){b$(u,d)}}var $=u.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(g.callback=function(){b$(u,d),typeof S!="function"&&(Sc===null?Sc=new Set([this]):Sc.add(this));var A=d.stack;this.componentDidCatch(d.value,{componentStack:A!==null?A:""})}),g}function cN(u,d,g){var S=u.pingCache;if(S===null){S=u.pingCache=new CY;var E=new Set;S.set(d,E)}else E=S.get(d),E===void 0&&(E=new Set,S.set(d,E));E.has(g)||(E.add(g),u=BY.bind(null,u,d,g),d.then(u,u))}function dN(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function hN(u,d,g,S,E){return u.mode&1?(u.flags|=65536,u.lanes=E,u):(u===d?u.flags|=65536:(u.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(d=Ul(-1,1),d.tag=2,vc(g,d,1))),g.lanes|=1),u)}var OY=U.ReactCurrentOwner,Oi=!1;function pi(u,d,g,S){d.child=u===null?AL(d,null,g,S):vm(d,u.child,g,S)}function pN(u,d,g,S,E){g=g.render;var $=d.ref;return Sm(d,E),S=h$(u,d,g,S,$,E),g=p$(),u!==null&&!Oi?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,Gl(u,d,E)):(vn&&g&&JE(d),d.flags|=1,pi(u,d,S,E),d.child)}function fN(u,d,g,S,E){if(u===null){var $=g.type;return typeof $=="function"&&!G$($)&&$.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(d.tag=15,d.type=$,mN(u,d,$,S,E)):(u=tb(g.type,null,S,d,d.mode,E),u.ref=d.ref,u.return=d,d.child=u)}if($=u.child,!(u.lanes&E)){var A=$.memoizedProps;if(g=g.compare,g=g!==null?g:Sa,g(A,S)&&u.ref===d.ref)return Gl(u,d,E)}return d.flags|=1,u=$c($,S),u.ref=d.ref,u.return=d,d.child=u}function mN(u,d,g,S,E){if(u!==null){var $=u.memoizedProps;if(Sa($,S)&&u.ref===d.ref)if(Oi=!1,d.pendingProps=S=$,(u.lanes&E)!==0)u.flags&131072&&(Oi=!0);else return d.lanes=u.lanes,Gl(u,d,E)}return S$(u,d,g,S,E)}function yN(u,d,g){var S=d.pendingProps,E=S.children,$=u!==null?u.memoizedState:null;if(S.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null,transitions:null},on($m,ls),ls|=g;else{if(!(g&1073741824))return u=$!==null?$.baseLanes|g:g,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null,transitions:null},d.updateQueue=null,on($m,ls),ls|=u,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=$!==null?$.baseLanes:g,on($m,ls),ls|=S}else $!==null?(S=$.baseLanes|g,d.memoizedState=null):S=g,on($m,ls),ls|=S;return pi(u,d,E,g),d.child}function gN(u,d){var g=d.ref;(u===null&&g!==null||u!==null&&u.ref!==g)&&(d.flags|=512,d.flags|=2097152)}function S$(u,d,g,S,E){var $=Ci(g)?Ch:Vr.current;return $=ym(d,$),Sm(d,E),g=h$(u,d,g,S,$,E),S=p$(),u!==null&&!Oi?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,Gl(u,d,E)):(vn&&S&&JE(d),d.flags|=1,pi(u,d,g,E),d.child)}function _N(u,d,g,S,E){if(Ci(g)){var $=!0;$1(d)}else $=!1;if(Sm(d,E),d.stateNode===null)B1(u,d),oN(d,g,S),w$(d,g,S,E),S=!0;else if(u===null){var A=d.stateNode,F=d.memoizedProps;A.props=F;var G=A.context,ae=g.contextType;typeof ae=="object"&&ae!==null?ae=js(ae):(ae=Ci(g)?Ch:Vr.current,ae=ym(d,ae));var ve=g.getDerivedStateFromProps,Se=typeof ve=="function"||typeof A.getSnapshotBeforeUpdate=="function";Se||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(F!==S||G!==ae)&&aN(d,A,S,ae),wc=!1;var ye=d.memoizedState;A.state=ye,L1(d,S,A,E),G=d.memoizedState,F!==S||ye!==G||Pi.current||wc?(typeof ve=="function"&&(_$(d,g,ve,S),G=d.memoizedState),(F=wc||sN(d,g,F,S,ye,G,ae))?(Se||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(d.flags|=4194308)):(typeof A.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=S,d.memoizedState=G),A.props=S,A.state=G,A.context=ae,S=F):(typeof A.componentDidMount=="function"&&(d.flags|=4194308),S=!1)}else{A=d.stateNode,RL(u,d),F=d.memoizedProps,ae=d.type===d.elementType?F:Eo(d.type,F),A.props=ae,Se=d.pendingProps,ye=A.context,G=g.contextType,typeof G=="object"&&G!==null?G=js(G):(G=Ci(g)?Ch:Vr.current,G=ym(d,G));var Re=g.getDerivedStateFromProps;(ve=typeof Re=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(F!==Se||ye!==G)&&aN(d,A,S,G),wc=!1,ye=d.memoizedState,A.state=ye,L1(d,S,A,E);var qe=d.memoizedState;F!==Se||ye!==qe||Pi.current||wc?(typeof Re=="function"&&(_$(d,g,Re,S),qe=d.memoizedState),(ae=wc||sN(d,g,ae,S,ye,qe,G)||!1)?(ve||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(S,qe,G),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(S,qe,G)),typeof A.componentDidUpdate=="function"&&(d.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof A.componentDidUpdate!="function"||F===u.memoizedProps&&ye===u.memoizedState||(d.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||F===u.memoizedProps&&ye===u.memoizedState||(d.flags|=1024),d.memoizedProps=S,d.memoizedState=qe),A.props=S,A.state=qe,A.context=G,S=ae):(typeof A.componentDidUpdate!="function"||F===u.memoizedProps&&ye===u.memoizedState||(d.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||F===u.memoizedProps&&ye===u.memoizedState||(d.flags|=1024),S=!1)}return T$(u,d,g,S,$,E)}function T$(u,d,g,S,E,$){gN(u,d);var A=(d.flags&128)!==0;if(!S&&!A)return E&&TL(d,g,!1),Gl(u,d,$);S=d.stateNode,OY.current=d;var F=A&&typeof g.getDerivedStateFromError!="function"?null:S.render();return d.flags|=1,u!==null&&A?(d.child=vm(d,u.child,null,$),d.child=vm(d,null,F,$)):pi(u,d,F,$),d.memoizedState=S.state,E&&TL(d,g,!0),d.child}function wN(u){var d=u.stateNode;d.pendingContext?bL(u,d.pendingContext,d.pendingContext!==d.context):d.context&&bL(u,d.context,!1),o$(u,d.containerInfo)}function vN(u,d,g,S,E){return wm(),QE(E),d.flags|=256,pi(u,d,g,S),d.child}var x$={dehydrated:null,treeContext:null,retryLane:0};function E$(u){return{baseLanes:u,cachePool:null,transitions:null}}function bN(u,d,g){var S=d.pendingProps,E=$n.current,$=!1,A=(d.flags&128)!==0,F;if((F=A)||(F=u!==null&&u.memoizedState===null?!1:(E&2)!==0),F?($=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(E|=1),on($n,E&1),u===null)return XE(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(d.mode&1?u.data==="$!"?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(A=S.children,u=S.fallback,$?(S=d.mode,$=d.child,A={mode:"hidden",children:A},!(S&1)&&$!==null?($.childLanes=0,$.pendingProps=A):$=nb(A,S,0,null),u=zh(u,S,g,null),$.return=d,u.return=d,$.sibling=u,d.child=$,d.child.memoizedState=E$(g),d.memoizedState=x$,u):$$(d,A));if(E=u.memoizedState,E!==null&&(F=E.dehydrated,F!==null))return AY(u,d,A,S,F,E,g);if($){$=S.fallback,A=d.mode,E=u.child,F=E.sibling;var G={mode:"hidden",children:S.children};return!(A&1)&&d.child!==E?(S=d.child,S.childLanes=0,S.pendingProps=G,d.deletions=null):(S=$c(E,G),S.subtreeFlags=E.subtreeFlags&14680064),F!==null?$=$c(F,$):($=zh($,A,g,null),$.flags|=2),$.return=d,S.return=d,S.sibling=$,d.child=S,S=$,$=d.child,A=u.child.memoizedState,A=A===null?E$(g):{baseLanes:A.baseLanes|g,cachePool:null,transitions:A.transitions},$.memoizedState=A,$.childLanes=u.childLanes&~g,d.memoizedState=x$,S}return $=u.child,u=$.sibling,S=$c($,{mode:"visible",children:S.children}),!(d.mode&1)&&(S.lanes=g),S.return=d,S.sibling=null,u!==null&&(g=d.deletions,g===null?(d.deletions=[u],d.flags|=16):g.push(u)),d.child=S,d.memoizedState=null,S}function $$(u,d){return d=nb({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function G1(u,d,g,S){return S!==null&&QE(S),vm(d,u.child,null,g),u=$$(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function AY(u,d,g,S,E,$,A){if(g)return d.flags&256?(d.flags&=-257,S=v$(Error(n(422))),G1(u,d,A,S)):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):($=S.fallback,E=d.mode,S=nb({mode:"visible",children:S.children},E,0,null),$=zh($,E,A,null),$.flags|=2,S.return=d,$.return=d,S.sibling=$,d.child=S,d.mode&1&&vm(d,u.child,null,A),d.child.memoizedState=E$(A),d.memoizedState=x$,$);if(!(d.mode&1))return G1(u,d,A,null);if(E.data==="$!"){if(S=E.nextSibling&&E.nextSibling.dataset,S)var F=S.dgst;return S=F,$=Error(n(419)),S=v$($,S,void 0),G1(u,d,A,S)}if(F=(A&u.childLanes)!==0,Oi||F){if(S=mr,S!==null){switch(A&-A){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=E&(S.suspendedLanes|A)?0:E,E!==0&&E!==$.retryLane&&($.retryLane=E,Vl(u,E),Io(S,u,E,-1))}return U$(),S=v$(Error(n(421))),G1(u,d,A,S)}return E.data==="$?"?(d.flags|=128,d.child=u.child,d=qY.bind(null,u),E._reactRetry=d,null):(u=$.treeContext,as=Ea(E.nextSibling),os=d,vn=!0,xo=null,u!==null&&(Ds[Fs++]=jl,Ds[Fs++]=zl,Ds[Fs++]=Oh,jl=u.id,zl=u.overflow,Oh=d),d=$$(d,S.children),d.flags|=4096,d)}function SN(u,d,g){u.lanes|=d;var S=u.alternate;S!==null&&(S.lanes|=d),r$(u.return,d,g)}function M$(u,d,g,S,E){var $=u.memoizedState;$===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:E}:($.isBackwards=d,$.rendering=null,$.renderingStartTime=0,$.last=S,$.tail=g,$.tailMode=E)}function TN(u,d,g){var S=d.pendingProps,E=S.revealOrder,$=S.tail;if(pi(u,d,S.children,g),S=$n.current,S&2)S=S&1|2,d.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&SN(u,g,d);else if(u.tag===19)SN(u,g,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}S&=1}if(on($n,S),!(d.mode&1))d.memoizedState=null;else switch(E){case"forwards":for(g=d.child,E=null;g!==null;)u=g.alternate,u!==null&&N1(u)===null&&(E=g),g=g.sibling;g=E,g===null?(E=d.child,d.child=null):(E=g.sibling,g.sibling=null),M$(d,!1,E,g,$);break;case"backwards":for(g=null,E=d.child,d.child=null;E!==null;){if(u=E.alternate,u!==null&&N1(u)===null){d.child=E;break}u=E.sibling,E.sibling=g,g=E,E=u}M$(d,!0,g,null,$);break;case"together":M$(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function B1(u,d){!(d.mode&1)&&u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2)}function Gl(u,d,g){if(u!==null&&(d.dependencies=u.dependencies),Nh|=d.lanes,!(g&d.childLanes))return null;if(u!==null&&d.child!==u.child)throw Error(n(153));if(d.child!==null){for(u=d.child,g=$c(u,u.pendingProps),d.child=g,g.return=d;u.sibling!==null;)u=u.sibling,g=g.sibling=$c(u,u.pendingProps),g.return=d;g.sibling=null}return d.child}function kY(u,d,g){switch(d.tag){case 3:wN(d),wm();break;case 5:DL(d);break;case 1:Ci(d.type)&&$1(d);break;case 4:o$(d,d.stateNode.containerInfo);break;case 10:var S=d.type._context,E=d.memoizedProps.value;on(A1,S._currentValue),S._currentValue=E;break;case 13:if(S=d.memoizedState,S!==null)return S.dehydrated!==null?(on($n,$n.current&1),d.flags|=128,null):g&d.child.childLanes?bN(u,d,g):(on($n,$n.current&1),u=Gl(u,d,g),u!==null?u.sibling:null);on($n,$n.current&1);break;case 19:if(S=(g&d.childLanes)!==0,u.flags&128){if(S)return TN(u,d,g);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),on($n,$n.current),S)break;return null;case 22:case 23:return d.lanes=0,yN(u,d,g)}return Gl(u,d,g)}var xN,I$,EN,$N;xN=function(u,d){for(var g=d.child;g!==null;){if(g.tag===5||g.tag===6)u.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===d)break;for(;g.sibling===null;){if(g.return===null||g.return===d)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},I$=function(){},EN=function(u,d,g,S){var E=u.memoizedProps;if(E!==S){u=d.stateNode,Rh($a.current);var $=null;switch(g){case"input":E=ih(u,E),S=ih(u,S),$=[];break;case"select":E=he({},E,{value:void 0}),S=he({},S,{value:void 0}),$=[];break;case"textarea":E=Tl(u,E),S=Tl(u,S),$=[];break;default:typeof E.onClick!="function"&&typeof S.onClick=="function"&&(u.onclick=me)}uh(g,S);var A;g=null;for(ae in E)if(!S.hasOwnProperty(ae)&&E.hasOwnProperty(ae)&&E[ae]!=null)if(ae==="style"){var F=E[ae];for(A in F)F.hasOwnProperty(A)&&(g||(g={}),g[A]="")}else ae!=="dangerouslySetInnerHTML"&&ae!=="children"&&ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(i.hasOwnProperty(ae)?$||($=[]):($=$||[]).push(ae,null));for(ae in S){var G=S[ae];if(F=E!=null?E[ae]:void 0,S.hasOwnProperty(ae)&&G!==F&&(G!=null||F!=null))if(ae==="style")if(F){for(A in F)!F.hasOwnProperty(A)||G&&G.hasOwnProperty(A)||(g||(g={}),g[A]="");for(A in G)G.hasOwnProperty(A)&&F[A]!==G[A]&&(g||(g={}),g[A]=G[A])}else g||($||($=[]),$.push(ae,g)),g=G;else ae==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,F=F?F.__html:void 0,G!=null&&F!==G&&($=$||[]).push(ae,G)):ae==="children"?typeof G!="string"&&typeof G!="number"||($=$||[]).push(ae,""+G):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&(i.hasOwnProperty(ae)?(G!=null&&ae==="onScroll"&&en("scroll",u),$||F===G||($=[])):($=$||[]).push(ae,G))}g&&($=$||[]).push("style",g);var ae=$;(d.updateQueue=ae)&&(d.flags|=4)}},$N=function(u,d,g,S){g!==S&&(d.flags|=4)};function C_(u,d){if(!vn)switch(u.tailMode){case"hidden":d=u.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?u.tail=null:g.sibling=null;break;case"collapsed":g=u.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:S.sibling=null}}function Gr(u){var d=u.alternate!==null&&u.alternate.child===u.child,g=0,S=0;if(d)for(var E=u.child;E!==null;)g|=E.lanes|E.childLanes,S|=E.subtreeFlags&14680064,S|=E.flags&14680064,E.return=u,E=E.sibling;else for(E=u.child;E!==null;)g|=E.lanes|E.childLanes,S|=E.subtreeFlags,S|=E.flags,E.return=u,E=E.sibling;return u.subtreeFlags|=S,u.childLanes=g,d}function RY(u,d,g){var S=d.pendingProps;switch(YE(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gr(d),null;case 1:return Ci(d.type)&&E1(),Gr(d),null;case 3:return S=d.stateNode,Tm(),pn(Pi),pn(Vr),u$(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(u===null||u.child===null)&&(C1(d)?d.flags|=4:u===null||u.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,xo!==null&&(j$(xo),xo=null))),I$(u,d),Gr(d),null;case 5:a$(d);var E=Rh(E_.current);if(g=d.type,u!==null&&d.stateNode!=null)EN(u,d,g,S,E),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!S){if(d.stateNode===null)throw Error(n(166));return Gr(d),null}if(u=Rh($a.current),C1(d)){S=d.stateNode,g=d.type;var $=d.memoizedProps;switch(S[Ns]=d,S[fc]=$,u=(d.mode&1)!==0,g){case"dialog":en("cancel",S),en("close",S);break;case"iframe":case"object":case"embed":en("load",S);break;case"video":case"audio":for(E=0;E<dc.length;E++)en(dc[E],S);break;case"source":en("error",S);break;case"img":case"image":case"link":en("error",S),en("load",S);break;case"details":en("toggle",S);break;case"input":sh(S,$),en("invalid",S);break;case"select":S._wrapperState={wasMultiple:!!$.multiple},en("invalid",S);break;case"textarea":Ei(S,$),en("invalid",S)}uh(g,$),E=null;for(var A in $)if($.hasOwnProperty(A)){var F=$[A];A==="children"?typeof F=="string"?S.textContent!==F&&($.suppressHydrationWarning!==!0&&oe(S.textContent,F,u),E=["children",F]):typeof F=="number"&&S.textContent!==""+F&&($.suppressHydrationWarning!==!0&&oe(S.textContent,F,u),E=["children",""+F]):i.hasOwnProperty(A)&&F!=null&&A==="onScroll"&&en("scroll",S)}switch(g){case"input":da(S),Sl(S,$,!0);break;case"textarea":da(S),kf(S);break;case"select":case"option":break;default:typeof $.onClick=="function"&&(S.onclick=me)}S=E,d.updateQueue=S,S!==null&&(d.flags|=4)}else{A=E.nodeType===9?E:E.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=Bu(g)),u==="http://www.w3.org/1999/xhtml"?g==="script"?(u=A.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof S.is=="string"?u=A.createElement(g,{is:S.is}):(u=A.createElement(g),g==="select"&&(A=u,S.multiple?A.multiple=!0:S.size&&(A.size=S.size))):u=A.createElementNS(u,g),u[Ns]=d,u[fc]=S,xN(u,d,!1,!1),d.stateNode=u;e:{switch(A=yo(g,S),g){case"dialog":en("cancel",u),en("close",u),E=S;break;case"iframe":case"object":case"embed":en("load",u),E=S;break;case"video":case"audio":for(E=0;E<dc.length;E++)en(dc[E],u);E=S;break;case"source":en("error",u),E=S;break;case"img":case"image":case"link":en("error",u),en("load",u),E=S;break;case"details":en("toggle",u),E=S;break;case"input":sh(u,S),E=ih(u,S),en("invalid",u);break;case"option":E=S;break;case"select":u._wrapperState={wasMultiple:!!S.multiple},E=he({},S,{value:void 0}),en("invalid",u);break;case"textarea":Ei(u,S),E=Tl(u,S),en("invalid",u);break;default:E=S}uh(g,E),F=E;for($ in F)if(F.hasOwnProperty($)){var G=F[$];$==="style"?Hu(u,G):$==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&Rf(u,G)):$==="children"?typeof G=="string"?(g!=="textarea"||G!=="")&&ma(u,G):typeof G=="number"&&ma(u,""+G):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(i.hasOwnProperty($)?G!=null&&$==="onScroll"&&en("scroll",u):G!=null&&z(u,$,G,A))}switch(g){case"input":da(u),Sl(u,S,!1);break;case"textarea":da(u),kf(u);break;case"option":S.value!=null&&u.setAttribute("value",""+$t(S.value));break;case"select":u.multiple=!!S.multiple,$=S.value,$!=null?Ki(u,!!S.multiple,$,!1):S.defaultValue!=null&&Ki(u,!!S.multiple,S.defaultValue,!0);break;default:typeof E.onClick=="function"&&(u.onclick=me)}switch(g){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}}S&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Gr(d),null;case 6:if(u&&d.stateNode!=null)$N(u,d,u.memoizedProps,S);else{if(typeof S!="string"&&d.stateNode===null)throw Error(n(166));if(g=Rh(E_.current),Rh($a.current),C1(d)){if(S=d.stateNode,g=d.memoizedProps,S[Ns]=d,($=S.nodeValue!==g)&&(u=os,u!==null))switch(u.tag){case 3:oe(S.nodeValue,g,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&oe(S.nodeValue,g,(u.mode&1)!==0)}$&&(d.flags|=4)}else S=(g.nodeType===9?g:g.ownerDocument).createTextNode(S),S[Ns]=d,d.stateNode=S}return Gr(d),null;case 13:if(pn($n),S=d.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(vn&&as!==null&&d.mode&1&&!(d.flags&128))PL(),wm(),d.flags|=98560,$=!1;else if($=C1(d),S!==null&&S.dehydrated!==null){if(u===null){if(!$)throw Error(n(318));if($=d.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(n(317));$[Ns]=d}else wm(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;Gr(d),$=!1}else xo!==null&&(j$(xo),xo=null),$=!0;if(!$)return d.flags&65536?d:null}return d.flags&128?(d.lanes=g,d):(S=S!==null,S!==(u!==null&&u.memoizedState!==null)&&S&&(d.child.flags|=8192,d.mode&1&&(u===null||$n.current&1?nr===0&&(nr=3):U$())),d.updateQueue!==null&&(d.flags|=4),Gr(d),null);case 4:return Tm(),I$(u,d),u===null&&hc(d.stateNode.containerInfo),Gr(d),null;case 10:return n$(d.type._context),Gr(d),null;case 17:return Ci(d.type)&&E1(),Gr(d),null;case 19:if(pn($n),$=d.memoizedState,$===null)return Gr(d),null;if(S=(d.flags&128)!==0,A=$.rendering,A===null)if(S)C_($,!1);else{if(nr!==0||u!==null&&u.flags&128)for(u=d.child;u!==null;){if(A=N1(u),A!==null){for(d.flags|=128,C_($,!1),S=A.updateQueue,S!==null&&(d.updateQueue=S,d.flags|=4),d.subtreeFlags=0,S=g,g=d.child;g!==null;)$=g,u=S,$.flags&=14680066,A=$.alternate,A===null?($.childLanes=0,$.lanes=u,$.child=null,$.subtreeFlags=0,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=A.childLanes,$.lanes=A.lanes,$.child=A.child,$.subtreeFlags=0,$.deletions=null,$.memoizedProps=A.memoizedProps,$.memoizedState=A.memoizedState,$.updateQueue=A.updateQueue,$.type=A.type,u=A.dependencies,$.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),g=g.sibling;return on($n,$n.current&1|2),d.child}u=u.sibling}$.tail!==null&&hn()>Mm&&(d.flags|=128,S=!0,C_($,!1),d.lanes=4194304)}else{if(!S)if(u=N1(A),u!==null){if(d.flags|=128,S=!0,g=u.updateQueue,g!==null&&(d.updateQueue=g,d.flags|=4),C_($,!0),$.tail===null&&$.tailMode==="hidden"&&!A.alternate&&!vn)return Gr(d),null}else 2*hn()-$.renderingStartTime>Mm&&g!==1073741824&&(d.flags|=128,S=!0,C_($,!1),d.lanes=4194304);$.isBackwards?(A.sibling=d.child,d.child=A):(g=$.last,g!==null?g.sibling=A:d.child=A,$.last=A)}return $.tail!==null?(d=$.tail,$.rendering=d,$.tail=d.sibling,$.renderingStartTime=hn(),d.sibling=null,g=$n.current,on($n,S?g&1|2:g&1),d):(Gr(d),null);case 22:case 23:return V$(),S=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==S&&(d.flags|=8192),S&&d.mode&1?ls&1073741824&&(Gr(d),d.subtreeFlags&6&&(d.flags|=8192)):Gr(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function LY(u,d){switch(YE(d),d.tag){case 1:return Ci(d.type)&&E1(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return Tm(),pn(Pi),pn(Vr),u$(),u=d.flags,u&65536&&!(u&128)?(d.flags=u&-65537|128,d):null;case 5:return a$(d),null;case 13:if(pn($n),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(n(340));wm()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return pn($n),null;case 4:return Tm(),null;case 10:return n$(d.type._context),null;case 22:case 23:return V$(),null;case 24:return null;default:return null}}var q1=!1,Br=!1,NY=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function Em(u,d){var g=u.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(S){kn(u,d,S)}else g.current=null}function P$(u,d,g){try{g()}catch(S){kn(u,d,S)}}var MN=!1;function DY(u,d){if(Oe=Sh,u=p_(),f_(u)){if("selectionStart"in u)var g={start:u.selectionStart,end:u.selectionEnd};else e:{g=(g=u.ownerDocument)&&g.defaultView||window;var S=g.getSelection&&g.getSelection();if(S&&S.rangeCount!==0){g=S.anchorNode;var E=S.anchorOffset,$=S.focusNode;S=S.focusOffset;try{g.nodeType,$.nodeType}catch{g=null;break e}var A=0,F=-1,G=-1,ae=0,ve=0,Se=u,ye=null;t:for(;;){for(var Re;Se!==g||E!==0&&Se.nodeType!==3||(F=A+E),Se!==$||S!==0&&Se.nodeType!==3||(G=A+S),Se.nodeType===3&&(A+=Se.nodeValue.length),(Re=Se.firstChild)!==null;)ye=Se,Se=Re;for(;;){if(Se===u)break t;if(ye===g&&++ae===E&&(F=A),ye===$&&++ve===S&&(G=A),(Re=Se.nextSibling)!==null)break;Se=ye,ye=Se.parentNode}Se=Re}g=F===-1||G===-1?null:{start:F,end:G}}else g=null}g=g||{start:0,end:0}}else g=null;for(st={focusedElem:u,selectionRange:g},Sh=!1,Ue=d;Ue!==null;)if(d=Ue,u=d.child,(d.subtreeFlags&1028)!==0&&u!==null)u.return=d,Ue=u;else for(;Ue!==null;){d=Ue;try{var qe=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(qe!==null){var Ye=qe.memoizedProps,zn=qe.memoizedState,Q=d.stateNode,W=Q.getSnapshotBeforeUpdate(d.elementType===d.type?Ye:Eo(d.type,Ye),zn);Q.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var ee=d.stateNode.containerInfo;ee.nodeType===1?ee.textContent="":ee.nodeType===9&&ee.documentElement&&ee.removeChild(ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ee){kn(d,d.return,Ee)}if(u=d.sibling,u!==null){u.return=d.return,Ue=u;break}Ue=d.return}return qe=MN,MN=!1,qe}function O_(u,d,g){var S=d.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var E=S=S.next;do{if((E.tag&u)===u){var $=E.destroy;E.destroy=void 0,$!==void 0&&P$(d,g,$)}E=E.next}while(E!==S)}}function H1(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&u)===u){var S=g.create;g.destroy=S()}g=g.next}while(g!==d)}}function C$(u){var d=u.ref;if(d!==null){var g=u.stateNode;switch(u.tag){case 5:u=g;break;default:u=g}typeof d=="function"?d(u):d.current=u}}function IN(u){var d=u.alternate;d!==null&&(u.alternate=null,IN(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&(delete d[Ns],delete d[fc],delete d[mc],delete d[qE],delete d[HE])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function PN(u){return u.tag===5||u.tag===3||u.tag===4}function CN(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||PN(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function O$(u,d,g){var S=u.tag;if(S===5||S===6)u=u.stateNode,d?g.nodeType===8?g.parentNode.insertBefore(u,d):g.insertBefore(u,d):(g.nodeType===8?(d=g.parentNode,d.insertBefore(u,g)):(d=g,d.appendChild(u)),g=g._reactRootContainer,g!=null||d.onclick!==null||(d.onclick=me));else if(S!==4&&(u=u.child,u!==null))for(O$(u,d,g),u=u.sibling;u!==null;)O$(u,d,g),u=u.sibling}function A$(u,d,g){var S=u.tag;if(S===5||S===6)u=u.stateNode,d?g.insertBefore(u,d):g.appendChild(u);else if(S!==4&&(u=u.child,u!==null))for(A$(u,d,g),u=u.sibling;u!==null;)A$(u,d,g),u=u.sibling}var Pr=null,$o=!1;function bc(u,d,g){for(g=g.child;g!==null;)ON(u,d,g),g=g.sibling}function ON(u,d,g){if(ui&&typeof ui.onCommitFiberUnmount=="function")try{ui.onCommitFiberUnmount(Un,g)}catch{}switch(g.tag){case 5:Br||Em(g,d);case 6:var S=Pr,E=$o;Pr=null,bc(u,d,g),Pr=S,$o=E,Pr!==null&&($o?(u=Pr,g=g.stateNode,u.nodeType===8?u.parentNode.removeChild(g):u.removeChild(g)):Pr.removeChild(g.stateNode));break;case 18:Pr!==null&&($o?(u=Pr,g=g.stateNode,u.nodeType===8?b_(u.parentNode,g):u.nodeType===1&&b_(u,g),ts(u)):b_(Pr,g.stateNode));break;case 4:S=Pr,E=$o,Pr=g.stateNode.containerInfo,$o=!0,bc(u,d,g),Pr=S,$o=E;break;case 0:case 11:case 14:case 15:if(!Br&&(S=g.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){E=S=S.next;do{var $=E,A=$.destroy;$=$.tag,A!==void 0&&($&2||$&4)&&P$(g,d,A),E=E.next}while(E!==S)}bc(u,d,g);break;case 1:if(!Br&&(Em(g,d),S=g.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=g.memoizedProps,S.state=g.memoizedState,S.componentWillUnmount()}catch(F){kn(g,d,F)}bc(u,d,g);break;case 21:bc(u,d,g);break;case 22:g.mode&1?(Br=(S=Br)||g.memoizedState!==null,bc(u,d,g),Br=S):bc(u,d,g);break;default:bc(u,d,g)}}function AN(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var g=u.stateNode;g===null&&(g=u.stateNode=new NY),d.forEach(function(S){var E=HY.bind(null,u,S);g.has(S)||(g.add(S),S.then(E,E))})}}function Mo(u,d){var g=d.deletions;if(g!==null)for(var S=0;S<g.length;S++){var E=g[S];try{var $=u,A=d,F=A;e:for(;F!==null;){switch(F.tag){case 5:Pr=F.stateNode,$o=!1;break e;case 3:Pr=F.stateNode.containerInfo,$o=!0;break e;case 4:Pr=F.stateNode.containerInfo,$o=!0;break e}F=F.return}if(Pr===null)throw Error(n(160));ON($,A,E),Pr=null,$o=!1;var G=E.alternate;G!==null&&(G.return=null),E.return=null}catch(ae){kn(E,d,ae)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)kN(d,u),d=d.sibling}function kN(u,d){var g=u.alternate,S=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(Mo(d,u),Ia(u),S&4){try{O_(3,u,u.return),H1(3,u)}catch(Ye){kn(u,u.return,Ye)}try{O_(5,u,u.return)}catch(Ye){kn(u,u.return,Ye)}}break;case 1:Mo(d,u),Ia(u),S&512&&g!==null&&Em(g,g.return);break;case 5:if(Mo(d,u),Ia(u),S&512&&g!==null&&Em(g,g.return),u.flags&32){var E=u.stateNode;try{ma(E,"")}catch(Ye){kn(u,u.return,Ye)}}if(S&4&&(E=u.stateNode,E!=null)){var $=u.memoizedProps,A=g!==null?g.memoizedProps:$,F=u.type,G=u.updateQueue;if(u.updateQueue=null,G!==null)try{F==="input"&&$.type==="radio"&&$.name!=null&&oh(E,$),yo(F,A);var ae=yo(F,$);for(A=0;A<G.length;A+=2){var ve=G[A],Se=G[A+1];ve==="style"?Hu(E,Se):ve==="dangerouslySetInnerHTML"?Rf(E,Se):ve==="children"?ma(E,Se):z(E,ve,Se,ae)}switch(F){case"input":bl(E,$);break;case"textarea":Af(E,$);break;case"select":var ye=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!$.multiple;var Re=$.value;Re!=null?Ki(E,!!$.multiple,Re,!1):ye!==!!$.multiple&&($.defaultValue!=null?Ki(E,!!$.multiple,$.defaultValue,!0):Ki(E,!!$.multiple,$.multiple?[]:"",!1))}E[fc]=$}catch(Ye){kn(u,u.return,Ye)}}break;case 6:if(Mo(d,u),Ia(u),S&4){if(u.stateNode===null)throw Error(n(162));E=u.stateNode,$=u.memoizedProps;try{E.nodeValue=$}catch(Ye){kn(u,u.return,Ye)}}break;case 3:if(Mo(d,u),Ia(u),S&4&&g!==null&&g.memoizedState.isDehydrated)try{ts(d.containerInfo)}catch(Ye){kn(u,u.return,Ye)}break;case 4:Mo(d,u),Ia(u);break;case 13:Mo(d,u),Ia(u),E=u.child,E.flags&8192&&($=E.memoizedState!==null,E.stateNode.isHidden=$,!$||E.alternate!==null&&E.alternate.memoizedState!==null||(L$=hn())),S&4&&AN(u);break;case 22:if(ve=g!==null&&g.memoizedState!==null,u.mode&1?(Br=(ae=Br)||ve,Mo(d,u),Br=ae):Mo(d,u),Ia(u),S&8192){if(ae=u.memoizedState!==null,(u.stateNode.isHidden=ae)&&!ve&&u.mode&1)for(Ue=u,ve=u.child;ve!==null;){for(Se=Ue=ve;Ue!==null;){switch(ye=Ue,Re=ye.child,ye.tag){case 0:case 11:case 14:case 15:O_(4,ye,ye.return);break;case 1:Em(ye,ye.return);var qe=ye.stateNode;if(typeof qe.componentWillUnmount=="function"){S=ye,g=ye.return;try{d=S,qe.props=d.memoizedProps,qe.state=d.memoizedState,qe.componentWillUnmount()}catch(Ye){kn(S,g,Ye)}}break;case 5:Em(ye,ye.return);break;case 22:if(ye.memoizedState!==null){NN(Se);continue}}Re!==null?(Re.return=ye,Ue=Re):NN(Se)}ve=ve.sibling}e:for(ve=null,Se=u;;){if(Se.tag===5){if(ve===null){ve=Se;try{E=Se.stateNode,ae?($=E.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none"):(F=Se.stateNode,G=Se.memoizedProps.style,A=G!=null&&G.hasOwnProperty("display")?G.display:null,F.style.display=lh("display",A))}catch(Ye){kn(u,u.return,Ye)}}}else if(Se.tag===6){if(ve===null)try{Se.stateNode.nodeValue=ae?"":Se.memoizedProps}catch(Ye){kn(u,u.return,Ye)}}else if((Se.tag!==22&&Se.tag!==23||Se.memoizedState===null||Se===u)&&Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===u)break e;for(;Se.sibling===null;){if(Se.return===null||Se.return===u)break e;ve===Se&&(ve=null),Se=Se.return}ve===Se&&(ve=null),Se.sibling.return=Se.return,Se=Se.sibling}}break;case 19:Mo(d,u),Ia(u),S&4&&AN(u);break;case 21:break;default:Mo(d,u),Ia(u)}}function Ia(u){var d=u.flags;if(d&2){try{e:{for(var g=u.return;g!==null;){if(PN(g)){var S=g;break e}g=g.return}throw Error(n(160))}switch(S.tag){case 5:var E=S.stateNode;S.flags&32&&(ma(E,""),S.flags&=-33);var $=CN(u);A$(u,$,E);break;case 3:case 4:var A=S.stateNode.containerInfo,F=CN(u);O$(u,F,A);break;default:throw Error(n(161))}}catch(G){kn(u,u.return,G)}u.flags&=-3}d&4096&&(u.flags&=-4097)}function FY(u,d,g){Ue=u,RN(u)}function RN(u,d,g){for(var S=(u.mode&1)!==0;Ue!==null;){var E=Ue,$=E.child;if(E.tag===22&&S){var A=E.memoizedState!==null||q1;if(!A){var F=E.alternate,G=F!==null&&F.memoizedState!==null||Br;F=q1;var ae=Br;if(q1=A,(Br=G)&&!ae)for(Ue=E;Ue!==null;)A=Ue,G=A.child,A.tag===22&&A.memoizedState!==null?DN(E):G!==null?(G.return=A,Ue=G):DN(E);for(;$!==null;)Ue=$,RN($),$=$.sibling;Ue=E,q1=F,Br=ae}LN(u)}else E.subtreeFlags&8772&&$!==null?($.return=E,Ue=$):LN(u)}}function LN(u){for(;Ue!==null;){var d=Ue;if(d.flags&8772){var g=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:Br||H1(5,d);break;case 1:var S=d.stateNode;if(d.flags&4&&!Br)if(g===null)S.componentDidMount();else{var E=d.elementType===d.type?g.memoizedProps:Eo(d.type,g.memoizedProps);S.componentDidUpdate(E,g.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var $=d.updateQueue;$!==null&&NL(d,$,S);break;case 3:var A=d.updateQueue;if(A!==null){if(g=null,d.child!==null)switch(d.child.tag){case 5:g=d.child.stateNode;break;case 1:g=d.child.stateNode}NL(d,A,g)}break;case 5:var F=d.stateNode;if(g===null&&d.flags&4){g=F;var G=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&g.focus();break;case"img":G.src&&(g.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var ae=d.alternate;if(ae!==null){var ve=ae.memoizedState;if(ve!==null){var Se=ve.dehydrated;Se!==null&&ts(Se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Br||d.flags&512&&C$(d)}catch(ye){kn(d,d.return,ye)}}if(d===u){Ue=null;break}if(g=d.sibling,g!==null){g.return=d.return,Ue=g;break}Ue=d.return}}function NN(u){for(;Ue!==null;){var d=Ue;if(d===u){Ue=null;break}var g=d.sibling;if(g!==null){g.return=d.return,Ue=g;break}Ue=d.return}}function DN(u){for(;Ue!==null;){var d=Ue;try{switch(d.tag){case 0:case 11:case 15:var g=d.return;try{H1(4,d)}catch(G){kn(d,g,G)}break;case 1:var S=d.stateNode;if(typeof S.componentDidMount=="function"){var E=d.return;try{S.componentDidMount()}catch(G){kn(d,E,G)}}var $=d.return;try{C$(d)}catch(G){kn(d,$,G)}break;case 5:var A=d.return;try{C$(d)}catch(G){kn(d,A,G)}}}catch(G){kn(d,d.return,G)}if(d===u){Ue=null;break}var F=d.sibling;if(F!==null){F.return=d.return,Ue=F;break}Ue=d.return}}var jY=Math.ceil,W1=U.ReactCurrentDispatcher,k$=U.ReactCurrentOwner,Vs=U.ReactCurrentBatchConfig,Nt=0,mr=null,Bn=null,Cr=0,ls=0,$m=yc(0),nr=0,A_=null,Nh=0,Z1=0,R$=0,k_=null,Ai=null,L$=0,Mm=1/0,Bl=null,J1=!1,N$=null,Sc=null,Y1=!1,Tc=null,K1=0,R_=0,D$=null,X1=-1,Q1=0;function fi(){return Nt&6?hn():X1!==-1?X1:X1=hn()}function xc(u){return u.mode&1?Nt&2&&Cr!==0?Cr&-Cr:SY.transition!==null?(Q1===0&&(Q1=n1()),Q1):(u=Rt,u!==0||(u=window.event,u=u===void 0?16:Ot(u.type)),u):1}function Io(u,d,g,S){if(50<R_)throw R_=0,D$=null,Error(n(185));Qi(u,g,S),(!(Nt&2)||u!==mr)&&(u===mr&&(!(Nt&2)&&(Z1|=g),nr===4&&Ec(u,Cr)),ki(u,S),g===1&&Nt===0&&!(d.mode&1)&&(Mm=hn()+500,M1&&_c()))}function ki(u,d){var g=u.callbackNode;Wf(u,d);var S=Tt(u,u===mr?Cr:0);if(S===0)g!==null&&fh(g),u.callbackNode=null,u.callbackPriority=0;else if(d=S&-S,u.callbackPriority!==d){if(g!=null&&fh(g),d===1)u.tag===0?bY(jN.bind(null,u)):xL(jN.bind(null,u)),zr(function(){!(Nt&6)&&_c()}),g=null;else{switch(Qu(S)){case 1:g=yh;break;case 4:g=Hf;break;case 16:g=Ku;break;case 536870912:g=ga;break;default:g=Ku}g=WN(g,FN.bind(null,u))}u.callbackPriority=d,u.callbackNode=g}}function FN(u,d){if(X1=-1,Q1=0,Nt&6)throw Error(n(327));var g=u.callbackNode;if(Im()&&u.callbackNode!==g)return null;var S=Tt(u,u===mr?Cr:0);if(S===0)return null;if(S&30||S&u.expiredLanes||d)d=eb(u,S);else{d=S;var E=Nt;Nt|=2;var $=VN();(mr!==u||Cr!==d)&&(Bl=null,Mm=hn()+500,Fh(u,d));do try{UY();break}catch(F){zN(u,F)}while(!0);t$(),W1.current=$,Nt=E,Bn!==null?d=0:(mr=null,Cr=0,d=nr)}if(d!==0){if(d===2&&(E=Fr(u),E!==0&&(S=E,d=F$(u,E))),d===1)throw g=A_,Fh(u,0),Ec(u,S),ki(u,hn()),g;if(d===6)Ec(u,S);else{if(E=u.current.alternate,!(S&30)&&!zY(E)&&(d=eb(u,S),d===2&&($=Fr(u),$!==0&&(S=$,d=F$(u,$))),d===1))throw g=A_,Fh(u,0),Ec(u,S),ki(u,hn()),g;switch(u.finishedWork=E,u.finishedLanes=S,d){case 0:case 1:throw Error(n(345));case 2:jh(u,Ai,Bl);break;case 3:if(Ec(u,S),(S&130023424)===S&&(d=L$+500-hn(),10<d)){if(Tt(u,0)!==0)break;if(E=u.suspendedLanes,(E&S)!==S){fi(),u.pingedLanes|=u.suspendedLanes&E;break}u.timeoutHandle=er(jh.bind(null,u,Ai,Bl),d);break}jh(u,Ai,Bl);break;case 4:if(Ec(u,S),(S&4194240)===S)break;for(d=u.eventTimes,E=-1;0<S;){var A=31-D(S);$=1<<A,A=d[A],A>E&&(E=A),S&=~$}if(S=E,S=hn()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*jY(S/1960))-S,10<S){u.timeoutHandle=er(jh.bind(null,u,Ai,Bl),S);break}jh(u,Ai,Bl);break;case 5:jh(u,Ai,Bl);break;default:throw Error(n(329))}}}return ki(u,hn()),u.callbackNode===g?FN.bind(null,u):null}function F$(u,d){var g=k_;return u.current.memoizedState.isDehydrated&&(Fh(u,d).flags|=256),u=eb(u,d),u!==2&&(d=Ai,Ai=g,d!==null&&j$(d)),u}function j$(u){Ai===null?Ai=u:Ai.push.apply(Ai,u)}function zY(u){for(var d=u;;){if(d.flags&16384){var g=d.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var S=0;S<g.length;S++){var E=g[S],$=E.getSnapshot;E=E.value;try{if(!is($(),E))return!1}catch{return!1}}}if(g=d.child,d.subtreeFlags&16384&&g!==null)g.return=d,d=g;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Ec(u,d){for(d&=~R$,d&=~Z1,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var g=31-D(d),S=1<<g;u[g]=-1,d&=~S}}function jN(u){if(Nt&6)throw Error(n(327));Im();var d=Tt(u,0);if(!(d&1))return ki(u,hn()),null;var g=eb(u,d);if(u.tag!==0&&g===2){var S=Fr(u);S!==0&&(d=S,g=F$(u,S))}if(g===1)throw g=A_,Fh(u,0),Ec(u,d),ki(u,hn()),g;if(g===6)throw Error(n(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,jh(u,Ai,Bl),ki(u,hn()),null}function z$(u,d){var g=Nt;Nt|=1;try{return u(d)}finally{Nt=g,Nt===0&&(Mm=hn()+500,M1&&_c())}}function Dh(u){Tc!==null&&Tc.tag===0&&!(Nt&6)&&Im();var d=Nt;Nt|=1;var g=Vs.transition,S=Rt;try{if(Vs.transition=null,Rt=1,u)return u()}finally{Rt=S,Vs.transition=g,Nt=d,!(Nt&6)&&_c()}}function V$(){ls=$m.current,pn($m)}function Fh(u,d){u.finishedWork=null,u.finishedLanes=0;var g=u.timeoutHandle;if(g!==-1&&(u.timeoutHandle=-1,Gn(g)),Bn!==null)for(g=Bn.return;g!==null;){var S=g;switch(YE(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&E1();break;case 3:Tm(),pn(Pi),pn(Vr),u$();break;case 5:a$(S);break;case 4:Tm();break;case 13:pn($n);break;case 19:pn($n);break;case 10:n$(S.type._context);break;case 22:case 23:V$()}g=g.return}if(mr=u,Bn=u=$c(u.current,null),Cr=ls=d,nr=0,A_=null,R$=Z1=Nh=0,Ai=k_=null,kh!==null){for(d=0;d<kh.length;d++)if(g=kh[d],S=g.interleaved,S!==null){g.interleaved=null;var E=S.next,$=g.pending;if($!==null){var A=$.next;$.next=E,S.next=A}g.pending=S}kh=null}return u}function zN(u,d){do{var g=Bn;try{if(t$(),D1.current=V1,F1){for(var S=Mn.memoizedState;S!==null;){var E=S.queue;E!==null&&(E.pending=null),S=S.next}F1=!1}if(Lh=0,fr=tr=Mn=null,$_=!1,M_=0,k$.current=null,g===null||g.return===null){nr=1,A_=d,Bn=null;break}e:{var $=u,A=g.return,F=g,G=d;if(d=Cr,F.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var ae=G,ve=F,Se=ve.tag;if(!(ve.mode&1)&&(Se===0||Se===11||Se===15)){var ye=ve.alternate;ye?(ve.updateQueue=ye.updateQueue,ve.memoizedState=ye.memoizedState,ve.lanes=ye.lanes):(ve.updateQueue=null,ve.memoizedState=null)}var Re=dN(A);if(Re!==null){Re.flags&=-257,hN(Re,A,F,$,d),Re.mode&1&&cN($,ae,d),d=Re,G=ae;var qe=d.updateQueue;if(qe===null){var Ye=new Set;Ye.add(G),d.updateQueue=Ye}else qe.add(G);break e}else{if(!(d&1)){cN($,ae,d),U$();break e}G=Error(n(426))}}else if(vn&&F.mode&1){var zn=dN(A);if(zn!==null){!(zn.flags&65536)&&(zn.flags|=256),hN(zn,A,F,$,d),QE(xm(G,F));break e}}$=G=xm(G,F),nr!==4&&(nr=2),k_===null?k_=[$]:k_.push($),$=A;do{switch($.tag){case 3:$.flags|=65536,d&=-d,$.lanes|=d;var Q=lN($,G,d);LL($,Q);break e;case 1:F=G;var W=$.type,ee=$.stateNode;if(!($.flags&128)&&(typeof W.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(Sc===null||!Sc.has(ee)))){$.flags|=65536,d&=-d,$.lanes|=d;var Ee=uN($,F,d);LL($,Ee);break e}}$=$.return}while($!==null)}GN(g)}catch(Qe){d=Qe,Bn===g&&g!==null&&(Bn=g=g.return);continue}break}while(!0)}function VN(){var u=W1.current;return W1.current=V1,u===null?V1:u}function U$(){(nr===0||nr===3||nr===2)&&(nr=4),mr===null||!(Nh&268435455)&&!(Z1&268435455)||Ec(mr,Cr)}function eb(u,d){var g=Nt;Nt|=2;var S=VN();(mr!==u||Cr!==d)&&(Bl=null,Fh(u,d));do try{VY();break}catch(E){zN(u,E)}while(!0);if(t$(),Nt=g,W1.current=S,Bn!==null)throw Error(n(261));return mr=null,Cr=0,nr}function VY(){for(;Bn!==null;)UN(Bn)}function UY(){for(;Bn!==null&&!mh();)UN(Bn)}function UN(u){var d=HN(u.alternate,u,ls);u.memoizedProps=u.pendingProps,d===null?GN(u):Bn=d,k$.current=null}function GN(u){var d=u;do{var g=d.alternate;if(u=d.return,d.flags&32768){if(g=LY(g,d),g!==null){g.flags&=32767,Bn=g;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{nr=6,Bn=null;return}}else if(g=RY(g,d,ls),g!==null){Bn=g;return}if(d=d.sibling,d!==null){Bn=d;return}Bn=d=u}while(d!==null);nr===0&&(nr=5)}function jh(u,d,g){var S=Rt,E=Vs.transition;try{Vs.transition=null,Rt=1,GY(u,d,g,S)}finally{Vs.transition=E,Rt=S}return null}function GY(u,d,g,S){do Im();while(Tc!==null);if(Nt&6)throw Error(n(327));g=u.finishedWork;var E=u.finishedLanes;if(g===null)return null;if(u.finishedWork=null,u.finishedLanes=0,g===u.current)throw Error(n(177));u.callbackNode=null,u.callbackPriority=0;var $=g.lanes|g.childLanes;if(An(u,$),u===mr&&(Bn=mr=null,Cr=0),!(g.subtreeFlags&2064)&&!(g.flags&2064)||Y1||(Y1=!0,WN(Ku,function(){return Im(),null})),$=(g.flags&15990)!==0,g.subtreeFlags&15990||$){$=Vs.transition,Vs.transition=null;var A=Rt;Rt=1;var F=Nt;Nt|=4,k$.current=null,DY(u,g),kN(g,u),Rs(st),Sh=!!Oe,st=Oe=null,u.current=g,FY(g),dn(),Nt=F,Rt=A,Vs.transition=$}else u.current=g;if(Y1&&(Y1=!1,Tc=u,K1=E),$=u.pendingLanes,$===0&&(Sc=null),El(g.stateNode),ki(u,hn()),d!==null)for(S=u.onRecoverableError,g=0;g<d.length;g++)E=d[g],S(E.value,{componentStack:E.stack,digest:E.digest});if(J1)throw J1=!1,u=N$,N$=null,u;return K1&1&&u.tag!==0&&Im(),$=u.pendingLanes,$&1?u===D$?R_++:(R_=0,D$=u):R_=0,_c(),null}function Im(){if(Tc!==null){var u=Qu(K1),d=Vs.transition,g=Rt;try{if(Vs.transition=null,Rt=16>u?16:u,Tc===null)var S=!1;else{if(u=Tc,Tc=null,K1=0,Nt&6)throw Error(n(331));var E=Nt;for(Nt|=4,Ue=u.current;Ue!==null;){var $=Ue,A=$.child;if(Ue.flags&16){var F=$.deletions;if(F!==null){for(var G=0;G<F.length;G++){var ae=F[G];for(Ue=ae;Ue!==null;){var ve=Ue;switch(ve.tag){case 0:case 11:case 15:O_(8,ve,$)}var Se=ve.child;if(Se!==null)Se.return=ve,Ue=Se;else for(;Ue!==null;){ve=Ue;var ye=ve.sibling,Re=ve.return;if(IN(ve),ve===ae){Ue=null;break}if(ye!==null){ye.return=Re,Ue=ye;break}Ue=Re}}}var qe=$.alternate;if(qe!==null){var Ye=qe.child;if(Ye!==null){qe.child=null;do{var zn=Ye.sibling;Ye.sibling=null,Ye=zn}while(Ye!==null)}}Ue=$}}if($.subtreeFlags&2064&&A!==null)A.return=$,Ue=A;else e:for(;Ue!==null;){if($=Ue,$.flags&2048)switch($.tag){case 0:case 11:case 15:O_(9,$,$.return)}var Q=$.sibling;if(Q!==null){Q.return=$.return,Ue=Q;break e}Ue=$.return}}var W=u.current;for(Ue=W;Ue!==null;){A=Ue;var ee=A.child;if(A.subtreeFlags&2064&&ee!==null)ee.return=A,Ue=ee;else e:for(A=W;Ue!==null;){if(F=Ue,F.flags&2048)try{switch(F.tag){case 0:case 11:case 15:H1(9,F)}}catch(Qe){kn(F,F.return,Qe)}if(F===A){Ue=null;break e}var Ee=F.sibling;if(Ee!==null){Ee.return=F.return,Ue=Ee;break e}Ue=F.return}}if(Nt=E,_c(),ui&&typeof ui.onPostCommitFiberRoot=="function")try{ui.onPostCommitFiberRoot(Un,u)}catch{}S=!0}return S}finally{Rt=g,Vs.transition=d}}return!1}function BN(u,d,g){d=xm(g,d),d=lN(u,d,1),u=vc(u,d,1),d=fi(),u!==null&&(Qi(u,1,d),ki(u,d))}function kn(u,d,g){if(u.tag===3)BN(u,u,g);else for(;d!==null;){if(d.tag===3){BN(d,u,g);break}else if(d.tag===1){var S=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Sc===null||!Sc.has(S))){u=xm(g,u),u=uN(d,u,1),d=vc(d,u,1),u=fi(),d!==null&&(Qi(d,1,u),ki(d,u));break}}d=d.return}}function BY(u,d,g){var S=u.pingCache;S!==null&&S.delete(d),d=fi(),u.pingedLanes|=u.suspendedLanes&g,mr===u&&(Cr&g)===g&&(nr===4||nr===3&&(Cr&130023424)===Cr&&500>hn()-L$?Fh(u,0):R$|=g),ki(u,d)}function qN(u,d){d===0&&(u.mode&1?(d=qt,qt<<=1,!(qt&130023424)&&(qt=4194304)):d=1);var g=fi();u=Vl(u,d),u!==null&&(Qi(u,d,g),ki(u,g))}function qY(u){var d=u.memoizedState,g=0;d!==null&&(g=d.retryLane),qN(u,g)}function HY(u,d){var g=0;switch(u.tag){case 13:var S=u.stateNode,E=u.memoizedState;E!==null&&(g=E.retryLane);break;case 19:S=u.stateNode;break;default:throw Error(n(314))}S!==null&&S.delete(d),qN(u,g)}var HN;HN=function(u,d,g){if(u!==null)if(u.memoizedProps!==d.pendingProps||Pi.current)Oi=!0;else{if(!(u.lanes&g)&&!(d.flags&128))return Oi=!1,kY(u,d,g);Oi=!!(u.flags&131072)}else Oi=!1,vn&&d.flags&1048576&&EL(d,P1,d.index);switch(d.lanes=0,d.tag){case 2:var S=d.type;B1(u,d),u=d.pendingProps;var E=ym(d,Vr.current);Sm(d,g),E=h$(null,d,S,u,E,g);var $=p$();return d.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Ci(S)?($=!0,$1(d)):$=!1,d.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,s$(d),E.updater=U1,d.stateNode=E,E._reactInternals=d,w$(d,S,u,g),d=T$(null,d,S,!0,$,g)):(d.tag=0,vn&&$&&JE(d),pi(null,d,E,g),d=d.child),d;case 16:S=d.elementType;e:{switch(B1(u,d),u=d.pendingProps,E=S._init,S=E(S._payload),d.type=S,E=d.tag=ZY(S),u=Eo(S,u),E){case 0:d=S$(null,d,S,u,g);break e;case 1:d=_N(null,d,S,u,g);break e;case 11:d=pN(null,d,S,u,g);break e;case 14:d=fN(null,d,S,Eo(S.type,u),g);break e}throw Error(n(306,S,""))}return d;case 0:return S=d.type,E=d.pendingProps,E=d.elementType===S?E:Eo(S,E),S$(u,d,S,E,g);case 1:return S=d.type,E=d.pendingProps,E=d.elementType===S?E:Eo(S,E),_N(u,d,S,E,g);case 3:e:{if(wN(d),u===null)throw Error(n(387));S=d.pendingProps,$=d.memoizedState,E=$.element,RL(u,d),L1(d,S,null,g);var A=d.memoizedState;if(S=A.element,$.isDehydrated)if($={element:S,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},d.updateQueue.baseState=$,d.memoizedState=$,d.flags&256){E=xm(Error(n(423)),d),d=vN(u,d,S,g,E);break e}else if(S!==E){E=xm(Error(n(424)),d),d=vN(u,d,S,g,E);break e}else for(as=Ea(d.stateNode.containerInfo.firstChild),os=d,vn=!0,xo=null,g=AL(d,null,S,g),d.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(wm(),S===E){d=Gl(u,d,g);break e}pi(u,d,S,g)}d=d.child}return d;case 5:return DL(d),u===null&&XE(d),S=d.type,E=d.pendingProps,$=u!==null?u.memoizedProps:null,A=E.children,bt(S,E)?A=null:$!==null&&bt(S,$)&&(d.flags|=32),gN(u,d),pi(u,d,A,g),d.child;case 6:return u===null&&XE(d),null;case 13:return bN(u,d,g);case 4:return o$(d,d.stateNode.containerInfo),S=d.pendingProps,u===null?d.child=vm(d,null,S,g):pi(u,d,S,g),d.child;case 11:return S=d.type,E=d.pendingProps,E=d.elementType===S?E:Eo(S,E),pN(u,d,S,E,g);case 7:return pi(u,d,d.pendingProps,g),d.child;case 8:return pi(u,d,d.pendingProps.children,g),d.child;case 12:return pi(u,d,d.pendingProps.children,g),d.child;case 10:e:{if(S=d.type._context,E=d.pendingProps,$=d.memoizedProps,A=E.value,on(A1,S._currentValue),S._currentValue=A,$!==null)if(is($.value,A)){if($.children===E.children&&!Pi.current){d=Gl(u,d,g);break e}}else for($=d.child,$!==null&&($.return=d);$!==null;){var F=$.dependencies;if(F!==null){A=$.child;for(var G=F.firstContext;G!==null;){if(G.context===S){if($.tag===1){G=Ul(-1,g&-g),G.tag=2;var ae=$.updateQueue;if(ae!==null){ae=ae.shared;var ve=ae.pending;ve===null?G.next=G:(G.next=ve.next,ve.next=G),ae.pending=G}}$.lanes|=g,G=$.alternate,G!==null&&(G.lanes|=g),r$($.return,g,d),F.lanes|=g;break}G=G.next}}else if($.tag===10)A=$.type===d.type?null:$.child;else if($.tag===18){if(A=$.return,A===null)throw Error(n(341));A.lanes|=g,F=A.alternate,F!==null&&(F.lanes|=g),r$(A,g,d),A=$.sibling}else A=$.child;if(A!==null)A.return=$;else for(A=$;A!==null;){if(A===d){A=null;break}if($=A.sibling,$!==null){$.return=A.return,A=$;break}A=A.return}$=A}pi(u,d,E.children,g),d=d.child}return d;case 9:return E=d.type,S=d.pendingProps.children,Sm(d,g),E=js(E),S=S(E),d.flags|=1,pi(u,d,S,g),d.child;case 14:return S=d.type,E=Eo(S,d.pendingProps),E=Eo(S.type,E),fN(u,d,S,E,g);case 15:return mN(u,d,d.type,d.pendingProps,g);case 17:return S=d.type,E=d.pendingProps,E=d.elementType===S?E:Eo(S,E),B1(u,d),d.tag=1,Ci(S)?(u=!0,$1(d)):u=!1,Sm(d,g),oN(d,S,E),w$(d,S,E,g),T$(null,d,S,!0,u,g);case 19:return TN(u,d,g);case 22:return yN(u,d,g)}throw Error(n(156,d.tag))};function WN(u,d){return Yu(u,d)}function WY(u,d,g,S){this.tag=u,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Us(u,d,g,S){return new WY(u,d,g,S)}function G$(u){return u=u.prototype,!(!u||!u.isReactComponent)}function ZY(u){if(typeof u=="function")return G$(u)?1:0;if(u!=null){if(u=u.$$typeof,u===$e)return 11;if(u===Et)return 14}return 2}function $c(u,d){var g=u.alternate;return g===null?(g=Us(u.tag,d,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g.alternate=u,u.alternate=g):(g.pendingProps=d,g.type=u.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=u.flags&14680064,g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue,d=u.dependencies,g.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g}function tb(u,d,g,S,E,$){var A=2;if(S=u,typeof u=="function")G$(u)&&(A=1);else if(typeof u=="string")A=5;else e:switch(u){case le:return zh(g.children,E,$,d);case ue:A=8,E|=8;break;case be:return u=Us(12,g,d,E|2),u.elementType=be,u.lanes=$,u;case je:return u=Us(13,g,d,E),u.elementType=je,u.lanes=$,u;case Me:return u=Us(19,g,d,E),u.elementType=Me,u.lanes=$,u;case Je:return nb(g,E,$,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case xe:A=10;break e;case _e:A=9;break e;case $e:A=11;break e;case Et:A=14;break e;case wt:A=16,S=null;break e}throw Error(n(130,u==null?u:typeof u,""))}return d=Us(A,g,d,E),d.elementType=u,d.type=S,d.lanes=$,d}function zh(u,d,g,S){return u=Us(7,u,S,d),u.lanes=g,u}function nb(u,d,g,S){return u=Us(22,u,S,d),u.elementType=Je,u.lanes=g,u.stateNode={isHidden:!1},u}function B$(u,d,g){return u=Us(6,u,null,d),u.lanes=g,u}function q$(u,d,g){return d=Us(4,u.children!==null?u.children:[],u.key,d),d.lanes=g,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function JY(u,d,g,S,E){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xu(0),this.expirationTimes=Xu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xu(0),this.identifierPrefix=S,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function H$(u,d,g,S,E,$,A,F,G){return u=new JY(u,d,g,F,G),d===1?(d=1,$===!0&&(d|=8)):d=0,$=Us(3,null,null,d),u.current=$,$.stateNode=u,$.memoizedState={element:S,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},s$($),u}function YY(u,d,g){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:S==null?null:""+S,children:u,containerInfo:d,implementation:g}}function ZN(u){if(!u)return gc;u=u._reactInternals;e:{if(Xi(u)!==u||u.tag!==1)throw Error(n(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Ci(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(u.tag===1){var g=u.type;if(Ci(g))return SL(u,g,d)}return d}function JN(u,d,g,S,E,$,A,F,G){return u=H$(g,S,!0,u,E,$,A,F,G),u.context=ZN(null),g=u.current,S=fi(),E=xc(g),$=Ul(S,E),$.callback=d??null,vc(g,$,E),u.current.lanes=E,Qi(u,E,S),ki(u,S),u}function rb(u,d,g,S){var E=d.current,$=fi(),A=xc(E);return g=ZN(g),d.context===null?d.context=g:d.pendingContext=g,d=Ul($,A),d.payload={element:u},S=S===void 0?null:S,S!==null&&(d.callback=S),u=vc(E,d,A),u!==null&&(Io(u,E,A,$),R1(u,E,A)),A}function ib(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function YN(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var g=u.retryLane;u.retryLane=g!==0&&g<d?g:d}}function W$(u,d){YN(u,d),(u=u.alternate)&&YN(u,d)}function KY(){return null}var KN=typeof reportError=="function"?reportError:function(u){console.error(u)};function Z$(u){this._internalRoot=u}sb.prototype.render=Z$.prototype.render=function(u){var d=this._internalRoot;if(d===null)throw Error(n(409));rb(u,d,null,null)},sb.prototype.unmount=Z$.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var d=u.containerInfo;Dh(function(){rb(null,u,null,null)}),d[Zt]=null}};function sb(u){this._internalRoot=u}sb.prototype.unstable_scheduleHydration=function(u){if(u){var d=Yf();u={blockedOn:null,target:u,priority:d};for(var g=0;g<Qn.length&&d!==0&&d<Qn[g].priority;g++);Qn.splice(g,0,u),g===0&&Kf(u)}};function J$(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function ob(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function XN(){}function XY(u,d,g,S,E){if(E){if(typeof S=="function"){var $=S;S=function(){var ae=ib(A);$.call(ae)}}var A=JN(d,S,u,0,null,!1,!1,"",XN);return u._reactRootContainer=A,u[Zt]=A.current,hc(u.nodeType===8?u.parentNode:u),Dh(),A}for(;E=u.lastChild;)u.removeChild(E);if(typeof S=="function"){var F=S;S=function(){var ae=ib(G);F.call(ae)}}var G=H$(u,0,!1,null,null,!1,!1,"",XN);return u._reactRootContainer=G,u[Zt]=G.current,hc(u.nodeType===8?u.parentNode:u),Dh(function(){rb(d,G,g,S)}),G}function ab(u,d,g,S,E){var $=g._reactRootContainer;if($){var A=$;if(typeof E=="function"){var F=E;E=function(){var G=ib(A);F.call(G)}}rb(d,A,u,E)}else A=XY(g,d,u,E,S);return ib(A)}Zf=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var g=Ve(d.pendingLanes);g!==0&&(wo(d,g|1),ki(d,hn()),!(Nt&6)&&(Mm=hn()+500,_c()))}break;case 13:Dh(function(){var S=Vl(u,1);if(S!==null){var E=fi();Io(S,u,1,E)}}),W$(u,1)}},$l=function(u){if(u.tag===13){var d=Vl(u,134217728);if(d!==null){var g=fi();Io(d,u,134217728,g)}W$(u,134217728)}},Jf=function(u){if(u.tag===13){var d=xc(u),g=Vl(u,d);if(g!==null){var S=fi();Io(g,u,d,S)}W$(u,d)}},Yf=function(){return Rt},_h=function(u,d){var g=Rt;try{return Rt=u,d()}finally{Rt=g}},Wu=function(u,d,g){switch(d){case"input":if(bl(u,g),d=g.name,g.type==="radio"&&d!=null){for(g=u;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<g.length;d++){var S=g[d];if(S!==u&&S.form===u.form){var E=fm(S);if(!E)throw Error(n(90));ha(S),bl(S,E)}}}break;case"textarea":Af(u,g);break;case"select":d=g.value,d!=null&&Ki(u,!!g.multiple,d,!1)}},jf=z$,zf=Dh;var QY={usingClientEntryPoint:!1,Events:[Nl,Dl,fm,Df,Ff,z$]},L_={findFiberByHostInstance:Ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eK={bundleType:L_.bundleType,version:L_.version,rendererPackageName:L_.rendererPackageName,rendererConfig:L_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=Gf(u),u===null?null:u.stateNode},findFiberByHostInstance:L_.findFiberByHostInstance||KY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lb.isDisabled&&lb.supportsFiber)try{Un=lb.inject(eK),ui=lb}catch{}}return Ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QY,Ri.createPortal=function(u,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!J$(d))throw Error(n(200));return YY(u,d,null,g)},Ri.createRoot=function(u,d){if(!J$(u))throw Error(n(299));var g=!1,S="",E=KN;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(S=d.identifierPrefix),d.onRecoverableError!==void 0&&(E=d.onRecoverableError)),d=H$(u,1,!1,null,null,g,!1,S,E),u[Zt]=d.current,hc(u.nodeType===8?u.parentNode:u),new Z$(d)},Ri.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=Gf(d),u=u===null?null:u.stateNode,u},Ri.flushSync=function(u){return Dh(u)},Ri.hydrate=function(u,d,g){if(!ob(d))throw Error(n(200));return ab(null,u,d,!0,g)},Ri.hydrateRoot=function(u,d,g){if(!J$(u))throw Error(n(405));var S=g!=null&&g.hydratedSources||null,E=!1,$="",A=KN;if(g!=null&&(g.unstable_strictMode===!0&&(E=!0),g.identifierPrefix!==void 0&&($=g.identifierPrefix),g.onRecoverableError!==void 0&&(A=g.onRecoverableError)),d=JN(d,null,u,1,g??null,E,!1,$,A),u[Zt]=d.current,hc(u),S)for(u=0;u<S.length;u++)g=S[u],E=g._getVersion,E=E(g._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[g,E]:d.mutableSourceEagerHydrationData.push(g,E);return new sb(d)},Ri.render=function(u,d,g){if(!ob(d))throw Error(n(200));return ab(null,u,d,!1,g)},Ri.unmountComponentAtNode=function(u){if(!ob(u))throw Error(n(40));return u._reactRootContainer?(Dh(function(){ab(null,null,u,!1,function(){u._reactRootContainer=null,u[Zt]=null})}),!0):!1},Ri.unstable_batchedUpdates=z$,Ri.unstable_renderSubtreeIntoContainer=function(u,d,g,S){if(!ob(g))throw Error(n(200));if(u==null||u._reactInternals===void 0)throw Error(n(38));return ab(u,d,g,!1,S)},Ri.version="18.3.1-next-f1338f8080-20240426",Ri}var oD;function Gz(){if(oD)return X$.exports;oD=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),X$.exports=aK(),X$.exports}var aD;function lK(){if(aD)return ub;aD=1;var e=Gz();return ub.createRoot=e.createRoot,ub.hydrateRoot=e.hydrateRoot,ub}var uK=lK(),Ke=RA();const q2=Uz(Ke);function Bz(e,t){const n=Ke.useRef(t);Ke.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}var cK=Gz();const dK=1;function hK(e){return Object.freeze({__version:dK,map:e})}function LA(e,t){return Object.freeze({...e,...t})}const qz=Ke.createContext(null),NA=qz.Provider;function lx(){const e=Ke.useContext(qz);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function Hz(e){function t(n,r){const{instance:i,context:s}=e(n).current;return Ke.useImperativeHandle(r,()=>i),n.children==null?null:q2.createElement(NA,{value:s},n.children)}return Ke.forwardRef(t)}function pK(e){function t(n,r){const[i,s]=Ke.useState(!1),{instance:o}=e(n,s).current;Ke.useImperativeHandle(r,()=>o),Ke.useEffect(function(){i&&o.update()},[o,i,n.children]);const a=o._contentNode;return a?cK.createPortal(n.children,a):null}return Ke.forwardRef(t)}function fK(e){function t(n,r){const{instance:i}=e(n).current;return Ke.useImperativeHandle(r,()=>i),null}return Ke.forwardRef(t)}function mK(e){return function(n){const r=lx(),i=e(n,r),{instance:s}=i.current,o=Ke.useRef(n.position),{position:a}=n;return Ke.useEffect(function(){return s.addTo(r.map),function(){s.remove()}},[r.map,s]),Ke.useEffect(function(){a!=null&&a!==o.current&&(s.setPosition(a),o.current=a)},[s,a]),i}}function Wz(e,t){const n=Ke.useRef();Ke.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function DA(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function yK(e,t){return function(r,i){const s=lx(),o=e(DA(r,s),s);return Bz(s.map,r.attribution),Wz(o.current,r.eventHandlers),t(o.current,s,r,i),o}}var lw={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var gK=lw.exports,lD;function _K(){return lD||(lD=1,function(e,t){(function(n,r){r(t)})(gK,function(n){var r="1.9.4";function i(c){var y,v,x,P;for(v=1,x=arguments.length;v<x;v++){P=arguments[v];for(y in P)c[y]=P[y]}return c}var s=Object.create||function(){function c(){}return function(y){return c.prototype=y,new c}}();function o(c,y){var v=Array.prototype.slice;if(c.bind)return c.bind.apply(c,v.call(arguments,1));var x=v.call(arguments,2);return function(){return c.apply(y,x.length?x.concat(v.call(arguments)):arguments)}}var a=0;function h(c){return"_leaflet_id"in c||(c._leaflet_id=++a),c._leaflet_id}function f(c,y,v){var x,P,R,V;return V=function(){x=!1,P&&(R.apply(v,P),P=!1)},R=function(){x?P=arguments:(c.apply(v,arguments),setTimeout(V,y),x=!0)},R}function _(c,y,v){var x=y[1],P=y[0],R=x-P;return c===x&&v?c:((c-P)%R+R)%R+P}function w(){return!1}function b(c,y){if(y===!1)return c;var v=Math.pow(10,y===void 0?6:y);return Math.round(c*v)/v}function T(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function M(c){return T(c).split(/\s+/)}function I(c,y){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?s(c.options):{});for(var v in y)c.options[v]=y[v];return c.options}function C(c,y,v){var x=[];for(var P in c)x.push(encodeURIComponent(v?P.toUpperCase():P)+"="+encodeURIComponent(c[P]));return(!y||y.indexOf("?")===-1?"?":"&")+x.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function j(c,y){return c.replace(N,function(v,x){var P=y[x];if(P===void 0)throw new Error("No value provided for variable "+v);return typeof P=="function"&&(P=P(y)),P})}var z=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function U(c,y){for(var v=0;v<c.length;v++)if(c[v]===y)return v;return-1}var K="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function J(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var le=0;function ue(c){var y=+new Date,v=Math.max(0,16-(y-le));return le=y+v,window.setTimeout(c,v)}var be=window.requestAnimationFrame||J("RequestAnimationFrame")||ue,xe=window.cancelAnimationFrame||J("CancelAnimationFrame")||J("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function _e(c,y,v){if(v&&be===ue)c.call(y);else return be.call(window,o(c,y))}function $e(c){c&&xe.call(window,c)}var je={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:h,throttle:f,wrapNum:_,falseFn:w,formatNum:b,trim:T,splitWords:M,setOptions:I,getParamString:C,template:j,isArray:z,indexOf:U,emptyImageUrl:K,requestFn:be,cancelFn:xe,requestAnimFrame:_e,cancelAnimFrame:$e};function Me(){}Me.extend=function(c){var y=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},v=y.__super__=this.prototype,x=s(v);x.constructor=y,y.prototype=x;for(var P in this)Object.prototype.hasOwnProperty.call(this,P)&&P!=="prototype"&&P!=="__super__"&&(y[P]=this[P]);return c.statics&&i(y,c.statics),c.includes&&(Et(c.includes),i.apply(null,[x].concat(c.includes))),i(x,c),delete x.statics,delete x.includes,x.options&&(x.options=v.options?s(v.options):{},i(x.options,c.options)),x._initHooks=[],x.callInitHooks=function(){if(!this._initHooksCalled){v.callInitHooks&&v.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,V=x._initHooks.length;R<V;R++)x._initHooks[R].call(this)}},y},Me.include=function(c){var y=this.prototype.options;return i(this.prototype,c),c.options&&(this.prototype.options=y,this.mergeOptions(c.options)),this},Me.mergeOptions=function(c){return i(this.prototype.options,c),this},Me.addInitHook=function(c){var y=Array.prototype.slice.call(arguments,1),v=typeof c=="function"?c:function(){this[c].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(v),this};function Et(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=z(c)?c:[c];for(var y=0;y<c.length;y++)c[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var wt={on:function(c,y,v){if(typeof c=="object")for(var x in c)this._on(x,c[x],y);else{c=M(c);for(var P=0,R=c.length;P<R;P++)this._on(c[P],y,v)}return this},off:function(c,y,v){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var x in c)this._off(x,c[x],y);else{c=M(c);for(var P=arguments.length===1,R=0,V=c.length;R<V;R++)P?this._off(c[R]):this._off(c[R],y,v)}return this},_on:function(c,y,v,x){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(c,y,v)===!1){v===this&&(v=void 0);var P={fn:y,ctx:v};x&&(P.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(P)}},_off:function(c,y,v){var x,P,R;if(this._events&&(x=this._events[c],!!x)){if(arguments.length===1){if(this._firingCount)for(P=0,R=x.length;P<R;P++)x[P].fn=w;delete this._events[c];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var V=this._listens(c,y,v);if(V!==!1){var X=x[V];this._firingCount&&(X.fn=w,this._events[c]=x=x.slice()),x.splice(V,1)}}},fire:function(c,y,v){if(!this.listens(c,v))return this;var x=i({},y,{type:c,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var P=this._events[c];if(P){this._firingCount=this._firingCount+1||1;for(var R=0,V=P.length;R<V;R++){var X=P[R],oe=X.fn;X.once&&this.off(c,oe,X.ctx),oe.call(X.ctx||this,x)}this._firingCount--}}return v&&this._propagateEvent(x),this},listens:function(c,y,v,x){typeof c!="string"&&console.warn('"string" type argument expected');var P=y;typeof y!="function"&&(x=!!y,P=void 0,v=void 0);var R=this._events&&this._events[c];if(R&&R.length&&this._listens(c,P,v)!==!1)return!0;if(x){for(var V in this._eventParents)if(this._eventParents[V].listens(c,y,v,x))return!0}return!1},_listens:function(c,y,v){if(!this._events)return!1;var x=this._events[c]||[];if(!y)return!!x.length;v===this&&(v=void 0);for(var P=0,R=x.length;P<R;P++)if(x[P].fn===y&&x[P].ctx===v)return P;return!1},once:function(c,y,v){if(typeof c=="object")for(var x in c)this._on(x,c[x],y,!0);else{c=M(c);for(var P=0,R=c.length;P<R;P++)this._on(c[P],y,v,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[h(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[h(c)],this},_propagateEvent:function(c){for(var y in this._eventParents)this._eventParents[y].fire(c.type,i({layer:c.target,propagatedFrom:c.target},c),!0)}};wt.addEventListener=wt.on,wt.removeEventListener=wt.clearAllEventListeners=wt.off,wt.addOneTimeEventListener=wt.once,wt.fireEvent=wt.fire,wt.hasEventListeners=wt.listens;var Je=Me.extend(wt);function re(c,y,v){this.x=v?Math.round(c):c,this.y=v?Math.round(y):y}var Ne=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};re.prototype={clone:function(){return new re(this.x,this.y)},add:function(c){return this.clone()._add(he(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(he(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new re(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new re(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ne(this.x),this.y=Ne(this.y),this},distanceTo:function(c){c=he(c);var y=c.x-this.x,v=c.y-this.y;return Math.sqrt(y*y+v*v)},equals:function(c){return c=he(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=he(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function he(c,y,v){return c instanceof re?c:z(c)?new re(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new re(c.x,c.y):new re(c,y,v)}function H(c,y){if(c)for(var v=y?[c,y]:c,x=0,P=v.length;x<P;x++)this.extend(v[x])}H.prototype={extend:function(c){var y,v;if(!c)return this;if(c instanceof re||typeof c[0]=="number"||"x"in c)y=v=he(c);else if(c=ce(c),y=c.min,v=c.max,!y||!v)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=v.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(v.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(v.y,this.max.y)),this},getCenter:function(c){return he((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return he(this.min.x,this.max.y)},getTopRight:function(){return he(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var y,v;return typeof c[0]=="number"||c instanceof re?c=he(c):c=ce(c),c instanceof H?(y=c.min,v=c.max):y=v=c,y.x>=this.min.x&&v.x<=this.max.x&&y.y>=this.min.y&&v.y<=this.max.y},intersects:function(c){c=ce(c);var y=this.min,v=this.max,x=c.min,P=c.max,R=P.x>=y.x&&x.x<=v.x,V=P.y>=y.y&&x.y<=v.y;return R&&V},overlaps:function(c){c=ce(c);var y=this.min,v=this.max,x=c.min,P=c.max,R=P.x>y.x&&x.x<v.x,V=P.y>y.y&&x.y<v.y;return R&&V},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var y=this.min,v=this.max,x=Math.abs(y.x-v.x)*c,P=Math.abs(y.y-v.y)*c;return ce(he(y.x-x,y.y-P),he(v.x+x,v.y+P))},equals:function(c){return c?(c=ce(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function ce(c,y){return!c||c instanceof H?c:new H(c,y)}function nt(c,y){if(c)for(var v=y?[c,y]:c,x=0,P=v.length;x<P;x++)this.extend(v[x])}nt.prototype={extend:function(c){var y=this._southWest,v=this._northEast,x,P;if(c instanceof We)x=c,P=c;else if(c instanceof nt){if(x=c._southWest,P=c._northEast,!x||!P)return this}else return c?this.extend(Le(c)||Xe(c)):this;return!y&&!v?(this._southWest=new We(x.lat,x.lng),this._northEast=new We(P.lat,P.lng)):(y.lat=Math.min(x.lat,y.lat),y.lng=Math.min(x.lng,y.lng),v.lat=Math.max(P.lat,v.lat),v.lng=Math.max(P.lng,v.lng)),this},pad:function(c){var y=this._southWest,v=this._northEast,x=Math.abs(y.lat-v.lat)*c,P=Math.abs(y.lng-v.lng)*c;return new nt(new We(y.lat-x,y.lng-P),new We(v.lat+x,v.lng+P))},getCenter:function(){return new We((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new We(this.getNorth(),this.getWest())},getSouthEast:function(){return new We(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof We||"lat"in c?c=Le(c):c=Xe(c);var y=this._southWest,v=this._northEast,x,P;return c instanceof nt?(x=c.getSouthWest(),P=c.getNorthEast()):x=P=c,x.lat>=y.lat&&P.lat<=v.lat&&x.lng>=y.lng&&P.lng<=v.lng},intersects:function(c){c=Xe(c);var y=this._southWest,v=this._northEast,x=c.getSouthWest(),P=c.getNorthEast(),R=P.lat>=y.lat&&x.lat<=v.lat,V=P.lng>=y.lng&&x.lng<=v.lng;return R&&V},overlaps:function(c){c=Xe(c);var y=this._southWest,v=this._northEast,x=c.getSouthWest(),P=c.getNorthEast(),R=P.lat>y.lat&&x.lat<v.lat,V=P.lng>y.lng&&x.lng<v.lng;return R&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,y){return c?(c=Xe(c),this._southWest.equals(c.getSouthWest(),y)&&this._northEast.equals(c.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Xe(c,y){return c instanceof nt?c:new nt(c,y)}function We(c,y,v){if(isNaN(c)||isNaN(y))throw new Error("Invalid LatLng object: ("+c+", "+y+")");this.lat=+c,this.lng=+y,v!==void 0&&(this.alt=+v)}We.prototype={equals:function(c,y){if(!c)return!1;c=Le(c);var v=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return v<=(y===void 0?1e-9:y)},toString:function(c){return"LatLng("+b(this.lat,c)+", "+b(this.lng,c)+")"},distanceTo:function(c){return $t.distance(this,Le(c))},wrap:function(){return $t.wrapLatLng(this)},toBounds:function(c){var y=180*c/40075017,v=y/Math.cos(Math.PI/180*this.lat);return Xe([this.lat-y,this.lng-v],[this.lat+y,this.lng+v])},clone:function(){return new We(this.lat,this.lng,this.alt)}};function Le(c,y,v){return c instanceof We?c:z(c)&&typeof c[0]!="object"?c.length===3?new We(c[0],c[1],c[2]):c.length===2?new We(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new We(c.lat,"lng"in c?c.lng:c.lon,c.alt):y===void 0?null:new We(c,y,v)}var Pt={latLngToPoint:function(c,y){var v=this.projection.project(c),x=this.scale(y);return this.transformation._transform(v,x)},pointToLatLng:function(c,y){var v=this.scale(y),x=this.transformation.untransform(c,v);return this.projection.unproject(x)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var y=this.projection.bounds,v=this.scale(c),x=this.transformation.transform(y.min,v),P=this.transformation.transform(y.max,v);return new H(x,P)},infinite:!1,wrapLatLng:function(c){var y=this.wrapLng?_(c.lng,this.wrapLng,!0):c.lng,v=this.wrapLat?_(c.lat,this.wrapLat,!0):c.lat,x=c.alt;return new We(v,y,x)},wrapLatLngBounds:function(c){var y=c.getCenter(),v=this.wrapLatLng(y),x=y.lat-v.lat,P=y.lng-v.lng;if(x===0&&P===0)return c;var R=c.getSouthWest(),V=c.getNorthEast(),X=new We(R.lat-x,R.lng-P),oe=new We(V.lat-x,V.lng-P);return new nt(X,oe)}},$t=i({},Pt,{wrapLng:[-180,180],R:6371e3,distance:function(c,y){var v=Math.PI/180,x=c.lat*v,P=y.lat*v,R=Math.sin((y.lat-c.lat)*v/2),V=Math.sin((y.lng-c.lng)*v/2),X=R*R+Math.cos(x)*Math.cos(P)*V*V,oe=2*Math.atan2(Math.sqrt(X),Math.sqrt(1-X));return this.R*oe}}),Kt=6378137,Kn={R:Kt,MAX_LATITUDE:85.0511287798,project:function(c){var y=Math.PI/180,v=this.MAX_LATITUDE,x=Math.max(Math.min(v,c.lat),-v),P=Math.sin(x*y);return new re(this.R*c.lng*y,this.R*Math.log((1+P)/(1-P))/2)},unproject:function(c){var y=180/Math.PI;return new We((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*y,c.x*y/this.R)},bounds:function(){var c=Kt*Math.PI;return new H([-c,-c],[c,c])}()};function da(c,y,v,x){if(z(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=y,this._c=v,this._d=x}da.prototype={transform:function(c,y){return this._transform(c.clone(),y)},_transform:function(c,y){return y=y||1,c.x=y*(this._a*c.x+this._b),c.y=y*(this._c*c.y+this._d),c},untransform:function(c,y){return y=y||1,new re((c.x/y-this._b)/this._a,(c.y/y-this._d)/this._c)}};function ha(c,y,v,x){return new da(c,y,v,x)}var pa=i({},$t,{code:"EPSG:3857",projection:Kn,transformation:function(){var c=.5/(Math.PI*Kn.R);return ha(c,.5,-c,.5)}()}),ih=i({},pa,{code:"EPSG:900913"});function sh(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function oh(c,y){var v="",x,P,R,V,X,oe;for(x=0,R=c.length;x<R;x++){for(X=c[x],P=0,V=X.length;P<V;P++)oe=X[P],v+=(P?"L":"M")+oe.x+" "+oe.y;v+=y?ze.svg?"z":"x":""}return v||"M0 0"}var bl=document.documentElement.style,Sl="ActiveXObject"in window,ah=Sl&&!document.addEventListener,fa="msLaunchUri"in navigator&&!("documentMode"in document),Ki=Ie("webkit"),Tl=Ie("android"),Ei=Ie("android 2")||Ie("android 3"),Af=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),kf=Tl&&Ie("Google")&&Af<537&&!("AudioNode"in window),Bu=!!window.opera,qu=!fa&&Ie("chrome"),xl=Ie("gecko")&&!Ki&&!Bu&&!Sl,Rf=!qu&&Ie("safari"),ma=Ie("phantom"),ya="OTransition"in bl,Kg=navigator.platform.indexOf("Win")===0,lh=Sl&&"transition"in bl,Hu="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ei,Lf="MozPerspective"in bl,uh=!window.L_DISABLE_3D&&(lh||Hu||Lf)&&!ya&&!ma,yo=typeof orientation<"u"||Ie("mobile"),ch=yo&&Ki,dh=yo&&Hu,Wu=!window.PointerEvent&&window.MSPointerEvent,go=!!(window.PointerEvent||Wu),_o="ontouchstart"in window||!!window.TouchEvent,Nf=!window.L_NO_TOUCH&&(_o||go),Df=yo&&Bu,Ff=yo&&xl,jf=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,zf=function(){var c=!1;try{var y=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",w,y),window.removeEventListener("testPassiveEventSupport",w,y)}catch{}return c}(),hh=function(){return!!document.createElement("canvas").getContext}(),ie=!!(document.createElementNS&&sh("svg").createSVGRect),jt=!!ie&&function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ps=!ie&&function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var y=c.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch{return!1}}(),Xn=navigator.platform.indexOf("Mac")===0,Zu=navigator.platform.indexOf("Linux")===0;function Ie(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var ze={ie:Sl,ielt9:ah,edge:fa,webkit:Ki,android:Tl,android23:Ei,androidStock:kf,opera:Bu,chrome:qu,gecko:xl,safari:Rf,phantom:ma,opera12:ya,win:Kg,ie3d:lh,webkit3d:Hu,gecko3d:Lf,any3d:uh,mobile:yo,mobileWebkit:ch,mobileWebkit3d:dh,msPointer:Wu,pointer:go,touch:Nf,touchNative:_o,mobileOpera:Df,mobileGecko:Ff,retina:jf,passiveEvents:zf,canvas:hh,svg:ie,vml:Ps,inlineSvg:jt,mac:Xn,linux:Zu},sn=ze.msPointer?"MSPointerDown":"pointerdown",Cs=ze.msPointer?"MSPointerMove":"pointermove",Vf=ze.msPointer?"MSPointerUp":"pointerup",$i=ze.msPointer?"MSPointerCancel":"pointercancel",Ju={touchstart:sn,touchmove:Cs,touchend:Vf,touchcancel:$i},Xi={touchstart:hn,touchmove:dn,touchend:dn,touchcancel:dn},it={},ph=!1;function Uf(c,y,v){return y==="touchstart"&&mh(),Xi[y]?(v=Xi[y].bind(this,v),c.addEventListener(Ju[y],v,!1),v):(console.warn("wrong event specified:",y),w)}function Gf(c,y,v){if(!Ju[y]){console.warn("wrong event specified:",y);return}c.removeEventListener(Ju[y],v,!1)}function Bf(c){it[c.pointerId]=c}function Yu(c){it[c.pointerId]&&(it[c.pointerId]=c)}function fh(c){delete it[c.pointerId]}function mh(){ph||(document.addEventListener(sn,Bf,!0),document.addEventListener(Cs,Yu,!0),document.addEventListener(Vf,fh,!0),document.addEventListener($i,fh,!0),ph=!0)}function dn(c,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var v in it)y.touches.push(it[v]);y.changedTouches=[y],c(y)}}function hn(c,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&En(y),dn(c,y)}function qf(c){var y={},v,x;for(x in c)v=c[x],y[x]=v&&v.bind?v.bind(c):v;return c=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var yh=200;function Hf(c,y){c.addEventListener("dblclick",y);var v=0,x;function P(R){if(R.detail!==1){x=R.detail;return}if(!(R.pointerType==="mouse"||R.sourceCapabilities&&!R.sourceCapabilities.firesTouchEvents)){var V=Il(R);if(!(V.some(function(oe){return oe instanceof HTMLLabelElement&&oe.attributes.for})&&!V.some(function(oe){return oe instanceof HTMLInputElement||oe instanceof HTMLSelectElement}))){var X=Date.now();X-v<=yh?(x++,x===2&&y(qf(R))):x=1,v=X}}}return c.addEventListener("click",P),{dblclick:y,simDblclick:P}}function Ku(c,y){c.removeEventListener("dblclick",y.dblclick),c.removeEventListener("click",y.simDblclick)}var gh=Xu(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ga=Xu(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Un=ga==="webkitTransition"||ga==="OTransition"?ga+"End":"transitionend";function ui(c){return typeof c=="string"?document.getElementById(c):c}function El(c,y){var v=c.style[y]||c.currentStyle&&c.currentStyle[y];if((!v||v==="auto")&&document.defaultView){var x=document.defaultView.getComputedStyle(c,null);v=x?x[y]:null}return v==="auto"?null:v}function D(c,y,v){var x=document.createElement(c);return x.className=y||"",v&&v.appendChild(x),x}function se(c){var y=c.parentNode;y&&y.removeChild(c)}function we(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function et(c){var y=c.parentNode;y&&y.lastChild!==c&&y.appendChild(c)}function It(c){var y=c.parentNode;y&&y.firstChild!==c&&y.insertBefore(c,y.firstChild)}function qt(c,y){if(c.classList!==void 0)return c.classList.contains(y);var v=Wf(c);return v.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(v)}function Ve(c,y){if(c.classList!==void 0)for(var v=M(y),x=0,P=v.length;x<P;x++)c.classList.add(v[x]);else if(!qt(c,y)){var R=Wf(c);Xg(c,(R?R+" ":"")+y)}}function Tt(c,y){c.classList!==void 0?c.classList.remove(y):Xg(c,T((" "+Wf(c)+" ").replace(" "+y+" "," ")))}function Xg(c,y){c.className.baseVal===void 0?c.className=y:c.className.baseVal=y}function Wf(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function Fr(c,y){"opacity"in c.style?c.style.opacity=y:"filter"in c.style&&n1(c,y)}function n1(c,y){var v=!1,x="DXImageTransform.Microsoft.Alpha";try{v=c.filters.item(x)}catch{if(y===1)return}y=Math.round(y*100),v?(v.Enabled=y!==100,v.Opacity=y):c.style.filter+=" progid:"+x+"(opacity="+y+")"}function Xu(c){for(var y=document.documentElement.style,v=0;v<c.length;v++)if(c[v]in y)return c[v];return!1}function Qi(c,y,v){var x=y||new re(0,0);c.style[gh]=(ze.ie3d?"translate("+x.x+"px,"+x.y+"px)":"translate3d("+x.x+"px,"+x.y+"px,0)")+(v?" scale("+v+")":"")}function An(c,y){c._leaflet_pos=y,ze.any3d?Qi(c,y):(c.style.left=y.x+"px",c.style.top=y.y+"px")}function wo(c){return c._leaflet_pos||new re(0,0)}var Rt,Qu,Zf;if("onselectstart"in document)Rt=function(){ht(window,"selectstart",En)},Qu=function(){Qt(window,"selectstart",En)};else{var $l=Xu(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Rt=function(){if($l){var c=document.documentElement.style;Zf=c[$l],c[$l]="none"}},Qu=function(){$l&&(document.documentElement.style[$l]=Zf,Zf=void 0)}}function Jf(){ht(window,"dragstart",En)}function Yf(){Qt(window,"dragstart",En)}var _h,wh;function ec(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(es(),_h=c,wh=c.style.outlineStyle,c.style.outlineStyle="none",ht(window,"keydown",es))}function es(){_h&&(_h.style.outlineStyle=wh,_h=void 0,wh=void 0,Qt(window,"keydown",es))}function vo(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function Os(c){var y=c.getBoundingClientRect();return{x:y.width/c.offsetWidth||1,y:y.height/c.offsetHeight||1,boundingClientRect:y}}var vh={__proto__:null,TRANSFORM:gh,TRANSITION:ga,TRANSITION_END:Un,get:ui,getStyle:El,create:D,remove:se,empty:we,toFront:et,toBack:It,hasClass:qt,addClass:Ve,removeClass:Tt,setClass:Xg,getClass:Wf,setOpacity:Fr,testProp:Xu,setTransform:Qi,setPosition:An,getPosition:wo,get disableTextSelection(){return Rt},get enableTextSelection(){return Qu},disableImageDrag:Jf,enableImageDrag:Yf,preventOutline:ec,restoreOutline:es,getSizedParentNode:vo,getScale:Os};function ht(c,y,v,x){if(y&&typeof y=="object")for(var P in y)e_(c,P,y[P],v);else{y=M(y);for(var R=0,V=y.length;R<V;R++)e_(c,y[R],v,x)}return this}var Qn="_leaflet_events";function Qt(c,y,v,x){if(arguments.length===1)Qg(c),delete c[Qn];else if(y&&typeof y=="object")for(var P in y)Kf(c,P,y[P],v);else if(y=M(y),arguments.length===2)Qg(c,function(X){return U(y,X)!==-1});else for(var R=0,V=y.length;R<V;R++)Kf(c,y[R],v,x);return this}function Qg(c,y){for(var v in c[Qn]){var x=v.split(/\d/)[0];(!y||y(x))&&Kf(c,x,null,null,v)}}var Ml={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function e_(c,y,v,x){var P=y+h(v)+(x?"_"+h(x):"");if(c[Qn]&&c[Qn][P])return this;var R=function(X){return v.call(x||c,X||window.event)},V=R;!ze.touchNative&&ze.pointer&&y.indexOf("touch")===0?R=Uf(c,y,R):ze.touch&&y==="dblclick"?R=Hf(c,R):"addEventListener"in c?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?c.addEventListener(Ml[y]||y,R,ze.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(R=function(X){X=X||window.event,Th(c,X)&&V(X)},c.addEventListener(Ml[y],R,!1)):c.addEventListener(y,V,!1):c.attachEvent("on"+y,R),c[Qn]=c[Qn]||{},c[Qn][P]=R}function Kf(c,y,v,x,P){P=P||y+h(v)+(x?"_"+h(x):"");var R=c[Qn]&&c[Qn][P];if(!R)return this;!ze.touchNative&&ze.pointer&&y.indexOf("touch")===0?Gf(c,y,R):ze.touch&&y==="dblclick"?Ku(c,R):"removeEventListener"in c?c.removeEventListener(Ml[y]||y,R,!1):c.detachEvent("on"+y,R),c[Qn][P]=null}function As(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function Xf(c){return e_(c,"wheel",As),this}function bh(c){return ht(c,"mousedown touchstart dblclick contextmenu",As),c._leaflet_disable_click=!0,this}function En(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function ts(c){return En(c),As(c),this}function Il(c){if(c.composedPath)return c.composedPath();for(var y=[],v=c.target;v;)y.push(v),v=v.parentNode;return y}function Sh(c,y){if(!y)return new re(c.clientX,c.clientY);var v=Os(y),x=v.boundingClientRect;return new re((c.clientX-x.left)/v.x-y.clientLeft,(c.clientY-x.top)/v.y-y.clientTop)}var OE=ze.linux&&ze.chrome?window.devicePixelRatio:ze.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function r1(c){return ze.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/OE:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function Th(c,y){var v=y.relatedTarget;if(!v)return!0;try{for(;v&&v!==c;)v=v.parentNode}catch{return!1}return v!==c}var Qf={__proto__:null,on:ht,off:Qt,stopPropagation:As,disableScrollPropagation:Xf,disableClickPropagation:bh,preventDefault:En,stop:ts,getPropagationPath:Il,getMousePosition:Sh,getWheelDelta:r1,isExternalTarget:Th,addListener:ht,removeListener:Qt},em=Je.extend({run:function(c,y,v,x){this.stop(),this._el=c,this._inProgress=!0,this._duration=v||.25,this._easeOutPower=1/Math.max(x||.5,.2),this._startPos=wo(c),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=_e(this._animate,this),this._step()},_step:function(c){var y=+new Date-this._startTime,v=this._duration*1e3;y<v?this._runFrame(this._easeOut(y/v),c):(this._runFrame(1),this._complete())},_runFrame:function(c,y){var v=this._startPos.add(this._offset.multiplyBy(c));y&&v._round(),An(this._el,v),this.fire("step")},_complete:function(){$e(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),Ot=Je.extend({options:{crs:pa,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,y){y=I(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(Le(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ga&&ze.any3d&&!ze.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ht(this._proxy,Un,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,y,v){if(y=y===void 0?this._zoom:this._limitZoom(y),c=this._limitCenter(Le(c),y,this.options.maxBounds),v=v||{},this._stop(),this._loaded&&!v.reset&&v!==!0){v.animate!==void 0&&(v.zoom=i({animate:v.animate},v.zoom),v.pan=i({animate:v.animate,duration:v.duration},v.pan));var x=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,y,v.zoom):this._tryAnimatedPan(c,v.pan);if(x)return clearTimeout(this._sizeTimer),this}return this._resetView(c,y,v.pan&&v.pan.noMoveStart),this},setZoom:function(c,y){return this._loaded?this.setView(this.getCenter(),c,{zoom:y}):(this._zoom=c,this)},zoomIn:function(c,y){return c=c||(ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,y)},zoomOut:function(c,y){return c=c||(ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,y)},setZoomAround:function(c,y,v){var x=this.getZoomScale(y),P=this.getSize().divideBy(2),R=c instanceof re?c:this.latLngToContainerPoint(c),V=R.subtract(P).multiplyBy(1-1/x),X=this.containerPointToLatLng(P.add(V));return this.setView(X,y,{zoom:v})},_getBoundsCenterZoom:function(c,y){y=y||{},c=c.getBounds?c.getBounds():Xe(c);var v=he(y.paddingTopLeft||y.padding||[0,0]),x=he(y.paddingBottomRight||y.padding||[0,0]),P=this.getBoundsZoom(c,!1,v.add(x));if(P=typeof y.maxZoom=="number"?Math.min(y.maxZoom,P):P,P===1/0)return{center:c.getCenter(),zoom:P};var R=x.subtract(v).divideBy(2),V=this.project(c.getSouthWest(),P),X=this.project(c.getNorthEast(),P),oe=this.unproject(V.add(X).divideBy(2).add(R),P);return{center:oe,zoom:P}},fitBounds:function(c,y){if(c=Xe(c),!c.isValid())throw new Error("Bounds are not valid.");var v=this._getBoundsCenterZoom(c,y);return this.setView(v.center,v.zoom,y)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,y){return this.setView(c,this._zoom,{pan:y})},panBy:function(c,y){if(c=he(c).round(),y=y||{},!c.x&&!c.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new em,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){Ve(this._mapPane,"leaflet-pan-anim");var v=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,v,y.duration||.25,y.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,y,v){if(v=v||{},v.animate===!1||!ze.any3d)return this.setView(c,y,v);this._stop();var x=this.project(this.getCenter()),P=this.project(c),R=this.getSize(),V=this._zoom;c=Le(c),y=y===void 0?V:y;var X=Math.max(R.x,R.y),oe=X*this.getZoomScale(V,y),me=P.distanceTo(x)||1,Oe=1.42,st=Oe*Oe;function bt(Zt){var mc=Zt?-1:1,qE=Zt?oe:X,HE=oe*oe-X*X+mc*st*st*me*me,Ll=2*qE*st*me,Nl=HE/Ll,Dl=Math.sqrt(Nl*Nl+1)-Nl,fm=Dl<1e-9?-18:Math.log(Dl);return fm}function er(Zt){return(Math.exp(Zt)-Math.exp(-Zt))/2}function Gn(Zt){return(Math.exp(Zt)+Math.exp(-Zt))/2}function hi(Zt){return er(Zt)/Gn(Zt)}var zr=bt(0);function pc(Zt){return X*(Gn(zr)/Gn(zr+Oe*Zt))}function b_(Zt){return X*(Gn(zr)*hi(zr+Oe*Zt)-er(zr))/st}function Ea(Zt){return 1-Math.pow(1-Zt,1.5)}var x1=Date.now(),Rl=(bt(1)-zr)/Oe,Ns=v.duration?1e3*v.duration:1e3*Rl*.8;function fc(){var Zt=(Date.now()-x1)/Ns,mc=Ea(Zt)*Rl;Zt<=1?(this._flyToFrame=_e(fc,this),this._move(this.unproject(x.add(P.subtract(x).multiplyBy(b_(mc)/me)),V),this.getScaleZoom(X/pc(mc),V),{flyTo:!0})):this._move(c,y)._moveEnd(!0)}return this._moveStart(!0,v.noMoveStart),fc.call(this),this},flyToBounds:function(c,y){var v=this._getBoundsCenterZoom(c,y);return this.flyTo(v.center,v.zoom,y)},setMaxBounds:function(c){return c=Xe(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var y=this.options.minZoom;return this.options.minZoom=c,this._loaded&&y!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var y=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&y!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,y){this._enforcingBounds=!0;var v=this.getCenter(),x=this._limitCenter(v,this._zoom,Xe(c));return v.equals(x)||this.panTo(x,y),this._enforcingBounds=!1,this},panInside:function(c,y){y=y||{};var v=he(y.paddingTopLeft||y.padding||[0,0]),x=he(y.paddingBottomRight||y.padding||[0,0]),P=this.project(this.getCenter()),R=this.project(c),V=this.getPixelBounds(),X=ce([V.min.add(v),V.max.subtract(x)]),oe=X.getSize();if(!X.contains(R)){this._enforcingBounds=!0;var me=R.subtract(X.getCenter()),Oe=X.extend(R).getSize().subtract(oe);P.x+=me.x<0?-Oe.x:Oe.x,P.y+=me.y<0?-Oe.y:Oe.y,this.panTo(this.unproject(P),y),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=i({animate:!1,pan:!0},c===!0?{animate:!0}:c);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var v=this.getSize(),x=y.divideBy(2).round(),P=v.divideBy(2).round(),R=x.subtract(P);return!R.x&&!R.y?this:(c.animate&&c.pan?this.panBy(R):(c.pan&&this._rawPanBy(R),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:v}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=i({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=o(this._handleGeolocationResponse,this),v=o(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,v,c):navigator.geolocation.getCurrentPosition(y,v,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var y=c.code,v=c.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+v+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var y=c.coords.latitude,v=c.coords.longitude,x=new We(y,v),P=x.toBounds(c.coords.accuracy*2),R=this._locateOptions;if(R.setView){var V=this.getBoundsZoom(P);this.setView(x,R.maxZoom?Math.min(V,R.maxZoom):V)}var X={latlng:x,bounds:P,timestamp:c.timestamp};for(var oe in c.coords)typeof c.coords[oe]=="number"&&(X[oe]=c.coords[oe]);this.fire("locationfound",X)}},addHandler:function(c,y){if(!y)return this;var v=this[c]=new y(this);return this._handlers.push(v),this.options[c]&&v.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),se(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&($e(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)se(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,y){var v="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),x=D("div",v,y||this._mapPane);return c&&(this._panes[c]=x),x},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),y=this.unproject(c.getBottomLeft()),v=this.unproject(c.getTopRight());return new nt(y,v)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,y,v){c=Xe(c),v=he(v||[0,0]);var x=this.getZoom()||0,P=this.getMinZoom(),R=this.getMaxZoom(),V=c.getNorthWest(),X=c.getSouthEast(),oe=this.getSize().subtract(v),me=ce(this.project(X,x),this.project(V,x)).getSize(),Oe=ze.any3d?this.options.zoomSnap:1,st=oe.x/me.x,bt=oe.y/me.y,er=y?Math.max(st,bt):Math.min(st,bt);return x=this.getScaleZoom(er,x),Oe&&(x=Math.round(x/(Oe/100))*(Oe/100),x=y?Math.ceil(x/Oe)*Oe:Math.floor(x/Oe)*Oe),Math.max(P,Math.min(R,x))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new re(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,y){var v=this._getTopLeftPoint(c,y);return new H(v,v.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,y){var v=this.options.crs;return y=y===void 0?this._zoom:y,v.scale(c)/v.scale(y)},getScaleZoom:function(c,y){var v=this.options.crs;y=y===void 0?this._zoom:y;var x=v.zoom(c*v.scale(y));return isNaN(x)?1/0:x},project:function(c,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(Le(c),y)},unproject:function(c,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(he(c),y)},layerPointToLatLng:function(c){var y=he(c).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(c){var y=this.project(Le(c))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(Le(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(Xe(c))},distance:function(c,y){return this.options.crs.distance(Le(c),Le(y))},containerPointToLayerPoint:function(c){return he(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return he(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var y=this.containerPointToLayerPoint(he(c));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Le(c)))},mouseEventToContainerPoint:function(c){return Sh(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var y=this._container=ui(c);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ht(y,"scroll",this._onScroll,this),this._containerId=h(y)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&ze.any3d,Ve(c,"leaflet-container"+(ze.touch?" leaflet-touch":"")+(ze.retina?" leaflet-retina":"")+(ze.ielt9?" leaflet-oldie":"")+(ze.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=El(c,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),An(this._mapPane,new re(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ve(c.markerPane,"leaflet-zoom-hide"),Ve(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,y,v){An(this._mapPane,new re(0,0));var x=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var P=this._zoom!==y;this._moveStart(P,v)._move(c,y)._moveEnd(P),this.fire("viewreset"),x&&this.fire("load")},_moveStart:function(c,y){return c&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(c,y,v,x){y===void 0&&(y=this._zoom);var P=this._zoom!==y;return this._zoom=y,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),x?v&&v.pinch&&this.fire("zoom",v):((P||v&&v.pinch)&&this.fire("zoom",v),this.fire("move",v)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return $e(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){An(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[h(this._container)]=this;var y=c?Qt:ht;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),ze.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){$e(this._resizeRequest),this._resizeRequest=_e(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,y){for(var v=[],x,P=y==="mouseout"||y==="mouseover",R=c.target||c.srcElement,V=!1;R;){if(x=this._targets[h(R)],x&&(y==="click"||y==="preclick")&&this._draggableMoved(x)){V=!0;break}if(x&&x.listens(y,!0)&&(P&&!Th(R,c)||(v.push(x),P))||R===this._container)break;R=R.parentNode}return!v.length&&!V&&!P&&this.listens(y,!0)&&(v=[this]),v},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var y=c.target||c.srcElement;if(!(!this._loaded||y._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(y))){var v=c.type;v==="mousedown"&&ec(y),this._fireDOMEvent(c,v)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,y,v){if(c.type==="click"){var x=i({},c);x.type="preclick",this._fireDOMEvent(x,x.type,v)}var P=this._findEventTargets(c,y);if(v){for(var R=[],V=0;V<v.length;V++)v[V].listens(y,!0)&&R.push(v[V]);P=R.concat(P)}if(P.length){y==="contextmenu"&&En(c);var X=P[0],oe={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var me=X.getLatLng&&(!X._radius||X._radius<=10);oe.containerPoint=me?this.latLngToContainerPoint(X.getLatLng()):this.mouseEventToContainerPoint(c),oe.layerPoint=this.containerPointToLayerPoint(oe.containerPoint),oe.latlng=me?X.getLatLng():this.layerPointToLatLng(oe.layerPoint)}for(V=0;V<P.length;V++)if(P[V].fire(y,oe,!0),oe.originalEvent._stopped||P[V].options.bubblingMouseEvents===!1&&U(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,y=this._handlers.length;c<y;c++)this._handlers[c].disable()},whenReady:function(c,y){return this._loaded?c.call(y||this,{target:this}):this.on("load",c,y),this},_getMapPanePos:function(){return wo(this._mapPane)||new re(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,y){var v=c&&y!==void 0?this._getNewPixelOrigin(c,y):this.getPixelOrigin();return v.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,y){var v=this.getSize()._divideBy(2);return this.project(c,y)._subtract(v)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,y,v){var x=this._getNewPixelOrigin(v,y);return this.project(c,y)._subtract(x)},_latLngBoundsToNewLayerBounds:function(c,y,v){var x=this._getNewPixelOrigin(v,y);return ce([this.project(c.getSouthWest(),y)._subtract(x),this.project(c.getNorthWest(),y)._subtract(x),this.project(c.getSouthEast(),y)._subtract(x),this.project(c.getNorthEast(),y)._subtract(x)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,y,v){if(!v)return c;var x=this.project(c,y),P=this.getSize().divideBy(2),R=new H(x.subtract(P),x.add(P)),V=this._getBoundsOffset(R,v,y);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?c:this.unproject(x.add(V),y)},_limitOffset:function(c,y){if(!y)return c;var v=this.getPixelBounds(),x=new H(v.min.add(c),v.max.add(c));return c.add(this._getBoundsOffset(x,y))},_getBoundsOffset:function(c,y,v){var x=ce(this.project(y.getNorthEast(),v),this.project(y.getSouthWest(),v)),P=x.min.subtract(c.min),R=x.max.subtract(c.max),V=this._rebound(P.x,-R.x),X=this._rebound(P.y,-R.y);return new re(V,X)},_rebound:function(c,y){return c+y>0?Math.round(c-y)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(y))},_limitZoom:function(c){var y=this.getMinZoom(),v=this.getMaxZoom(),x=ze.any3d?this.options.zoomSnap:1;return x&&(c=Math.round(c/x)*x),Math.max(y,Math.min(v,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,y){var v=this._getCenterOffset(c)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(v)?!1:(this.panBy(v,y),!0)},_createAnimProxy:function(){var c=this._proxy=D("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(y){var v=gh,x=this._proxy.style[v];Qi(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),x===this._proxy.style[v]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){se(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),y=this.getZoom();Qi(this._proxy,this.project(c,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,y,v){if(this._animatingZoom)return!0;if(v=v||{},!this._zoomAnimated||v.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var x=this.getZoomScale(y),P=this._getCenterOffset(c)._divideBy(1-1/x);return v.animate!==!0&&!this.getSize().contains(P)?!1:(_e(function(){this._moveStart(!0,v.noMoveStart||!1)._animateZoom(c,y,!0)},this),!0)},_animateZoom:function(c,y,v,x){this._mapPane&&(v&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=y,Ve(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:y,noUpdate:x}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function _a(c,y){return new Ot(c,y)}var ci=Me.extend({options:{position:"topright"},initialize:function(c){I(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var y=this._map;return y&&y.removeControl(this),this.options.position=c,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var y=this._container=this.onAdd(c),v=this.getPosition(),x=c._controlCorners[v];return Ve(y,"leaflet-control"),v.indexOf("bottom")!==-1?x.insertBefore(y,x.firstChild):x.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(se(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),wa=function(c){return new ci(c)};Ot.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},y="leaflet-",v=this._controlContainer=D("div",y+"control-container",this._container);function x(P,R){var V=y+P+" "+y+R;c[P+R]=D("div",V,v)}x("top","left"),x("top","right"),x("bottom","left"),x("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)se(this._controlCorners[c]);se(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var t_=ci.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,y,v,x){return v<x?-1:x<v?1:0}},initialize:function(c,y,v){I(this,v),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var x in c)this._addLayer(c[x],x);for(x in y)this._addLayer(y[x],x,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return ci.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,y){return this._addLayer(c,y),this._map?this._update():this},addOverlay:function(c,y){return this._addLayer(c,y,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var y=this._getLayer(h(c));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){Ve(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(Ve(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):Tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",y=this._container=D("div",c),v=this.options.collapsed;y.setAttribute("aria-haspopup",!0),bh(y),Xf(y);var x=this._section=D("section",c+"-list");v&&(this._map.on("click",this.collapse,this),ht(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var P=this._layersLink=D("a",c+"-toggle",y);P.href="#",P.title="Layers",P.setAttribute("role","button"),ht(P,{keydown:function(R){R.keyCode===13&&this._expandSafely()},click:function(R){En(R),this._expandSafely()}},this),v||this.expand(),this._baseLayersList=D("div",c+"-base",x),this._separator=D("div",c+"-separator",x),this._overlaysList=D("div",c+"-overlays",x),y.appendChild(x)},_getLayer:function(c){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&h(this._layers[y].layer)===c)return this._layers[y]},_addLayer:function(c,y,v){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:y,overlay:v}),this.options.sortLayers&&this._layers.sort(o(function(x,P){return this.options.sortFunction(x.layer,P.layer,x.name,P.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;we(this._baseLayersList),we(this._overlaysList),this._layerControlInputs=[];var c,y,v,x,P=0;for(v=0;v<this._layers.length;v++)x=this._layers[v],this._addItem(x),y=y||x.overlay,c=c||!x.overlay,P+=x.overlay?0:1;return this.options.hideSingleBase&&(c=c&&P>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=y&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var y=this._getLayer(h(c.target)),v=y.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;v&&this._map.fire(v,y)},_createRadioElement:function(c,y){var v='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(y?' checked="checked"':"")+"/>",x=document.createElement("div");return x.innerHTML=v,x.firstChild},_addItem:function(c){var y=document.createElement("label"),v=this._map.hasLayer(c.layer),x;c.overlay?(x=document.createElement("input"),x.type="checkbox",x.className="leaflet-control-layers-selector",x.defaultChecked=v):x=this._createRadioElement("leaflet-base-layers_"+h(this),v),this._layerControlInputs.push(x),x.layerId=h(c.layer),ht(x,"click",this._onInputClick,this);var P=document.createElement("span");P.innerHTML=" "+c.name;var R=document.createElement("span");y.appendChild(R),R.appendChild(x),R.appendChild(P);var V=c.overlay?this._overlaysList:this._baseLayersList;return V.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,y,v,x=[],P=[];this._handlingClick=!0;for(var R=c.length-1;R>=0;R--)y=c[R],v=this._getLayer(y.layerId).layer,y.checked?x.push(v):y.checked||P.push(v);for(R=0;R<P.length;R++)this._map.hasLayer(P[R])&&this._map.removeLayer(P[R]);for(R=0;R<x.length;R++)this._map.hasLayer(x[R])||this._map.addLayer(x[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,y,v,x=this._map.getZoom(),P=c.length-1;P>=0;P--)y=c[P],v=this._getLayer(y.layerId).layer,y.disabled=v.options.minZoom!==void 0&&x<v.options.minZoom||v.options.maxZoom!==void 0&&x>v.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,ht(c,"click",En),this.expand();var y=this;setTimeout(function(){Qt(c,"click",En),y._preventClick=!1})}}),tm=function(c,y,v){return new t_(c,y,v)},tc=ci.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var y="leaflet-control-zoom",v=D("div",y+" leaflet-bar"),x=this.options;return this._zoomInButton=this._createButton(x.zoomInText,x.zoomInTitle,y+"-in",v,this._zoomIn),this._zoomOutButton=this._createButton(x.zoomOutText,x.zoomOutTitle,y+"-out",v,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),v},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,y,v,x,P){var R=D("a",v,x);return R.innerHTML=c,R.href="#",R.title=y,R.setAttribute("role","button"),R.setAttribute("aria-label",y),bh(R),ht(R,"click",ts),ht(R,"click",P,this),ht(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var c=this._map,y="leaflet-disabled";Tt(this._zoomInButton,y),Tt(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(Ve(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(Ve(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ot.mergeOptions({zoomControl:!0}),Ot.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new tc,this.addControl(this.zoomControl))});var i1=function(c){return new tc(c)},jr=ci.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var y="leaflet-control-scale",v=D("div",y),x=this.options;return this._addScales(x,y+"-line",v),c.on(x.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),v},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,y,v){c.metric&&(this._mScale=D("div",y,v)),c.imperial&&(this._iScale=D("div",y,v))},_update:function(){var c=this._map,y=c.getSize().y/2,v=c.distance(c.containerPointToLatLng([0,y]),c.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(v)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var y=this._getRoundNum(c),v=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,v,y/c)},_updateImperial:function(c){var y=c*3.2808399,v,x,P;y>5280?(v=y/5280,x=this._getRoundNum(v),this._updateScale(this._iScale,x+" mi",x/v)):(P=this._getRoundNum(y),this._updateScale(this._iScale,P+" ft",P/y))},_updateScale:function(c,y,v){c.style.width=Math.round(this.options.maxWidth*v)+"px",c.innerHTML=y},_getRoundNum:function(c){var y=Math.pow(10,(Math.floor(c)+"").length-1),v=c/y;return v=v>=10?10:v>=5?5:v>=3?3:v>=2?2:1,y*v}}),nc=function(c){return new jr(c)},n_='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Pl=ci.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ze.inlineSvg?n_+" ":"")+"Leaflet</a>"},initialize:function(c){I(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=D("div","leaflet-control-attribution"),bh(this._container);for(var y in c._layers)c._layers[y].getAttribution&&this.addAttribution(c._layers[y].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var y in this._attributions)this._attributions[y]&&c.push(y);var v=[];this.options.prefix&&v.push(this.options.prefix),c.length&&v.push(c.join(", ")),this._container.innerHTML=v.join(' <span aria-hidden="true">|</span> ')}}});Ot.mergeOptions({attributionControl:!0}),Ot.addInitHook(function(){this.options.attributionControl&&new Pl().addTo(this)});var AE=function(c){return new Pl(c)};ci.Layers=t_,ci.Zoom=tc,ci.Scale=jr,ci.Attribution=Pl,wa.layers=tm,wa.zoom=i1,wa.scale=nc,wa.attribution=AE;var Mi=Me.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Mi.addTo=function(c,y){return c.addHandler(y,this),this};var r_={Events:wt},rc=ze.touch?"touchstart mousedown":"mousedown",ns=Je.extend({options:{clickTolerance:3},initialize:function(c,y,v,x){I(this,x),this._element=c,this._dragStartTarget=y||c,this._preventOutline=v},enable:function(){this._enabled||(ht(this._dragStartTarget,rc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ns._dragging===this&&this.finishDrag(!0),Qt(this._dragStartTarget,rc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!qt(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){ns._dragging===this&&this.finishDrag();return}if(!(ns._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(ns._dragging=this,this._preventOutline&&ec(this._element),Jf(),Rt(),!this._moving)){this.fire("down");var y=c.touches?c.touches[0]:c,v=vo(this._element);this._startPoint=new re(y.clientX,y.clientY),this._startPos=wo(this._element),this._parentScale=Os(v);var x=c.type==="mousedown";ht(document,x?"mousemove":"touchmove",this._onMove,this),ht(document,x?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var y=c.touches&&c.touches.length===1?c.touches[0]:c,v=new re(y.clientX,y.clientY)._subtract(this._startPoint);!v.x&&!v.y||Math.abs(v.x)+Math.abs(v.y)<this.options.clickTolerance||(v.x/=this._parentScale.x,v.y/=this._parentScale.y,En(c),this._moved||(this.fire("dragstart"),this._moved=!0,Ve(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ve(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(v),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),An(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){Tt(document.body,"leaflet-dragging"),this._lastTarget&&(Tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Qt(document,"mousemove touchmove",this._onMove,this),Qt(document,"mouseup touchend touchcancel",this._onUp,this),Yf(),Qu();var y=this._moved&&this._moving;this._moving=!1,ns._dragging=!1,y&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function i_(c,y,v){var x,P=[1,4,2,8],R,V,X,oe,me,Oe,st,bt;for(R=0,Oe=c.length;R<Oe;R++)c[R]._code=Cl(c[R],y);for(X=0;X<4;X++){for(st=P[X],x=[],R=0,Oe=c.length,V=Oe-1;R<Oe;V=R++)oe=c[R],me=c[V],oe._code&st?me._code&st||(bt=rm(me,oe,st,y,v),bt._code=Cl(bt,y),x.push(bt)):(me._code&st&&(bt=rm(me,oe,st,y,v),bt._code=Cl(bt,y),x.push(bt)),x.push(oe));c=x}return c}function s1(c,y){var v,x,P,R,V,X,oe,me,Oe;if(!c||c.length===0)throw new Error("latlngs not passed");Ii(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var st=Le([0,0]),bt=Xe(c),er=bt.getNorthWest().distanceTo(bt.getSouthWest())*bt.getNorthEast().distanceTo(bt.getNorthWest());er<1700&&(st=s_(c));var Gn=c.length,hi=[];for(v=0;v<Gn;v++){var zr=Le(c[v]);hi.push(y.project(Le([zr.lat-st.lat,zr.lng-st.lng])))}for(X=oe=me=0,v=0,x=Gn-1;v<Gn;x=v++)P=hi[v],R=hi[x],V=P.y*R.x-R.y*P.x,oe+=(P.x+R.x)*V,me+=(P.y+R.y)*V,X+=V*3;X===0?Oe=hi[0]:Oe=[oe/X,me/X];var pc=y.unproject(he(Oe));return Le([pc.lat+st.lat,pc.lng+st.lng])}function s_(c){for(var y=0,v=0,x=0,P=0;P<c.length;P++){var R=Le(c[P]);y+=R.lat,v+=R.lng,x++}return Le([y/x,v/x])}var kE={__proto__:null,clipPolygon:i_,polygonCenter:s1,centroid:s_};function nm(c,y){if(!y||!c.length)return c.slice();var v=y*y;return c=NE(c,v),c=LE(c,v),c}function o1(c,y,v){return Math.sqrt(Ol(c,y,v,!0))}function RE(c,y,v){return Ol(c,y,v)}function LE(c,y){var v=c.length,x=typeof Uint8Array<"u"?Uint8Array:Array,P=new x(v);P[0]=P[v-1]=1,o_(c,P,y,0,v-1);var R,V=[];for(R=0;R<v;R++)P[R]&&V.push(c[R]);return V}function o_(c,y,v,x,P){var R=0,V,X,oe;for(X=x+1;X<=P-1;X++)oe=Ol(c[X],c[x],c[P],!0),oe>R&&(V=X,R=oe);R>v&&(y[V]=1,o_(c,y,v,x,V),o_(c,y,v,V,P))}function NE(c,y){for(var v=[c[0]],x=1,P=0,R=c.length;x<R;x++)DE(c[x],c[P])>y&&(v.push(c[x]),P=x);return P<R-1&&v.push(c[R-1]),v}var a_;function a1(c,y,v,x,P){var R=x?a_:Cl(c,v),V=Cl(y,v),X,oe,me;for(a_=V;;){if(!(R|V))return[c,y];if(R&V)return!1;X=R||V,oe=rm(c,y,X,v,P),me=Cl(oe,v),X===R?(c=oe,R=me):(y=oe,V=me)}}function rm(c,y,v,x,P){var R=y.x-c.x,V=y.y-c.y,X=x.min,oe=x.max,me,Oe;return v&8?(me=c.x+R*(oe.y-c.y)/V,Oe=oe.y):v&4?(me=c.x+R*(X.y-c.y)/V,Oe=X.y):v&2?(me=oe.x,Oe=c.y+V*(oe.x-c.x)/R):v&1&&(me=X.x,Oe=c.y+V*(X.x-c.x)/R),new re(me,Oe,P)}function Cl(c,y){var v=0;return c.x<y.min.x?v|=1:c.x>y.max.x&&(v|=2),c.y<y.min.y?v|=4:c.y>y.max.y&&(v|=8),v}function DE(c,y){var v=y.x-c.x,x=y.y-c.y;return v*v+x*x}function Ol(c,y,v,x){var P=y.x,R=y.y,V=v.x-P,X=v.y-R,oe=V*V+X*X,me;return oe>0&&(me=((c.x-P)*V+(c.y-R)*X)/oe,me>1?(P=v.x,R=v.y):me>0&&(P+=V*me,R+=X*me)),V=c.x-P,X=c.y-R,x?V*V+X*X:new re(P,R)}function Ii(c){return!z(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function l1(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ii(c)}function u1(c,y){var v,x,P,R,V,X,oe,me;if(!c||c.length===0)throw new Error("latlngs not passed");Ii(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var Oe=Le([0,0]),st=Xe(c),bt=st.getNorthWest().distanceTo(st.getSouthWest())*st.getNorthEast().distanceTo(st.getNorthWest());bt<1700&&(Oe=s_(c));var er=c.length,Gn=[];for(v=0;v<er;v++){var hi=Le(c[v]);Gn.push(y.project(Le([hi.lat-Oe.lat,hi.lng-Oe.lng])))}for(v=0,x=0;v<er-1;v++)x+=Gn[v].distanceTo(Gn[v+1])/2;if(x===0)me=Gn[0];else for(v=0,R=0;v<er-1;v++)if(V=Gn[v],X=Gn[v+1],P=V.distanceTo(X),R+=P,R>x){oe=(R-x)/P,me=[X.x-oe*(X.x-V.x),X.y-oe*(X.y-V.y)];break}var zr=y.unproject(he(me));return Le([zr.lat+Oe.lat,zr.lng+Oe.lng])}var c1={__proto__:null,simplify:nm,pointToSegmentDistance:o1,closestPointOnSegment:RE,clipSegment:a1,_getEdgeIntersection:rm,_getBitCode:Cl,_sqClosestPointOnSegment:Ol,isFlat:Ii,_flat:l1,polylineCenter:u1},l_={project:function(c){return new re(c.lng,c.lat)},unproject:function(c){return new We(c.y,c.x)},bounds:new H([-180,-90],[180,90])},u_={R:6378137,R_MINOR:6356752314245179e-9,bounds:new H([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var y=Math.PI/180,v=this.R,x=c.lat*y,P=this.R_MINOR/v,R=Math.sqrt(1-P*P),V=R*Math.sin(x),X=Math.tan(Math.PI/4-x/2)/Math.pow((1-V)/(1+V),R/2);return x=-v*Math.log(Math.max(X,1e-10)),new re(c.lng*y*v,x)},unproject:function(c){for(var y=180/Math.PI,v=this.R,x=this.R_MINOR/v,P=Math.sqrt(1-x*x),R=Math.exp(-c.y/v),V=Math.PI/2-2*Math.atan(R),X=0,oe=.1,me;X<15&&Math.abs(oe)>1e-7;X++)me=P*Math.sin(V),me=Math.pow((1-me)/(1+me),P/2),oe=Math.PI/2-2*Math.atan(R*me)-V,V+=oe;return new We(V*y,c.x*y/v)}},FE={__proto__:null,LonLat:l_,Mercator:u_,SphericalMercator:Kn},jE=i({},$t,{code:"EPSG:3395",projection:u_,transformation:function(){var c=.5/(Math.PI*u_.R);return ha(c,.5,-c,.5)}()}),d1=i({},$t,{code:"EPSG:4326",projection:l_,transformation:ha(1/180,1,-1/180,.5)}),zE=i({},Pt,{projection:l_,transformation:ha(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,y){var v=y.lng-c.lng,x=y.lat-c.lat;return Math.sqrt(v*v+x*x)},infinite:!0});Pt.Earth=$t,Pt.EPSG3395=jE,Pt.EPSG3857=pa,Pt.EPSG900913=ih,Pt.EPSG4326=d1,Pt.Simple=zE;var rs=Je.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[h(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[h(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var y=c.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var v=this.getEvents();y.on(v,this),this.once("remove",function(){y.off(v,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});Ot.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var y=h(c);return this._layers[y]?this:(this._layers[y]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var y=h(c);return this._layers[y]?(this._loaded&&c.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return h(c)in this._layers},eachLayer:function(c,y){for(var v in this._layers)c.call(y,this._layers[v]);return this},_addLayers:function(c){c=c?z(c)?c:[c]:[];for(var y=0,v=c.length;y<v;y++)this.addLayer(c[y])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[h(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var y=h(c);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,y=-1/0,v=this._getZoomSpan();for(var x in this._zoomBoundLayers){var P=this._zoomBoundLayers[x].options;c=P.minZoom===void 0?c:Math.min(c,P.minZoom),y=P.maxZoom===void 0?y:Math.max(y,P.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=c===1/0?void 0:c,v!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var va=rs.extend({initialize:function(c,y){I(this,y),this._layers={};var v,x;if(c)for(v=0,x=c.length;v<x;v++)this.addLayer(c[v])},addLayer:function(c){var y=this.getLayerId(c);return this._layers[y]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var y=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(c){var y=typeof c=="number"?c:this.getLayerId(c);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var y=Array.prototype.slice.call(arguments,1),v,x;for(v in this._layers)x=this._layers[v],x[c]&&x[c].apply(x,y);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,y){for(var v in this._layers)c.call(y,this._layers[v]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return h(c)}}),xh=function(c,y){return new va(c,y)},bo=va.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),va.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),va.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new nt;for(var y in this._layers){var v=this._layers[y];c.extend(v.getBounds?v.getBounds():v.getLatLng())}return c}}),h1=function(c,y){return new bo(c,y)},Al=Me.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){I(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,y){var v=this._getIconUrl(c);if(!v){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var x=this._createImg(v,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(x,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),x},_setIconStyles:function(c,y){var v=this.options,x=v[y+"Size"];typeof x=="number"&&(x=[x,x]);var P=he(x),R=he(y==="shadow"&&v.shadowAnchor||v.iconAnchor||P&&P.divideBy(2,!0));c.className="leaflet-marker-"+y+" "+(v.className||""),R&&(c.style.marginLeft=-R.x+"px",c.style.marginTop=-R.y+"px"),P&&(c.style.width=P.x+"px",c.style.height=P.y+"px")},_createImg:function(c,y){return y=y||document.createElement("img"),y.src=c,y},_getIconUrl:function(c){return ze.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function p1(c){return new Al(c)}var ic=Al.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof ic.imagePath!="string"&&(ic.imagePath=this._detectIconPath()),(this.options.imagePath||ic.imagePath)+Al.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var y=function(v,x,P){var R=x.exec(v);return R&&R[P]};return c=y(c,/^url\((['"])?(.+)\1\)$/,2),c&&y(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=D("div","leaflet-default-icon-path",document.body),y=El(c,"background-image")||El(c,"backgroundImage");if(document.body.removeChild(c),y=this._stripUrl(y),y)return y;var v=document.querySelector('link[href$="leaflet.css"]');return v?v.href.substring(0,v.href.length-11-1):""}}),c_=Mi.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new ns(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ve(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var y=this._marker,v=y._map,x=this._marker.options.autoPanSpeed,P=this._marker.options.autoPanPadding,R=wo(y._icon),V=v.getPixelBounds(),X=v.getPixelOrigin(),oe=ce(V.min._subtract(X).add(P),V.max._subtract(X).subtract(P));if(!oe.contains(R)){var me=he((Math.max(oe.max.x,R.x)-oe.max.x)/(V.max.x-oe.max.x)-(Math.min(oe.min.x,R.x)-oe.min.x)/(V.min.x-oe.min.x),(Math.max(oe.max.y,R.y)-oe.max.y)/(V.max.y-oe.max.y)-(Math.min(oe.min.y,R.y)-oe.min.y)/(V.min.y-oe.min.y)).multiplyBy(x);v.panBy(me,{animate:!1}),this._draggable._newPos._add(me),this._draggable._startPos._add(me),An(y._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=_e(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&($e(this._panRequest),this._panRequest=_e(this._adjustPan.bind(this,c)))},_onDrag:function(c){var y=this._marker,v=y._shadow,x=wo(y._icon),P=y._map.layerPointToLatLng(x);v&&An(v,x),y._latlng=P,c.latlng=P,c.oldLatLng=this._oldLatLng,y.fire("move",c).fire("drag",c)},_onDragEnd:function(c){$e(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),So=rs.extend({options:{icon:new ic,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,y){I(this,y),this._latlng=Le(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var y=this._latlng;return this._latlng=Le(c),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),v=c.icon.createIcon(this._icon),x=!1;v!==this._icon&&(this._icon&&this._removeIcon(),x=!0,c.title&&(v.title=c.title),v.tagName==="IMG"&&(v.alt=c.alt||"")),Ve(v,y),c.keyboard&&(v.tabIndex="0",v.setAttribute("role","button")),this._icon=v,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ht(v,"focus",this._panOnFocus,this);var P=c.icon.createShadow(this._shadow),R=!1;P!==this._shadow&&(this._removeShadow(),R=!0),P&&(Ve(P,y),P.alt=""),this._shadow=P,c.opacity<1&&this._updateOpacity(),x&&this.getPane().appendChild(this._icon),this._initInteraction(),P&&R&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qt(this._icon,"focus",this._panOnFocus,this),se(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&se(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&An(this._icon,c),this._shadow&&An(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var y=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(Ve(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),c_)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new c_(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&Fr(this._icon,c),this._shadow&&Fr(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var y=this.options.icon.options,v=y.iconSize?he(y.iconSize):he(0,0),x=y.iconAnchor?he(y.iconAnchor):he(0,0);c.panInside(this._latlng,{paddingTopLeft:x,paddingBottomRight:v.subtract(x)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function VE(c,y){return new So(c,y)}var ba=rs.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return I(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),im=ba.extend({options:{fill:!0,radius:10},initialize:function(c,y){I(this,y),this._latlng=Le(c),this._radius=this.options.radius},setLatLng:function(c){var y=this._latlng;return this._latlng=Le(c),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var y=c&&c.radius||this._radius;return ba.prototype.setStyle.call(this,c),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,y=this._radiusY||c,v=this._clickTolerance(),x=[c+v,y+v];this._pxBounds=new H(this._point.subtract(x),this._point.add(x))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function f1(c,y){return new im(c,y)}var sm=im.extend({initialize:function(c,y,v){if(typeof y=="number"&&(y=i({},v,{radius:y})),I(this,y),this._latlng=Le(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new nt(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:ba.prototype.setStyle,_project:function(){var c=this._latlng.lng,y=this._latlng.lat,v=this._map,x=v.options.crs;if(x.distance===$t.distance){var P=Math.PI/180,R=this._mRadius/$t.R/P,V=v.project([y+R,c]),X=v.project([y-R,c]),oe=V.add(X).divideBy(2),me=v.unproject(oe).lat,Oe=Math.acos((Math.cos(R*P)-Math.sin(y*P)*Math.sin(me*P))/(Math.cos(y*P)*Math.cos(me*P)))/P;(isNaN(Oe)||Oe===0)&&(Oe=R/Math.cos(Math.PI/180*y)),this._point=oe.subtract(v.getPixelOrigin()),this._radius=isNaN(Oe)?0:oe.x-v.project([me,c-Oe]).x,this._radiusY=oe.y-V.y}else{var st=x.unproject(x.project(this._latlng).subtract([this._mRadius,0]));this._point=v.latLngToLayerPoint(this._latlng),this._radius=this._point.x-v.latLngToLayerPoint(st).x}this._updateBounds()}});function Eh(c,y,v){return new sm(c,y,v)}var di=ba.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,y){I(this,y),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var y=1/0,v=null,x=Ol,P,R,V=0,X=this._parts.length;V<X;V++)for(var oe=this._parts[V],me=1,Oe=oe.length;me<Oe;me++){P=oe[me-1],R=oe[me];var st=x(c,P,R,!0);st<y&&(y=st,v=x(c,P,R))}return v&&(v.distance=Math.sqrt(y)),v},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return u1(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,y){return y=y||this._defaultShape(),c=Le(c),y.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new nt,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return Ii(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var y=[],v=Ii(c),x=0,P=c.length;x<P;x++)v?(y[x]=Le(c[x]),this._bounds.extend(y[x])):y[x]=this._convertLatLngs(c[x]);return y},_project:function(){var c=new H;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),y=new re(c,c);this._rawPxBounds&&(this._pxBounds=new H([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(c,y,v){var x=c[0]instanceof We,P=c.length,R,V;if(x){for(V=[],R=0;R<P;R++)V[R]=this._map.latLngToLayerPoint(c[R]),v.extend(V[R]);y.push(V)}else for(R=0;R<P;R++)this._projectLatlngs(c[R],y,v)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,v,x,P,R,V,X,oe;for(v=0,P=0,R=this._rings.length;v<R;v++)for(oe=this._rings[v],x=0,V=oe.length;x<V-1;x++)X=a1(oe[x],oe[x+1],c,x,!0),X&&(y[P]=y[P]||[],y[P].push(X[0]),(X[1]!==oe[x+1]||x===V-2)&&(y[P].push(X[1]),P++))}},_simplifyPoints:function(){for(var c=this._parts,y=this.options.smoothFactor,v=0,x=c.length;v<x;v++)c[v]=nm(c[v],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,y){var v,x,P,R,V,X,oe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(v=0,R=this._parts.length;v<R;v++)for(X=this._parts[v],x=0,V=X.length,P=V-1;x<V;P=x++)if(!(!y&&x===0)&&o1(c,X[P],X[x])<=oe)return!0;return!1}});function UE(c,y){return new di(c,y)}di._flat=l1;var To=di.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return s1(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var y=di.prototype._convertLatLngs.call(this,c),v=y.length;return v>=2&&y[0]instanceof We&&y[0].equals(y[v-1])&&y.pop(),y},_setLatLngs:function(c){di.prototype._setLatLngs.call(this,c),Ii(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ii(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,y=this.options.weight,v=new re(y,y);if(c=new H(c.min.subtract(v),c.max.add(v)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var x=0,P=this._rings.length,R;x<P;x++)R=i_(this._rings[x],c,!0),R.length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var y=!1,v,x,P,R,V,X,oe,me;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(R=0,oe=this._parts.length;R<oe;R++)for(v=this._parts[R],V=0,me=v.length,X=me-1;V<me;X=V++)x=v[V],P=v[X],x.y>c.y!=P.y>c.y&&c.x<(P.x-x.x)*(c.y-x.y)/(P.y-x.y)+x.x&&(y=!y);return y||di.prototype._containsPoint.call(this,c,!0)}});function GE(c,y){return new To(c,y)}var ks=bo.extend({initialize:function(c,y){I(this,y),this._layers={},c&&this.addData(c)},addData:function(c){var y=z(c)?c:c.features,v,x,P;if(y){for(v=0,x=y.length;v<x;v++)P=y[v],(P.geometries||P.geometry||P.features||P.coordinates)&&this.addData(P);return this}var R=this.options;if(R.filter&&!R.filter(c))return this;var V=sc(c,R);return V?(V.feature=cm(c),V.defaultOptions=V.options,this.resetStyle(V),R.onEachFeature&&R.onEachFeature(c,V),this.addLayer(V)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=i({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(y){this._setLayerStyle(y,c)},this)},_setLayerStyle:function(c,y){c.setStyle&&(typeof y=="function"&&(y=y(c.feature)),c.setStyle(y))}});function sc(c,y){var v=c.type==="Feature"?c.geometry:c,x=v?v.coordinates:null,P=[],R=y&&y.pointToLayer,V=y&&y.coordsToLatLng||am,X,oe,me,Oe;if(!x&&!v)return null;switch(v.type){case"Point":return X=V(x),om(R,c,X,y);case"MultiPoint":for(me=0,Oe=x.length;me<Oe;me++)X=V(x[me]),P.push(om(R,c,X,y));return new bo(P);case"LineString":case"MultiLineString":return oe=$h(x,v.type==="LineString"?0:1,V),new di(oe,y);case"Polygon":case"MultiPolygon":return oe=$h(x,v.type==="Polygon"?1:2,V),new To(oe,y);case"GeometryCollection":for(me=0,Oe=v.geometries.length;me<Oe;me++){var st=sc({geometry:v.geometries[me],type:"Feature",properties:c.properties},y);st&&P.push(st)}return new bo(P);case"FeatureCollection":for(me=0,Oe=v.features.length;me<Oe;me++){var bt=sc(v.features[me],y);bt&&P.push(bt)}return new bo(P);default:throw new Error("Invalid GeoJSON object.")}}function om(c,y,v,x){return c?c(y,v):new So(v,x&&x.markersInheritOptions&&x)}function am(c){return new We(c[1],c[0],c[2])}function $h(c,y,v){for(var x=[],P=0,R=c.length,V;P<R;P++)V=y?$h(c[P],y-1,v):(v||am)(c[P]),x.push(V);return x}function lm(c,y){return c=Le(c),c.alt!==void 0?[b(c.lng,y),b(c.lat,y),b(c.alt,y)]:[b(c.lng,y),b(c.lat,y)]}function um(c,y,v,x){for(var P=[],R=0,V=c.length;R<V;R++)P.push(y?um(c[R],Ii(c[R])?0:y-1,v,x):lm(c[R],x));return!y&&v&&P.length>0&&P.push(P[0].slice()),P}function oc(c,y){return c.feature?i({},c.feature,{geometry:y}):cm(y)}function cm(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var d_={toGeoJSON:function(c){return oc(this,{type:"Point",coordinates:lm(this.getLatLng(),c)})}};So.include(d_),sm.include(d_),im.include(d_),di.include({toGeoJSON:function(c){var y=!Ii(this._latlngs),v=um(this._latlngs,y?1:0,!1,c);return oc(this,{type:(y?"Multi":"")+"LineString",coordinates:v})}}),To.include({toGeoJSON:function(c){var y=!Ii(this._latlngs),v=y&&!Ii(this._latlngs[0]),x=um(this._latlngs,v?2:y?1:0,!0,c);return y||(x=[x]),oc(this,{type:(v?"Multi":"")+"Polygon",coordinates:x})}}),va.include({toMultiPoint:function(c){var y=[];return this.eachLayer(function(v){y.push(v.toGeoJSON(c).geometry.coordinates)}),oc(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(c){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(c);var v=y==="GeometryCollection",x=[];return this.eachLayer(function(P){if(P.toGeoJSON){var R=P.toGeoJSON(c);if(v)x.push(R.geometry);else{var V=cm(R);V.type==="FeatureCollection"?x.push.apply(x,V.features):x.push(V)}}}),v?oc(this,{geometries:x,type:"GeometryCollection"}):{type:"FeatureCollection",features:x}}});function m1(c,y){return new ks(c,y)}var is=m1,Sa=rs.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,y,v){this._url=c,this._bounds=Xe(y),I(this,v)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ve(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){se(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&et(this._image),this},bringToBack:function(){return this._map&&It(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=Xe(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",y=this._image=c?this._url:D("img");if(Ve(y,"leaflet-image-layer"),this._zoomAnimated&&Ve(y,"leaflet-zoom-animated"),this.options.className&&Ve(y,this.options.className),y.onselectstart=w,y.onmousemove=w,y.onload=o(this.fire,this,"load"),y.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(c){var y=this._map.getZoomScale(c.zoom),v=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;Qi(this._image,v,y)},_reset:function(){var c=this._image,y=new H(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),v=y.getSize();An(c,y.min),c.style.width=v.x+"px",c.style.height=v.y+"px"},_updateOpacity:function(){Fr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),y1=function(c,y,v){return new Sa(c,y,v)},h_=Sa.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",y=this._image=c?this._url:D("video");if(Ve(y,"leaflet-image-layer"),this._zoomAnimated&&Ve(y,"leaflet-zoom-animated"),this.options.className&&Ve(y,this.options.className),y.onselectstart=w,y.onmousemove=w,y.onloadeddata=o(this.fire,this,"load"),c){for(var v=y.getElementsByTagName("source"),x=[],P=0;P<v.length;P++)x.push(v[P].src);this._url=v.length>0?x:[y.src];return}z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var V=D("source");V.src=this._url[R],y.appendChild(V)}}});function g1(c,y,v){return new h_(c,y,v)}var p_=Sa.extend({_initImage:function(){var c=this._image=this._url;Ve(c,"leaflet-image-layer"),this._zoomAnimated&&Ve(c,"leaflet-zoom-animated"),this.options.className&&Ve(c,this.options.className),c.onselectstart=w,c.onmousemove=w}});function f_(c,y,v){return new p_(c,y,v)}var Rs=rs.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,y){c&&(c instanceof We||z(c))?(this._latlng=Le(c),I(this,y)):(I(this,c),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&Fr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&Fr(this._container,1),this.bringToFront(),this.options.interactive&&(Ve(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(Fr(this._container,0),this._removeTimeout=setTimeout(o(se,void 0,this._container),200)):se(this._container),this.options.interactive&&(Tt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=Le(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&et(this._container),this},bringToBack:function(){return this._map&&It(this._container),this},_prepareOpen:function(c){var y=this._source;if(!y._map)return!1;if(y instanceof bo){y=null;var v=this._source._layers;for(var x in v)if(v[x]._map){y=v[x];break}if(!y)return!1;this._source=y}if(!c)if(y.getCenter)c=y.getCenter();else if(y.getLatLng)c=y.getLatLng();else if(y.getBounds)c=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")c.innerHTML=y;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),y=he(this.options.offset),v=this._getAnchor();this._zoomAnimated?An(this._container,c.add(v)):y=y.add(c).add(v);var x=this._containerBottom=-y.y,P=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=x+"px",this._container.style.left=P+"px"}},_getAnchor:function(){return[0,0]}});Ot.include({_initOverlay:function(c,y,v,x){var P=y;return P instanceof c||(P=new c(x).setContent(y)),v&&P.setLatLng(v),P}}),rs.include({_initOverlay:function(c,y,v,x){var P=v;return P instanceof c?(I(P,x),P._source=this):(P=y&&!x?y:new c(x,this),P.setContent(v)),P}});var dm=Rs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,Rs.prototype.openOn.call(this,c)},onAdd:function(c){Rs.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ba||this._source.on("preclick",As))},onRemove:function(c){Rs.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ba||this._source.off("preclick",As))},getEvents:function(){var c=Rs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",y=this._container=D("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),v=this._wrapper=D("div",c+"-content-wrapper",y);if(this._contentNode=D("div",c+"-content",v),bh(y),Xf(this._contentNode),ht(y,"contextmenu",As),this._tipContainer=D("div",c+"-tip-container",y),this._tip=D("div",c+"-tip",this._tipContainer),this.options.closeButton){var x=this._closeButton=D("a",c+"-close-button",y);x.setAttribute("role","button"),x.setAttribute("aria-label","Close popup"),x.href="#close",x.innerHTML='<span aria-hidden="true">&#215;</span>',ht(x,"click",function(P){En(P),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,y=c.style;y.width="",y.whiteSpace="nowrap";var v=c.offsetWidth;v=Math.min(v,this.options.maxWidth),v=Math.max(v,this.options.minWidth),y.width=v+1+"px",y.whiteSpace="",y.height="";var x=c.offsetHeight,P=this.options.maxHeight,R="leaflet-popup-scrolled";P&&x>P?(y.height=P+"px",Ve(c,R)):Tt(c,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var y=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),v=this._getAnchor();An(this._container,y.add(v))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,y=parseInt(El(this._container,"marginBottom"),10)||0,v=this._container.offsetHeight+y,x=this._containerWidth,P=new re(this._containerLeft,-v-this._containerBottom);P._add(wo(this._container));var R=c.layerPointToContainerPoint(P),V=he(this.options.autoPanPadding),X=he(this.options.autoPanPaddingTopLeft||V),oe=he(this.options.autoPanPaddingBottomRight||V),me=c.getSize(),Oe=0,st=0;R.x+x+oe.x>me.x&&(Oe=R.x+x-me.x+oe.x),R.x-Oe-X.x<0&&(Oe=R.x-X.x),R.y+v+oe.y>me.y&&(st=R.y+v-me.y+oe.y),R.y-st-X.y<0&&(st=R.y-X.y),(Oe||st)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([Oe,st]))}},_getAnchor:function(){return he(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ac=function(c,y){return new dm(c,y)};Ot.mergeOptions({closePopupOnClick:!0}),Ot.include({openPopup:function(c,y,v){return this._initOverlay(dm,c,y,v).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),rs.include({bindPopup:function(c,y){return this._popup=this._initOverlay(dm,this._popup,c,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof bo||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){ts(c);var y=c.layer||c.target;if(this._popup._source===y&&!(y instanceof ba)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=y,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var lc=Rs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){Rs.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){Rs.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=Rs.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",y=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=D("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var y,v,x=this._map,P=this._container,R=x.latLngToContainerPoint(x.getCenter()),V=x.layerPointToContainerPoint(c),X=this.options.direction,oe=P.offsetWidth,me=P.offsetHeight,Oe=he(this.options.offset),st=this._getAnchor();X==="top"?(y=oe/2,v=me):X==="bottom"?(y=oe/2,v=0):X==="center"?(y=oe/2,v=me/2):X==="right"?(y=0,v=me/2):X==="left"?(y=oe,v=me/2):V.x<R.x?(X="right",y=0,v=me/2):(X="left",y=oe+(Oe.x+st.x)*2,v=me/2),c=c.subtract(he(y,v,!0)).add(Oe).add(st),Tt(P,"leaflet-tooltip-right"),Tt(P,"leaflet-tooltip-left"),Tt(P,"leaflet-tooltip-top"),Tt(P,"leaflet-tooltip-bottom"),Ve(P,"leaflet-tooltip-"+X),An(P,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&Fr(this._container,c)},_animateZoom:function(c){var y=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(y)},_getAnchor:function(){return he(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Mh=function(c,y){return new lc(c,y)};Ot.include({openTooltip:function(c,y,v){return this._initOverlay(lc,c,y,v).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),rs.include({bindTooltip:function(c,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(lc,this._tooltip,c,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var y=c?"off":"on",v={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?v.add=this._openTooltip:(v.mouseover=this._openTooltip,v.mouseout=this.closeTooltip,v.click=this._openTooltip,this._map?this._addFocusListeners():v.add=this._addFocusListeners),this._tooltip.options.sticky&&(v.mousemove=this._moveTooltip),this[y](v),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof bo||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var y=typeof c.getElement=="function"&&c.getElement();y&&(ht(y,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),ht(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var y=typeof c.getElement=="function"&&c.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var y=c.latlng,v,x;this._tooltip.options.sticky&&c.originalEvent&&(v=this._map.mouseEventToContainerPoint(c.originalEvent),x=this._map.containerPointToLayerPoint(v),y=this._map.layerPointToLatLng(x)),this._tooltip.setLatLng(y)}});var hm=Al.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var y=c&&c.tagName==="DIV"?c:document.createElement("div"),v=this.options;if(v.html instanceof Element?(we(y),y.appendChild(v.html)):y.innerHTML=v.html!==!1?v.html:"",v.bgPos){var x=he(v.bgPos);y.style.backgroundPosition=-x.x+"px "+-x.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function _1(c){return new hm(c)}Al.Default=ic;var Ta=rs.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ze.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){I(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),se(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(et(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(It(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof re?c:new re(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var y=this.getPane().children,v=-c(-1/0,1/0),x=0,P=y.length,R;x<P;x++)R=y[x].style.zIndex,y[x]!==this._container&&R&&(v=c(v,+R));isFinite(v)&&(this.options.zIndex=v+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ze.ielt9){Fr(this._container,this.options.opacity);var c=+new Date,y=!1,v=!1;for(var x in this._tiles){var P=this._tiles[x];if(!(!P.current||!P.loaded)){var R=Math.min(1,(c-P.loaded)/200);Fr(P.el,R),R<1?y=!0:(P.active?v=!0:this._onOpaqueTile(P),P.active=!0)}}v&&!this._noPrune&&this._pruneTiles(),y&&($e(this._fadeFrame),this._fadeFrame=_e(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=D("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,y=this.options.maxZoom;if(c!==void 0){for(var v in this._levels)v=Number(v),this._levels[v].el.children.length||v===c?(this._levels[v].el.style.zIndex=y-Math.abs(c-v),this._onUpdateLevel(v)):(se(this._levels[v].el),this._removeTilesAtZoom(v),this._onRemoveLevel(v),delete this._levels[v]);var x=this._levels[c],P=this._map;return x||(x=this._levels[c]={},x.el=D("div","leaflet-tile-container leaflet-zoom-animated",this._container),x.el.style.zIndex=y,x.origin=P.project(P.unproject(P.getPixelOrigin()),c).round(),x.zoom=c,this._setZoomTransform(x,P.getCenter(),P.getZoom()),w(x.el.offsetWidth),this._onCreateLevel(x)),this._level=x,x}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var c,y,v=this._map.getZoom();if(v>this.options.maxZoom||v<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)y=this._tiles[c],y.retain=y.current;for(c in this._tiles)if(y=this._tiles[c],y.current&&!y.active){var x=y.coords;this._retainParent(x.x,x.y,x.z,x.z-5)||this._retainChildren(x.x,x.y,x.z,x.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var y in this._tiles)this._tiles[y].coords.z===c&&this._removeTile(y)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)se(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,y,v,x){var P=Math.floor(c/2),R=Math.floor(y/2),V=v-1,X=new re(+P,+R);X.z=+V;var oe=this._tileCoordsToKey(X),me=this._tiles[oe];return me&&me.active?(me.retain=!0,!0):(me&&me.loaded&&(me.retain=!0),V>x?this._retainParent(P,R,V,x):!1)},_retainChildren:function(c,y,v,x){for(var P=2*c;P<2*c+2;P++)for(var R=2*y;R<2*y+2;R++){var V=new re(P,R);V.z=v+1;var X=this._tileCoordsToKey(V),oe=this._tiles[X];if(oe&&oe.active){oe.retain=!0;continue}else oe&&oe.loaded&&(oe.retain=!0);v+1<x&&this._retainChildren(P,R,v+1,x)}},_resetView:function(c){var y=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var y=this.options;return y.minNativeZoom!==void 0&&c<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<c?y.maxNativeZoom:c},_setView:function(c,y,v,x){var P=Math.round(y);this.options.maxZoom!==void 0&&P>this.options.maxZoom||this.options.minZoom!==void 0&&P<this.options.minZoom?P=void 0:P=this._clampZoom(P);var R=this.options.updateWhenZooming&&P!==this._tileZoom;(!x||R)&&(this._tileZoom=P,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),P!==void 0&&this._update(c),v||this._pruneTiles(),this._noPrune=!!v),this._setZoomTransforms(c,y)},_setZoomTransforms:function(c,y){for(var v in this._levels)this._setZoomTransform(this._levels[v],c,y)},_setZoomTransform:function(c,y,v){var x=this._map.getZoomScale(v,c.zoom),P=c.origin.multiplyBy(x).subtract(this._map._getNewPixelOrigin(y,v)).round();ze.any3d?Qi(c.el,P,x):An(c.el,P)},_resetGrid:function(){var c=this._map,y=c.options.crs,v=this._tileSize=this.getTileSize(),x=this._tileZoom,P=this._map.getPixelWorldBounds(this._tileZoom);P&&(this._globalTileRange=this._pxBoundsToTileRange(P)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,y.wrapLng[0]],x).x/v.x),Math.ceil(c.project([0,y.wrapLng[1]],x).x/v.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([y.wrapLat[0],0],x).y/v.x),Math.ceil(c.project([y.wrapLat[1],0],x).y/v.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var y=this._map,v=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),x=y.getZoomScale(v,this._tileZoom),P=y.project(c,this._tileZoom).floor(),R=y.getSize().divideBy(x*2);return new H(P.subtract(R),P.add(R))},_update:function(c){var y=this._map;if(y){var v=this._clampZoom(y.getZoom());if(c===void 0&&(c=y.getCenter()),this._tileZoom!==void 0){var x=this._getTiledPixelBounds(c),P=this._pxBoundsToTileRange(x),R=P.getCenter(),V=[],X=this.options.keepBuffer,oe=new H(P.getBottomLeft().subtract([X,-X]),P.getTopRight().add([X,-X]));if(!(isFinite(P.min.x)&&isFinite(P.min.y)&&isFinite(P.max.x)&&isFinite(P.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var me in this._tiles){var Oe=this._tiles[me].coords;(Oe.z!==this._tileZoom||!oe.contains(new re(Oe.x,Oe.y)))&&(this._tiles[me].current=!1)}if(Math.abs(v-this._tileZoom)>1){this._setView(c,v);return}for(var st=P.min.y;st<=P.max.y;st++)for(var bt=P.min.x;bt<=P.max.x;bt++){var er=new re(bt,st);if(er.z=this._tileZoom,!!this._isValidTile(er)){var Gn=this._tiles[this._tileCoordsToKey(er)];Gn?Gn.current=!0:V.push(er)}}if(V.sort(function(zr,pc){return zr.distanceTo(R)-pc.distanceTo(R)}),V.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var hi=document.createDocumentFragment();for(bt=0;bt<V.length;bt++)this._addTile(V[bt],hi);this._level.el.appendChild(hi)}}}},_isValidTile:function(c){var y=this._map.options.crs;if(!y.infinite){var v=this._globalTileRange;if(!y.wrapLng&&(c.x<v.min.x||c.x>v.max.x)||!y.wrapLat&&(c.y<v.min.y||c.y>v.max.y))return!1}if(!this.options.bounds)return!0;var x=this._tileCoordsToBounds(c);return Xe(this.options.bounds).overlaps(x)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var y=this._map,v=this.getTileSize(),x=c.scaleBy(v),P=x.add(v),R=y.unproject(x,c.z),V=y.unproject(P,c.z);return[R,V]},_tileCoordsToBounds:function(c){var y=this._tileCoordsToNwSe(c),v=new nt(y[0],y[1]);return this.options.noWrap||(v=this._map.wrapLatLngBounds(v)),v},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var y=c.split(":"),v=new re(+y[0],+y[1]);return v.z=+y[2],v},_removeTile:function(c){var y=this._tiles[c];y&&(se(y.el),delete this._tiles[c],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){Ve(c,"leaflet-tile");var y=this.getTileSize();c.style.width=y.x+"px",c.style.height=y.y+"px",c.onselectstart=w,c.onmousemove=w,ze.ielt9&&this.options.opacity<1&&Fr(c,this.options.opacity)},_addTile:function(c,y){var v=this._getTilePos(c),x=this._tileCoordsToKey(c),P=this.createTile(this._wrapCoords(c),o(this._tileReady,this,c));this._initTile(P),this.createTile.length<2&&_e(o(this._tileReady,this,c,null,P)),An(P,v),this._tiles[x]={el:P,coords:c,current:!0},y.appendChild(P),this.fire("tileloadstart",{tile:P,coords:c})},_tileReady:function(c,y,v){y&&this.fire("tileerror",{error:y,tile:v,coords:c});var x=this._tileCoordsToKey(c);v=this._tiles[x],v&&(v.loaded=+new Date,this._map._fadeAnimated?(Fr(v.el,0),$e(this._fadeFrame),this._fadeFrame=_e(this._updateOpacity,this)):(v.active=!0,this._pruneTiles()),y||(Ve(v.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:v.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ze.ielt9||!this._map._fadeAnimated?_e(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var y=new re(this._wrapX?_(c.x,this._wrapX):c.x,this._wrapY?_(c.y,this._wrapY):c.y);return y.z=c.z,y},_pxBoundsToTileRange:function(c){var y=this.getTileSize();return new H(c.min.unscaleBy(y).floor(),c.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function uc(c){return new Ta(c)}var xa=Ta.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,y){this._url=c,y=I(this,y),y.detectRetina&&ze.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,y){return this._url===c&&y===void 0&&(y=!0),this._url=c,y||this.redraw(),this},createTile:function(c,y){var v=document.createElement("img");return ht(v,"load",o(this._tileOnLoad,this,y,v)),ht(v,"error",o(this._tileOnError,this,y,v)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(v.referrerPolicy=this.options.referrerPolicy),v.alt="",v.src=this.getTileUrl(c),v},getTileUrl:function(c){var y={r:ze.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var v=this._globalTileRange.max.y-c.y;this.options.tms&&(y.y=v),y["-y"]=v}return j(this._url,i(y,this.options))},_tileOnLoad:function(c,y){ze.ielt9?setTimeout(o(c,this,null,y),0):c(null,y)},_tileOnError:function(c,y,v){var x=this.options.errorTileUrl;x&&y.getAttribute("src")!==x&&(y.src=x),c(v,y)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,y=this.options.maxZoom,v=this.options.zoomReverse,x=this.options.zoomOffset;return v&&(c=y-c),c+x},_getSubdomain:function(c){var y=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var c,y;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(y=this._tiles[c].el,y.onload=w,y.onerror=w,!y.complete)){y.src=K;var v=this._tiles[c].coords;se(y),delete this._tiles[c],this.fire("tileabort",{tile:y,coords:v})}},_removeTile:function(c){var y=this._tiles[c];if(y)return y.el.setAttribute("src",K),Ta.prototype._removeTile.call(this,c)},_tileReady:function(c,y,v){if(!(!this._map||v&&v.getAttribute("src")===K))return Ta.prototype._tileReady.call(this,c,y,v)}});function m_(c,y){return new xa(c,y)}var Ih=xa.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,y){this._url=c;var v=i({},this.defaultWmsParams);for(var x in y)x in this.options||(v[x]=y[x]);y=I(this,y);var P=y.detectRetina&&ze.retina?2:1,R=this.getTileSize();v.width=R.x*P,v.height=R.y*P,this.wmsParams=v},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,xa.prototype.onAdd.call(this,c)},getTileUrl:function(c){var y=this._tileCoordsToNwSe(c),v=this._crs,x=ce(v.project(y[0]),v.project(y[1])),P=x.min,R=x.max,V=(this._wmsVersion>=1.3&&this._crs===d1?[P.y,P.x,R.y,R.x]:[P.x,P.y,R.x,R.y]).join(","),X=xa.prototype.getTileUrl.call(this,c);return X+C(this.wmsParams,X,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(c,y){return i(this.wmsParams,c),y||this.redraw(),this}});function w1(c,y){return new Ih(c,y)}xa.WMS=Ih,m_.wms=w1;var Ls=rs.extend({options:{padding:.1},initialize:function(c){I(this,c),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ve(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,y){var v=this._map.getZoomScale(y,this._zoom),x=this._map.getSize().multiplyBy(.5+this.options.padding),P=this._map.project(this._center,y),R=x.multiplyBy(-v).add(P).subtract(this._map._getNewPixelOrigin(c,y));ze.any3d?Qi(this._container,R,v):An(this._container,R)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,y=this._map.getSize(),v=this._map.containerPointToLayerPoint(y.multiplyBy(-c)).round();this._bounds=new H(v,v.add(y.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),y_=Ls.extend({options:{tolerance:0},getEvents:function(){var c=Ls.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ls.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");ht(c,"mousemove",this._onMouseMove,this),ht(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ht(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){$e(this._redrawRequest),delete this._ctx,se(this._container),Qt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var y in this._layers)c=this._layers[y],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ls.prototype._update.call(this);var c=this._bounds,y=this._container,v=c.getSize(),x=ze.retina?2:1;An(y,c.min),y.width=x*v.x,y.height=x*v.y,y.style.width=v.x+"px",y.style.height=v.y+"px",ze.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){Ls.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[h(c)]=c;var y=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var y=c._order,v=y.next,x=y.prev;v?v.prev=x:this._drawLast=x,x?x.next=v:this._drawFirst=v,delete c._order,delete this._layers[h(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var y=c.options.dashArray.split(/[, ]+/),v=[],x,P;for(P=0;P<y.length;P++){if(x=Number(y[P]),isNaN(x))return;v.push(x)}c.options._dashArray=v}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||_e(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var y=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new H,this._redrawBounds.extend(c._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(c._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var y=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,y=this._redrawBounds;if(this._ctx.save(),y){var v=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,v.x,v.y),this._ctx.clip()}this._drawing=!0;for(var x=this._drawFirst;x;x=x.next)c=x.layer,(!y||c._pxBounds&&c._pxBounds.intersects(y))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,y){if(this._drawing){var v,x,P,R,V=c._parts,X=V.length,oe=this._ctx;if(X){for(oe.beginPath(),v=0;v<X;v++){for(x=0,P=V[v].length;x<P;x++)R=V[v][x],oe[x?"lineTo":"moveTo"](R.x,R.y);y&&oe.closePath()}this._fillStroke(oe,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var y=c._point,v=this._ctx,x=Math.max(Math.round(c._radius),1),P=(Math.max(Math.round(c._radiusY),1)||x)/x;P!==1&&(v.save(),v.scale(1,P)),v.beginPath(),v.arc(y.x,y.y/P,x,0,Math.PI*2,!1),P!==1&&v.restore(),this._fillStroke(v,c)}},_fillStroke:function(c,y){var v=y.options;v.fill&&(c.globalAlpha=v.fillOpacity,c.fillStyle=v.fillColor||v.color,c.fill(v.fillRule||"evenodd")),v.stroke&&v.weight!==0&&(c.setLineDash&&c.setLineDash(y.options&&y.options._dashArray||[]),c.globalAlpha=v.opacity,c.lineWidth=v.weight,c.strokeStyle=v.color,c.lineCap=v.lineCap,c.lineJoin=v.lineJoin,c.stroke())},_onClick:function(c){for(var y=this._map.mouseEventToLayerPoint(c),v,x,P=this._drawFirst;P;P=P.next)v=P.layer,v.options.interactive&&v._containsPoint(y)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(v))&&(x=v);this._fireEvent(x?[x]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,y)}},_handleMouseOut:function(c){var y=this._hoveredLayer;y&&(Tt(this._container,"leaflet-interactive"),this._fireEvent([y],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,y){if(!this._mouseHoverThrottled){for(var v,x,P=this._drawFirst;P;P=P.next)v=P.layer,v.options.interactive&&v._containsPoint(y)&&(x=v);x!==this._hoveredLayer&&(this._handleMouseOut(c),x&&(Ve(this._container,"leaflet-interactive"),this._fireEvent([x],c,"mouseover"),this._hoveredLayer=x)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,y,v){this._map._fireDOMEvent(y,v||y.type,c)},_bringToFront:function(c){var y=c._order;if(y){var v=y.next,x=y.prev;if(v)v.prev=x;else return;x?x.next=v:v&&(this._drawFirst=v),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(c)}},_bringToBack:function(c){var y=c._order;if(y){var v=y.next,x=y.prev;if(x)x.next=v;else return;v?v.prev=x:x&&(this._drawLast=x),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(c)}}});function g_(c){return ze.canvas?new y_(c):null}var cc=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),v1={_initContainer:function(){this._container=D("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ls.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var y=c._container=cc("shape");Ve(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",c._path=cc("path"),y.appendChild(c._path),this._updateStyle(c),this._layers[h(c)]=c},_addPath:function(c){var y=c._container;this._container.appendChild(y),c.options.interactive&&c.addInteractiveTarget(y)},_removePath:function(c){var y=c._container;se(y),c.removeInteractiveTarget(y),delete this._layers[h(c)]},_updateStyle:function(c){var y=c._stroke,v=c._fill,x=c.options,P=c._container;P.stroked=!!x.stroke,P.filled=!!x.fill,x.stroke?(y||(y=c._stroke=cc("stroke")),P.appendChild(y),y.weight=x.weight+"px",y.color=x.color,y.opacity=x.opacity,x.dashArray?y.dashStyle=z(x.dashArray)?x.dashArray.join(" "):x.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=x.lineCap.replace("butt","flat"),y.joinstyle=x.lineJoin):y&&(P.removeChild(y),c._stroke=null),x.fill?(v||(v=c._fill=cc("fill")),P.appendChild(v),v.color=x.fillColor||x.color,v.opacity=x.fillOpacity):v&&(P.removeChild(v),c._fill=null)},_updateCircle:function(c){var y=c._point.round(),v=Math.round(c._radius),x=Math.round(c._radiusY||v);this._setPath(c,c._empty()?"M0 0":"AL "+y.x+","+y.y+" "+v+","+x+" 0,"+65535*360)},_setPath:function(c,y){c._path.v=y},_bringToFront:function(c){et(c._container)},_bringToBack:function(c){It(c._container)}},ss=ze.vml?cc:sh,kl=Ls.extend({_initContainer:function(){this._container=ss("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ss("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){se(this._container),Qt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ls.prototype._update.call(this);var c=this._bounds,y=c.getSize(),v=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,v.setAttribute("width",y.x),v.setAttribute("height",y.y)),An(v,c.min),v.setAttribute("viewBox",[c.min.x,c.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(c){var y=c._path=ss("path");c.options.className&&Ve(y,c.options.className),c.options.interactive&&Ve(y,"leaflet-interactive"),this._updateStyle(c),this._layers[h(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){se(c._path),c.removeInteractiveTarget(c._path),delete this._layers[h(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var y=c._path,v=c.options;y&&(v.stroke?(y.setAttribute("stroke",v.color),y.setAttribute("stroke-opacity",v.opacity),y.setAttribute("stroke-width",v.weight),y.setAttribute("stroke-linecap",v.lineCap),y.setAttribute("stroke-linejoin",v.lineJoin),v.dashArray?y.setAttribute("stroke-dasharray",v.dashArray):y.removeAttribute("stroke-dasharray"),v.dashOffset?y.setAttribute("stroke-dashoffset",v.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),v.fill?(y.setAttribute("fill",v.fillColor||v.color),y.setAttribute("fill-opacity",v.fillOpacity),y.setAttribute("fill-rule",v.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(c,y){this._setPath(c,oh(c._parts,y))},_updateCircle:function(c){var y=c._point,v=Math.max(Math.round(c._radius),1),x=Math.max(Math.round(c._radiusY),1)||v,P="a"+v+","+x+" 0 1,0 ",R=c._empty()?"M0 0":"M"+(y.x-v)+","+y.y+P+v*2+",0 "+P+-v*2+",0 ";this._setPath(c,R)},_setPath:function(c,y){c._path.setAttribute("d",y)},_bringToFront:function(c){et(c._path)},_bringToBack:function(c){It(c._path)}});ze.vml&&kl.include(v1);function pm(c){return ze.svg||ze.vml?new kl(c):null}Ot.include({getRenderer:function(c){var y=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var y=this._paneRenderers[c];return y===void 0&&(y=this._createRenderer({pane:c}),this._paneRenderers[c]=y),y},_createRenderer:function(c){return this.options.preferCanvas&&g_(c)||pm(c)}});var b1=To.extend({initialize:function(c,y){To.prototype.initialize.call(this,this._boundsToLatLngs(c),y)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=Xe(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function BE(c,y){return new b1(c,y)}kl.create=ss,kl.pointsToPath=oh,ks.geometryToLayer=sc,ks.coordsToLatLng=am,ks.coordsToLatLngs=$h,ks.latLngToCoords=lm,ks.latLngsToCoords=um,ks.getFeature=oc,ks.asFeature=cm,Ot.mergeOptions({boxZoom:!0});var dc=Mi.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){ht(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Qt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){se(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Rt(),Jf(),this._startPoint=this._map.mouseEventToContainerPoint(c),ht(document,{contextmenu:ts,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=D("div","leaflet-zoom-box",this._container),Ve(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var y=new H(this._point,this._startPoint),v=y.getSize();An(this._box,y.min),this._box.style.width=v.x+"px",this._box.style.height=v.y+"px"},_finish:function(){this._moved&&(se(this._box),Tt(this._container,"leaflet-crosshair")),Qu(),Yf(),Qt(document,{contextmenu:ts,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var y=new nt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ot.addInitHook("addHandler","boxZoom",dc),Ot.mergeOptions({doubleClickZoom:!0});var S1=Mi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var y=this._map,v=y.getZoom(),x=y.options.zoomDelta,P=c.originalEvent.shiftKey?v-x:v+x;y.options.doubleClickZoom==="center"?y.setZoom(P):y.setZoomAround(c.containerPoint,P)}});Ot.addInitHook("addHandler","doubleClickZoom",S1),Ot.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var __=Mi.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new ns(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}Ve(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Tt(this._map._container,"leaflet-grab"),Tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=Xe(this._map.options.maxBounds);this._offsetLimit=ce(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var y=this._lastTime=+new Date,v=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(v),this._times.push(y),this._prunePositions(y)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,y){return c-(c-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;c.x<y.min.x&&(c.x=this._viscousLimit(c.x,y.min.x)),c.y<y.min.y&&(c.y=this._viscousLimit(c.y,y.min.y)),c.x>y.max.x&&(c.x=this._viscousLimit(c.x,y.max.x)),c.y>y.max.y&&(c.y=this._viscousLimit(c.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,y=Math.round(c/2),v=this._initialWorldOffset,x=this._draggable._newPos.x,P=(x-y+v)%c+y-v,R=(x+y+v)%c-y-v,V=Math.abs(P+v)<Math.abs(R+v)?P:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(c){var y=this._map,v=y.options,x=!v.inertia||c.noInertia||this._times.length<2;if(y.fire("dragend",c),x)y.fire("moveend");else{this._prunePositions(+new Date);var P=this._lastPos.subtract(this._positions[0]),R=(this._lastTime-this._times[0])/1e3,V=v.easeLinearity,X=P.multiplyBy(V/R),oe=X.distanceTo([0,0]),me=Math.min(v.inertiaMaxSpeed,oe),Oe=X.multiplyBy(me/oe),st=me/(v.inertiaDeceleration*V),bt=Oe.multiplyBy(-st/2).round();!bt.x&&!bt.y?y.fire("moveend"):(bt=y._limitOffset(bt,y.options.maxBounds),_e(function(){y.panBy(bt,{duration:st,easeLinearity:V,noMoveStart:!0,animate:!0})}))}}});Ot.addInitHook("addHandler","dragging",__),Ot.mergeOptions({keyboard:!0,keyboardPanDelta:80});var w_=Mi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),ht(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Qt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,y=document.documentElement,v=c.scrollTop||y.scrollTop,x=c.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(x,v)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var y=this._panKeys={},v=this.keyCodes,x,P;for(x=0,P=v.left.length;x<P;x++)y[v.left[x]]=[-1*c,0];for(x=0,P=v.right.length;x<P;x++)y[v.right[x]]=[c,0];for(x=0,P=v.down.length;x<P;x++)y[v.down[x]]=[0,c];for(x=0,P=v.up.length;x<P;x++)y[v.up[x]]=[0,-1*c]},_setZoomDelta:function(c){var y=this._zoomKeys={},v=this.keyCodes,x,P;for(x=0,P=v.zoomIn.length;x<P;x++)y[v.zoomIn[x]]=c;for(x=0,P=v.zoomOut.length;x<P;x++)y[v.zoomOut[x]]=-c},_addHooks:function(){ht(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Qt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var y=c.keyCode,v=this._map,x;if(y in this._panKeys){if(!v._panAnim||!v._panAnim._inProgress)if(x=this._panKeys[y],c.shiftKey&&(x=he(x).multiplyBy(3)),v.options.maxBounds&&(x=v._limitOffset(he(x),v.options.maxBounds)),v.options.worldCopyJump){var P=v.wrapLatLng(v.unproject(v.project(v.getCenter()).add(x)));v.panTo(P)}else v.panBy(x)}else if(y in this._zoomKeys)v.setZoom(v.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&v._popup&&v._popup.options.closeOnEscapeKey)v.closePopup();else return;ts(c)}}});Ot.addInitHook("addHandler","keyboard",w_),Ot.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var en=Mi.extend({addHooks:function(){ht(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Qt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var y=r1(c),v=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var x=Math.max(v-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),x),ts(c)},_performZoom:function(){var c=this._map,y=c.getZoom(),v=this._map.options.zoomSnap||0;c._stop();var x=this._delta/(this._map.options.wheelPxPerZoomLevel*4),P=4*Math.log(2/(1+Math.exp(-Math.abs(x))))/Math.LN2,R=v?Math.ceil(P/v)*v:P,V=c._limitZoom(y+(this._delta>0?R:-R))-y;this._delta=0,this._startTime=null,V&&(c.options.scrollWheelZoom==="center"?c.setZoom(y+V):c.setZoomAround(this._lastMousePos,y+V))}});Ot.addInitHook("addHandler","scrollWheelZoom",en);var v_=600;Ot.mergeOptions({tapHold:ze.touchNative&&ze.safari&&ze.mobile,tapTolerance:15});var Ph=Mi.extend({addHooks:function(){ht(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Qt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var y=c.touches[0];this._startPos=this._newPos=new re(y.clientX,y.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(ht(document,"touchend",En),ht(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),v_),ht(document,"touchend touchcancel contextmenu",this._cancel,this),ht(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){Qt(document,"touchend",En),Qt(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),Qt(document,"touchend touchcancel contextmenu",this._cancel,this),Qt(document,"touchmove",this._onMove,this)},_onMove:function(c){var y=c.touches[0];this._newPos=new re(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,y){var v=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});v._simulated=!0,y.target.dispatchEvent(v)}});Ot.addInitHook("addHandler","tapHold",Ph),Ot.mergeOptions({touchZoom:ze.touch,bounceAtZoomLimits:!0});var hc=Mi.extend({addHooks:function(){Ve(this._map._container,"leaflet-touch-zoom"),ht(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Tt(this._map._container,"leaflet-touch-zoom"),Qt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var y=this._map;if(!(!c.touches||c.touches.length!==2||y._animatingZoom||this._zooming)){var v=y.mouseEventToContainerPoint(c.touches[0]),x=y.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(v.add(x)._divideBy(2))),this._startDist=v.distanceTo(x),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),ht(document,"touchmove",this._onTouchMove,this),ht(document,"touchend touchcancel",this._onTouchEnd,this),En(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var y=this._map,v=y.mouseEventToContainerPoint(c.touches[0]),x=y.mouseEventToContainerPoint(c.touches[1]),P=v.distanceTo(x)/this._startDist;if(this._zoom=y.getScaleZoom(P,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&P<1||this._zoom>y.getMaxZoom()&&P>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,P===1)return}else{var R=v._add(x)._divideBy(2)._subtract(this._centerPoint);if(P===1&&R.x===0&&R.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),$e(this._animRequest);var V=o(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=_e(V,this,!0),En(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,$e(this._animRequest),Qt(document,"touchmove",this._onTouchMove,this),Qt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ot.addInitHook("addHandler","touchZoom",hc),Ot.BoxZoom=dc,Ot.DoubleClickZoom=S1,Ot.Drag=__,Ot.Keyboard=w_,Ot.ScrollWheelZoom=en,Ot.TapHold=Ph,Ot.TouchZoom=hc,n.Bounds=H,n.Browser=ze,n.CRS=Pt,n.Canvas=y_,n.Circle=sm,n.CircleMarker=im,n.Class=Me,n.Control=ci,n.DivIcon=hm,n.DivOverlay=Rs,n.DomEvent=Qf,n.DomUtil=vh,n.Draggable=ns,n.Evented=Je,n.FeatureGroup=bo,n.GeoJSON=ks,n.GridLayer=Ta,n.Handler=Mi,n.Icon=Al,n.ImageOverlay=Sa,n.LatLng=We,n.LatLngBounds=nt,n.Layer=rs,n.LayerGroup=va,n.LineUtil=c1,n.Map=Ot,n.Marker=So,n.Mixin=r_,n.Path=ba,n.Point=re,n.PolyUtil=kE,n.Polygon=To,n.Polyline=di,n.Popup=dm,n.PosAnimation=em,n.Projection=FE,n.Rectangle=b1,n.Renderer=Ls,n.SVG=kl,n.SVGOverlay=p_,n.TileLayer=xa,n.Tooltip=lc,n.Transformation=da,n.Util=je,n.VideoOverlay=h_,n.bind=o,n.bounds=ce,n.canvas=g_,n.circle=Eh,n.circleMarker=f1,n.control=wa,n.divIcon=_1,n.extend=i,n.featureGroup=h1,n.geoJSON=m1,n.geoJson=is,n.gridLayer=uc,n.icon=p1,n.imageOverlay=y1,n.latLng=Le,n.latLngBounds=Xe,n.layerGroup=xh,n.map=_a,n.marker=VE,n.point=he,n.polygon=GE,n.polyline=UE,n.popup=ac,n.rectangle=BE,n.setOptions=I,n.stamp=h,n.svg=pm,n.svgOverlay=f_,n.tileLayer=m_,n.tooltip=Mh,n.transformation=ha,n.version=r,n.videoOverlay=g1;var T1=window.L;n.noConflict=function(){return window.L=T1,this},window.L=n})}(lw,lw.exports)),lw.exports}var Cd=_K();function ux(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function cx(e,t){return t==null?function(r,i){const s=Ke.useRef();return s.current||(s.current=e(r,i)),s}:function(r,i){const s=Ke.useRef();s.current||(s.current=e(r,i));const o=Ke.useRef(r),{instance:a}=s.current;return Ke.useEffect(function(){o.current!==r&&(t(a,r,o.current),o.current=r)},[a,r,i]),s}}function wK(e,t){Ke.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var s;(s=t.layerContainer)==null||s.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function Zz(e){return function(n){const r=lx(),i=e(DA(n,r),r);return Bz(r.map,n.attribution),Wz(i.current,n.eventHandlers),wK(i.current,r),i}}function vK(e,t){const n=cx(e,t),r=Zz(n);return Hz(r)}function bK(e,t){const n=cx(e),r=yK(n,t);return pK(r)}function SK(e,t){const n=cx(e,t),r=Zz(n);return fK(r)}function TK(e,t,n){const{opacity:r,zIndex:i}=t;r!=null&&r!==n.opacity&&e.setOpacity(r),i!=null&&i!==n.zIndex&&e.setZIndex(i)}const xK=cx(function({children:t,...n},r){const i=new Cd.Control.Layers(void 0,void 0,n);return ux(i,LA(r,{layersControl:i}))},function(t,n,r){n.collapsed!==r.collapsed&&(n.collapsed===!0?t.collapse():t.expand())}),EK=mK(xK),wv=Hz(EK);function Jz(e){return function(n){const r=lx(),i=Ke.useRef(n),[s,o]=Ke.useState(null),{layersControl:a,map:h}=r,f=Ke.useCallback(b=>{a!=null&&(i.current.checked&&h.addLayer(b),e(a,b,i.current.name),o(b))},[a,h]),_=Ke.useCallback(b=>{a==null||a.removeLayer(b),o(null)},[a]),w=Ke.useMemo(()=>LA(r,{layerContainer:{addLayer:f,removeLayer:_}}),[r,f,_]);return Ke.useEffect(()=>{s!==null&&i.current!==n&&(n.checked===!0&&(i.current.checked==null||i.current.checked===!1)?h.addLayer(s):i.current.checked===!0&&(n.checked==null||n.checked===!1)&&h.removeLayer(s),i.current=n)}),n.children?q2.createElement(NA,{value:w},n.children):null}}wv.BaseLayer=Jz(function(t,n,r){t.addBaseLayer(n,r)});wv.Overlay=Jz(function(t,n,r){t.addOverlay(n,r)});function NI(){return NI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NI.apply(this,arguments)}function $K({bounds:e,boundsOptions:t,center:n,children:r,className:i,id:s,placeholder:o,style:a,whenReady:h,zoom:f,..._},w){const[b]=Ke.useState({className:i,id:s,style:a}),[T,M]=Ke.useState(null);Ke.useImperativeHandle(w,()=>(T==null?void 0:T.map)??null,[T]);const I=Ke.useCallback(N=>{if(N!==null&&T===null){const j=new Cd.Map(N,_);n!=null&&f!=null?j.setView(n,f):e!=null&&j.fitBounds(e,t),h!=null&&j.whenReady(h),M(hK(j))}},[]);Ke.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const C=T?q2.createElement(NA,{value:T},r):o??null;return q2.createElement("div",NI({},b,{ref:I}),C)}const MK=Ke.forwardRef($K),IK=vK(function({position:t,...n},r){const i=new Cd.Marker(t,n);return ux(i,LA(r,{overlayContainer:i}))},function(t,n,r){n.position!==r.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),PK=bK(function(t,n){const r=new Cd.Popup(t,n.overlayContainer);return ux(r,n)},function(t,n,{position:r},i){Ke.useEffect(function(){const{instance:o}=t;function a(f){f.popup===o&&(o.update(),i(!0))}function h(f){f.popup===o&&i(!1)}return n.map.on({popupopen:a,popupclose:h}),n.overlayContainer==null?(r!=null&&o.setLatLng(r),o.openOn(n.map)):n.overlayContainer.bindPopup(o),function(){var _;n.map.off({popupopen:a,popupclose:h}),(_=n.overlayContainer)==null||_.unbindPopup(),n.map.removeLayer(o)}},[t,n,i,r])}),uD=SK(function({url:t,...n},r){const i=new Cd.TileLayer(t,DA(n,r));return ux(i,r)},function(t,n,r){TK(t,n,r);const{url:i}=n;i!=null&&i!==r.url&&t.setUrl(i)});function l(e,t,n,r){var i,s=arguments.length,o=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function p$e(e,t){return function(n,r){t(n,r,e)}}function f$e(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(_){try{f(r.next(_))}catch(w){o(w)}}function h(_){try{f(r.throw(_))}catch(w){o(w)}}function f(_){_.done?s(_.value):i(_.value).then(a,h)}f((r=r.apply(e,[])).next())})}const CK="modulepreload",OK=function(e){return"/web-songkran/"+e},cD={},pe=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(h=>{if(h=OK(h),h in cD)return;cD[h]=!0;const f=h.endsWith(".css"),_=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${_}`))return;const w=document.createElement("link");if(w.rel=f?"stylesheet":CK,f||(w.as="script"),w.crossOrigin="",w.href=h,a&&w.setAttribute("nonce",a),document.head.appendChild(w),f)return new Promise((b,T)=>{w.addEventListener("load",b),w.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};let Sd;function te(e){return typeof Sd[e]=="function"?Sd[e]=Sd[e](globalThis):Sd[e]}var kz,Rz,Lz,Nz;Sd=(kz=globalThis.dojoConfig)!=null&&kz.has||(Rz=globalThis.esriConfig)!=null&&Rz.has?{...(Lz=globalThis.dojoConfig)==null?void 0:Lz.has,...(Nz=globalThis.esriConfig)==null?void 0:Nz.has}:{},te.add=(e,t,n,r)=>{(r||Sd[e]===void 0)&&(Sd[e]=t),n&&te(e)},te.cache=Sd,te.add("big-integer-warning-enabled",!0),te.add("esri-deprecation-warnings",!0),te.add("esri-tests-disable-screenshots",!1),te.add("esri-tests-use-full-window",!1),te.add("esri-tests-post-to-influx",!0),te.add("esri-cim-animations-enable-status","enabled"),te.add("esri-cim-animations-spotlight",!1),te.add("esri-cim-animations-freeze-time",!1),te.add("enable-feature:multiple-highlights",!1),(()=>{var t;te.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(te.add("host-browser",e),te.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),te.add("dom",e),te("host-browser")){const n=navigator,r=n.userAgent,i=n.appVersion,s=parseFloat(i);if(te.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),te.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),te.add("khtml",i.includes("Konqueror")?s:void 0),te.add("edge",parseFloat(r.split("Edge/")[1])||void 0),te.add("opr",parseFloat(r.split("OPR/")[1])||void 0),te.add("webkit",!te("wp")&&!te("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),te.add("chrome",!te("edge")&&!te("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),te.add("android",!te("wp")&&parseFloat(r.split("Android ")[1])||void 0),te.add("safari",!i.includes("Safari")||te("wp")||te("chrome")||te("android")||te("edge")||te("opr")?void 0:parseFloat(i.split("Version/")[1])),te.add("mac",i.includes("Macintosh")),!te("wp")&&/(iPhone|iPod|iPad)/.test(r)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",h=parseFloat(a.replace(/_/,".").replaceAll("_",""));te.add(o,h),te.add("ios",h)}te("webkit")||(!r.includes("Gecko")||te("wp")||te("khtml")||te("edge")||te.add("mozilla",s),te("mozilla")&&te.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),n=/iPhone/i.test(e);t&&te.add("esri-mobile",t),n&&te.add("esri-iPhone",n),te.add("esri-geolocation",!!navigator.geolocation)}te.add("esri-wasm","WebAssembly"in globalThis),te.add("esri-performance-mode-frames-between-render",20),te.add("esri-force-performance-mode",!1),te.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),te.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),te.add("esri-atomics","Atomics"in globalThis),te.add("esri-workers","Worker"in globalThis),te.add("web-feat:cache","caches"in globalThis),te.add("esri-workers-arraybuffer-transfer",!te("safari")||Number(te("safari"))>=12),te.add("workers-pool-size",8),te.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),te.add("featurelayer-simplify-payload-size-factors",[1,1,4]),te.add("featurelayer-fast-triangulation-enabled",!0),te.add("featurelayer-animation-enabled",!0),te.add("featurelayer-snapshot-enabled",!0),te.add("featurelayer-snapshot-point-min-threshold",8e4),te.add("featurelayer-snapshot-point-max-threshold",4e5),te.add("featurelayer-snapshot-point-coverage",.1),te.add("featurelayer-query-max-depth",4),te.add("featurelayer-query-pausing-enabled",!1),te.add("featurelayer-advanced-symbols",!1),te.add("featurelayer-pbf",!0),te.add("featurelayer-pbf-statistics",!1),te.add("feature-layers-workers",!0),te.add("feature-polyline-generalization-factor",1),te.add("mapview-transitions-duration",200),te.add("mapview-essential-goto-duration",200),te.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),te.add("mapserver-pbf-version-support",10.81),te.add("mapservice-popup-identify-max-tolerance",20),te("host-webworker")||te("host-browser")&&(te.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),te.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{te.add("esri-image-decode",!0,!0,!0)}).catch(()=>{te.add("esri-image-decode",!1,!0,!0)})}return!1}),te.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();let gS=class Yh{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Yh._m}getInt(){return this._seed=(Yh._a*this._seed+Yh._c)%Yh._m,this._seed}getFloat(){return this.getInt()/(Yh._m-1)}getIntRange(t,n){return Math.round(this.getFloatRange(t,n))}getFloatRange(t,n){const r=n-t;return t+this.getInt()/Yh._m*r}};gS._m=2147483647,gS._a=48271,gS._c=0;const AK=1.5,m$e=1/AK,y$e=.5;function g$e(e,t){return t?e.filter((n,r,i)=>i.findIndex(t.bind(null,n))===r):Array.from(new Set(e))}function dx(e,t,n){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(n){for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function dD(e,t,n){let r,i;return n?(r=t.filter(s=>!e.some(o=>n(o,s))),i=e.filter(s=>!t.some(o=>n(o,s)))):(r=t.filter(s=>!e.includes(s)),i=e.filter(s=>!t.includes(s))),{added:r,removed:i}}function _$e(e){return e&&typeof e.length=="number"}let Yz=class{constructor(){this.last=0}};const Kz=new Yz;function DI(e,t,n,r){r=r||Kz;const i=Math.max(0,r.last-10);for(let o=i;o<n;++o)if(e[o]===t)return r.last=o,o;const s=Math.min(i,n);for(let o=0;o<s;++o)if(e[o]===t)return r.last=o,o;return-1}function kK(e,t,n,r){const i=e.length,s=DI(e,t,i,r);if(s!==-1)return e[s]=e[i-1],e.pop(),t}const Po=new Set;function RK(e,t,n=e.length,r=t.length,i,s){if(r===0||n===0)return n;Po.clear();for(let a=0;a<r;++a)Po.add(t[a]);i=i||Kz;const o=Math.max(0,i.last-10);for(let a=o;a<n;++a)if(Po.has(e[a])&&(s==null||s.push(e[a]),Po.delete(e[a]),e[a]=e[n-1],--n,--a,Po.size===0||n===0))return Po.clear(),n;for(let a=0;a<o;++a)if(Po.has(e[a])&&(s==null||s.push(e[a]),Po.delete(e[a]),e[a]=e[n-1],--n,--a,Po.size===0||n===0))return Po.clear(),n;return Po.clear(),n}function v$e(e,t){let n=0;for(let r=0;r<e.length;++r){const i=e[r];t(i,r)&&(e[n]=i,n++)}e.length=n}function Xz(e){return e?(hD.seed=e,()=>hD.getFloat()):Math.random}function Qz(e,t){const n=Xz(t);for(let r=e.length-1;r>0;r--){const i=Math.floor(n()*(r+1)),s=e[r];e[r]=e[i],e[i]=s}return e}const hD=new gS;function eV(e,t){const n=e.indexOf(t);return n!==-1?(e.splice(n,1),t):null}function Dd(e,t){return e!=null}function tV(e){return 32+e.length}function FA(){return 16}function b$e(e){if(!e)return 0;let t=rV;for(const n in e)if(e.hasOwnProperty(n)){const r=e[n];switch(typeof r){case"string":t+=tV(r);break;case"number":t+=FA();break;case"boolean":t+=4}}return t}function LK(e){if(!e)return 0;if(Array.isArray(e))return NK(e);let t=rV;for(const n in e)e.hasOwnProperty(n)&&(t+=nV(e[n]));return t}function NK(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let n=iV;for(let r=0;r<t;r++)n+=nV(e[r]);return n}function nV(e){switch(typeof e){case"object":return LK(e);case"string":return tV(e);case"number":return FA();case"boolean":return 4;default:return 8}}function DK(e,t){return iV+e.length*t}const rV=32,iV=16;function S$e(e){return e instanceof ArrayBuffer}function jA(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function sV(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function oV(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function zA(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function aV(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function VA(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function lV(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function hx(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function px(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function uV(e){return!("buffer"in e)}function T$e(...e){return e.reduce((t,n)=>t+(n?uV(n)?DK(n,FA()):n.byteLength+FK:0),0)}const FK=145,cV=1024;function x$e(e){return px(e)||hx(e)||VA(e)||zA(e)||jA(e)}function E$e(e){return px(e)||hx(e)}function $$e(e){return px(e)?179769e303:hx(e)?3402823e32:lV(e)?4294967295:aV(e)?65535:sV(e)||oV(e)?255:VA(e)?2147483647:zA(e)?32767:jA(e)?127:256}function jK(e,t){let n;for(n in e)e.hasOwnProperty(n)&&e[n]===void 0&&delete e[n];return e}function q(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=pV(e);if(t!=null)return t;if(H2(e))return e.clone();if(dV(e))return e.map(q);if(hV(e))return e.clone();const n={};for(const r of Object.getOwnPropertyNames(e))n[r]=q(e[r]);return n}function FI(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=pV(e);if(t!=null)return t;if(dV(e)){let n=!0;const r=e.map(i=>{const s=FI(i);return i!=null&&s==null&&(n=!1),s});return n?r:null}if(H2(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(!hV(e)){const n=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const i=e[r],s=FI(i);if(i!=null&&s==null)return null;n[r]=s}return n}return null}function H2(e){return typeof e.clone=="function"}function dV(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function hV(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function pD(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function pV(e){if(jA(e)||sV(e)||oV(e)||zA(e)||aV(e)||VA(e)||lV(e)||hx(e)||px(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[n,r]of e)t.set(n,q(r));return t}if(e instanceof Set){const t=new Set;for(const n of e)t.add(q(n));return t}return null}function UA(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function fV(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&dx(e,t):e instanceof Set?t instanceof Set&&VK(e,t):e instanceof Map?t instanceof Map&&UK(e,t):!!pD(e)&&pD(t)&&zK(e,t))}function zK(e,t){if(e===null||t===null)return!1;const n=Object.keys(e);if(t===null||Object.keys(t).length!==n.length)return!1;for(const r of n)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function VK(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function UK(e,t){if(e.size!==t.size)return!1;for(const[n,r]of e){const i=t.get(n);if(i!==r||i===void 0&&!t.has(n))return!1}return!0}function GA(e,t,n=!1){return yV(e,t,n)}function fx(e,t){if(t!=null)return t[e]||mV(e.split("."),!1,t)}function lr(e,t,n){const r=e.split("."),i=r.pop(),s=mV(r,!0,n);s&&i&&(s[i]=t)}function fD(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const n=t;if(e.length!==n.length)return!0;for(let r=0;r<e.length;r++)if(fD(e[r],n[r]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const n in e)if(fD(e[n],t[n]))return!0;return!1}return e!==t}function mV(e,t,n){let r=n;for(const i of e){if(r==null)return;if(!(i in r)){if(!t)return;r[i]={}}r=r[i]}return r}function yV(e,t,n){return t?Object.keys(t).reduce((r,i)=>{let s=r[i],o=t[i];return s===o?r:s===void 0?(r[i]=q(o),r):(Array.isArray(o)||Array.isArray(r)?(s=s?Array.isArray(s)?r[i]=s.slice():r[i]=[s]:r[i]=[],o&&(Array.isArray(o)||(o=[o]),n?o.forEach(a=>{s.includes(a)||s.push(a)}):r[i]=o.slice())):o&&typeof o=="object"?r[i]=yV(s,o,n):r.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(r[i]=o),r)},e||{}):e}var Dz;const Bt={apiKey:void 0,applicationName:"",applicationUrl:(Dz=globalThis.location)==null?void 0:Dz.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(GA(Bt,globalThis.esriConfig,!0),delete Bt.has),!Bt.assetsPath){{const e="4.31";Bt.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}Bt.defaultAssetsPath=Bt.assetsPath}const GK=/\{([^}]+)\}/g;function mD(e){return e??""}function BA(e,t){return t?e.replaceAll(GK,typeof t=="object"?(n,r)=>mD(fx(r,t)):(n,r)=>mD(t(r))):e}function M$e(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,n=>t!=null&&t.includes(n)?n:`\\${n}`)}function gV(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}let yD;function I$e(e){return yD??(yD=new DOMParser),yD.parseFromString(e||"","text/html").body.innerText||""}function P$e(e,t){return new RegExp(`{${t}}`,"ig").test(e)}const gD={info:0,warn:1,error:2,none:3};let fe=class cs{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,cs._loggers.set(this.module,this);const n=this.module.lastIndexOf(".");n!==-1&&(this._parent=cs.getLogger(this.module.slice(0,n)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,cs._loggers.get(t)||new cs({module:t})}_log(t,n,...r){if(this._matchLevel(t)){if(n!=="always"&&!cs._throttlingDisabled){const i=qK(r),s=this._loggedMessages[t].get(i);if(n==="once"&&s!=null||n==="oncePerTick"&&s&&s>=cs._tickCounter)return;this._loggedMessages[t].set(i,cs._tickCounter),cs._scheduleTickCounterIncrement()}for(const i of Bt.log.interceptors)if(i(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,n){let r=this;for(;r!=null;){const i=r[t];if(i!=null)return i;r=r.parent}return n}_inheritedWriter(){return this._parentWithMember("writer",BK)}_matchLevel(t){const n=Bt.log.level||"warn";return gD[this._parentWithMember("level",n)]<=gD[t]}static _scheduleTickCounterIncrement(){cs._tickCounterScheduled||(cs._tickCounterScheduled=!0,Promise.resolve().then(()=>{cs._tickCounter++,cs._tickCounterScheduled=!1}))}};function BK(e,t,...n){console[e](`[${t}]`,...n)}function qK(...e){return gV(JSON.stringify(e,(n,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}fe._loggers=new Map,fe._tickCounter=0,fe._tickCounterScheduled=!1,fe._throttlingDisabled=!1;function HK(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(n,r)=>r===""?"$":(fx(r,t)??"").toString())}let _V=class{constructor(t,n,r=void 0){this.name=t,this.details=r,this.message=(n&&HK(n,r))??""}toString(){return"["+this.name+"]: "+this.message}},Y=class wV extends _V{constructor(t,n,r){super(t,n,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,n)=>{if(n&&typeof n=="object"&&typeof n.toJSON=="function")return n;try{return q(n)}catch{return"[object]"}}))}}catch(t){throw fe.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new wV(t.name,t.message,t.details)}};Y.prototype.type="error";const _D=new WeakMap;function WK(e,t,n=!1){const r=` DEPRECATED - ${t}`;if(!n)return void e.warn(r);let i=_D.get(e);i||(i=new Set,_D.set(e,i)),i.has(t)||(i.add(t),e.warn(r))}function vV(e,t,n={}){if(te("esri-deprecation-warnings")){const{moduleName:r}=n;Hv(e,`Function: ${(r?r+"::":"")+t+"()"}`,n)}}function O$e(e,t,n={}){if(te("esri-deprecation-warnings")){const{moduleName:r}=n;Hv(e,`Property: ${(r?r+"::":"")+t}`,n)}}function ZK(e,t,n={}){te("esri-deprecation-warnings")&&Hv(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...n})}function Hv(e,t,n={}){if(te("esri-deprecation-warnings")){const{replacement:r,version:i,see:s,warnOnce:o}=n;let a=t;r&&(a+=`
	 Replacement: ${r}`),i&&(a+=`
	 Version: ${i}`),s&&(a+=`
	 See ${s} for more details.`),WK(e,a,o)}}function A$e(e){const t=[];return function*(){yield*t;for(const n of e)t.push(n),yield n}}function JK(e,t){for(const n of e)if(n!=null&&t(n))return n}function W2(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let Pg=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(n=>{t+=n.length}),t}add(t,n){if(W2(t)){const r=this._getOrCreateGroup(n);for(const i of t)vD(i)&&r.push(i)}else vD(t)&&this._getOrCreateGroup(n).push(t);return this}forEach(t,n){if(typeof t=="function")this._groups.forEach(r=>r.forEach(t));else{const r=this._getGroup(t);r&&n&&r.forEach(n)}}has(t){return this._groups.has(cb(t))}remove(t){if(typeof t!="string"&&W2(t)){for(const n of t)this.remove(n);return this}return this.has(t)?(wD(this._getGroup(t)),this._groups.delete(cb(t)),this):this}removeAll(){return this._groups.forEach(wD),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const n=[];return this._groups.set(cb(t),n),n}_getGroup(t){return this._groups.get(cb(t))}};function cb(e){return e||"_default_"}function wD(e){for(const t of e)t instanceof Pg?t.removeAll():t.remove()}function vD(e){return e!=null&&(!!e.remove||e instanceof Pg)}function bV(e,t){if(e==null)throw new Error(t??"value is None")}function cn(e){return e==null||e.destroy(),null}function R$e(e){return e==null||e.dispose(),null}function wn(e){return e==null||e.remove(),null}function Wv(e){return e==null||e.abort(),null}function L$e(e){return e==null||e.release(),null}function YK(e,t,n){return e!=null&&t!=null?n!=null?n(e,t):e.equals(t):e===t}function KK(e,t){let n;return e.some((r,i)=>(n=t(r,i),n!=null)),n??void 0}const SV=Symbol("Accessor-beforeDestroy"),XK={remove:()=>{}};function Ft(e){return e?{remove(){e&&(e(),e=void 0)}}:XK}function QK(e){e.forEach(t=>t==null?void 0:t.remove())}function x0(e){return Ft(()=>QK(e))}function N$e(e){return Ft(()=>e==null?void 0:e.abort())}function D$e(e){return Ft(e!=null?()=>e.destroy():void 0)}function Yi(e){return e.__accessor__??null}function eX(e,t){var n;return((n=e==null?void 0:e.metadata)==null?void 0:n[t])!=null}function _S(e,t,n){return n?Z2(e,t,{policy:n,path:""}):Z2(e,t,null)}function Z2(e,t,n){return t?Object.keys(t).reduce((r,i)=>{const s=i;let o=null,a="merge";if(n&&(o=n.path?`${n.path}.${i}`:i,a=n.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[s]))return r[s]=t[s],r;if(r[s]===void 0)return r[s]=q(t[s]),r;let h=r[s],f=t[s];if(h===f)return r;if(Array.isArray(f)||Array.isArray(r))h=h?Array.isArray(h)?r[s]=h.slice():r[s]=[h]:r[s]=[],f&&(Array.isArray(f)||(f=[f]),f.forEach(_=>{h.includes(_)||h.push(_)}));else if(f&&typeof f=="object")if(n){const _=n.path;n.path=o,r[s]=Z2(h,f,n),n.path=_}else r[s]=Z2(h,f,null);else r.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(r[s]=f);return r},e||{}):e}function TV(e){return Array.isArray(e)?e:e.split(".")}function bD(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function tX(e){if(Array.isArray(e)){const t=[];for(const n of e)t.push(...bD(n));return t}return bD(e)}function xV(e,t,n,r){const i=tX(t);if(i.length!==1){const s=i.map(o=>r(e,o,n));return x0(s)}return r(e,i[0],n)}function EV(e,t){const n=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const i=parseInt(n,10);if(!isNaN(i))return Array.isArray(t)?t[i]:t.at(i)}const r=Yi(t);return eX(r,n)?r.get(n):t[n]}function $V(e,t,n){if(e==null)return e;const r=EV(t[n],e);return!r&&n<t.length-1?void 0:n===t.length-1?r:$V(r,t,n+1)}function E0(e,t,n=0){return typeof t!="string"||t.includes(".")?$V(e,TV(t),n):EV(t,e)}function ia(e,t){return E0(e,t)}function SD(e,t){return E0(t,e)!==void 0}var Bi;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(Bi||(Bi={}));function $0(e){let t=e.constructor.__accessorMetadata__;const n=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!n){t=Object.create(t);for(const r in t)t[r]=q(t[r]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function mx(e,t){const n=$0(e);let r=n[t];return r||(r=n[t]={}),r}function nX(e,t){return _S(e,t,iX)}const rX=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function iX(e){return rX.test(e)?"replace":"merge"}function sX(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function oX(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let Sf=class jI{constructor(t,n,r,i=1,s=0){this._ctor=t,this._acquireFunction=n,this._releaseFunction=r,this.allocationSize=i,this._pool=new Array(s),this._initialSize=s;for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(i,1)}destroy(){this.prune(0)}acquire(...t){let n;if(jI.test.disabled)n=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let i=0;i<r;i++)this._pool[i]=new this._ctor}n=this._pool.pop()}return this._acquireFunction?this._acquireFunction(n,...t):oX(n)&&n.acquire(...t),n}release(t){t&&!jI.test.disabled&&(this._releaseFunction?this._releaseFunction(t):sX(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let n=t;n<this._pool.length;++n){const r=this._pool[n];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};Sf.test={disabled:!1};let aX=class{constructor(t,n){this._observers=t,this._observer=n}remove(){eV(this._observers,this._observer)}},MV=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return lX;this._observers==null&&(this._observers=[]);const n=this._observers;let r=!1,i=!1;const s=n.length;for(let o=0;o<s;++o){const a=n[o];if(a.destroyed)i=!0;else if(a===t){r=!0;break}}return r||(n.push(t),i&&this._removeDestroyedObservers()),new aX(n,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const n=t.length;let r=0;for(let i=0;i<n;++i){for(;i+r<n&&t[i+r].destroyed;)++r;if(r>0){if(!(i+r<n))break;t[i]=t[i+r]}}t.length=n-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const n of t)n.onCommitted();this._observers=null}}};const lX=Ft();var xt;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(xt||(xt={}));const zI=xt.USER+1;function Td(e){switch(e){case"defaults":return xt.DEFAULTS;case"service":return xt.SERVICE;case"portal-item":return xt.PORTAL_ITEM;case"web-scene":return xt.WEB_SCENE;case"web-map":return xt.WEB_MAP;case"link-chart":return xt.LINK_CHART;case"user":return xt.USER;default:return null}}function J2(e){switch(e){case xt.DEFAULTS:return"defaults";case xt.SERVICE:return"service";case xt.PORTAL_ITEM:return"portal-item";case xt.WEB_SCENE:return"web-scene";case xt.WEB_MAP:return"web-map";case xt.LINK_CHART:return"link-chart";case xt.USER:return"user"}}function uX(e){return J2(e)}var Wt;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Wt||(Wt={}));let yx=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){var t;(t=this.accessed)==null||t.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(t=>{this._handles.push(t.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const Y2=new yx,uw=[];let vv=Y2;function tt(e){vv.onAccessed(e)}let wS=!1,vS=!1;function Nu(e,t,n){if(wS)return qA(e,t,n);let r=null;return IV(e),r=t.call(n),PV(),r}function cX(e,t){return Nu(Y2,e,t)}function qA(e,t,n){const r=wS;wS=!0,IV(e);let i=null;try{i=t.call(n)}catch(s){vS&&fe.getLogger("esri.core.accessorSupport.tracking").error(s)}return PV(),wS=r,i}function IV(e){vv=e,uw.push(e)}function PV(){const e=uw.length;if(e>1){const t=uw.pop();vv=uw[e-2],t.onTrackingEnd()}else if(e===1){const t=uw.pop();vv=Y2,t.onTrackingEnd()}else vv=Y2}function CV(e,t){if(t.flags&Wt.DepTrackingInitialized)return;t.flags|=Wt.DepTrackingInitialized;const n=vS;vS=!1,t.flags&Wt.AutoTracked?qA(t.trackingTarget,t.metadata.get,e):OV(e,t),vS=n}const dX=[];function OV(e,t){t.flags&Wt.ExplicitlyTracking||(t.flags|=Wt.ExplicitlyTracking,qA(t.trackingTarget,()=>{const n=t.metadata.dependsOn||dX;for(const r of n)if(typeof r!="string"||r.includes(".")){const i=TV(r);for(let s=0,o=e;s<i.length&&o!=null&&typeof o=="object";++s)o=TD(o,i[s],s!==i.length-1)}else TD(e,r,!1)}),t.flags&=~Wt.ExplicitlyTracking)}function TD(e,t,n){const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const i=Yi(e);if(i){const s=i.propertiesByName.get(r);s&&(tt(s),CV(e,s))}return n?e[r]:void 0}let xD=class extends MV{constructor(t,n){super(),this.propertyName=t,this.metadata=n,this.trackingTarget=new yx(this),this.flags=0,this.flags=Wt.Dirty|(n.nonNullable?Wt.NonNullable:0)|(n.hasOwnProperty("value")?Wt.HasDefaultValue:0)|(n.get===void 0?Wt.DepTrackingInitialized:0)|(n.dependsOn===void 0?Wt.AutoTracked:0)}destroy(){this.flags&Wt.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&tt(this);const n=t.store,r=this.propertyName,i=this.flags,s=n.get(r);if(i&Wt.Computing||~i&Wt.Dirty&&n.has(r))return s;this.flags|=Wt.Computing;const o=t.host;let a;i&Wt.AutoTracked?a=Nu(this.trackingTarget,this.metadata.get,o):(OV(o,this),a=this.metadata.get.call(o)),this.flags|=Wt.DepTrackingInitialized,n.set(r,a,xt.COMPUTED);const h=n.get(r);return h===s?this.flags&=~Wt.Dirty:cX(this.commit,this),this.flags&=~Wt.Computing,h}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~Wt.Dirty,this.onCommitted()}onInvalidated(){~this.flags&Wt.Overridden&&(this.flags|=Wt.Dirty);const t=this._observers;if(t&&t.length>0)for(const n of t)n.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const n=t.slice();for(const r of n)r.onCommitted()}}},hX=class AV{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const n=new AV;return this._values.forEach((r,i)=>{t&&t.has(i)||n.set(i,q(r))}),n}get(t){return this._values.get(t)}originOf(){return xt.USER}keys(){return[...this._values.keys()]}set(t,n){this._values.set(t,n)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function db(e,t,n){return e!==void 0}function ED(e,t,n,r){return e!==void 0&&(!(n==null&&e.flags&Wt.NonNullable)||(r.lifecycle,Bi.INITIALIZING,!1))}let pX=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Bi.INITIALIZING,this.store=new hX,this.mutable=!0,this._origin=xt.USER;const n=this.host.constructor.__accessorMetadata__;for(const r in n){const i=new xD(r,n[r]);this.propertiesByName.set(r,i)}this.metadata=n}initialize(){this.lifecycle=Bi.CONSTRUCTING}constructed(){this.lifecycle=Bi.CONSTRUCTED}destroy(){this.lifecycle=Bi.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==Bi.INITIALIZING}get(t){const n=this.propertiesByName.get(t);if(n.metadata.get)return n.getComputed(this);this.mutable&&tt(n);const r=this.store;return r.has(t)?r.get(t):n.metadata.value}originOf(t){const n=this.store.originOf(t);if(n===void 0){const r=this.propertiesByName.get(t);if(r!==void 0&&r.flags&Wt.HasDefaultValue)return"defaults"}return J2(n)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const n=this.propertiesByName.get(t);if(db(n))return this.store.has(t)?this.store.get(t):n.metadata.value}internalSet(t,n){const r=this.propertiesByName.get(t);db(r)&&this._internalSet(r,n)}getDependsInfo(t,n,r){const i=this.propertiesByName.get(n);if(!db(i))return"";const s=new yx,o=Nu(s,()=>{var f;return(f=i.metadata.get)==null?void 0:f.call(t)});let a=`${r}${t.declaredClass.split(".").pop()}.${n}: ${o}
`;const h=s.accessed??new Set;if(h.size===0)return a;r+="  ";for(const f of h)f instanceof xD&&(a+=`${r}${f.propertyName}: undefined
`);return a}setAtOrigin(t,n,r){const i=this.propertiesByName.get(t);if(db(i))return this._setAtOrigin(i,n,r)}isOverridden(t){const n=this.propertiesByName.get(t);return n!==void 0&&!!(n.flags&Wt.Overridden)}clearOverride(t){const n=this.propertiesByName.get(t);n&&n.flags&Wt.Overridden&&(n.flags&=~Wt.Overridden,n.notifyChange())}override(t,n){const r=this.propertiesByName.get(t);if(!ED(r,t,n,this))return;const i=r.metadata.cast;if(i){const s=this._cast(i,n),{valid:o,value:a}=s;if(tM.release(s),!o)return;n=a}r.flags|=Wt.Overridden,this._internalSet(r,n)}set(t,n){const r=this.propertiesByName.get(t);if(!ED(r,t,n,this))return;const i=r.metadata.cast;if(i){const o=this._cast(i,n),{valid:a,value:h}=o;if(tM.release(o),!a)return;n=h}const s=r.metadata.set;s?s.call(this.host,n):this._internalSet(r,n)}setDefaultOrigin(t){this._origin=Td(t)}getDefaultOrigin(){return J2(this._origin)}notifyChange(t){const n=this.propertiesByName.get(t);n!==void 0&&n.notifyChange()}invalidate(t){const n=this.propertiesByName.get(t);n!==void 0&&n.invalidate()}commit(t){const n=this.propertiesByName.get(t);n!==void 0&&n.commit()}_internalSet(t,n){const r=this.lifecycle!==Bi.INITIALIZING?this._origin:xt.DEFAULTS;this._setAtOrigin(t,n,r)}_setAtOrigin(t,n,r){const i=this.store,s=t.propertyName;i.has(s,r)&&UA(n,i.get(s))&&~t.flags&Wt.Overridden&&r===i.originOf(s)||(t.invalidate(),i.set(s,n,r),t.commit(),CV(this.host,t))}_cast(t,n){const r=tM.acquire();return r.valid=!0,r.value=n,t&&(r.value=t.call(this.host,n,r)),r}},fX=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const tM=new Sf(fX);function K2(e,t,n){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))K2(e,r,t[r]);else{if(t.includes(".")){const i=t.split("."),s=i.splice(-1,1)[0];return void K2(ia(e,i),s,n)}const r=e.__accessor__;r!=null&&mX(t,r),e[t]=n}}function mX(e,t){if(te("esri-unknown-property-errors")&&!yX(e,t))throw new Y("set:unknown-property",gX(e,t))}function yX(e,t){return t.metadata[e]!=null}function gX(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let _X;function wX(){return _X}var $D;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})($D||($D={}));function vX(e){e.length=0}let wi=class{constructor(t=50,n=50){this._pool=new Sf(Array,void 0,vX,n,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return nM.acquire()}static release(t){return nM.release(t)}static prune(){nM.prune()}};const nM=new wi(100);let kV=class extends Sf{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const n=super.acquire(...t);return this._set.delete(n),n}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const hb=[];function X2(e){hb.push(e),hb.length===1&&queueMicrotask(()=>{const t=hb.slice();hb.length=0;for(const n of t)n()})}let bv=class{constructor(t,n=30){this.name=t,this._counter=0,this._samples=new Array(n)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,n)=>t-n)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,n)=>t+n,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var VI;(function(e){const t=(s,o,a,h)=>{let f=o,_=o;const w=a>>>1,b=s[f-1];for(;_<=w;){_=f<<1,_<a&&h(s[_-1],s[_])<0&&++_;const T=s[_-1];if(h(T,b)<=0)break;s[f-1]=T,f=_}s[f-1]=b},n=(s,o)=>s<o?-1:s>o?1:0;function r(s,o,a,h){o===void 0&&(o=0),a===void 0&&(a=s.length),h===void 0&&(h=n);for(let _=a>>>1;_>o;_--)t(s,_,a,h);const f=o+1;for(let _=a-1;_>o;_--){const w=s[o];s[o]=s[_],s[_]=w,t(s,f,_,h)}}function*i(s,o,a,h){o===void 0&&(o=0),a===void 0&&(a=s.length),h===void 0&&(h=n);for(let _=a>>>1;_>o;_--)t(s,_,a,h),yield;const f=o+1;for(let _=a-1;_>o;_--){const w=s[o];s[o]=s[_],s[_]=w,t(s,f,_,h),yield}}e.sort=r,e.iterableSort=i})(VI||(VI={}));const MD=VI,bX=1.5,SX=1.1;let Kp=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Yz,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>ID(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const n=new Array;for(let r=0;r<this._length;r++){const i=this.data[r];t(i)&&n.push(i)}return n}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,n){const r=this.data.indexOf(t,n);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let n=t;n<this._length;++n)this.data[n]=this._deallocator(this.data[n]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,n=t.length){for(let r=0;r<n;r++)this.data[this._length++]=t[r]}fill(t,n){for(let r=0;r<n;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,ID(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const n=DI(this.data,t,this.length,this._hint);if(n!==-1)return this.data.splice(n,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(DI(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,n=t.length,r){this.length=RK(this.data,t,this.length,n,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,n){if(t>=this.length||n>=this.length||t===n)return;const r=this.data[t];this.data[t]=this.data[n],this.data[n]=r}sort(t){MD.sort(this.data,0,this.length,t)}iterableSort(t){return MD.iterableSort(this.data,0,this.length,t)}some(t,n){for(let r=0;r<this.length;++r)if(t.call(n,this.data[r],r,this.data))return!0;return!1}find(t,n){const{data:r,length:i}=this;for(let s=0;s<i;++s)if(t.call(n,r[s]))return r[s]}filterInPlace(t,n){let r=0;for(let i=0;i<this._length;++i){const s=this.data[i];t.call(n,s,i,this.data)&&(this.data[i]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let i=r;i<this._length;i++)this.data[i]=this._deallocator(this.data[i]);return this._length=r,this._shrink(),this}forAll(t,n){const{data:r,length:i}=this;for(let s=0;s<i;++s)t.call(n,r[s],s,r)}forEach(t,n){this.data.slice(0,this.length).forEach(t,n)}map(t,n){const r=new Array(this.length);for(let i=0;i<this.length;++i)r[i]=t.call(n,this.data[i],i,this.data);return r}reduce(t,n){let r=n;for(let i=0;i<this.length;++i)r=t(r,this.data[i],i,this.data);return r}has(t){const n=this.length,r=this.data;for(let i=0;i<n;++i)if(r[i]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function ID(e){e.data.length>bX*e.length&&(e.data.length=Math.floor(e.length*SX))}function TX(e){return{setTimeout:(t,n)=>{const r=e.setTimeout(t,n);return Ft(()=>e.clearTimeout(r))}}}const Cg=TX(globalThis);function gx(e){return xX(e)||RV(e)}function xX(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function RV(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function M0(e,t,n){if(!gx(e))throw new TypeError("target is not a Evented or EventTarget object");return RV(e)?EX(e,t,n):e.on(t,n)}function EX(e,t,n,r){if(Array.isArray(t)){const i=t.slice();for(const s of i)e.addEventListener(s,n,r);return Ft(()=>{for(const s of i)e.removeEventListener(s,n,r)})}return e.addEventListener(t,n,r),Ft(()=>e.removeEventListener(t,n,r))}function LV(e,t,n){if(!gx(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,n);const r=M0(e,t,i=>{r.remove(),n.call(e,i)});return r}function rn(e="Aborted"){return new Y("AbortError",e)}function xn(e,t="Aborted"){if(la(e))throw rn(t)}function I0(e){return e instanceof AbortSignal?e:(e==null?void 0:e.signal)??void 0}function la(e){const t=I0(e);return t!=null&&t.aborted}function rl(e){if(li(e))throw e}function PD(e){if(!li(e))throw e}function lo(e,t){const n=I0(e);if(n!=null){if(!n.aborted)return LV(n,"abort",()=>t());t()}}function HA(e,t){const n=I0(e);if(n!=null)return xn(n),LV(n,"abort",()=>t(rn()))}function NV(e,t){return I0(t)==null?e:new Promise((n,r)=>{let i=lo(t,()=>r(rn()));const s=()=>{i=wn(i)};e.then(s,s),e.then(n,r)})}function li(e){return(e==null?void 0:e.name)==="AbortError"}async function UI(e){try{return await e}catch(t){if(!li(t))throw t;return}}async function WA(e){if(!e)return;if(typeof e.forEach!="function"){const n=Object.keys(e),r=n.map(o=>e[o]),i=await WA(r),s={};return n.map((o,a)=>s[o]=i[a]),s}const t=e;return Promise.allSettled(t).then(n=>Array.from(t,(r,i)=>{const s=n[i];return s.status==="fulfilled"?{promise:r,value:s.value}:{promise:r,error:s.reason}}))}async function $X(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function Z$e(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function DV(e,t=void 0,n){const r=new AbortController;return lo(n,()=>r.abort()),new Promise((i,s)=>{let o=setTimeout(()=>{o=0,i(t)},e);lo(r,()=>{o&&(clearTimeout(o),s(rn()))})})}function MX(e,t){const n=new AbortController,r=setTimeout(()=>n.abort(),t);return lo(e,()=>{n.abort(),clearTimeout(r)}),{...e,signal:n.signal}}function _l(e){return e&&typeof e.then=="function"}function GI(e){return _l(e)?e:Promise.resolve(e)}function _x(e,t=-1){let n,r,i,s,o=null;const a=(...h)=>{if(n){r=h,s&&s.reject(rn()),s=xs();const b=s.promise;if(o){const T=o;o=null,T.abort()}return b}if(i=s||xs(),s=null,t>0){const b=new AbortController;n=GI(e(...h,b.signal));const T=n;DV(t).then(()=>{n===T&&(s?b.abort():o=b)})}else n=1,n=GI(e(...h));const f=()=>{const b=r;r=i=n=o=null,b!=null&&a(...b)},_=n,w=i;return _.then(f,f),_.then(w.resolve,w.reject),w.promise};return a}function xs(){let e,t;const n=new Promise((i,s)=>{e=i,t=s}),r=i=>{e(i)};return r.resolve=i=>e(i),r.reject=i=>t(i),r.timeout=(i,s)=>Cg.setTimeout(()=>r.reject(s),i),r.promise=n,r}async function CD(e){await Promise.resolve(),xn(e)}function J$e(e){return e}function IX(e){return 1e3*e}function Y$e(e){return e}let PX=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},CX=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},BI=0;const D_={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},qI=["prepare","preRender","render","postRender","update","finish"],HI=[],sf=new Kp;let OX=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};function AX(){Xp!=null&&(cancelAnimationFrame(Xp),Xp=requestAnimationFrame(ZA))}const Q2={frameTasks:sf,willDispatch:!1,clearFrameTasks:kX,dispatch:jV,executeFrameTasks:RX,reschedule:AX};function P0(e){const t=new CX(e);return HI.push(t),Q2.willDispatch||(Q2.willDispatch=!0,X2(jV)),t}function pg(e){const t=new PX(e);return sf.push(t),Xp==null&&(BI=performance.now(),Xp=requestAnimationFrame(ZA)),new OX(t)}let Xp=null;function kX(e=!1){sf.forAll(t=>{t.removed=!0}),e&&FV()}function ZA(){const e=performance.now();Xp=null,Xp=sf.length>0?requestAnimationFrame(ZA):null,Q2.executeFrameTasks(e)}function RX(e){const t=e-BI;BI=e;const n=1e3/60,r=Math.max(0,t-n);D_.time=e,D_.frameDuration=n-r;for(let i=0;i<qI.length;i++){const s=performance.now(),o=qI[i];sf.forAll(a=>{var h;a.paused||a.removed||(i===0&&a.ticks++,a.phases[o]&&(D_.elapsedFrameTime=performance.now()-e,D_.deltaTime=a.ticks===0?0:t,(h=a.phases[o])==null||h.call(a,D_)))}),FX[i].push(performance.now()-s)}FV(),jX.push(performance.now()-e)}const pb=new Kp;function FV(){sf.forAll(e=>{e.removed&&pb.push(e)}),sf.removeUnorderedMany(pb.data,pb.length),pb.clear()}function jV(){for(;HI.length;){const e=HI.shift();e.isActive&&e.callback()}Q2.willDispatch=!1}function LX(e=1,t){const n=xs(),r=()=>{la(t)?n.reject(rn()):e===0?n():(--e,X2(()=>r()))};return r(),n.promise}function NX(e){return LX(1,e)}async function DX(e){await NX(e),await new Promise(t=>requestAnimationFrame(()=>{e!=null&&e.aborted||t()}))}const FX=qI.map(e=>new bv(e)),jX=new bv("total");function zV(e,t){for(const n of e.values())if(t(n))return!0;return!1}function eT(e,t){if(!t)return e;for(const n of t)n!=null&&e.add(n);return e}function OD(e,t){return t!=null&&e.add(t),e}function VV(e,t){const n=new Set;return eT(n,e),eT(n,t),n}function zX(e,t){const n=new Set;for(const r of t)e.has(r)&&n.add(r);return n}function eMe(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const n of e)if(!t.has(n))return!1;return!0}function tMe(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function VX(e,t){const n=new Set(e);for(const r of t)n.delete(r);return n}function UX(e,t){return VX(VV(e,t),zX(e,t))}let GX=0;function bS(){return++GX}let wx=class extends yx{constructor(t){super(new BX(t)),this._observer&&AD.register(this,new WeakRef(this._observer),this)}destroy(){var t,n;this._observer&&AD.unregister(this._observer),(t=this.accessed)==null||t.clear(),this.clear(),(n=this._observer)==null||n.destroy()}},BX=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=qX}};const AD=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function qX(){}let Jy=!1;const tT=[];function UV(e,t){let n=new wx(s),r=null,i=!1;function s(){if(!n||i)return;if(Jy)return void qV(s);const a=r;n.clear(),Jy=!0,i=!0,r=Nu(n,e),i=!1,Jy=!1,t(r,a),HV()}function o(){n&&(n.destroy(),n=null,r=null)}return i=!0,r=Nu(n,e),i=!1,Ft(o)}function GV(e,t){let n=new wx(i),r=null;function i(){t(r,o)}function s(){n&&(n.destroy(),n=null),r=null}function o(){return n?(n.clear(),r=Nu(n,e),r):null}return o(),Ft(s)}function BV(e,t){let n=!1,r=!1;const i=!!(t!=null&&t.sync);let s=new wx(()=>{n||r||(r=!0,i?o():queueMicrotask(o))});function o(){r=!1,s&&!n&&(Jy?qV(o):(s.clear(),Jy=!0,n=!0,Nu(s,e),n=!1,Jy=!1,HV()))}function a(){s&&(s.destroy(),s=null)}return n=!0,Nu(s,e),n=!1,Ft(a)}function qV(e){tT.includes(e)||tT.unshift(e)}function HV(){for(;tT.length;)tT.pop()()}var Sv;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(Sv||(Sv={}));let Zv=class{constructor(){this.uid=bS(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,n,r,i,s){return this.pool.acquire(Sv.Untracked,t,n,r,i,s,UA)}static acquireTracked(t,n,r,i){return this.pool.acquire(Sv.Tracked,t,n,r,null,null,i)}notify(t,n){this.type===Sv.Untracked?this.callback.call(this.target,t,n,this.path,this.target):this.callback.call(null,t,n,void 0,void 0)}acquire(t,n,r,i,s,o,a){this.uid=bS(),this.removed=!1,this.type=t,this.oldValue=n,this.callback=r,this.getValue=i,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=bS(),this.removed=!0}};Zv.pool=new kV(Zv);const SS=new wi,Au=new Set;let nT;function rT(e){Au.delete(e),Au.add(e),nT||(nT=P0(ZX))}function HX(e){if(e.removed)return;const t=e.oldValue,n=e.getValue();e.equals(t,n)||(e.oldValue=n,e.notify(n,t))}function WX(e){for(const t of Au.values())t.target===e&&(t.removed=!0)}function ZX(){let e=10;for(;nT&&e--;){nT=null;const t=JX(),n=SS.acquire();for(const r of t){const i=r.uid;HX(r),i===r.uid&&r.removed&&n.push(r)}for(const r of Au)r.removed&&(n.push(r),Au.delete(r));for(const r of n)Zv.pool.release(r);SS.release(n),SS.release(t),WI.forEach(r=>r())}}function JX(){const e=SS.acquire();e.length=Au.size;let t=0;for(const n of Au)e[t]=n,++t;return Au.clear(),e}const WI=new Set;function YX(e){return WI.add(e),Ft(()=>WI.delete(e))}function KX(e,t,n){let r=xV(e,t,n,(i,s,o)=>{let a,h,f=GV(()=>E0(i,s),(_,w)=>{var b;((b=i.__accessor__)==null?void 0:b.lifecycle)===Bi.DESTROYED||a&&a.uid!==h?r.remove():(a||(a=Zv.acquireUntracked(_,o,w,i,s),h=a.uid),rT(a))});return Ft(()=>{f.remove(),a&&(a.uid!==h||a.removed||(a.removed=!0,rT(a)),a=null),r=f=null})});return r}function XX(e,t,n){const r=xV(e,t,n,(i,s,o)=>{let a=!1;return UV(()=>E0(i,s),(h,f)=>{i.__accessor__.lifecycle!==Bi.DESTROYED?a||(a=!0,UA(f,h)||o.call(i,h,f,s,i),a=!1):r.remove()})});return r}function QX(e,t,n,r=!1){return e.__accessor__&&e.__accessor__.lifecycle!==Bi.DESTROYED?r?XX(e,t,n):KX(e,t,n):Ft()}function eQ(e,t,n){let r,i,s=GV(e,(o,a)=>{r&&r.uid!==i?s.remove():(r||(r=Zv.acquireTracked(o,t,a,n),i=r.uid),rT(r))});return Ft(()=>{s.remove(),r&&(r.uid!==i||r.removed||(r.removed=!0,rT(r)),r=null),s=null})}function tQ(e,t,n){let r=!1;return UV(e,(i,s)=>{r||(r=!0,n(s,i)||t(i,s),r=!1)})}function nQ(e,t,n=!1,r=fV){return n?tQ(e,t,r):eQ(e,t,r)}function kD(e){return zV(Au,t=>t.oldValue===e)}function rQ(e,t){for(const n of e.values())if(t(n))return!0;return!1}function vx(e,t,n){const r=e.get(t);if(r!==void 0)return r;const i=n();return e.set(t,i),i}function sMe(e){const t=new Map;return n=>(t.has(n)||t.set(n,e(n)),t.get(n))}const Yy=()=>fe.getLogger("esri.core.accessorSupport.ensureTypes");function iQ(e){return e==null?e:new Date(e)}function sQ(e){return e==null?e:!!e}function C0(e){return e==null?e:e.toString()}function vi(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function JA(e){return e==null?e:Math.round(parseFloat(e))}function oQ(e){return null}function aQ(e,t){return n=>{let r=e(n);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}function WV(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function iT(e,t){return t!=null&&e&&!(t instanceof e)}function ZV(e){return e&&"isCollection"in e}function RD(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function lQ(e,t){if(!(t!=null&&t.constructor)||!ZV(t.constructor))return ZI(e,t)?t:new e(t);const n=RD(e.prototype.itemType),r=RD(t.constructor.prototype.itemType);return n?r?n===r?t:n.prototype.isPrototypeOf(r.prototype)?new e(t):(ZI(e,t),t):new e(t):t}function ZI(e,t){return!!WV(t)&&(Yy().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+Sx(e)+"'"),!0)}function bx(e,t){return t==null?t:ZV(e)?lQ(e,t):iT(e,t)?ZI(e,t)?t:new e(t):t}function Sx(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const uQ=new WeakMap;function cQ(e){switch(e){case Number:return t=>vi(t);case Mt:return JA;case Boolean:return sQ;case String:return C0;case Date:return iQ;case Og:return oQ;default:return vx(uQ,e,()=>bx.bind(null,e))}}function jn(e,t){const n=cQ(e);return arguments.length===1?n:n(t)}function Jv(e,t,n){return arguments.length===1?Jv.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,n)):[e(t,n)])}function dQ(e,t){return arguments.length===1?Jv(n=>jn(e,n)):Jv(n=>jn(e,n),t)}function JV(e,t,n){return t!==0&&Array.isArray(n)?n.map(r=>JV(e,t-1,r)):e(n)}function sT(e,t,n){if(arguments.length===2)return s=>sT(e,t,s);if(!n)return n;n=JV(e,t,n);let r=t,i=n;for(;r>0&&Array.isArray(i);)r--,i=i[0];if(i!==void 0)for(let s=0;s<r;s++)n=[n];return n}function hQ(e,t,n){return arguments.length===2?sT(r=>jn(e,r),t):sT(r=>jn(e,r),t,n)}function YV(e){return!!Array.isArray(e)&&!e.some(t=>{const n=typeof t;return!(n==="string"||n==="number"||n==="function"&&e.length>1)})}function JI(e,t){if(arguments.length===2)return JI(e).call(null,t);const n=new Set,r=e.filter(a=>typeof a!="function"),i=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||n.add(a);let s=null,o=null;return(a,h)=>{if(a==null)return a;const f=typeof a,_=f==="string"||f==="number";return _&&(n.has(a)||i.some(w=>f==="string"&&w===String||f==="number"&&w===Number))||f==="object"&&i.some(w=>!iT(a,w))?a:(_&&r.length?(s||(s=r.map(w=>typeof w=="string"?`'${w}'`:`${w}`).join(", ")),Yy().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&i.length?(o||(o=i.map(w=>Sx(w)).join(", ")),Yy().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):Yy().error("Accessor#set",`'${a}' is not a valid value for this property`),h&&(h.valid=!1),null)}}function co(e,t){if(arguments.length===2)return co(e).call(null,t);const n={},r=[],i=[];for(const h in e.typeMap){const f=e.typeMap[h];n[h]=jn(f),r.push(Sx(f)),i.push(h)}const s=()=>`'${r.join("', '")}'`,o=()=>`'${i.join("', '")}'`,a=typeof e.key=="string"?h=>h[e.key]:e.key;return h=>{if(e.base&&!iT(e.base,h)||h==null)return h;const f=a(h)||e.defaultKeyValue,_=n[f];if(!_)return Yy().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!iT(e.typeMap[f],h))return h;if(typeof e.key=="string"&&!WV(h)){const w={};for(const b in h)b!==e.key&&(w[b]=h[b]);return _(w)}return _(h)}}let Mt=class{},Og=class{};const lMe={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function pQ(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function KV(e){switch(e.type){case"native":return jn(e.value);case"array":return Jv(KV(e.value));case"one-of":return fQ(e);default:return null}}function fQ(e){let t=null;return(n,r)=>KI(n,e)?n:(t==null&&(t=YI(e)),Yy().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function YI(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Mt:return"integer";case Date:return"date";case Og:return"null";default:return Sx(e.value)}case"array":return`array of ${YI(e.value)}`;case"one-of":{const t=e.values.map(n=>YI(n));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function KI(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Mt:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case Og:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(n=>!KI(n,t.value));case"one-of":return t.values.some(n=>KI(e,n))}}function p(e={}){return(t,n)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${n}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,n),i=mx(t,n);r&&(r.get||r.set?(i.get=r.get||i.get,i.set=r.set||i.set):"value"in r&&("value"in e&&fe.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${n}" on "${t.constructor.name}" already defined in the metadata`,e),i.value=e.value=r.value)),e.readOnly!=null&&(i.readOnly=e.readOnly);const s=e.aliasOf;if(s){const h=typeof s=="string"?s:s.source,f=typeof s=="string"?null:s.overridable===!0;let _;i.dependsOn=[h],i.get=function(){let w=ia(this,h);if(typeof w=="function"){_||(_=h.split(".").slice(0,-1).join("."));const b=ia(this,_);b&&(w=w.bind(b))}return w},i.readOnly||(i.set=f?function(w){this._override(n,w)}:function(w){K2(this,h,w)})}const o=e.type,a=e.types;if(!i.cast){let h;o?h=mQ(o):a&&(h=Array.isArray(a)?Jv(co(a[0])):co(a)),e.cast=yQ(e.cast,h)}nX(i,e),e.range&&(i.cast=aQ(i.cast,e.range))}}function XV(e,t,n){const r=mx(e,n);r.json||(r.json={});let i=r.json;return t!==void 0&&(i.origins||(i.origins={}),i.origins[t]||(i.origins[t]={}),i=i.origins[t]),i}function mQ(e){let t=0,n=e;if(pQ(e))return KV(e);for(;Array.isArray(n)&&n.length===1&&typeof n[0]!="string"&&typeof n[0]!="number";)n=n[0],t++;const r=n;if(YV(r))return t===0?JI(r):sT(JI(r),t);if(t===1)return dQ(r);if(t>1)return hQ(r,t);const i=e;return i.from?i.from:jn(i)}function yQ(e,t){if(e||t)return e?t?(n,r)=>t(e(n,r),r):e:t}function gQ(e){if(e.json&&e.json.origins){const t=e.json.origins,n={"web-document":["web-scene","web-map"]};for(const r in n)if(t[r]){const i=t[r];n[r].forEach(s=>{t[s]=i}),delete t[r]}}}let Es=class extends _V{constructor(t,n,r){super(t,n,r)}};Es.prototype.type="warning";function QV(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const XI=()=>fe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function LD(e,t,n){var r,i;e&&(!n&&!t.read||(r=t.read)!=null&&r.reader||((i=t.read)==null?void 0:i.enabled)===!1||vQ(e)&&lr("read.reader",Ag(e),t))}function Ag(e){var n,r;const t=e.ndimArray??0;if(t>1)return wQ(e);if(t===1)return ND(e);if("type"in e&&tU(e.type)){const i=(r=(n=e.type.prototype)==null?void 0:n.itemType)==null?void 0:r.Type,s=ND(typeof i=="function"?{type:i}:{types:i});return(o,a,h)=>{const f=s(o,a,h);return f&&new e.type(f)}}return YA(e)}function YA(e){return"type"in e?_Q(e.type):bQ(e.types)}function _Q(e){return e.prototype.read?(t,n,r)=>{if(t==null)return t;const i=typeof t;if(i!=="object")return void XI().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${i}'`);const s=new e;return s.read(t,r),s}:e.fromJSON}function eU(e,t,n,r){return r!==0&&Array.isArray(t)?t.map(i=>eU(e,i,n,r-1)):e(t,void 0,n)}function wQ(e){const t=YA(e),n=eU.bind(null,t),r=e.ndimArray??0;return(i,s,o)=>{if(i==null)return i;i=n(i,o,r);let a=r,h=i;for(;a>0&&Array.isArray(h);)a--,h=h[0];if(h!==void 0)for(let f=0;f<a;f++)i=[i];return i}}function ND(e){const t=YA(e);return(n,r,i)=>{if(n==null)return n;if(Array.isArray(n)){const o=[];for(const a of n){const h=t(a,void 0,i);h!==void 0&&o.push(h)}return o}const s=t(n,void 0,i);return s!==void 0?[s]:void 0}}function tU(e){if(!QV(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?KA(t.Type):nU(t.Type))}function vQ(e){return"types"in e?nU(e.types):KA(e.type)}function KA(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||tU(e))}function nU(e){for(const t in e.typeMap)if(!KA(e.typeMap[t]))return!1;return!0}function bQ(e){let t=null;const n=e.errorContext??"type",r=e.validate;return(i,s,o)=>{if(i==null)return i;const a=typeof i;if(a!=="object")return void XI().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=SQ(e));const h=e.key;if(typeof h!="string")return;const f=i[h],_=f?t[f]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!_){const b=`Type '${f||"unknown"}' is not supported`;return o!=null&&o.messages&&i&&o.messages.push(new Es(`${n}:unsupported`,b,{definition:i,context:o})),void XI().error(b)}const w=new _;return w.read(i,o),r?r(w):w}}function SQ(e){var n,r;const t={};for(const i in e.typeMap){const s=e.typeMap[i],o=$0(s.prototype);if(typeof e.key=="function")continue;const a=o[e.key];if(!a)continue;if((n=a.json)!=null&&n.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"){t[a.json.type[0]]=s;continue}const h=(r=a.json)==null?void 0:r.write;if(!(h!=null&&h.writer)){t[i]=s;continue}const f=h.target,_=typeof f=="string"?f:e.key,w={};h.writer(i,w,_),w[_]&&(t[w[_]]=s)}return t}function TQ(e){if(e.json||(e.json={}),FD(e.json),jD(e.json),DD(e.json),e.json.origins)for(const t in e.json.origins)FD(e.json.origins[t]),jD(e.json.origins[t]),DD(e.json.origins[t]);return!0}function DD(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function FD(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function jD(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function zD(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const n=(e==null?void 0:e.ndimArray)??0;e&&(n===1||"type"in e&&QV(e.type))?t.write.writer=$Q:n>1?t.write.writer=MQ(n):t.types?Array.isArray(t.types)?t.write.writer=EQ(t.types[0]):t.write.writer=xQ(t.types):t.write.writer=Yv}function xQ(e){return(t,n,r,i)=>t?rU(t,e,i)?Yv(t,n,r,i):void 0:Yv(t,n,r,i)}function rU(e,t,n){for(const r in t.typeMap)if(e instanceof t.typeMap[r])return!0;if(n!=null&&n.messages){const r=t.errorContext??"type",i=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;n&&n.messages&&e&&n.messages.push(new Y(`${r}:unsupported`,i,{definition:e,context:n})),fe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(i)}return!1}function EQ(e){return(t,n,r,i)=>!t||!Array.isArray(t)?Yv(t,n,r,i):Yv(t.filter(s=>rU(s,e,i)),n,r,i)}function Yv(e,t,n,r){lr(n,oT(e,r),t)}function oT(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?aT(e):e}function aT(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function $Q(e,t,n,r){let i;e===null?i=null:e&&typeof e.map=="function"?(i=e.map(s=>oT(s,r)),typeof i.toArray=="function"&&(i=i.toArray())):i=[oT(e,r)],lr(n,i,t)}function iU(e,t,n){return n!==0&&Array.isArray(e)?e.map(r=>iU(r,t,n-1)):oT(e,t)}function MQ(e){return(t,n,r,i)=>{let s;if(t===null)s=null;else{s=iU(t,i,e);let o=e,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let h=0;h<o;h++)s=[s]}lr(r,s,n)}}function IQ(e,t){return XA(e,"any",t==null?void 0:t.origin)}function QI(e,t){return XA(e,"read",t==null?void 0:t.origin)}function sU(e,t){return XA(e,"write",t==null?void 0:t.origin)}function XA(e,t,n){let r=e==null?void 0:e.json;if(r!=null&&r.origins&&n){let i;i=n==="link-chart"?r.origins[n]&&(t==="any"||t in r.origins[n])?r.origins[n]:r.origins["web-map"]:r.origins[n],i&&(t==="any"||t in i)&&(r=i)}return r}function PQ(e){var n;const t=CQ(e);if(e.json.origins)for(const r in e.json.origins){const i=e.json.origins[r],s=i.types?OQ(i):t;LD(s,i,!1),i.types&&!i.write&&((n=e.json.write)!=null&&n.enabled)&&(i.write={...e.json.write}),zD(s,i)}LD(t,e.json,!0),zD(t,e.json)}function CQ(e){return e.json.types?e3(e.json):e.type?oU(e):e3(e)}function OQ(e){return e.type?oU(e):e3(e)}function oU(e){if(!e.type)return;let t=0,n=e.type;for(;Array.isArray(n)&&!YV(n);)n=n[0],t++;return{type:n,ndimArray:t}}function e3(e){if(!e.types)return;let t=0,n=e.types;for(;Array.isArray(n);)n=n[0],t++;return{types:n,ndimArray:t}}function AQ(e){TQ(e)&&(gQ(e),PQ(e))}const rM=new Set,iM=new Set;function k(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,RQ(t);const n=[],r=[];let i=t.prototype;for(;i;)i.hasOwnProperty("initialize")&&!rM.has(i.initialize)&&(rM.add(i.initialize),n.push(i.initialize)),i.hasOwnProperty("destroy")&&!iM.has(i.destroy)&&(iM.add(i.destroy),r.push(i.destroy)),i=Object.getPrototypeOf(i);rM.clear(),iM.clear();const s=class extends t{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(n.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let h=n.length-1;h>=0;h--)n[h].call(this)}}),r.length){let h=!1;const f=this[SV];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!h){h=!0,f.call(this);for(let _=0;_<r.length;_++)r[_].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=$0(t.prototype),s.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function kQ(e,t){return t.get==null?function(){const n=this.__accessor__,r=n.propertiesByName.get(e);if(r===void 0)return;n.mutable&&tt(r);const i=n.store;return i.has(e)?i.get(e):r.metadata.value}:function(){const n=this.__accessor__,r=n.propertiesByName.get(e);if(r!==void 0)return r.getComputed(n)}}function RQ(e){const t=e.prototype,n=$0(t),r={};for(const i of Object.getOwnPropertyNames(n)){const s=n[i];AQ(s),r[i]={enumerable:!0,configurable:!0,get:kQ(i,s),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&s.readOnly?VD("read-only",i):a.lifecycle===Bi.CONSTRUCTED&&s.constructOnly?VD("construct-only",i):void a.set(i,o)}else Object.defineProperty(this,i,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,r)}const VD=(e,t)=>{fe.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var aU,lU;function LQ(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const Oa=Symbol("Accessor-Handles"),t3=Symbol("Accessor-Initialized");let Fe=class TS{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:n,declaredClass:r,constructor:i}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const s=this;class o extends s{constructor(...h){super(...h),this.inherited=null,i&&i.apply(this,h)}}$0(o.prototype);for(const a in t){const h=t[a];o.prototype[a]=typeof h=="function"?function(...f){const _=this.inherited;let w;this.inherited=function(...b){if(s.prototype[a])return s.prototype[a].apply(this,b)};try{w=h.apply(this,f)}catch(b){throw this.inherited=_,b}return this.inherited=_,w}:t[a]}for(const a in n){const h=LQ(n[a]);p(h)(o.prototype,a)}return k(r)(o)}static freeze(t){return t instanceof TS?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof TS?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var r;if(this[aU]=null,this[lU]=!1,this.constructor===TS)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const n=new pX(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:n}),t.length>0&&(n.ctorArgs=((r=this.normalizeCtorArgs)==null?void 0:r.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,n=t.ctorArgs;t.initialize(),n&&(this.set(n),t.ctorArgs=null),t.constructed(),this.initialize(),this[t3]=!0}initialize(){}[SV](){this[Oa]=cn(this[Oa])}destroy(){var t;this.destroyed||(WX(this),this.__accessor__.destroy(),(t=wX())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[t3]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===Bi.DESTROYED||!1}commitProperty(t){ia(this,t)}get(t){return vV(fe.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),ia(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,n){return K2(this,t,n),this}watch(t,n,r){return QX(this,t,n,r)}addHandles(t,n){if(this.destroyed){const r=Array.isArray(t)?t:[t];for(const i of r)i.remove();return}(this[Oa]??(this[Oa]=new Pg)).add(t,n)}removeHandles(t){var n;(n=this[Oa])==null||n.remove(t)}removeAllHandles(){var t;(t=this[Oa])==null||t.removeAll()}removeHandlesReference(t){var n;(n=this[Oa])==null||n.removeReference(t)}hasHandles(t){var n;return((n=this[Oa])==null?void 0:n.has(t))===!0}_override(t,n){n===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,n)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,n){n==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,n)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,n){return this.__accessor__.internalSet(t,n),this}};aU=Oa,lU=t3;let NQ=class uU{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const n=new uU;return this._values.forEach((r,i)=>{t&&t.has(i)||n.set(i,q(r.value),r.origin)}),n}get(t,n){n=this._normalizeOrigin(n);const r=this._values.get(t);return n==null||(r==null?void 0:r.origin)===n?r==null?void 0:r.value:void 0}originOf(t){var n;return((n=this._values.get(t))==null?void 0:n.origin)??xt.USER}keys(t){t=this._normalizeOrigin(t);const n=[...this._values.keys()];return t==null?n:n.filter(r=>{var i;return((i=this._values.get(r))==null?void 0:i.origin)===t})}set(t,n,r){if((r=this._normalizeOrigin(r))===xt.DEFAULTS){const i=this._values.get(t);if((i==null?void 0:i.origin)!=null&&i.origin>r)return}this._values.set(t,new DQ(n,r))}delete(t,n){var r;(n=this._normalizeOrigin(n))!=null&&((r=this._values.get(t))==null?void 0:r.origin)!==n||this._values.delete(t)}has(t,n){var r;return(n=this._normalizeOrigin(n))!=null?((r=this._values.get(t))==null?void 0:r.origin)===n:this._values.has(t)}forEach(t){this._values.forEach(({value:n},r)=>t(n,r))}_normalizeOrigin(t){if(t!=null)return t===xt.DEFAULTS?t:xt.USER}},DQ=class{constructor(t,n){this.value=t,this.origin=n}};function cU(e,t,n){t.keys().forEach(i=>{n.set(i,t.get(i),xt.DEFAULTS)});const r=e.metadata;Object.keys(r).forEach(i=>{e.internalGet(i)&&n.set(i,e.internalGet(i),xt.DEFAULTS)})}function FQ(e,t,n){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&SD(r,n))return!0}else for(const i of r)if(i===t||i.includes(".")&&i.indexOf(t)===0&&SD(i,n))return!0;return!1}function jQ(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function zQ(e,t,n,r,i){let s=QI(t[n],i);jQ(s)&&(e[n]=!0);for(const o of Object.getOwnPropertyNames(t))s=QI(t[o],i),FQ(s,n,r)&&(e[o]=!0)}function VQ(e,t,n,r){const i=n.metadata,s=IQ(i[t],r),o=s==null?void 0:s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,r):o;a!==void 0&&n.set(t,a)}const dU={origin:"service"};function hU(e,t,n=dU){if(!t||typeof t!="object")return;const r=Yi(e),i=r.metadata,s={};for(const o of Object.getOwnPropertyNames(t))zQ(s,i,o,t,n);r.setDefaultOrigin(n.origin);for(const o of Object.getOwnPropertyNames(s)){const a=QI(i[o],n).read,h=a==null?void 0:a.source;let f;f=h&&typeof h=="string"?E0(t,h):t[o],a!=null&&a.reader&&(f=a.reader.call(e,f,t,n)),f!==void 0&&r.set(o,f)}if(!n||!n.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(i))s[o]||VQ(e,o,r,n)}r.setDefaultOrigin("user")}function pU(e,t,n,r=dU){var s;const i={...r,messages:[]};n(i),(s=i.messages)==null||s.forEach(o=>{o.type!=="warning"||e.loaded?r!=null&&r.messages&&r.messages.push(o):e.loadWarnings.push(o)})}function UQ(e,t,n,r,i){var o,a;const s={};return(a=(o=t.write)==null?void 0:o.writer)==null||a.call(e,r,s,n,i),s}function fU(e,t,n,r,i,s){if(!(r!=null&&r.write))return!1;const o=ia(e,n);if(!i&&r.write.overridePolicy){const a=r.write.overridePolicy.call(e,o,n,s??void 0);a!==void 0&&(i=a)}if(i||(i=r.write),!i||i.enabled===!1||i.layerContainerTypes&&(s!=null&&s.layerContainerType)&&!i.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!i.allowNull&&!i.writerEnsuresNonNull||o===void 0)&&i.isRequired){const a=new Y("web-document-write:property-required",`Missing value for required property '${n}' on '${e.declaredClass}'`,{propertyName:n,target:e});return a&&(s!=null&&s.messages)?s.messages.push(a):a&&!s&&fe.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!i.allowNull&&!i.writerEnsuresNonNull||!i.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(n)===xt.DEFAULTS)&&GQ(e,n,s,r,o)||!i.ignoreOrigin&&(s!=null&&s.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(n)<Td(s.origin))}function GQ(e,t,n,r,i){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(i);if(typeof s=="function"){if(Array.isArray(i)){const o=s.call(e,t,n??void 0);return dx(o,i)}return!1}return s===i}function BQ(e,t,n,r){const i=Yi(e),s=i.metadata,o=sU(s[t],r);return!!o&&fU(e,i,t,o,n,r)}function mU(e,t,n){var s,o;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return _S(t,e.toJSON(n));const r=Yi(e),i=r.metadata;for(const a in i){const h=sU(i[a],n);if(!fU(e,r,a,h,void 0,n))continue;const f=ia(e,a),_=UQ(e,h,h.write&&typeof h.write.target=="string"?h.write.target:a,f,n);Object.keys(_).length>0&&(t=_S(t,_),(o=(s=n==null?void 0:n.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&n.resources.pendingOperations.push(Promise.all(n.resources.pendingOperations).then(()=>_S(t,_,()=>"replace-arrays"))),n!=null&&n.writtenProperties&&n.writtenProperties.push({target:e,propName:a,oldOrigin:uX(r.store.originOf(a)),newOrigin:n.origin}))}return t}const kg=e=>{let t=class extends e{constructor(...n){super(...n);const r=Yi(this),i=r.store,s=new NQ;r.store=s,cU(r,i,s)}read(n,r){hU(this,n,r)}write(n,r){return mU(this,n??{},r)}toJSON(n){return this.write({},n)}static fromJSON(n,r){return qQ.call(this,n,r)}};return t=l([k("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function qQ(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const n=new this;return n.read(e,t),n}function lT(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}let ne=class extends kg(Fe){};ne=l([k("esri.core.JSONSupport")],ne);const HQ=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,WQ={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function UD(e){const t=e==null?void 0:e.match(HQ);if(!t)return null;const[,n,r,i]=t;if(!n)return null;let s=null,o=null,a=null;const{devext:h,qaext:f,www:_}=WQ;if(r)if(s=n,i)switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=h);break;case"qa":({customBaseUrl:o,portalHostname:a}=f);break;default:return null}else({customBaseUrl:o,portalHostname:a}=_);else switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=h);break;case"qaext":({customBaseUrl:o,portalHostname:a}=f);break;case"www":({customBaseUrl:o,portalHostname:a}=_);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function ZQ(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function yU(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,n=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):n.test(e)?e=e.replace(n,"https://devext.arcgis.com"):r.test(e)&&(e=e.replace(r,"https://qaext.arcgis.com")),e}function gU(e){const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}function JQ(e){const t=new Uint8Array(e);let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return btoa(n)}const YQ=()=>fe.getLogger("esri.core.urlUtils"),Rg=Bt.request,GD="esri/config: esriConfig.request.proxyUrl is not set.",_U=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,wU=/^\s*http:/i,KQ=/^\s*https:/i,XQ=/^\s*file:/i,QQ=/:\d+$/,eee=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,tee=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),nee=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Od=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let n=this.uri.match(tee);this.scheme=n[2]||(n[1]?"":null),this.authority=n[4]||(n[3]?"":null),this.path=n[5],this.query=n[7]||(n[6]?"":null),this.fragment=n[9]||(n[8]?"":null),this.authority!=null&&(n=this.authority.match(nee),this.user=n[3]||null,this.password=n[4]||null,this.host=n[6]||n[7],this.port=n[9]||null)}toString(){return this.uri}};const fb={},ree=new Od(Bt.applicationUrl);let ni=ree;const iee=see();let QA=iee;const ek=()=>ni,pMe=()=>QA;function see(){const e=ni.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${ni.scheme}://${ni.host}${ni.port!=null?`:${ni.port}`:""}`}${t}`}function cr(e){if(!e)return null;const t={path:null,query:null},n=new Od(e),r=e.indexOf("?");return n.query===null?t.path=e:(t.path=e.slice(0,r),t.query=tk(n.query)),n.fragment&&(t.hash=n.fragment,n.query===null&&(t.path=t.path.slice(0,t.path.length-(n.fragment.length+1)))),t}function tk(e){const t=e.split("&"),n={};for(const r of t){if(!r)continue;const i=r.indexOf("=");let s,o;i<0?(s=decodeURIComponent(r),o=""):(s=decodeURIComponent(r.slice(0,i)),o=decodeURIComponent(r.slice(i+1)));let a=n[s];typeof a=="string"&&(a=n[s]=[a]),Array.isArray(a)?a.push(o):n[s]=o}return n}function Kv(e,t){return e?Object.keys(e).map(n=>{const r=e[n];if(r==null)return"";const i=encodeURIComponent(n)+"=",s=t==null?void 0:t[n];return s?i+encodeURIComponent(s(r)):Array.isArray(r)?r.map(o=>lT(o)?i+encodeURIComponent(JSON.stringify(o)):i+encodeURIComponent(o)).join("&"):lT(r)?i+encodeURIComponent(JSON.stringify(r)):i+encodeURIComponent(r)}).filter(n=>n).join("&"):""}function vU(e=!1){let t,n=Rg.proxyUrl;if(typeof e=="string"){t=xU(e);const r=Tx(e);r&&(n=r.proxyUrl)}else t=!!e;if(!n)throw YQ().warn(GD),new Y("urlUtils:proxy-not-set",GD);return t&&r3()&&(n=ok(n)),cr(n)}function fMe(e,t=!1){const n=Tx(e);let r,i;if(n){const s=nk(n.proxyUrl);r=s.path,i=s.query?tk(s.query):null}else if(t){const s=vU(e);r=s.path,i=s.query}if(r){const s=cr(e);e=r+"?"+s.path;const o=Kv({...i,...s.query});o&&(e=`${e}?${o}`)}return e}const F_={path:"",query:""};function nk(e){const t=e.indexOf("?");return t!==-1?(F_.path=e.slice(0,t),F_.query=e.slice(t+1)):(F_.path=e,F_.query=null),F_}function bU(e){return e=(e=cT(e=yee(e=nk(e).path),!0)).toLowerCase()}function oee(e){const t={proxyUrl:e.proxyUrl,urlPrefix:bU(e.urlPrefix)},n=Rg.proxyRules,r=t.urlPrefix;let i=n.length;for(let s=0;s<n.length;s++){const o=n[s].urlPrefix;if(r.indexOf(o)===0){if(r.length===o.length)return-1;i=s;break}o.indexOf(r)===0&&(i=s+1)}return n.splice(i,0,t),i}function Tx(e){const t=Rg.proxyRules,n=bU(e);for(let r=0;r<t.length;r++)if(n.indexOf(t[r].urlPrefix)===0)return t[r]}function aee(e,t){if(!e||!t)return!1;e=uT(e),t=uT(t);const n=UD(e),r=UD(t);return n!=null&&r!=null?n.portalHostname===r.portalHostname:n==null&&r==null&&fg(e,t,!0)}function SU(e,t){return e=uT(e),t=uT(t),cT(e)===cT(t)}function uT(e){const t=(e=sa(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function n3(e,t=Rg.interceptors){const n=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r);if(t){for(const r of t)if(Array.isArray(r.urls)){if(r.urls.some(n))return r}else if(n(r.urls))return r}return null}function fg(e,t,n=!1){if(!e||!t)return!1;const r=s3(e),i=s3(t);return!(!n&&r.scheme!==i.scheme)&&r.host!=null&&i.host!=null&&r.host.toLowerCase()===i.host.toLowerCase()&&r.port===i.port}function rk(e){if(typeof e=="string"){if(!Ss(e))return!0;e=s3(e)}if(fg(e,ni))return!0;const t=Rg.trustedServers||[];for(let n=0;n<t.length;n++){const r=lee(t[n]);for(let i=0;i<r.length;i++)if(fg(e,r[i]))return!0}return!1}function lee(e){return fb[e]||(sk(e)||cl(e)?fb[e]=[new Od(qi(e))]:fb[e]=[new Od(`http://${e}`),new Od(`https://${e}`)]),fb[e]}function qi(e,t=QA,n){return cl(e)?n!=null&&n.preserveProtocolRelative?e:ni.scheme==="http"&&ni.authority===uo(e).slice(2)?`http:${e}`:`https:${e}`:sk(e)?e:mg(e[0]==="/"?fee(t):t,e)}function ik(e,t=QA,n){if(e==null||!Ss(e))return e;const r=sa(e),i=r.toLowerCase(),s=sa(t).toLowerCase().replace(/\/+$/,""),o=n?sa(n).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return e;const a=(w,b,T)=>(T=w.indexOf(b,T))===-1?w.length:T;let h=a(i,"/",i.indexOf("//")+2),f=-1;for(;i.slice(0,h+1)===s.slice(0,h)+"/"&&(f=h+1,h!==i.length);)h=a(i,"/",h+1);if(f===-1||o&&f<o.length)return e;e=r.slice(f);const _=s.slice(f-1).replaceAll(/[^/]+/g,"").length;if(_>0)for(let w=0;w<_;w++)e=`../${e}`;else e=`./${e}`;return e}function sa(e){return e=wee(e=_ee(e=gee(e=qi(e=e.trim()))))}function mg(...e){const t=e.filter(Dd);if(!(t!=null&&t.length))return;const n=[];if(Ss(t[0])){const i=t[0],s=i.indexOf("//");s!==-1&&(n.push(i.slice(0,s+1)),hee(t[0])&&(n[0]+="/"),t[0]=i.slice(s+2))}else t[0][0]==="/"&&n.push("");const r=t.reduce((i,s)=>s?i.concat(s.split("/")):i,[]);for(let i=0;i<r.length;i++){const s=r[i];s===".."&&n.length>0&&n[n.length-1]!==".."?n.pop():(!s&&i===r.length-1||s&&(s!=="."||n.length===0))&&n.push(s)}return n.join("/")}function uo(e,t=!1){if(e==null||xx(e)||Fu(e))return null;let n=e.indexOf("://");if(n===-1&&cl(e))n=2;else{if(n===-1)return null;n+=3}const r=e.indexOf("/",n);return r!==-1&&(e=e.slice(0,r)),t&&(e=cT(e,!0)),e}function Ss(e){return cl(e)||sk(e)}function xx(e){return e!=null&&e.slice(0,5)==="blob:"}function Fu(e){return e!=null&&e.slice(0,5)==="data:"}function uee(e){const t=of(e);return t!=null&&t.isBase64?gU(t.data):null}function mMe(e){return JQ(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const cee=/^data:(.*?)(;base64)?,(.*)$/;function of(e){const t=e.match(cee);if(!t)return null;const[,n,r,i]=t;return{mediaType:n,isBase64:!!r,data:i}}function TU(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function yMe(e){return(await fetch(e)).blob()}function gMe(e){const t=uee(e);if(!t)return null;const n=of(e);return new Blob([t],{type:n.mediaType})}function cl(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function sk(e){return e!=null&&_U.test(e)}function xU(e){return e!=null&&KQ.test(e)||ni.scheme==="https"&&cl(e)}function dee(e){return e!=null&&wU.test(e)||ni.scheme==="http"&&cl(e)}function hee(e){return e!=null&&XQ.test(e)}function ok(e){return cl(e)?`https:${e}`:e.replace(wU,"https:")}function pee(){return ni.scheme==="http"}function r3(){return ni.scheme==="https"}function cT(e,t=!1){return cl(e)?e.slice(2):(e=e.replace(_U,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function fee(e){const t=e.indexOf("//"),n=e.indexOf("/",t+2);return n===-1?e:e.slice(0,n)}function mee(e){let t=0;if(Ss(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const n=e.lastIndexOf("/");return n<t?e:e.slice(0,n+1)}function _Me(e,t){if(!e)return"";const n=cr(e).path.replace(/\/+$/,""),r=n.slice(n.lastIndexOf("/")+1);if(!(t!=null&&t.length))return r;const i=new RegExp(`\\.(${t.join("|")})$`,"i");return r.replace(i,"")}function yee(e){return e.endsWith("/")?e:`${e}/`}function EU(e){return e.replace(/\/+$/,"")}function gee(e){if(/^https?:\/\//i.test(e)){const t=nk(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function _ee(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function wee(e){const t=Rg.httpsDomains;if(!dee(e))return e;const n=e.indexOf("/",7);let r;if(r=n===-1?e:e.slice(0,n),r=r.toLowerCase().slice(7),QQ.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return pee()&&r===ni.authority&&!eee.test(e)||(r3()&&r===ni.authority||t&&t.some(i=>r===i||r.endsWith(`.${i}`))||r3()&&!Tx(e))&&(e=ok(e)),e}function i3(e,t,n){if(!(t&&n&&e&&Ss(e)))return e;const r=e.indexOf("//"),i=e.indexOf("/",r+2),s=e.indexOf(":",r+2),o=Math.min(i<0?e.length:i,s<0?e.length:s);return e.slice(r+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${n}${e.slice(o)}`}function s3(e){return typeof e=="string"?new Od(qi(e)):(e.scheme||(e.scheme=ni.scheme),e)}function wMe(e){return vee.test(e)}function $U(e,t){const n=cr(e),r=Object.keys(n.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),n.path}function MU(e,t,n){const r=cr(e),i=r.query||{};return i[t]=String(n),`${r.path}?${Kv(i)}`}function sM(e,t){if(!t)return e;const n=cr(e),r=n.query||{};for(const[s,o]of Object.entries(t))o!=null&&(r[s]=o);const i=Kv(r);return i?`${n.path}?${i}`:n.path}function vMe(e){if(e==null)return null;const t=e.match(IU);return t?t[2]:null}function BD(e){if(e==null)return null;const t=e.match(IU);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function bMe(e){return typeof e=="string"?of(e)??{data:e}:new Promise((t,n)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(of(r.result)),r.onerror=i=>n(i)})}const IU=/([^.]*)\.([^/]*)$/,vee=/(^data:image\/svg|\.svg$)/i,PU="20241122",CU="f6f7099a0e79cf518abdcf87c5aa8b6f24ecdcd8";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const OU="4.31";let St,ak=OU;ak="4.31.6";function SMe(e){St=e}function TMe(e){const t=St==null?void 0:St.findCredential(e);return t!=null&&t.token?MU(e,"token",t.token):e}te("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),te("host-webworker");const bee=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function See(e){const t=uo(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!bee.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function AU(e,t){return!(!Bt.apiKey||!See(e))}function Tee(e,t,n=!1,r){return new Promise((i,s)=>{if(la(r))return void s(qD());let o=()=>{f(),s(new Error(`Unable to load ${t}`))},a=()=>{const _=e;f(),i(_)},h=()=>{if(!e)return;const _=e;f(),_.src="",s(qD())};const f=()=>{te("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,r!=null&&r.removeEventListener("abort",h),h=null,n&&URL.revokeObjectURL(t)};r!=null&&r.addEventListener("abort",h),te("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function qD(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const kU="Timeout exceeded";function xee(){return new Error(kU)}function xMe(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===kU}function Eee(e){Bt.request.crossOriginNoCorsDomains||(Bt.request.crossOriginNoCorsDomains={});const t=Bt.request.crossOriginNoCorsDomains;for(let n of e)n=n.toLowerCase(),/^https?:\/\//.test(n)?t[uo(n)??""]=0:(t[uo("http://"+n)??""]=0,t[uo("https://"+n)??""]=0)}function $ee(e){const t=Bt.request.crossOriginNoCorsDomains;if(t){let n=uo(e);if(n)return n=n.toLowerCase(),!fg(n,ek())&&t[n]<Date.now()-36e5}return!1}async function Mee(e){var i;const t=cr(e);e=t.path,((i=t.query)==null?void 0:i.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const n=Bt.request.crossOriginNoCorsDomains,r=uo(e);n&&r&&(n[r.toLowerCase()]=Date.now())}async function Lt(e,t){var b;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=tk(t.query.toString().replaceAll("+"," ")));const n=Fu(e),r=xx(e);r||n||(e=sa(e));const i={url:e,requestOptions:{...t}},s=T=>({data:T,getAllHeaders:yg,getHeader:yg,httpStatus:200,requestOptions:i.requestOptions,url:i.url}),o=n3(e,ro.internalInterceptors);if(o){const T=await WD(o,i);if(T!=null)return s(T)}let a=n3(e);if(a){const T=await WD(a,i);if(T!=null)return s(T);a.after||a.error||(a=null)}if(e=i.url,(t=i.requestOptions).responseType==="image"&&(te("host-webworker")||te("host-node")))throw ol("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),i);if(t.method==="head"){if(t.body)throw ol("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),i);if(n||r)throw ol("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),i)}if(await Aee(),dT)return dT.execute(e,t);const h=new AbortController,f=lo(t,()=>h.abort()),_={controller:h,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:i,redoRequest:!1,useIdentity:ro.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},w=await Nee(_).finally(()=>f==null?void 0:f.remove());return(b=a==null?void 0:a.after)==null||b.call(a,w),w}let dT;const ro=Bt.request,RU="FormData"in globalThis,Iee=new Set([499,498,403,401]),Pee=new Set(["COM_0056","COM_0057","SB_0008"]),Cee=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],yg=()=>null,hT=Symbol();function Oee(e){const t=uo(e);t&&!Lt._corsServers.includes(t)&&Lt._corsServers.push(t)}function HD(e){const t=uo(e);return!t||t.endsWith(".arcgis.com")||Lt._corsServers.includes(t)||rk(t)}function ol(e,t,n,r){let i="Error";const s={url:n.url,requestOptions:n.requestOptions,getAllHeaders:yg,getHeader:yg,ssl:!1};if(t instanceof Y)return t.details?(t.details=q(t.details),t.details.url=n.url,t.details.requestOptions=n.requestOptions):t.details=s,t;if(t){const o=r&&(()=>Array.from(r.headers)),a=r&&(_=>r.headers.get(_)),h=r==null?void 0:r.status,f=t.message;f&&(i=f),o&&a&&(s.getAllHeaders=o,s.getHeader=a),s.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||h||0,s.subCode=t.subcode,s.messageCode=t.messageCode,typeof t.details=="string"?s.messages=[t.details]:s.messages=t.details,s.raw=hT in t?t[hT]:t}return li(t)?rn():new Y(e,i,s)}async function Aee(){te("host-webworker")&&!dT&&(dT=await pe(()=>import("./request-Bq1RpC51.js"),[]))}async function o3(){St||await pe(()=>import("./IdentityManager-Diq0ZEik.js"),__vite__mapDeps([0,1]))}async function kee(e){var a;const t=e.params.url,n=e.params.requestOptions,r=e.controller.signal,i=n.body;let s=null,o=null;if(RU&&"HTMLFormElement"in globalThis&&(i instanceof FormData?s=i:i instanceof HTMLFormElement&&(s=new FormData(i))),typeof i=="string"&&(o=i),e.fetchOptions={cache:n.cacheBust?"no-cache":"default",credentials:"same-origin",headers:n.headers||{},method:n.method==="head"?"HEAD":"GET",mode:"cors",priority:ro.priority,redirect:"follow",signal:r},(s||o)&&(e.fetchOptions.body=s||o),n.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(a=n.query)!=null&&a.token||s!=null&&s.get("token")),!e.hasToken&&AU(t)&&(n.query||(n.query={}),n.query.token=Bt.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!LU(t)&&!la(r)){let h;n.authMode==="immediate"?(await o3(),h=await St.getCredential(t,{signal:r}),e.credential=h):n.authMode==="no-prompt"?(await o3(),h=await St.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=h):St&&(h=St.findCredential(t)),h&&(e.credentialToken=h.token,e.useSSL=!!h.ssl)}}function LU(e){return Cee.some(t=>t.test(e))}async function Ree(e){let t=e.params.url;const n=e.params.requestOptions,r=e.fetchOptions??{},i=xx(t)||Fu(t),s=n.responseType||"json",o=i?0:n.timeout!=null?n.timeout:ro.timeout;let a=!1;if(!i){e.useSSL&&(t=ok(t));let b={...n.query};e.credentialToken&&(b.token=e.credentialToken);let T=Kv(b);te("esri-url-encodes-apostrophe")&&(T=T.replaceAll("'","%27"));const M=t.length+1+T.length;let I;a=n.method==="delete"||n.method==="post"||n.method==="put"||!!n.body||M>ro.maxUrlLength;const C=n.useProxy||!!Tx(t);if(C){const N=vU(t);I=N.path,!a&&I.length+1+M>ro.maxUrlLength&&(a=!0),N.query&&(b={...N.query,...b})}if(r.method==="HEAD"&&(a||C)){if(a)throw M>ro.maxUrlLength?ol("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):ol("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(C)throw ol("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(r.method=n.method==="delete"?"DELETE":n.method==="put"?"PUT":"POST",n.body?t=sM(t,b):(r.body=Kv(b),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=sM(t,b),C&&(e.useProxy=!0,t=`${I}?${t}`),b.token&&RU&&r.body instanceof FormData&&!ZQ(t)&&r.body.set("token",b.token),n.hasOwnProperty("withCredentials"))e.withCredentials=n.withCredentials;else if(!fg(t,ek())){if(rk(t))e.withCredentials=!0;else if(St){const N=St.findServerInfo(t);N!=null&&N.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include",$ee(t)&&await Mee(a?sM(t,b):t))}let h,f,_=0,w=!1;o>0&&(_=setTimeout(()=>{w=!0,e.controller.abort()},o));try{if(n.responseType==="native-request-init")f=r,f.url=t,n.signal?f.signal=n.signal:delete f.signal;else if(n.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||a||Lee(n.headers)||!i&&!e.useProxy&&ro.proxyUrl&&!HD(t)){if(Lt._beforeFetch&&await Lt._beforeFetch(t,r),h=await fetch(t,r),Lt._afterFetch&&await Lt._afterFetch(h),e.useProxy||Oee(t),n.responseType==="native")f=h;else if(r.method!=="HEAD")if(h.ok){switch(s){case"array-buffer":f=await h.arrayBuffer();break;case"blob":case"image":f=await h.blob();break;default:f=await h.text()}if(_&&(clearTimeout(_),_=0),s==="json"||s==="xml"||s==="document")if(f)switch(s){case"json":f=JSON.parse(f);break;case"xml":f=ZD(f,"application/xml");break;case"document":f=ZD(f,"text/html")}else f=null;if(f){if(s==="array-buffer"||s==="blob"){const b=h.headers.get("Content-Type");if(b&&/application\/json|text\/plain/i.test(b)&&f[s==="blob"?"size":"byteLength"]<=750)try{const T=await new Response(f).json();T.error&&(f=T)}catch{}}s==="image"&&f instanceof Blob&&(f=await JD(URL.createObjectURL(f),e,!0))}}else{f=await h.text();try{f=JSON.parse(f)}catch{}}}else f=await JD(t,e)}catch(b){if(b.name==="AbortError")throw w?xee():rn("Request canceled");if(!(!h&&b instanceof TypeError&&ro.proxyUrl)||n.body||n.method==="delete"||n.method==="head"||n.method==="post"||n.method==="put"||e.useProxy||HD(t))throw b;e.redoRequest=!0,oee({proxyUrl:ro.proxyUrl,urlPrefix:uo(t)??""})}finally{_&&clearTimeout(_)}return[h,f]}async function WD(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let n,r;try{r=await e.before(t)}catch(i){n=ol("request:interceptor",i,t)}if((r instanceof Error||r instanceof Y)&&(n=ol("request:interceptor",r,t)),n)throw e.error&&e.error(n),n;return r}}function Lee(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function ZD(e,t){let n;try{n=new DOMParser().parseFromString(e,t)}catch{}if(!n||n.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return n}async function Nee(e){var s,o;let t,n;await kee(e);try{do[t,n]=await Ree(e);while(!await Dee(e,t,n))}catch(a){const h=ol("request:server",a,e.params,t);throw h.details.ssl=e.useSSL,(s=e.interceptor)!=null&&s.error&&e.interceptor.error(h),h}const r=e.params.url;if(n&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&((o=n.user)!=null&&o.username)&&!rk(r)){const a=uo(r,!0);a&&ro.trustedServers.push(a)}Array.isArray(n.authorizedCrossOriginNoCorsDomains)&&Eee(n.authorizedCrossOriginNoCorsDomains)}const i=e.credential;if(i&&St){const a=St.findServerInfo(i.server);let h=a==null?void 0:a.owningSystemUrl;if(h){h=h.replace(/\/?$/,"/sharing");const f=St.findCredential(h,i.userId);f&&St._getIdenticalSvcIdx(h,f)===-1&&f.resources.unshift(h)}}return{data:n,getAllHeaders:t?()=>Array.from(t.headers):yg,getHeader:t?a=>t.headers.get(a):yg,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function Dee(e,t,n){var f;if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let i,s;if(n&&(n.error&&typeof n.error=="object"?i=n.error:n.status==="error"&&Array.isArray(n.messages)&&(i={...n},i[hT]=n,i.details=n.messages)),!i&&!t.ok)throw i=new Error(`Unable to load ${t.url} status: ${t.status}`),i[hT]=n,i;let o,a=null;i&&(s=Number(i.code),a=i.hasOwnProperty("subcode")?Number(i.subcode):null,o=i.messageCode,o=o==null?void 0:o.toUpperCase());const h=r.authMode;if(s===403&&(a===4||(f=i.message)!=null&&f.toLowerCase().includes("ssl")&&!i.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(h!=="no-prompt"||s===498)&&s!==void 0&&Iee.has(s)&&!LU(e.params.url)&&(s!==403||(!o||!Pee.has(o))&&(a==null||a===2&&e.credentialToken))){await o3();try{const _=await St.getCredential(e.params.url,{error:ol("request:server",i,e.params),prompt:h!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=_,e.credentialToken=_.token,e.useSSL=e.useSSL||_.ssl,!1}catch(_){if(h==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;i=_}}if(i)throw i;return!0}function JD(e,t,n=!1){const r=t.controller.signal,i=new Image;return t.withCredentials?i.crossOrigin="use-credentials":i.crossOrigin="anonymous",i.alt="",i.fetchPriority=ro.priority,i.src=e,Tee(i,e,n,r)}Lt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Lt._beforeFetch=void 0,Lt._afterFetch=void 0;let xS=class NU{constructor(){this._emitter=new NU.EventEmitter(this)}emit(t,n){return this._emitter.emit(t,n)}on(t,n){return this._emitter.on(t,n)}once(t,n){return this._emitter.once(t,n)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(i=null){this._target=i,this._listenersMap=null}clear(){var i;(i=this._listenersMap)==null||i.clear(),this._listenersMap=null}destroy(){this.clear()}emit(i,s){var f;let o=(f=this._listenersMap)==null?void 0:f.get(i);if(!o)return!1;const a=this._target||this;let h=!1;for(const _ of o.slice()){const w="deref"in _?_.deref():_;w?w==null||w.call(a,s):h=!0}return h&&(o=o.filter(_=>!("deref"in _)||_.deref()!=null),this._listenersMap.set(i,o)),o.length>0}on(i,s){if(Array.isArray(i)){const a=i.map(h=>this.on(h,s));return x0(a)}if(i.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(i)||[];return o.push(s),this._listenersMap.set(i,o),Ft(()=>{var f;const a=(f=this._listenersMap)==null?void 0:f.get(i),h=(a==null?void 0:a.indexOf(s))??-1;h>=0&&a.splice(h,1)})}once(i,s){const o=this.on(i,a=>{o.remove();const h="deref"in s?s.deref():s;h==null||h.call(null,a)});return o}hasEventListener(i){var o;const s=(o=this._listenersMap)==null?void 0:o.get(i);return s!=null&&s.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let i=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return i=l([k("esri.core.Evented")],i),i};let n=class extends Fe{constructor(){super(...arguments),this._emitter=new xS.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,i){return this._emitter.emit(r,i)}on(r,i){return this._emitter.on(r,i)}once(r,i){return this._emitter.once(r,i)}hasEventListener(r){return this._emitter.hasEventListener(r)}};n=l([k("esri.core.Evented.EventedAccessor")],n),e.EventedAccessor=n})(xS||(xS={}));const ju=xS;var Vt;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Vt||(Vt={}));function lk(e){return(t,n)=>{t[n]=e}}let O0=class extends MV{notify(){const t=this._observers;if(t&&t.length>0){const n=t.slice();for(const r of n)r.onInvalidated(),r.onCommitted()}}};var $u;let Fee=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},jee=class{constructor(t,n,r,i,s){this.target=t,this.added=n,this.removed=r,this.start=i,this.deleteCount=s}};const Gs=new Sf(Fee,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function YD(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function oM(e){return e?e instanceof bu?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function aM(e){if(e!=null&&e.length)return e[0]}function zee(e,t,n,r){const i=Math.min(e.length-n,t.length-r);let s=0;for(;s<i&&e[n+s]===t[r+s];)s++;return s}function DU(e,t,n,r){t&&t.forEach((i,s,o)=>{e.push(i),DU(e,n.call(r,i,s,o),n,r)})}const Ic=new Set,Pc=new Set,Cc=new Set,lM=new Map;let Vee=0,bu=$u=class extends ju.EventedAccessor{static isCollection(e){return e!=null&&e instanceof $u}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new O0,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Vee++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof $u?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return tt(this._observable),this._items}set items(e){this._emitBeforeChanges(Vt.ADD)||(this._splice(0,this.length,oM(e)),this._emitAfterChanges(Vt.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return Ft();if(e==="change"){const n=this._chgListeners,r={removed:!1,callback:t};return n.push(r),this._notifications&&this._notifications.push({listeners:n.slice(),items:this._items.slice(),changes:[]}),Ft(()=>{r.removed=!0,n.splice(n.indexOf(r),1)})}return this._emitter.on(e,t)}once(e,t){const n="deref"in t?()=>t.deref():()=>t,r=this.on(e,i=>{var s;(s=n())==null||s.call(null,i),r.remove()});return r}add(e,t){if(tt(this._observable),this._emitBeforeChanges(Vt.ADD))return this;const n=this.getNextIndex(t??null);return this._splice(n,0,[e]),this._emitAfterChanges(Vt.ADD),this}addMany(e,t=this._items.length){if(tt(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(Vt.ADD))return this;const n=this.getNextIndex(t);return this._splice(n,0,oM(e)),this._emitAfterChanges(Vt.ADD),this}at(e){if(tt(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(tt(this._observable),!this.length||this._emitBeforeChanges(Vt.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(Vt.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return tt(this._observable),this._createNewInstance({items:this._items.map(q)})}concat(...e){tt(this._observable);const t=e.map(oM);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(tt(this._observable),!this.length||this._emitBeforeChanges(Vt.REMOVE))return;const n=this._splice(0,this.length),r=n.length;for(let i=0;i<r;i++)e.call(t,n[i],i,n);this._emitAfterChanges(Vt.REMOVE)}destroyAll(){this.drain(YD)}destroyMany(e){const t=this.removeMany(e);return t.forEach(YD),t}every(e,t){return tt(this._observable),this._items.every(e,t)}filter(e,t){let n;return tt(this._observable),n=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:n})}find(e,t){return tt(this._observable),this._items.find(e,t)}findIndex(e,t){return tt(this._observable),this._items.findIndex(e,t)}flatten(e,t){tt(this._observable);const n=[];return DU(n,this,e,t),new $u(n)}forEach(e,t){return tt(this._observable),this._items.forEach(e,t)}getItemAt(e){return tt(this._observable),this._items[e]}getNextIndex(e){tt(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return tt(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return tt(this._observable),this._items.indexOf(e,t)}join(e=","){return tt(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return tt(this._observable),this._items.lastIndexOf(e,t)}map(e,t){tt(this._observable);const n=this._items.map(e,t);return new $u({items:n})}reorder(e,t=this.length-1){tt(this._observable);const n=this.indexOf(e);if(n!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),n!==t){if(this._emitBeforeChanges(Vt.MOVE))return e;this._splice(n,1),this._splice(t,0,[e]),this._emitAfterChanges(Vt.MOVE)}return e}}pop(){if(tt(this._observable),!this.length||this._emitBeforeChanges(Vt.REMOVE))return;const e=aM(this._splice(this.length-1,1));return this._emitAfterChanges(Vt.REMOVE),e}push(...e){return tt(this._observable),this._emitBeforeChanges(Vt.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Vt.ADD)),this.length}reduce(e,t){tt(this._observable);const n=this._items;return arguments.length===2?n.reduce(e,t):n.reduce(e)}reduceRight(e,t){tt(this._observable);const n=this._items;return arguments.length===2?n.reduceRight(e,t):n.reduceRight(e)}remove(e){return tt(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(tt(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Vt.REMOVE))return;const t=aM(this._splice(e,1));return this._emitAfterChanges(Vt.REMOVE),t}removeMany(e){if(tt(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(Vt.REMOVE))return[];const t=e instanceof $u?e.toArray():e,n=this._items,r=[],i=t.length;for(let s=0;s<i;s++){const o=t[s],a=n.indexOf(o);if(a>-1){const h=1+zee(t,n,s+1,a+1),f=this._splice(a,h);f&&f.length>0&&r.push.apply(r,f),s+=h-1}}return this._emitAfterChanges(Vt.REMOVE),r}reverse(){if(tt(this._observable),this._emitBeforeChanges(Vt.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Vt.MOVE),this}shift(){if(tt(this._observable),!this.length||this._emitBeforeChanges(Vt.REMOVE))return;const e=aM(this._splice(0,1));return this._emitAfterChanges(Vt.REMOVE),e}slice(e=0,t=this.length){return tt(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return tt(this._observable),this._items.some(e,t)}sort(e){if(tt(this._observable),!this.length||this._emitBeforeChanges(Vt.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Vt.MOVE),this}splice(e,t,...n){tt(this._observable);const r=(t?Vt.REMOVE:0)|(n.length?Vt.ADD:0);if(this._emitBeforeChanges(r))return[];const i=this._splice(e,t,n)||[];return this._emitAfterChanges(r),i}toArray(){return tt(this._observable),this._items.slice()}toJSON(){return tt(this._observable),this.toArray()}toLocaleString(){return tt(this._observable),this._items.toLocaleString()}toString(){return tt(this._observable),this._items.toString()}unshift(...e){return tt(this._observable),!e.length||this._emitBeforeChanges(Vt.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Vt.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,n){const r=this._items,i=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=P0(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=r.splice(e,t),this.hasEventListener("before-remove")){const a=Gs.acquire();a.target=this,a.cancellable=!0;for(let h=0,f=o.length;h<f;h++)s=o[h],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(h,1),r.splice(e,0,s),e+=1,h-=1,f-=1);Gs.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=Gs.acquire();a.target=this,a.cancellable=!1;const h=o.length;for(let f=0;f<h;f++)a.reset(o[f]),this.emit("after-remove",a);Gs.release(a)}}if(n!=null&&n.length){if(i){const _=[];for(const w of n){const b=i.ensureType(w);b==null&&w!=null||_.push(b)}n=_}const a=this.hasEventListener("before-add"),h=this.hasEventListener("after-add"),f=e===this.length;if(a||h){const _=Gs.acquire();_.target=this,_.cancellable=!0;const w=Gs.acquire();w.target=this,w.cancellable=!1;for(const b of n)a?(_.reset(b),this.emit("before-add",_),_.defaultPrevented||(f?r.push(b):r.splice(e++,0,b),this._set("length",r.length),h&&(w.reset(b),this.emit("after-add",w)))):(f?r.push(b):r.splice(e++,0,b),this._set("length",r.length),w.reset(b),this.emit("after-add",w));Gs.release(w),Gs.release(_)}else{if(f)for(const _ of n)r.push(_);else r.splice(e,0,...n);this._set("length",r.length)}}if((n!=null&&n.length||o!=null&&o.length)&&this._notifyChangeEvent(n,o),this.hasEventListener("after-splice")){const a=new jee(this,n,o,e,t);this.emit("after-splice",a)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const n=Gs.acquire();n.target=this,n.cancellable=!0,n.type=e,this.emit("before-changes",n),t=n.defaultPrevented,Gs.release(n)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Gs.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Gs.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const n=t.changes;Ic.clear(),Pc.clear(),Cc.clear();for(const{added:h,removed:f}of n){if(h)if(Cc.size===0&&Pc.size===0)for(const _ of h)Ic.add(_);else for(const _ of h)Pc.has(_)?(Cc.add(_),Pc.delete(_)):Cc.has(_)||Ic.add(_);if(f)if(Cc.size===0&&Ic.size===0)for(const _ of f)Pc.add(_);else for(const _ of f)Ic.has(_)?Ic.delete(_):(Cc.delete(_),Pc.add(_))}const r=wi.acquire();Ic.forEach(h=>{r.push(h)});const i=wi.acquire();Pc.forEach(h=>{i.push(h)});const s=this._items,o=t.items,a=wi.acquire();if(Cc.forEach(h=>{o.indexOf(h)!==s.indexOf(h)&&a.push(h)}),t.listeners&&(r.length||i.length||a.length)){const h={target:this,added:r,removed:i,moved:a},f=t.listeners.length;for(let _=0;_<f;_++){const w=t.listeners[_];w.removed||w.callback.call(this,h)}}wi.release(r),wi.release(i),wi.release(a)}Ic.clear(),Pc.clear(),Cc.clear()}};bu.ofType=e=>{if(!e)return $u;if(lM.has(e))return lM.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const i=e.typeMap[r].prototype.declaredClass;t?t+=` | ${i}`:t=i}let n=class extends $u{};return l([lk({Type:e,ensureType:typeof e=="function"?jn(e):co(e)})],n.prototype,"itemType",void 0),n=l([k(`esri.core.Collection<${t}>`)],n),lM.set(e,n),n},l([p()],bu.prototype,"_updating",void 0),l([p()],bu.prototype,"length",void 0),l([p()],bu.prototype,"items",null),l([p({readOnly:!0})],bu.prototype,"updating",null),bu=$u=l([k("esri.core.Collection")],bu);const Ae=bu;function Fd(e,t,n=Ae){return t||(t=new n),t===e||(t.removeAll(),Uee(e)?t.addMany(e):e&&t.add(e)),t}function FU(e){return e}function Uee(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var hd;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(hd||(hd={}));let Gee=class{constructor(){this._resolver=xs(),this._status=hd.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=hd.RESOLVED,this._cleanUp()},()=>{this._status=hd.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===hd.RESOLVED}isRejected(){return this._status===hd.REJECTED}isFulfilled(){return this._status!==hd.PENDING}abort(){this._resolver.reject(rn())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=xs(),n=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(n);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},i=>{this.isFulfilled()||this._allPromise!==r||li(i)||this._resolver.reject(i)}),t.resolve()}};const A0=e=>{let t=class extends e{constructor(...n){super(...n),this._promiseProps=new Gee,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(n,r){return this._promiseProps.promise.then(()=>this).then(n,r)}catch(n){return this.when(null,n)}addResolvingPromise(n){n&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in n?n.when():n)}};return t=l([k("esri.core.Promise")],t),t};let pT=class extends A0(Fe){};pT=l([k("esri.core.Promise")],pT);const Bee="not-loaded",qee="loading",Hee="failed",KD="loaded",jU=e=>{let t=class extends e{constructor(...n){super(...n),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const i=this.load.bind(this);this.load=s=>{const o=new Promise((a,h)=>{const f=HA(s,h);this.destroyed&&h(new Y("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,h).finally(()=>{f&&f.remove()})});if(this.loadStatus===Bee){this._set("loadStatus",qee);const a=this._loadController=new AbortController;i({signal:a.signal})}return r(),o}})),this.when(()=>{this._set("loadStatus",KD),this._loadController=null},r=>{this._set("loadStatus",Hee),this._set("loadError",r),this._loadController=null})}destroy(){this._loadController&&(this._loadController=Wv(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===KD}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var n;return this.isFulfilled()||(this._set("loadError",new Y("load:cancelled","Cancelled")),(n=this._loadController)==null||n.abort(),this._promiseProps.abort()),this}};return l([p({readOnly:!0})],t.prototype,"loaded",null),l([p({readOnly:!0})],t.prototype,"loadError",void 0),l([p({clonable:!1})],t.prototype,"loadStatus",void 0),l([p({type:[Es],readOnly:!0})],t.prototype,"loadWarnings",null),t=l([k("esri.core.Loadable")],t),t};let cw=class extends jU(pT){};cw=l([k("esri.core.Loadable")],cw),function(e){function t(n){return!(!n||!n.load)}e.LoadableMixin=jU,e.isLoadable=t}(cw||(cw={}));const ho=cw;function OMe(e,t,n){return WA(e.map((r,i)=>t.apply(n,[r,i])))}async function Wee(e,t,n){return(await WA(e.map((r,i)=>t.apply(n,[r,i])))).map(r=>r.value)}function uk(e){return{ok:!0,value:e}}function ck(e){return{ok:!1,error:e}}function Zee(e){return e!=null&&e.ok===!0?e.value:null}function Jee(e){return e!=null&&e.ok===!1?e.error:null}async function Ex(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return uk(await e)}catch(t){return ck(t)}}async function Yee(e){try{return uk(await e)}catch(t){return rl(t),ck(t)}}function dk(e,t){return new Fc(e,t)}let Fc=class extends Fe{get value(){return Zee(this._result)}get error(){return Jee(this._result)}get finished(){return this._result!=null}constructor(t,n){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Wv(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=t(r),this.promise.then(i=>{this._result=uk(i),this._cleanup()},i=>{this._result=ck(i),this._cleanup()}),this._abortHandle=lo(n,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=wn(this._abortHandle),this._abortController=null}};l([p()],Fc.prototype,"value",null),l([p()],Fc.prototype,"error",null),l([p()],Fc.prototype,"finished",null),l([p()],Fc.prototype,"promise",void 0),l([p()],Fc.prototype,"_result",void 0),Fc=l([k("esri.core.asyncUtils.ReactiveTask")],Fc);async function $x(e,t){return await e.load(),Kee(e,t)}async function Kee(e,t){const n=[],r=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?r(...o):Ae.isCollection(o)?o.forEach(a=>r(a)):ho.isLoadable(o)&&n.push(o))};t(r);let i=null;if(await Wee(n,async s=>{const o=await Ex(Xee(s)?s.loadAll():s.load());o.ok!==!1||i||(i=o)}),i)throw i.error;return e}function Xee(e){return"loadAll"in e&&typeof e.loadAll=="function"}function ge(e,t,n){let r,i;return t===void 0?(i=e,r=[void 0]):typeof t!="string"?(i=e,r=[void 0],n=t):(i=t,r=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;for(const h of r){const f=XV(s,h,i);f.write&&typeof f.write=="object"||(f.write={}),n&&(f.write.target=n),f.write.writer=a[o]}}}let pt=class{constructor(t,n={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=n,this.apiValues=[],this.jsonValues=[],this._apiToJSON=Qee(t),this.apiValues=XD(this._apiToJSON),this.jsonValues=XD(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,i,s)=>{const o=this.toJSON(r);o!==void 0&&lr(s,o,i)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const n=this._apiToJSON[t];return this._options.useNumericKeys?+n:n}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function Qee(e){const t={};for(const n in e)t[e[n]]=n;return t}function XD(e){const t=[];for(const n in e)t.push(n);return t.sort(),t}function hr(){return function(e,t){return new pt(e,{ignoreUnknown:!0,...t})}}let hk=class{constructor(t,n,r,i,s,o){this.semiMajorAxis=t,this.flattening=n,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=i,this.scaleHeight=s;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Cn=new hk(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),al=new hk(3396190,1/169.8944472236118,23e4,6e4,.111),jd=new hk(1737400,0,0,0,0);function Gt(e){if(!Bt.assetsPath)throw fe.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new Y("assets:path-not-set","config.assetsPath is not set");return mg(Bt.assetsPath,e)}let uM,B=null;function pk(){return!!B}function ete(){return!!te("esri-wasm")}function zU(){return uM||(uM=pe(()=>import("./pe-wasm-BMYM3NE3.js"),__vite__mapDeps([2,3])).then(e=>e.p).then(({default:e})=>e({locateFile:t=>Gt(`esri/geometry/support/${t}`)})).then(e=>{GU(e)}),uM)}var a3,_n;(function(e){function t(s,o,a){B.ensureCache.prepare();const h=zp(a),f=a===h,_=B.ensureFloat64(h),w=B._pe_geog_to_proj(B.getPointer(s),o,_);return w&&vd(a,o,_,f),w}function n(s,o,a,h){switch(h){case _n.PE_TRANSFORM_P_TO_G:return r(s,o,a);case _n.PE_TRANSFORM_G_TO_P:return t(s,o,a)}return 0}function r(s,o,a){return i(s,o,a,0)}function i(s,o,a,h){B.ensureCache.prepare();const f=zp(a),_=a===f,w=B.ensureFloat64(f),b=B._pe_proj_to_geog_center(B.getPointer(s),o,w,h);return b&&vd(a,o,w,_),b}e.geogToProj=t,e.projGeog=n,e.projToGeog=r,e.projToGeogCenter=i})(a3||(a3={})),function(e){function t(){e.PE_BUFFER_MAX=B.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=B.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=B.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=B.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=B.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=B.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=B.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=B.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=B.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=B.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=B.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=B.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=B.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=B.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=B.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=B.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=B.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=B.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=B.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=B.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=B.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=B.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=B.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=B.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=B.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=B.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=B.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=B.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=B.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=B.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=B.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=B.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(_n||(_n={}));let VU=null;var l3;(function(e){const t={},n={},r=T=>{const M=T.getType();switch(M){case _n.PE_TYPE_GEOGCS:T=B.castObject(T,B.PeGeogcs);break;case _n.PE_TYPE_PROJCS:T=B.castObject(T,B.PeProjcs);break;case _n.PE_TYPE_GEOGTRAN:T=B.castObject(T,B.PeGeogtran);break;default:M&_n.PE_TYPE_UNIT&&(T=B.castObject(T,B.PeUnit))}return T};function i(){B.PeFactory.prototype.initialize(null)}function s(T){return o(_n.PE_TYPE_COORDSYS,T)}function o(T,M){let I=null,C=t[T];if(C||(C={},t[T]=C),C.hasOwnProperty(String(M))&&(I=C[M],B.compare(I,B.NULL)&&(I=null)),!I){const N=B.PeFactory.prototype.factoryByType(T,M);B.compare(N,B.NULL)||(I=r(N),C[M]=I)}return I}function a(T,M){let I=null,C=n[T];if(C||(C={},n[T]=C),C.hasOwnProperty(M)&&(I=C[M],B.compare(I,B.NULL)&&(I=null)),!I){const N=B.PeFactory.prototype.fromString(T,M);B.compare(N,B.NULL)||(I=r(N),C[M]=I)}return I}function h(T){return o(_n.PE_TYPE_GEOGCS,T)}function f(T){return o(_n.PE_TYPE_GEOGTRAN,T)}function _(T){return B.PeFactory.prototype.getCode(T)}function w(T){return o(_n.PE_TYPE_PROJCS,T)}function b(T){return o(_n.PE_TYPE_UNIT,T)}e.initialize=i,e.coordsys=s,e.factoryByType=o,e.fromString=a,e.geogcs=h,e.geogtran=f,e.getCode=_,e.projcs=w,e.unit=b})(l3||(l3={}));let UU=null;var fT,u3,c3,d3,h3,p3,mT,f3,yT,gT,m3;function GU(e){function t(s,o,a){s[o]=a(s[o])}B=e,_n.init(),fT.init(),mT.init(),yT.init(),gT.init(),VU=class extends B.PeDouble{constructor(s=NaN){super(s)}destroy(){B.destroy(this)}[Symbol.dispose](){this.destroy()}},UU=class extends B.PeGCSExtent{destroy(){B.destroy(this)}[Symbol.dispose](){this.destroy()}};const n=[B.PeAngunit,B.PeDatum,B.PeGeogcs,B.PeGeogtran,B.PeObject,B.PeParameter,B.PePrimem,B.PeProjcs,B.PeSpheroid,B.PeUnit];for(const s of n)t(s.prototype,"getName",o=>function(){return o.call(this,new Array(_n.PE_NAME_MAX))});for(const s of[B.PeGeogtran,B.PeProjcs])t(s.prototype,"getParameters",o=>function(){const a=new Array(_n.PE_PARM_MAX);let h=o.call(this);for(let f=0;f<a.length;f++){const _=B.getValue(h,"*");a[f]=_?B.wrapPointer(_,B.PeParameter):null,h+=Int32Array.BYTES_PER_ELEMENT}return a});t(B.PeHorizon.prototype,"getCoord",s=>function(o=!1){const a=this.getSize();if(!a)return null;const h=[];return vd(h,a,s.call(this),o),h}),t(B.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=B._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const h=s.call(this);if(!B.compare(h,B.NULL)){a=[h];const f=this.getSteps();if(f>1){const _=B.getPointer(h);for(let w=1;w<f;w++)a.push(B.wrapPointer(_+o*w,B.PeGTlistExtendedGTs))}}return a}});const r=B._pe_getPeHorizonSize(),i=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const h=s.call(this);if(!B.compare(h,B.NULL)){a=[h];const f=h.getNump();if(f>1){const _=B.getPointer(h);for(let w=1;w<f;w++)a.push(B.wrapPointer(_+r*w,B.PeHorizon))}}return o.set(s,a),a};t(B.PeProjcs.prototype,"horizonGcsGenerate",i),t(B.PeProjcs.prototype,"horizonPcsGenerate",i),B.PeObject.prototype.toString=function(s=_n.PE_STR_OPTS_NONE){B.ensureCache.prepare();const o=B.getPointer(this),a=B.ensureInt8(new Array(_n.PE_BUFFER_MAX));return B.UTF8ToString(B._pe_object_to_string_ext(o,s,a))},B.PeGeogcs.prototype.destroy=function(){this.Delete(),Ko(this),this.ptr=0},B.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},B.PeProjcs.prototype.destroy=function(){this.Delete(),Ko(this),this.ptr=0},B.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Ko(e){if(!e)return;const t=B.getClass(e);if(!t)return;const n=B.getCache(t);if(!n)return;const r=B.getPointer(e);r&&delete n[r]}function mb(e,t){const n=[],r=new Array(t);for(let i=0;i<e;i++)n.push(B.ensureInt8(r));return n}function zp(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function vd(e,t,n,r=!1){if(r)for(let i=0;i<2*t;i++)e[i]=B.getValue(n+i*Float64Array.BYTES_PER_ELEMENT,"double");else{const i=e.length===0;for(let s=0;s<t;s++)i&&(e[s]=new Array(2)),e[s][0]=B.getValue(n,"double"),e[s][1]=B.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function n(){e.PE_GTLIST_OPTS_COMMON=B.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=B._pe_getPeGTlistExtendedEntrySize()}function r(i,s,o,a,h,f){let _=null;const w=new B.PeInteger(f);try{const b=B.PeGTlistExtended.prototype.getGTlist(i,s,o,a,h,w);if((f=w.val)&&(_=[b],f>1)){const T=B.getPointer(b);for(let M=1;M<f;M++)_.push(B.wrapPointer(T+t*M,B.PeGTlistExtendedEntry))}}finally{B.destroy(w)}return _}e.init=n,e.getGTlist=r})(fT||(fT={})),function(e){function t(n){if(n!=null&&n.length){for(const r of n)Ko(r),r.getEntries().forEach(i=>{Ko(i);const s=i.getGeogtran();Ko(s),s.getParameters().forEach(Ko),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{Ko(o);const a=o.getDatum();Ko(a),Ko(a.getSpheroid()),Ko(o.getPrimem()),Ko(o.getUnit())})});B.PeGTlistExtendedEntry.prototype.Delete(n[0])}}e.destroy=t}(u3||(u3={})),function(e){function t(n,r,i,s,o){B.ensureCache.prepare();const a=zp(i),h=i===a,f=B.ensureFloat64(a);let _=0;s&&(_=B.ensureFloat64(s));const w=B._pe_geog_to_geog(B.getPointer(n),r,f,_,o);return w&&vd(i,r,f,h),w}e.geogToGeog=t}(c3||(c3={})),function(e){function t(s,o,a,h,f,_,w,b){B.PeLineType.prototype.geodesic_coordinate(s,o,a,h,f,_,w,b)}function n(s,o,a,h,f,_,w,b,T){B.PeLineType.prototype.geodetic_coordinate(s,o,a,h,f,_,w,b,T)}function r(s,o,a,h,f,_,w,b,T,M){B.PeLineType.prototype.geodetic_distance(s,o,a,h,f,_,w,b,T,M)}function i(s,o,a,h,f,_,w,b,T){B.PeLineType.prototype.great_elliptic_distance(s,o,a,h,f,_,w,b,T)}e.geodesicCoordinate=t,e.geodeticCoordinate=n,e.geodeticDistance=r,e.greatEllipticDistance=i}(d3||(d3={})),function(e){function t(o,a){return B.PeMath.prototype.phi_to_eta(o,a)}function n(o,a){return B.PeMath.prototype.eta_to_phi(o,a)}function r(o,a){return B.PeMath.prototype.phi_to_phig(o,a)}function i(o,a,h){return B.PeMath.prototype.q(o,a,h)}function s(o,a){return B.PeMath.prototype.q90(o,a)}e.phiToEta=t,e.etaToPhi=n,e.phiToPhig=r,e.q=i,e.q90=s}(h3||(h3={})),function(e){const t=(f,_,w,b,T,M)=>{let I,C;switch(B.ensureCache.prepare(),f){case"dd":I=B._pe_geog_to_dd,C=_n.PE_DD_MAX;break;case"ddm":I=B._pe_geog_to_ddm,C=_n.PE_DDM_MAX;break;case"dms":I=B._pe_geog_to_dms,C=_n.PE_DMS_MAX}let N=0;_&&(N=B.getPointer(_));const j=zp(b),z=B.ensureFloat64(j),U=mb(w,C),K=I(N,w,z,T,B.ensureInt32(U));if(K)for(let J=0;J<w;J++)M[J]=B.UTF8ToString(U[J]);return K},n=(f,_,w,b,T)=>{let M;switch(B.ensureCache.prepare(),f){case"dd":M=B._pe_dd_to_geog;break;case"ddm":M=B._pe_ddm_to_geog;break;case"dms":M=B._pe_dms_to_geog}let I=0;_&&(I=B.getPointer(_));const C=b.map(U=>B.ensureString(U)),N=B.ensureInt32(C),j=B.ensureFloat64(new Array(2*w)),z=M(I,w,N,j);return z&&vd(T,w,j),z};function r(f,_,w,b,T){return t("dms",f,_,w,b,T)}function i(f,_,w,b){return n("dms",f,_,w,b)}function s(f,_,w,b,T){return t("ddm",f,_,w,b,T)}function o(f,_,w,b){return n("ddm",f,_,w,b)}function a(f,_,w,b,T){return t("dd",f,_,w,b,T)}function h(f,_,w,b){return n("dd",f,_,w,b)}e.geogToDms=r,e.dmsToGeog=i,e.geogToDdm=s,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=h}(p3||(p3={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=B.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=B.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=B.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=B.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=B.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function n(i,s,o,a,h,f,_){B.ensureCache.prepare();let w=0;i&&(w=B.getPointer(i));const b=zp(o),T=B.ensureFloat64(b),M=mb(s,_n.PE_MGRS_MAX),I=B.ensureInt32(M),C=B._pe_geog_to_mgrs_extended(w,s,T,a,h,f,I);if(C)for(let N=0;N<s;N++)_[N]=B.UTF8ToString(M[N]);return C}function r(i,s,o,a,h){B.ensureCache.prepare();let f=0;i&&(f=B.getPointer(i));const _=o.map(M=>B.ensureString(M)),w=B.ensureInt32(_),b=B.ensureFloat64(new Array(2*s)),T=B._pe_mgrs_to_geog_extended(f,s,w,a,b);return T&&vd(h,s,b),T}e.init=t,e.geogToMgrsExtended=n,e.mgrsToGeogExtended=r}(mT||(mT={})),function(e){function t(r,i,s,o,a,h,f){B.ensureCache.prepare();let _=0;r&&(_=B.getPointer(r));const w=zp(s),b=B.ensureFloat64(w),T=mb(i,_n.PE_MGRS_MAX),M=B.ensureInt32(T),I=B._pe_geog_to_usng(_,i,b,o,a,h,M);if(I)for(let C=0;C<i;C++)f[C]=B.UTF8ToString(T[C]);return I}function n(r,i,s,o){B.ensureCache.prepare();let a=0;r&&(a=B.getPointer(r));const h=s.map(b=>B.ensureString(b)),f=B.ensureInt32(h),_=B.ensureFloat64(new Array(2*i)),w=B._pe_usng_to_geog(a,i,f,_);return w&&vd(o,i,_),w}e.geogToUsng=t,e.usngToGeog=n}(f3||(f3={})),function(e){function t(){e.PE_UTM_OPTS_NONE=B.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=B.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=B.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function n(i,s,o,a,h){B.ensureCache.prepare();let f=0;i&&(f=B.getPointer(i));const _=zp(o),w=B.ensureFloat64(_),b=mb(s,_n.PE_UTM_MAX),T=B.ensureInt32(b),M=B._pe_geog_to_utm(f,s,w,a,T);if(M)for(let I=0;I<s;I++)h[I]=B.UTF8ToString(b[I]);return M}function r(i,s,o,a,h){B.ensureCache.prepare();let f=0;i&&(f=B.getPointer(i));const _=o.map(M=>B.ensureString(M)),w=B.ensureInt32(_),b=B.ensureFloat64(new Array(2*s)),T=B._pe_utm_to_geog(f,s,w,a,b);return T&&vd(h,s,b),T}e.init=t,e.geogToUtm=n,e.utmToGeog=r}(yT||(yT={})),function(e){const t=new Map;function n(){e.PE_PCSINFO_OPTION_NONE=B.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=B.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=B.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=B.PePCSInfo.prototype.PE_POLE_POINT}function r(i,s=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return t.has(i)&&(a=t.get(i),a[s]&&(o=a[s])),o||(o=B.PePCSInfo.prototype.generate(i,s),a||(a=[],t.set(i,a)),a[s]=o),o}e.init=n,e.generate=r}(gT||(gT={})),function(e){function t(){return B.PeVersion.prototype.version_string()}e.versionString=t}(m3||(m3={}));const tte=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return a3},get PeDefs(){return _n},get PeDouble(){return VU},get PeFactory(){return l3},get PeGCSExtent(){return UU},get PeGTTransformations(){return c3},get PeGTlistExtended(){return fT},get PeGTlistExtendedEntry(){return u3},get PeLineType(){return d3},get PeMath(){return h3},get PeNotationDms(){return p3},get PeNotationMgrs(){return mT},get PeNotationUsng(){return f3},get PeNotationUtm(){return yT},get PePCSInfo(){return gT},get PeVersion(){return m3},_init:GU,get _pe(){return B},isLoaded:pk,isSupported:ete,load:zU},Symbol.toStringTag,{value:"Module"}));var af;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(af||(af={}));let m;const O={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(m=2e3;m<=2045;m++)O[m]=0;for(m=2056;m<=2065;m++)O[m]=0;for(m=2067;m<=2135;m++)O[m]=0;for(m=2137;m<=2154;m++)O[m]=0;for(m=2161;m<=2170;m++)O[m]=0;for(m=2172;m<=2193;m++)O[m]=0;for(m=2195;m<=2198;m++)O[m]=0;for(m=2200;m<=2203;m++)O[m]=0;for(m=2205;m<=2217;m++)O[m]=0;for(m=2222;m<=2224;m++)O[m]=1;for(m=2225;m<=2250;m++)O[m]=2;for(m=2251;m<=2253;m++)O[m]=1;for(m=2257;m<=2264;m++)O[m]=2;for(m=2274;m<=2279;m++)O[m]=2;for(m=2280;m<=2282;m++)O[m]=1;for(m=2283;m<=2289;m++)O[m]=2;for(m=2290;m<=2292;m++)O[m]=0;for(m=2308;m<=2313;m++)O[m]=0;for(m=2315;m<=2491;m++)O[m]=0;for(m=2494;m<=2866;m++)O[m]=0;for(m=2867;m<=2869;m++)O[m]=1;for(m=2870;m<=2888;m++)O[m]=2;for(m=2891;m<=2895;m++)O[m]=2;for(m=2896;m<=2898;m++)O[m]=1;for(m=2902;m<=2908;m++)O[m]=2;for(m=2915;m<=2920;m++)O[m]=2;for(m=2921;m<=2923;m++)O[m]=1;for(m=2924;m<=2930;m++)O[m]=2;for(m=2931;m<=2962;m++)O[m]=0;for(m=2964;m<=2968;m++)O[m]=2;for(m=2969;m<=2973;m++)O[m]=0;for(m=2975;m<=2991;m++)O[m]=0;for(m=2995;m<=3051;m++)O[m]=0;for(m=3054;m<=3079;m++)O[m]=0;for(m=3081;m<=3088;m++)O[m]=0;for(m=3092;m<=3101;m++)O[m]=0;for(m=3106;m<=3138;m++)O[m]=0;for(m=3146;m<=3151;m++)O[m]=0;for(m=3153;m<=3166;m++)O[m]=0;for(m=3168;m<=3172;m++)O[m]=0;for(m=3174;m<=3203;m++)O[m]=0;for(m=3294;m<=3358;m++)O[m]=0;for(m=3367;m<=3403;m++)O[m]=0;for(m=3408;m<=3416;m++)O[m]=0;for(m=3417;m<=3438;m++)O[m]=2;for(m=3441;m<=3446;m++)O[m]=2;for(m=3447;m<=3450;m++)O[m]=0;for(m=3451;m<=3459;m++)O[m]=2;for(m=3460;m<=3478;m++)O[m]=0;for(m=3554;m<=3559;m++)O[m]=0;for(m=3560;m<=3570;m++)O[m]=2;for(m=3571;m<=3581;m++)O[m]=0;for(m=3594;m<=3597;m++)O[m]=0;for(m=3601;m<=3604;m++)O[m]=0;for(m=3637;m<=3639;m++)O[m]=0;for(m=3665;m<=3667;m++)O[m]=0;for(m=3693;m<=3695;m++)O[m]=0;for(m=3701;m<=3727;m++)O[m]=0;for(m=3728;m<=3739;m++)O[m]=2;for(m=3740;m<=3751;m++)O[m]=0;for(m=3753;m<=3760;m++)O[m]=2;for(m=3761;m<=3773;m++)O[m]=0;for(m=3775;m<=3777;m++)O[m]=0;for(m=3779;m<=3781;m++)O[m]=0;for(m=3783;m<=3785;m++)O[m]=0;for(m=3788;m<=3791;m++)O[m]=0;for(m=3797;m<=3802;m++)O[m]=0;for(m=3814;m<=3816;m++)O[m]=0;for(m=3825;m<=3829;m++)O[m]=0;for(m=3832;m<=3841;m++)O[m]=0;for(m=3844;m<=3852;m++)O[m]=0;for(m=3873;m<=3885;m++)O[m]=0;for(m=3890;m<=3893;m++)O[m]=0;for(m=3907;m<=3912;m++)O[m]=0;for(m=3942;m<=3950;m++)O[m]=0;for(m=3968;m<=3970;m++)O[m]=0;for(m=3973;m<=3976;m++)O[m]=0;for(m=3986;m<=3989;m++)O[m]=0;for(m=3994;m<=3997;m++)O[m]=0;for(m=4048;m<=4051;m++)O[m]=0;for(m=4056;m<=4063;m++)O[m]=0;for(m=4093;m<=4096;m++)O[m]=0;for(m=4390;m<=4398;m++)O[m]=0;for(m=4399;m<=4413;m++)O[m]=2;for(m=4418;m<=4433;m++)O[m]=2;for(m=4455;m<=4457;m++)O[m]=2;for(m=4484;m<=4489;m++)O[m]=0;for(m=4491;m<=4554;m++)O[m]=0;for(m=4568;m<=4589;m++)O[m]=0;for(m=4652;m<=4656;m++)O[m]=0;for(m=4766;m<=4800;m++)O[m]=0;for(m=5014;m<=5016;m++)O[m]=0;for(m=5069;m<=5072;m++)O[m]=0;for(m=5105;m<=5130;m++)O[m]=0;for(m=5167;m<=5188;m++)O[m]=0;for(m=5253;m<=5259;m++)O[m]=0;for(m=5269;m<=5275;m++)O[m]=0;for(m=5292;m<=5311;m++)O[m]=0;for(m=5329;m<=5331;m++)O[m]=0;for(m=5343;m<=5349;m++)O[m]=0;for(m=5355;m<=5357;m++)O[m]=0;for(m=5387;m<=5389;m++)O[m]=0;for(m=5459;m<=5463;m++)O[m]=0;for(m=5479;m<=5482;m++)O[m]=0;for(m=5518;m<=5520;m++)O[m]=0;for(m=5530;m<=5539;m++)O[m]=0;for(m=5550;m<=5552;m++)O[m]=0;for(m=5562;m<=5583;m++)O[m]=0;for(m=5623;m<=5625;m++)O[m]=2;for(m=5631;m<=5639;m++)O[m]=0;for(m=5649;m<=5653;m++)O[m]=0;for(m=5663;m<=5680;m++)O[m]=0;for(m=5682;m<=5685;m++)O[m]=0;for(m=5875;m<=5877;m++)O[m]=0;for(m=5896;m<=5899;m++)O[m]=0;for(m=5921;m<=5940;m++)O[m]=0;for(m=6050;m<=6125;m++)O[m]=0;for(m=6244;m<=6275;m++)O[m]=0;for(m=6328;m<=6348;m++)O[m]=0;for(m=6350;m<=6356;m++)O[m]=0;for(m=6366;m<=6372;m++)O[m]=0;for(m=6381;m<=6387;m++)O[m]=0;for(m=6393;m<=6404;m++)O[m]=0;for(m=6480;m<=6483;m++)O[m]=0;for(m=6511;m<=6514;m++)O[m]=0;for(m=6579;m<=6581;m++)O[m]=0;for(m=6619;m<=6624;m++)O[m]=0;for(m=6625;m<=6627;m++)O[m]=2;for(m=6628;m<=6632;m++)O[m]=0;for(m=6634;m<=6637;m++)O[m]=0;for(m=6669;m<=6692;m++)O[m]=0;for(m=6707;m<=6709;m++)O[m]=0;for(m=6720;m<=6723;m++)O[m]=0;for(m=6732;m<=6738;m++)O[m]=0;for(m=6931;m<=6933;m++)O[m]=0;for(m=6956;m<=6959;m++)O[m]=0;for(m=7005;m<=7007;m++)O[m]=0;for(m=7057;m<=7070;m++)O[m]=2;for(m=7074;m<=7082;m++)O[m]=0;for(m=7109;m<=7118;m++)O[m]=0;for(m=7119;m<=7127;m++)O[m]=1;for(m=7374;m<=7376;m++)O[m]=0;for(m=7528;m<=7586;m++)O[m]=0;for(m=7587;m<=7645;m++)O[m]=2;for(m=7692;m<=7696;m++)O[m]=0;for(m=7755;m<=7787;m++)O[m]=0;for(m=7791;m<=7795;m++)O[m]=0;for(m=7799;m<=7801;m++)O[m]=0;for(m=7803;m<=7805;m++)O[m]=0;for(m=7825;m<=7831;m++)O[m]=0;for(m=7845;m<=7859;m++)O[m]=0;for(m=8013;m<=8032;m++)O[m]=0;for(m=8065;m<=8068;m++)O[m]=1;for(m=8518;m<=8529;m++)O[m]=2;for(m=8533;m<=8536;m++)O[m]=2;for(m=8538;m<=8540;m++)O[m]=2;for(m=8677;m<=8679;m++)O[m]=0;for(m=8836;m<=8840;m++)O[m]=0;for(m=8857;m<=8859;m++)O[m]=0;for(m=8908;m<=8910;m++)O[m]=0;for(m=9154;m<=9159;m++)O[m]=0;for(m=9205;m<=9218;m++)O[m]=0;for(m=9271;m<=9273;m++)O[m]=0;for(m=9295;m<=9297;m++)O[m]=0;for(m=9356;m<=9360;m++)O[m]=0;for(m=9404;m<=9407;m++)O[m]=0;for(m=9476;m<=9482;m++)O[m]=0;for(m=9487;m<=9494;m++)O[m]=0;for(m=9697;m<=9699;m++)O[m]=0;for(m=9821;m<=9865;m++)O[m]=0;for(m=10285;m<=10291;m++)O[m]=0;for(m=10314;m<=10317;m++)O[m]=0;for(m=10448;m<=10465;m++)O[m]=0;for(m=10731;m<=10733;m++)O[m]=0;for(m=11114;m<=11118;m++)O[m]=0;for(m=20004;m<=20032;m++)O[m]=0;for(m=20047;m<=20049;m++)O[m]=0;for(m=20062;m<=20092;m++)O[m]=0;for(m=20135;m<=20138;m++)O[m]=0;for(m=20248;m<=20258;m++)O[m]=0;for(m=20348;m<=20358;m++)O[m]=0;for(m=20436;m<=20440;m++)O[m]=0;for(m=20822;m<=20824;m++)O[m]=0;for(m=20904;m<=20932;m++)O[m]=0;for(m=20934;m<=20936;m++)O[m]=0;for(m=21004;m<=21032;m++)O[m]=0;for(m=21035;m<=21037;m++)O[m]=0;for(m=21095;m<=21097;m++)O[m]=0;for(m=21148;m<=21150;m++)O[m]=0;for(m=21207;m<=21264;m++)O[m]=0;for(m=21307;m<=21364;m++)O[m]=0;for(m=21413;m<=21423;m++)O[m]=0;for(m=21453;m<=21463;m++)O[m]=0;for(m=21473;m<=21483;m++)O[m]=0;for(m=21780;m<=21782;m++)O[m]=0;for(m=21891;m<=21894;m++)O[m]=0;for(m=21896;m<=21899;m++)O[m]=0;for(m=22171;m<=22177;m++)O[m]=0;for(m=22181;m<=22187;m++)O[m]=0;for(m=22191;m<=22197;m++)O[m]=0;for(m=22207;m<=22222;m++)O[m]=0;for(m=22229;m<=22232;m++)O[m]=0;for(m=22234;m<=22236;m++)O[m]=0;for(m=22243;m<=22250;m++)O[m]=0;for(m=22262;m<=22265;m++)O[m]=0;for(m=22307;m<=22322;m++)O[m]=0;for(m=22348;m<=22357;m++)O[m]=0;for(m=22407;m<=22422;m++)O[m]=0;for(m=22462;m<=22465;m++)O[m]=0;for(m=22521;m<=22525;m++)O[m]=0;for(m=22607;m<=22622;m++)O[m]=0;for(m=22641;m<=22646;m++)O[m]=0;for(m=22648;m<=22657;m++)O[m]=0;for(m=22707;m<=22722;m++)O[m]=0;for(m=22762;m<=22765;m++)O[m]=0;for(m=22807;m<=22822;m++)O[m]=0;for(m=22991;m<=22994;m++)O[m]=0;for(m=23028;m<=23038;m++)O[m]=0;for(m=23301;m<=23333;m++)O[m]=2;for(m=23830;m<=23853;m++)O[m]=0;for(m=23866;m<=23872;m++)O[m]=0;for(m=23877;m<=23884;m++)O[m]=0;for(m=23886;m<=23894;m++)O[m]=0;for(m=23946;m<=23948;m++)O[m]=0;for(m=24311;m<=24313;m++)O[m]=0;for(m=24342;m<=24347;m++)O[m]=0;for(m=24370;m<=24374;m++)O[m]=10;for(m=24375;m<=24381;m++)O[m]=0;for(m=24718;m<=24721;m++)O[m]=0;for(m=24817;m<=24821;m++)O[m]=0;for(m=24877;m<=24882;m++)O[m]=0;for(m=24891;m<=24893;m++)O[m]=0;for(m=25391;m<=25395;m++)O[m]=0;for(m=25828;m<=25838;m++)O[m]=0;for(m=26191;m<=26195;m++)O[m]=0;for(m=26391;m<=26393;m++)O[m]=0;for(m=26701;m<=26722;m++)O[m]=0;for(m=26729;m<=26799;m++)O[m]=2;for(m=26801;m<=26803;m++)O[m]=2;for(m=26811;m<=26813;m++)O[m]=2;for(m=26847;m<=26870;m++)O[m]=2;for(m=26891;m<=26899;m++)O[m]=0;for(m=26901;m<=26923;m++)O[m]=0;for(m=26929;m<=26946;m++)O[m]=0;for(m=26948;m<=26998;m++)O[m]=0;for(m=27037;m<=27040;m++)O[m]=0;for(m=27205;m<=27232;m++)O[m]=0;for(m=27258;m<=27260;m++)O[m]=0;for(m=27391;m<=27398;m++)O[m]=0;for(m=27561;m<=27564;m++)O[m]=0;for(m=27571;m<=27574;m++)O[m]=0;for(m=27581;m<=27584;m++)O[m]=0;for(m=27591;m<=27594;m++)O[m]=0;for(m=27700;m<=27707;m++)O[m]=0;for(m=28191;m<=28193;m++)O[m]=0;for(m=28348;m<=28358;m++)O[m]=0;for(m=28402;m<=28432;m++)O[m]=0;for(m=28462;m<=28492;m++)O[m]=0;for(m=29118;m<=29122;m++)O[m]=0;for(m=29168;m<=29172;m++)O[m]=0;for(m=29177;m<=29185;m++)O[m]=0;for(m=29187;m<=29195;m++)O[m]=0;for(m=29900;m<=29903;m++)O[m]=0;for(m=30161;m<=30179;m++)O[m]=0;for(m=30491;m<=30494;m++)O[m]=0;for(m=30729;m<=30732;m++)O[m]=0;for(m=31251;m<=31259;m++)O[m]=0;for(m=31265;m<=31268;m++)O[m]=0;for(m=31275;m<=31279;m++)O[m]=0;for(m=31281;m<=31297;m++)O[m]=0;for(m=31461;m<=31469;m++)O[m]=0;for(m=31491;m<=31495;m++)O[m]=0;for(m=31917;m<=31922;m++)O[m]=0;for(m=31965;m<=32e3;m++)O[m]=0;for(m=32001;m<=32003;m++)O[m]=2;for(m=32005;m<=32031;m++)O[m]=2;for(m=32033;m<=32060;m++)O[m]=2;for(m=32064;m<=32067;m++)O[m]=2;for(m=32074;m<=32077;m++)O[m]=2;for(m=32081;m<=32086;m++)O[m]=0;for(m=32107;m<=32130;m++)O[m]=0;for(m=32133;m<=32159;m++)O[m]=0;for(m=32164;m<=32167;m++)O[m]=2;for(m=32180;m<=32199;m++)O[m]=0;for(m=32201;m<=32260;m++)O[m]=0;for(m=32301;m<=32360;m++)O[m]=0;for(m=32401;m<=32460;m++)O[m]=0;for(m=32501;m<=32560;m++)O[m]=0;for(m=32601;m<=32662;m++)O[m]=0;for(m=32664;m<=32667;m++)O[m]=2;for(m=32701;m<=32761;m++)O[m]=0;for(m=53001;m<=53004;m++)O[m]=0;for(m=53008;m<=53019;m++)O[m]=0;for(m=53021;m<=53032;m++)O[m]=0;for(m=53034;m<=53037;m++)O[m]=0;for(m=53042;m<=53046;m++)O[m]=0;for(m=53074;m<=53080;m++)O[m]=0;for(m=54001;m<=54004;m++)O[m]=0;for(m=54008;m<=54019;m++)O[m]=0;for(m=54021;m<=54032;m++)O[m]=0;for(m=54034;m<=54037;m++)O[m]=0;for(m=54042;m<=54046;m++)O[m]=0;for(m=54048;m<=54053;m++)O[m]=0;for(m=54074;m<=54080;m++)O[m]=0;for(m=54098;m<=54101;m++)O[m]=0;for(m=102001;m<=102040;m++)O[m]=0;for(m=102042;m<=102063;m++)O[m]=0;for(m=102065;m<=102067;m++)O[m]=0;for(m=102070;m<=102117;m++)O[m]=0;for(m=102122;m<=102216;m++)O[m]=0;for(m=102221;m<=102377;m++)O[m]=0;for(m=102382;m<=102388;m++)O[m]=0;for(m=102389;m<=102398;m++)O[m]=2;for(m=102399;m<=102444;m++)O[m]=0;for(m=102445;m<=102447;m++)O[m]=2;for(m=102448;m<=102458;m++)O[m]=0;for(m=102459;m<=102468;m++)O[m]=2;for(m=102469;m<=102499;m++)O[m]=0;for(m=102500;m<=102519;m++)O[m]=1;for(m=102520;m<=102524;m++)O[m]=0;for(m=102525;m<=102529;m++)O[m]=2;for(m=102530;m<=102588;m++)O[m]=0;for(m=102590;m<=102598;m++)O[m]=0;for(m=102601;m<=102603;m++)O[m]=0;for(m=102605;m<=102628;m++)O[m]=0;for(m=102629;m<=102646;m++)O[m]=2;for(m=102648;m<=102700;m++)O[m]=2;for(m=102701;m<=102703;m++)O[m]=0;for(m=102707;m<=102730;m++)O[m]=2;for(m=102733;m<=102758;m++)O[m]=2;for(m=102767;m<=102900;m++)O[m]=0;for(m=102901;m<=102933;m++)O[m]=2;for(m=102934;m<=102950;m++)O[m]=13;for(m=102951;m<=102963;m++)O[m]=0;for(m=102965;m<=102969;m++)O[m]=0;for(m=102971;m<=102973;m++)O[m]=0;for(m=102975;m<=102989;m++)O[m]=0;for(m=102990;m<=102992;m++)O[m]=1;for(m=102997;m<=103002;m++)O[m]=0;for(m=103003;m<=103008;m++)O[m]=2;for(m=103009;m<=103011;m++)O[m]=0;for(m=103012;m<=103014;m++)O[m]=2;for(m=103019;m<=103021;m++)O[m]=0;for(m=103022;m<=103024;m++)O[m]=2;for(m=103029;m<=103031;m++)O[m]=0;for(m=103032;m<=103034;m++)O[m]=2;for(m=103065;m<=103068;m++)O[m]=0;for(m=103074;m<=103076;m++)O[m]=0;for(m=103077;m<=103079;m++)O[m]=1;for(m=103080;m<=103082;m++)O[m]=0;for(m=103083;m<=103085;m++)O[m]=2;for(m=103090;m<=103093;m++)O[m]=0;for(m=103097;m<=103099;m++)O[m]=0;for(m=103100;m<=103102;m++)O[m]=2;for(m=103107;m<=103109;m++)O[m]=0;for(m=103110;m<=103112;m++)O[m]=2;for(m=103113;m<=103116;m++)O[m]=0;for(m=103117;m<=103120;m++)O[m]=2;for(m=103153;m<=103157;m++)O[m]=0;for(m=103158;m<=103162;m++)O[m]=2;for(m=103163;m<=103165;m++)O[m]=0;for(m=103166;m<=103168;m++)O[m]=1;for(m=103169;m<=103171;m++)O[m]=2;for(m=103186;m<=103188;m++)O[m]=0;for(m=103189;m<=103191;m++)O[m]=2;for(m=103192;m<=103195;m++)O[m]=0;for(m=103196;m<=103199;m++)O[m]=2;for(m=103200;m<=103224;m++)O[m]=0;for(m=103225;m<=103227;m++)O[m]=1;for(m=103232;m<=103237;m++)O[m]=0;for(m=103238;m<=103243;m++)O[m]=2;for(m=103244;m<=103246;m++)O[m]=0;for(m=103247;m<=103249;m++)O[m]=2;for(m=103254;m<=103256;m++)O[m]=0;for(m=103257;m<=103259;m++)O[m]=2;for(m=103264;m<=103266;m++)O[m]=0;for(m=103267;m<=103269;m++)O[m]=2;for(m=103300;m<=103375;m++)O[m]=0;for(m=103381;m<=103383;m++)O[m]=0;for(m=103384;m<=103386;m++)O[m]=1;for(m=103387;m<=103389;m++)O[m]=0;for(m=103390;m<=103392;m++)O[m]=2;for(m=103397;m<=103399;m++)O[m]=0;for(m=103400;m<=103471;m++)O[m]=2;for(m=103476;m<=103478;m++)O[m]=0;for(m=103479;m<=103481;m++)O[m]=2;for(m=103486;m<=103488;m++)O[m]=0;for(m=103489;m<=103491;m++)O[m]=2;for(m=103492;m<=103495;m++)O[m]=0;for(m=103496;m<=103499;m++)O[m]=2;for(m=103528;m<=103543;m++)O[m]=0;for(m=103544;m<=103548;m++)O[m]=2;for(m=103549;m<=103551;m++)O[m]=0;for(m=103552;m<=103554;m++)O[m]=1;for(m=103555;m<=103557;m++)O[m]=2;for(m=103558;m<=103560;m++)O[m]=0;for(m=103571;m<=103573;m++)O[m]=0;for(m=103574;m<=103576;m++)O[m]=2;for(m=103577;m<=103580;m++)O[m]=0;for(m=103581;m<=103583;m++)O[m]=2;for(m=103595;m<=103694;m++)O[m]=0;for(m=103696;m<=103699;m++)O[m]=0;for(m=103700;m<=103793;m++)O[m]=2;for(m=103794;m<=103890;m++)O[m]=0;for(m=103891;m<=103896;m++)O[m]=2;for(m=103900;m<=103971;m++)O[m]=2;for(m=103972;m<=103977;m++)O[m]=0;for(m=112e3;m<=112101;m++)O[m]=0;const BU=[102100,102113,3857,3785,900913],nte=[104905,104971],rte=[4326,...BU,...nte],Xv=[-20037508342788905e-9,20037508342788905e-9],y3=[-20037508342787e-6,20037508342787e-6],cM={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:Xv,origin:y3,dx:1e-5},qU={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Xv,origin:y3,dx:1e-5},102100:cM,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Xv,origin:y3,dx:1e-5},3857:cM,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:cM};function dr(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const n=e.wkid,r=t.wkid;if(n!=null||r!=null){if(n===r||dl(e)&&dl(t))return!0;const o=e.latestWkid;if(o!=null&&r===o)return!0;const a=t.latestWkid;return a!=null&&n===a}let i,s;return e.wkt2&&t.wkt2?(i=e.wkt2,s=t.wkt2):e.wkt&&t.wkt&&(i=e.wkt,s=t.wkt),!(!i||!s)&&i.toUpperCase()===s.toUpperCase()}function bi(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&qU[t]||null}function _T(e){if(!e)return;const{wkid:t,vcsWkid:n}=e;if(t)return n?JSON.stringify({wkid:t,vcsWkid:n}):String(t);const r=e.wkt||e.wkt2;return JSON.stringify(r?n?{wkt:r,vcsWkid:n}:{wkt:r}:{})}function Mx(e){if(!vs(e))return!1;const{wkid:t}=e;if(t)return O[t]==null;const n=e.wkt2||e.wkt;return!!n&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(n)}function ite(e){return!(HU(e)||WU(e))}function lf(e){return(e==null?void 0:e.wkid)===4326}function LMe(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function QD(e){return(e==null?void 0:e.wkid)===af.CGCS2000}function dl(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&BU.includes(t)}function ste(e){return(e==null?void 0:e.wkid)===32662}function Ix(e){return e===af.GCSMARS2000||e===af.GCSMARS2000_SPHERE}function HU(e){return Ix(e==null?void 0:e.wkid)}function Px(e){return e===af.GCSMOON2000}function WU(e){return Px(e==null?void 0:e.wkid)}function ote(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&rte.includes(t)}function vs(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const ZU={wkid:4326,wkt:BA(qU[4326].wkTemplate,{Central_Meridian:"0.0"})},JU={wkid:102100,latestWkid:3857},ate={wkid:32662};function fk(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const lte=fk(Cn),mk=fk(al),yk=fk(jd),ute={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Cn.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},cte=mk.wkt.toUpperCase(),dte=yk.wkt.toUpperCase();function hte(e){if(e!=null&&vs(e)){const t=e.wkid,n=e.wkt2??e.wkt;if(Ix(t))return al;const r=n==null?void 0:n.toUpperCase();if(n&&r===cte)return al;if(Px(t)||r&&r===dte)return jd}return Cn}function NMe(e){return Ix(e)?al:Px(e)?jd:Cn}function wT(e){return dr(e,lte)}function zd(e){return wT(e)||dr(e,mk)||dr(e,yk)}const DMe=39.37,pte=Cn.radius*Math.PI/200,YU=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Qp=O,KU=/UNIT\[([^\]]+)]/i,fte=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),mte=hr()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain:"chains",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Pa=e=>e*e,Oc=e=>e*e*e,Qv={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937},"clarke-feet":{inBaseUnits:.3047972654},"clarke-yards":{inBaseUnits:.9143917962},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"gold-coast-feet":{inBaseUnits:.3047997101815088},chains:{inBaseUnits:20.1168},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Pa(.001)},"square-centimeters":{inBaseUnits:Pa(.01)},"square-decimeters":{inBaseUnits:Pa(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Pa(1e3)},"square-inches":{inBaseUnits:Pa(.0254)},"square-feet":{inBaseUnits:Pa(.3048)},"square-yards":{inBaseUnits:Pa(.9144)},"square-miles":{inBaseUnits:Pa(1609.344)},"square-us-feet":{inBaseUnits:Pa(1200/3937)},acres:{inBaseUnits:.0015625*Pa(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Oc(.001)},"cubic-centimeters":{inBaseUnits:1e3*Oc(.01)},"cubic-decimeters":{inBaseUnits:1e3*Oc(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Oc(1e3)},"cubic-inches":{inBaseUnits:1e3*Oc(.0254)},"cubic-feet":{inBaseUnits:1e3*Oc(.3048)},"cubic-yards":{inBaseUnits:1e3*Oc(.9144)},"cubic-miles":{inBaseUnits:1e3*Oc(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},yte=(()=>{const e={};for(const t in Qv)for(const n in Qv[t].units)e[n]=t;return e})();function gte(e,t,n){return e*Qv[n].units[t].inBaseUnits}function _te(e,t,n){return e/Qv[n].units[t].inBaseUnits}const XU=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],wte=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function g3(e){const t=yte[e];if(!t)throw new Error("unknown type");return t}function eF(e,t=null){return t=t||g3(e),Qv[t].baseUnit===e}function Sr(e,t,n){if(t===n)return e;const r=g3(t);if(r!==g3(n))throw new Error("incompatible units");const i=eF(t,r)?e:gte(e,t,r);return eF(n,r)?i:_te(i,n,r)}function vte(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function FMe(e){return vte(e)}function jMe(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function zMe(e,t){const n=Sr(e,t,"meters");return Math.abs(n)<3e3?"meters":"kilometers"}function VMe(e,t){const n=Sr(e,t,"meters");return Math.abs(n)<1e5?"meters":"kilometers"}function UMe(e,t){const n=Sr(e,t,"feet");return Math.abs(n)<1e3?"feet":"miles"}function GMe(e,t){const n=Sr(e,t,"feet");return Math.abs(n)<1e5?"feet":"miles"}function BMe(e,t){const n=Sr(e,t,"square-meters");return Math.abs(n)<3e6?"square-meters":"square-kilometers"}function qMe(e,t){const n=Sr(e,t,"square-feet");return Math.abs(n)<1e6?"square-feet":"square-miles"}function bte(e,t,n){return Sr(e,t,"meters")/(n*Math.PI/180)}function QU(e){return mte.fromJSON(e.toLowerCase())||null}function vT(e){if(e!=null&&!ite(e))return 1;const t=Zd(e);return t>1e5?1:t}function e9(e){return Zd(e)>=hte(e).metersPerDegree?"meters":k0(e)}function Zd(e,t=Cn.metersPerDegree){return Ste(e,!0)??t}function Ste(e,t=!1){const n=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let i=null;if(n){if(Ix(n))return al.metersPerDegree;if(Px(n))return jd.metersPerDegree;i=Qp.values[Qp[n]],!i&&t&&fte.has(n)&&(i=pte)}else r&&(r9(r)?i=tF(YU.exec(r),i):n9(r)&&(i=tF(KU.exec(r),i)));return i}function HMe(e){return Mx(e)?1:Zd(e)}function tF(e,t){return e!=null&&e[1]?t9(e[1]):t}function t9(e){return parseFloat(e.split(",")[1])}function k0(e){const t=(e==null?void 0:e.wkid)??null,n=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let r=null;if(t)r=Qp.units[Qp[t]];else if(n){const i=r9(n)?YU:n9(n)?KU:null;if(i){const s=i.exec(n);s!=null&&s[1]&&(r=xte(s[1]))}}return r!=null?QU(r):null}function WMe(e){const t=k0(e);return t!=null&&XU.includes(t)?t:null}function ZMe(e){const t=e9(e);return t!=null&&XU.includes(t)?t:null}function JMe(e){const t=k0(e);return t==null?null:wte.get(t)}function n9(e){return/^GEOCCS/i.test(e)}function r9(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const Tte=1e-7;function xte(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let n=t==null?void 0:t[1];if(!n||!Qp.units.includes(n)){const r=t9(e);n=null;const i=Qp.values;for(let s=0;s<i.length;++s)if(Math.abs(r-i[s])<Tte){n=Qp.units[s];break}}return n}function YMe(e){const t=k0(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"chains":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const Ete={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},$te={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Mte={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},Ite=hr()(Ete),Pte=hr()($te),KMe=hr()(Mte);var Aa;let Jt=Aa=class extends ne{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return Aa.WebMercator;if((e==null?void 0:e.wkid)===4326)return Aa.WGS84;const t=new Aa;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return lf(this)}get isWebMercator(){return dl(this)}get isGeographic(){return Mx(this)}get isWrappable(){return ote(this)}get metersPerUnit(){return Zd(this)}get unit(){return k0(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Aa.WGS84)return new Aa(ZU);if(this===Aa.WebMercator)return new Aa(JU);const e=new Aa;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=q(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:n}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,i=this.imageCoordinateSystem;return t==null||r?JSON.stringify(i)===JSON.stringify(e.imageCoordinateSystem):n?i.id===t&&i.referenceServiceName===n:i.id===t}return dr(this,e)}toJSON(e){return this.write(void 0,e)}};Jt.GCS_NAD_1927=null,Jt.WGS84=null,Jt.WebMercator=null,Jt.PlateCarree=null,l([p({readOnly:!0})],Jt.prototype,"isWGS84",null),l([p({readOnly:!0})],Jt.prototype,"isWebMercator",null),l([p({readOnly:!0})],Jt.prototype,"isGeographic",null),l([p({readOnly:!0})],Jt.prototype,"isWrappable",null),l([p({type:Mt,json:{write:!0}})],Jt.prototype,"latestWkid",void 0),l([p({readOnly:!0})],Jt.prototype,"metersPerUnit",null),l([p({readOnly:!0})],Jt.prototype,"unit",null),l([p({type:Mt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Jt.prototype,"wkid",void 0),l([p({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Jt.prototype,"wkt",void 0),l([ge("wkt"),ge("web-scene","wkt")],Jt.prototype,"writeWkt",null),l([p({type:String,json:{write:!1}})],Jt.prototype,"wkt2",void 0),l([p({type:Mt,json:{write:!0}})],Jt.prototype,"vcsWkid",void 0),l([p({type:Mt,json:{write:!0}})],Jt.prototype,"latestVcsWkid",void 0),l([p()],Jt.prototype,"imageCoordinateSystem",void 0),Jt=Aa=l([k("esri.geometry.SpatialReference")],Jt),Jt.prototype.toJSON.isDefaultToJSON=!0,Jt.GCS_NAD_1927=Fe.freeze(new Jt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),Jt.WGS84=Fe.freeze(new Jt(ZU)),Jt.WebMercator=Fe.freeze(new Jt(JU)),Jt.PlateCarree=Fe.freeze(new Jt(ate));const dt=Jt;function de(e,t,n){let r,i;return t===void 0||Array.isArray(t)?(i=e,n=t,r=[void 0]):(i=t,r=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;r.forEach(h=>{const f=XV(s,h,i);f.read&&typeof f.read=="object"||(f.read={}),f.read.reader=a[o],n&&(f.read.source=(f.read.source||[]).concat(n))})}}let ka=class extends ne{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=dt.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,n){if(t instanceof dt)return t;if(t!=null){const r=new dt;return r.read(t,n),r}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,n){this.cache[t]=n}};l([p()],ka.prototype,"type",void 0),l([p({readOnly:!0})],ka.prototype,"cache",null),l([p({readOnly:!0})],ka.prototype,"extent",null),l([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ka.prototype,"hasM",void 0),l([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ka.prototype,"hasZ",void 0),l([p({type:dt,json:{write:!0},value:dt.WGS84})],ka.prototype,"spatialReference",void 0),l([de("spatialReference")],ka.prototype,"readSpatialReference",null),ka=l([k("esri.geometry.Geometry")],ka);const zu=ka,Cte=Object.prototype.toString;function Ote(e){const t="__accessorMetadata__"in e?jn(e):e;return function(...n){if(n.push(t),typeof n[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Ate.apply(this,n)}}function Ate(e,t,n,r){mx(e,t).cast=r}function kte(e){return(t,n)=>{mx(t,e).cast=t[n]}}function kt(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&Cte.call(e[0])==="[object Function]"?Ote(e[0]):e.length===1&&typeof e[0]=="string"?kte(e[0]):void 0}const Rte=57.29577951308232,Lte=.017453292519943;function nF(e){return e*Rte}function rF(e){return e*Lte}function QMe(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Cn.radius))}function _3(e){return e.wkid!=null||e.wkt!=null}const dM=[0,0];function bT(e,t,n,r,i){const s=e,o=i;if(o.spatialReference=n,"x"in s&&"x"in o)[o.x,o.y]=t(s.x,s.y,dM,r);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=t(s.xmin,s.ymin,dM,r),[o.xmax,o.ymax]=t(s.xmax,s.ymax,dM,r);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,h=[];let f;for(let _=0;_<a.length;_++){const w=a[_];f=[],h.push(f);for(let b=0;b<w.length;b++)f.push(t(w[b][0],w[b][1],[0,0],r)),w[b].length>2&&f[b].push(w[b][2]),w[b].length>3&&f[b].push(w[b][3])}"paths"in o?o.paths=h:o.rings=h}else if("points"in s&&"points"in o){const a=s.points,h=[];for(let f=0;f<a.length;f++)h[f]=t(a[f][0],a[f][1],[0,0],r),a[f].length>2&&h[f].push(a[f][2]),a[f].length>3&&h[f].push(a[f][3]);o.points=h}return i}function ES(e,t){const n=e&&(_3(e)?e:e.spatialReference),r=t&&(_3(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!n||!r)&&(!!dr(r,n)||dl(r)&&lf(n)||dl(n)&&lf(r))}function Cx(e,t){if(e==null)return null;const n=e.spatialReference,r=t&&(_3(t)?t:t.spatialReference);return ES(n,r)?dr(n,r)?q(e):dl(r)?bT(e,Vy,dt.WebMercator,!1,q(e)):lf(r)?bT(e,Ox,dt.WGS84,!1,q(e)):null:null}function Vy(e,t,n=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=rF(t);return n[0]=rF(e)*Cn.radius,n[1]=Cn.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),n}function Ox(e,t,n=[0,0],r=!1){if(e===Xv[0])n[0]=-180;else if(e===Xv[1])n[0]=180;else{const i=nF(e/Cn.radius);n[0]=r?i:i-360*Math.floor((i+180)/360)}return n[1]=nF(Math.PI/2-2*Math.atan(Math.exp(-t/Cn.radius))),n}function Ad(e,t=!1,n=q(e)){return bT(e,Vy,dt.WebMercator,t,n)}function Uy(e,t=!1,n=q(e)){return bT(e,Ox,dt.WGS84,t,n)}function i9(e,t){const n=e.x-t.x,r=e.y-t.y,i=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(n*n+r*r+i*i)}function Nte(e){var t;return((t=s9(e,o9))==null?void 0:t[0])??null}function Dte(e){var t;return((t=s9(e,o9))==null?void 0:t[1])??null}function s9({x:e,y:t,spatialReference:n},r=[0,0]){if(n){if(dl(n))return Ox(e,t,r);if(Mx(n))return r[0]=e,r[1]=t,r}return null}const o9=[0,0];var $S;const hM=[0,0];function iF(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let mi=$S=class extends zu{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const n=e._get("spatialReference");t._set("spatialReference",Fe.isFrozen(n)?n:n.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,n,r,i){let s;if(Array.isArray(e))s=e,i=t,e=s[0],t=s[1],n=s[2],r=s[3];else if(e&&typeof e=="object"){if(s=e,e=s.x!=null?s.x:s.longitude,t=s.y!=null?s.y:s.latitude,n=s.z,r=s.m,(i=s.spatialReference)&&i.declaredClass!=="esri.geometry.SpatialReference"&&(i=new dt(i)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)fe.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)fe.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&(i!=null&&i.isWebMercator)){const a=Vy(s.longitude,s.latitude,hM);e=a[0],t=a[1]}}}else iF(n)?(i=n,n=null):iF(r)&&(i=r,r=null);const o={x:e,y:t};return o.x==null&&o.y!=null?fe.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&fe.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),i!=null&&(o.spatialReference=i),n!=null&&(o.z=n),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return Dte(this)}set latitude(e){const{spatialReference:t,x:n}=this;e!=null&&t&&(t.isWebMercator?this._set("y",Vy(n,e,hM)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return Nte(this)}set longitude(e){const{y:t,spatialReference:n}=this;e!=null&&n&&(n.isWebMercator?this._set("x",Vy(e,t,hM)[0]):n.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,n){t[n]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new $S;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return $S.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:n,z:r,m:i,spatialReference:s}=this,{z:o,m:a}=e;let{x:h,y:f,spatialReference:_}=e;if(!s.equals(_))if(s.isWebMercator&&_.isWGS84)[h,f]=Vy(h,f),_=s;else{if(!s.isWGS84||!_.isWebMercator)return!1;[h,f]=Ox(h,f),_=s}return t===h&&n===f&&r===o&&i===a&&s.wkid===_.wkid}offset(e,t,n){return this.x+=e,this.y+=t,n!=null&&(this.z=(this.z??0)+n),this}normalize(){if(!this.spatialReference)return this;const e=bi(this.spatialReference);if(!e)return this;let t=this.x;const[n,r]=e.valid,i=2*r;let s;return t>r?(s=Math.ceil(Math.abs(t-r)/i),t-=s*i):t<n&&(s=Math.ceil(Math.abs(t-n)/i),t+=s*i),this._set("x",t),this}distance(e){return i9(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};l([p({readOnly:!0})],mi.prototype,"cache",null),l([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],mi.prototype,"hasM",null),l([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],mi.prototype,"hasZ",null),l([p({type:Number})],mi.prototype,"latitude",null),l([p({type:Number})],mi.prototype,"longitude",null),l([p({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),kt(e=>isNaN(e)?e:vi(e))],mi.prototype,"x",void 0),l([ge("x")],mi.prototype,"writeX",null),l([de("x")],mi.prototype,"readX",null),l([p({type:Number,json:{write:!0}})],mi.prototype,"y",void 0),l([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],mi.prototype,"z",void 0),l([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],mi.prototype,"m",void 0),mi=$S=l([k("esri.geometry.Point")],mi),mi.prototype.toJSON.isDefaultToJSON=!0;const gt=mi,pM=[0,0];function R0(e,t){return t!=null&&_i(e,t.x,t.y,t.z)}function eIe(e,t){if(!t.points||t.points.length)return!1;for(const n of t.points)if(!gg(e,n))return!1;return!0}function Fte(e,t){const{xmin:n,ymin:r,zmin:i,xmax:s,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?_i(e,n,r,i)&&_i(e,n,o,i)&&_i(e,s,o,i)&&_i(e,s,r,i)&&_i(e,n,r,a)&&_i(e,n,o,a)&&_i(e,s,o,a)&&_i(e,s,r,a):_i(e,n,r)&&_i(e,n,o)&&_i(e,s,o)&&_i(e,s,r)}function gg(e,t){return _i(e,t[0],t[1])}function jte(e,t){return _i(e,t[0],t[1],t[2])}function _i(e,t,n,r){return t>=e.xmin&&t<=e.xmax&&n>=e.ymin&&n<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function gk(e,t){return pM[1]=t.y,pM[0]=t.x,zte(e,pM)}function zte(e,t){return _k(e.rings,t)}function _k(e,t){if(!e)return!1;if(Vte(e))return sF(!1,e,t);let n=!1;for(let r=0,i=e.length;r<i;r++)n=sF(n,e[r],t);return n}function Vte(e){return!Array.isArray(e[0][0])}function sF(e,t,n){const[r,i]=n;let s=e,o=0;for(let a=0,h=t.length;a<h;a++){o++,o===h&&(o=0);const[f,_]=t[a],[w,b]=t[o];(_<i&&b>=i||b<i&&_>=i)&&f+(i-_)/(b-_)*(w-f)<r&&(s=!s)}return s}function Ute(e,t){return R0(e,t)}function Gte(e,t){const n=e.hasZ&&t.hasZ;let r,i,s;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(i=t.ymin,e.ymax<i)return!1}else if(i=e.ymin,t.ymax<i)return!1;if(n&&t.hasZ){if(e.zmin<=t.zmin){if(s=t.zmin,e.zmax<s)return!1}else if(s=e.zmin,t.zmax<s)return!1}return!0}function Bte(e,t){const{points:n,hasZ:r}=t,i=r?jte:gg;for(const s of n)if(i(e,s))return!0;return!1}const uf=[0,0],cf=[0,0],df=[0,0],hf=[0,0],qte=[uf,cf,df,hf],a9=[[df,uf],[uf,cf],[cf,hf],[hf,df]];function Hte(e,t){return Wte(e,t.rings)}function Wte(e,t){uf[0]=e.xmin,uf[1]=e.ymax,cf[0]=e.xmax,cf[1]=e.ymax,df[0]=e.xmin,df[1]=e.ymin,hf[0]=e.xmax,hf[1]=e.ymin;for(const n of qte)if(_k(t,n))return!0;for(const n of t){if(!n.length)continue;let r=n[0];if(gg(e,r))return!0;for(let i=1;i<n.length;i++){const s=n[i];if(gg(e,s)||l9(r,s,a9))return!0;r=s}}return!1}function Zte(e,t){uf[0]=e.xmin,uf[1]=e.ymax,cf[0]=e.xmax,cf[1]=e.ymax,df[0]=e.xmin,df[1]=e.ymin,hf[0]=e.xmax,hf[1]=e.ymin;const n=t.paths;for(const r of n){if(!n.length)continue;let i=r[0];if(gg(e,i))return!0;for(let s=1;s<r.length;s++){const o=r[s];if(gg(e,o)||l9(i,o,a9))return!0;i=o}}return!1}const gr=[0,0];function Jte(e){for(let t=0;t<e.length;t++){const n=e[t];for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];for(let a=t+1;a<e.length;a++)for(let h=0;h<e[a].length-1;h++){const f=e[a][h],_=e[a][h+1];if(w3(s,o,f,_,gr)&&!(gr[0]===s[0]&&gr[1]===s[1]||gr[0]===f[0]&&gr[1]===f[1]||gr[0]===o[0]&&gr[1]===o[1]||gr[0]===_[0]&&gr[1]===_[1]))return!0}}const r=n.length;if(!(r<=4))for(let i=0;i<r-3;i++){let s=r-1;i===0&&(s=r-2);const o=n[i],a=n[i+1];for(let h=i+2;h<s;h++){const f=n[h],_=n[h+1];if(w3(o,a,f,_,gr)&&!(gr[0]===o[0]&&gr[1]===o[1]||gr[0]===f[0]&&gr[1]===f[1]||gr[0]===a[0]&&gr[1]===a[1]||gr[0]===_[0]&&gr[1]===_[1]))return!0}}}return!1}function l9(e,t,n){for(let r=0;r<n.length;r++)if(w3(e,t,n[r][0],n[r][1]))return!0;return!1}function w3(e,t,n,r,i){const[s,o]=e,[a,h]=t,[f,_]=n,[w,b]=r,T=w-f,M=s-f,I=a-s,C=b-_,N=o-_,j=h-o,z=C*I-T*j;if(z===0)return!1;const U=(T*N-C*M)/z,K=(I*N-j*M)/z;return U>=0&&U<=1&&K>=0&&K<=1&&(i&&(i[0]=s+U*(a-s),i[1]=o+U*(h-o)),!0)}function Yte(e){switch(e){case"esriGeometryEnvelope":case"extent":return Gte;case"esriGeometryMultipoint":case"multipoint":return Bte;case"esriGeometryPoint":case"point":return Ute;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return Hte;case"esriGeometryPolyline":case"polyline":return Zte}}var qs;function Kte(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Ac(e,t,n){return t==null?n:n==null?t:e(t,n)}let rr=qs=class extends zu{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,n,r,i){return Kte(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?dt.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:n,ymax:r,spatialReference:i??dt.WGS84}}static fromBounds(e,t){return new qs({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new qs({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new gt({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new qs;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,n=e.spatialReference;return t&&n&&!t.equals(n)&&ES(t,n)&&(e=t.isWebMercator?Ad(e):Uy(e,!0)),e.type==="point"?R0(this,e):e.type==="extent"&&Fte(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,n=e.spatialReference;return t&&n&&!t.equals(n)&&ES(t,n)&&(e=t.isWebMercator?Ad(e):Uy(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),n=this.width*t,r=this.height*t;if(this.xmin+=n,this.ymin+=r,this.xmax-=n,this.ymax-=r,this.hasZ){const i=(this.zmax-this.zmin)*t;this.zmin+=i,this.zmax-=i}if(this.hasM){const i=(this.mmax-this.mmin)*t;this.mmin+=i,this.mmax-=i}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,n=e.spatialReference;return t&&n&&!dr(t,n)&&ES(t,n)&&(e=t.isWebMercator?Ad(e):Uy(e,!0)),Yte(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,n){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,n!=null&&(this.zmin+=n,this.zmax+=n),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Ac(Math.min,this.zmin,e.zmin),this.zmax=Ac(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Ac(Math.min,this.mmin,e.mmin),this.mmax=Ac(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Ac(Math.max,this.zmin,e.zmin),this.zmax=Ac(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Ac(Math.max,this.mmin,e.mmin),this.mmax=Ac(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=bi(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,n=this._getCM(e);if(n){const r=t.isWebMercator?Uy(n):n;this.xmin-=n.x,this.xmax-=n.x,t.isWebMercator||(r.x=fM(r.x,e).x),this.spatialReference=new dt(BA((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[n,r]=e.valid,i=this.xmin,s=this.xmax;return i>=n&&i<=r&&s>=n&&s<=r||(t=this.center),t}_normalize(e,t,n){const r=this.spatialReference;if(!r)return this;const i=n??bi(r);if(i==null)return this;const s=this._getParts(i).map(h=>h.extent);if(s.length<2)return s[0]||this;if(s.length>2)return e?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(e)return this._shiftCM(i);if(t)return s;let o=!0,a=!0;return s.forEach(h=>{h.hasZ||(o=!1),h.hasM||(a=!1)}),{rings:s.map(h=>{const f=[[h.xmin,h.ymin],[h.xmin,h.ymax],[h.xmax,h.ymax],[h.xmax,h.ymin],[h.xmin,h.ymin]];if(o){const _=(h.zmax-h.zmin)/2;for(let w=0;w<f.length;w++)f[w].push(_)}if(a){const _=(h.mmax-h.mmin)/2;for(let w=0;w<f.length;w++)f[w].push(_)}return f}),hasZ:o,hasM:a,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:i,ymax:s,spatialReference:o}=this,a=this.width,h=this.xmin,f=this.xmax;let _;e=e||bi(o);const[w,b]=e.valid;_=fM(this.xmin,e);const T=_.x,M=_.frameId;_=fM(this.xmax,e);const I=_.x,C=_.frameId,N=T===I&&a>0;if(a>2*b){const j=new qs(h<f?T:I,i,b,s,o),z=new qs(w,i,h<f?I:T,s,o),U=new qs(0,i,b,s,o),K=new qs(w,i,0,s,o),J=[],le=[];j.contains(U)&&J.push(M),j.contains(K)&&le.push(M),z.contains(U)&&J.push(C),z.contains(K)&&le.push(C);for(let ue=M+1;ue<C;ue++)J.push(ue),le.push(ue);t.push({extent:j,frameIds:[M]},{extent:z,frameIds:[C]},{extent:U,frameIds:J},{extent:K,frameIds:le})}else T>I||N?t.push({extent:new qs(T,i,b,s,o),frameIds:[M]},{extent:new qs(w,i,I,s,o),frameIds:[C]}):t.push({extent:new qs(T,i,I,s,o),frameIds:[M]});this.cache._parts=t}const n=this.hasZ,r=this.hasM;if(n||r){const i={};n&&(i.zmin=this.zmin,i.zmax=this.zmax),r&&(i.mmin=this.mmin,i.mmax=this.mmax);for(let s=0;s<t.length;s++)t[s].extent.set(i)}return t}};function fM(e,t){const[n,r]=t.valid,i=2*r;let s,o=0;return e>r?(s=Math.ceil(Math.abs(e-r)/i),e-=s*i,o=s):e<n&&(s=Math.ceil(Math.abs(e-n)/i),e+=s*i,o=-s),{x:e,frameId:o}}l([p({readOnly:!0})],rr.prototype,"cache",null),l([p({readOnly:!0})],rr.prototype,"center",null),l([p({readOnly:!0})],rr.prototype,"extent",null),l([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],rr.prototype,"hasM",null),l([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],rr.prototype,"hasZ",null),l([p({readOnly:!0})],rr.prototype,"height",null),l([p({readOnly:!0})],rr.prototype,"width",null),l([p({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],rr.prototype,"xmin",void 0),l([p({type:Number,json:{write:!0}})],rr.prototype,"ymin",void 0),l([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],rr.prototype,"mmin",void 0),l([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],rr.prototype,"zmin",void 0),l([p({type:Number,json:{write:!0}})],rr.prototype,"xmax",void 0),l([p({type:Number,json:{write:!0}})],rr.prototype,"ymax",void 0),l([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],rr.prototype,"mmax",void 0),l([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],rr.prototype,"zmax",void 0),rr=qs=l([k("esri.geometry.Extent")],rr),rr.prototype.toJSON.isDefaultToJSON=!0;const Xt=rr;let Tv;var Fz,jz;const Xte=((Fz=globalThis.esriConfig)==null?void 0:Fz.locale)??((jz=globalThis.dojoConfig)==null?void 0:jz.locale);var zz;const xv=(zz=globalThis.document)==null?void 0:zz.documentElement;function u9(){var n;const e=xv==null?void 0:xv.getAttribute("lang"),t=(n=globalThis.navigator)==null?void 0:n.language;return Xte??e??t??"en"}function Zi(){return Tv===void 0&&(Tv=u9()),Tv}function Qte(e=Zi()){const t=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const MS=[];function c9(e){return MS.push(e),Ft(()=>MS.splice(MS.indexOf(e),1))}const IS=[];function wk(e){return IS.push(e),Ft(()=>IS.splice(IS.indexOf(e),1))}function oF(){const e=u9();Tv!==e&&([...IS].forEach(t=>t(e)),Tv=e,[...MS].forEach(t=>t(e)))}var Vz;(Vz=globalThis.addEventListener)==null||Vz.call(globalThis,"languagechange",oF),xv&&new MutationObserver(()=>{oF()}).observe(xv,{attributeFilter:["lang"]});let yb;function ene(e){return yb&&!yb.destroyed||(yb=e()),yb}var v3;const tne=new pt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Hs=v3=class extends Fe{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new v3({categories:this.categories?q(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let n=[];this.categories&&(n=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=Cx(this.extent,dt.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let i=this.query;!this.disableExtraQuery&&e.extraQuery&&(i="("+i+")"+e.extraQuery);const s={categories:n,bbox:r,q:i,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>tne.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...t,...s}}}};l([p()],Hs.prototype,"categories",void 0),l([p()],Hs.prototype,"disableExtraQuery",void 0),l([p({type:Xt})],Hs.prototype,"extent",void 0),l([p()],Hs.prototype,"filter",void 0),l([p()],Hs.prototype,"num",void 0),l([p()],Hs.prototype,"query",void 0),l([p()],Hs.prototype,"sortField",void 0),l([p()],Hs.prototype,"sortOrder",null),l([p()],Hs.prototype,"start",void 0),Hs=v3=l([k("esri.portal.PortalQueryParams")],Hs);const ta=Hs;var b3;let qn=b3=class extends ne{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var n;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(n=this.portal)==null?void 0:n.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const n=t.categorySchema||[];return n.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):n})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new Y("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new b3({sourceJSON:e});return t.read(e),t}queryItems(e,t){let n=jn(ta,e);const r=this.portal;return parseFloat(r.currentVersion)>5?(n=n||new ta,r.queryPortal(`/content/groups/${this.id}/search`,n,"PortalItem",t)):(n=n?n.clone():new ta,n.query="group:"+this.id+(n.query?" "+n.query:""),r.queryItems(n,t))}_fetchCategorySchemaSet(e,t){const n=this.portal;return n.fetchSelf(n.authMode,!0,t).then(r=>{const i=r.contentCategorySetsGroupQuery;if(i){const s=new ta({disableExtraQuery:!0,num:1,query:i});return n.queryGroups(s,t)}throw new Y("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const i=r.results[0],s=new ta({num:1,query:`typekeywords:"${e}"`});return i.queryItems(s,t)}throw new Y("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",t).then(i=>{const s=i==null?void 0:i.categorySchema;return s!=null&&s.length?s:[]}):[])}};l([p()],qn.prototype,"access",void 0),l([p({type:Date})],qn.prototype,"created",void 0),l([p()],qn.prototype,"description",void 0),l([p()],qn.prototype,"id",void 0),l([p()],qn.prototype,"isInvitationOnly",void 0),l([p({type:Date})],qn.prototype,"modified",void 0),l([p()],qn.prototype,"owner",void 0),l([p()],qn.prototype,"portal",void 0),l([p()],qn.prototype,"snippet",void 0),l([p()],qn.prototype,"sortField",void 0),l([p()],qn.prototype,"sortOrder",void 0),l([p()],qn.prototype,"sourceJSON",void 0),l([p()],qn.prototype,"tags",void 0),l([p()],qn.prototype,"thumbnail",void 0),l([p({readOnly:!0})],qn.prototype,"thumbnailUrl",null),l([p()],qn.prototype,"title",void 0),l([p({readOnly:!0})],qn.prototype,"url",null),qn=b3=l([k("esri.portal.PortalGroup")],qn);const S3=qn;let Kh=class extends Fe{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};l([p()],Kh.prototype,"nextQueryParams",void 0),l([p()],Kh.prototype,"queryParams",void 0),l([p()],Kh.prototype,"results",void 0),l([p()],Kh.prototype,"total",void 0),Kh=l([k("esri.portal.PortalQueryResult")],Kh);const nne=Kh;let Yl=class extends ne{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var n;const t=(n=this.portal)==null?void 0:n.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new Y("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};l([p({type:Date})],Yl.prototype,"created",void 0),l([p()],Yl.prototype,"id",void 0),l([p()],Yl.prototype,"portal",void 0),l([p()],Yl.prototype,"title",void 0),l([p({readOnly:!0})],Yl.prototype,"url",null),l([p()],Yl.prototype,"username",void 0),Yl=l([k("esri.portal.PortalFolder")],Yl);const rne=Yl;var T3;let nn=T3=class extends ne{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,n=e==null?void 0:e.data,r=e==null?void 0:e.folder,i={method:"post"};t&&(i.query=t.createPostQuery(),n!=null&&(typeof n=="string"?i.query.text=n:typeof n=="object"&&(i.query.text=JSON.stringify(n))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal.request(s+"/addItem",i).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let n=this.userContentUrl;e.ownerFolder&&(n+="/"+e.ownerFolder);const r=t?{permanentDelete:!0}:{};await this.portal.request(n+`/items/${e.id}/delete`,{method:"post",query:r}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const n=this.userContentUrl+"/deleteItems",r=[],i=e.map(s=>s.id);if(i.length){const s={method:"post",query:{items:i.join(","),permanentDelete:t}},o=await this.portal.request(n,s);for(const a of o.results){const h=e.find(w=>a.itemId===w.id),f=a.success;let _=null;f?(h.id=null,h.portal=null):a.error&&(_=new Y("portal:delete-item-failed",a.error.message,a.error)),r.push({item:h,success:f,error:_})}}return r}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let n;return n=t&&t.folders?t.folders.map(r=>{const i=rne.fromJSON(r);return i.portal=this.portal,i}):[],n})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(n=>{const r=S3.fromJSON(n);return r.portal=this.portal,r}):[],t})}async fetchItems(e){e??(e={});let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:n}=await pe(()=>Promise.resolve().then(()=>p9),void 0),r={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},i=await this.portal.request(t,{query:r});let s;return i!=null&&i.items?(s=i.items.map(o=>{const a=n.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(s.map(o=>o.load())),{items:s,nextStart:i.nextStart,total:i.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new S3({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new Y("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const n=this.userContentUrl,r=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(n+`/items/${e.id}/restore`,{method:"post",query:r})}toJSON(){throw new Y("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new T3({sourceJSON:e});return t.read(e),t}};l([p()],nn.prototype,"access",void 0),l([p({type:Date})],nn.prototype,"created",void 0),l([p()],nn.prototype,"culture",void 0),l([p()],nn.prototype,"description",void 0),l([p()],nn.prototype,"email",void 0),l([p()],nn.prototype,"favGroupId",void 0),l([p()],nn.prototype,"fullName",void 0),l([p({type:Date})],nn.prototype,"modified",void 0),l([p()],nn.prototype,"orgId",void 0),l([p()],nn.prototype,"portal",void 0),l([p()],nn.prototype,"preferredView",void 0),l([p()],nn.prototype,"privileges",void 0),l([p()],nn.prototype,"region",void 0),l([p()],nn.prototype,"role",void 0),l([p()],nn.prototype,"roleId",void 0),l([p()],nn.prototype,"sourceJSON",void 0),l([p()],nn.prototype,"thumbnail",void 0),l([p({readOnly:!0})],nn.prototype,"thumbnailUrl",null),l([p()],nn.prototype,"units",void 0),l([p({readOnly:!0})],nn.prototype,"userContentUrl",null),l([p({readOnly:!0})],nn.prototype,"url",null),l([p()],nn.prototype,"username",void 0),l([p()],nn.prototype,"userLicenseTypeId",void 0),l([p()],nn.prototype,"userType",void 0),nn=T3=l([k("esri.portal.PortalUser")],nn);const vk=nn;var ds;let j_;const aF={PortalGroup:()=>Promise.resolve({default:S3}),PortalItem:()=>pe(()=>Promise.resolve().then(()=>p9),void 0),PortalUser:()=>Promise.resolve({default:vk})};let Te=ds=class extends kg(ho){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Bt.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){lF.unregister(this),this.defaultBasemap=cn(this.defaultBasemap),this.defaultDevBasemap=cn(this.defaultDevBasemap),this.defaultVectorBasemap=cn(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=wn(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Bt.request.trustedServers.includes(t)||Bt.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var n;const e=(n=this.user)==null?void 0:n.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get hasAPIKey(){return AU(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.slice(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=vk.fromJSON(e),t.portal=this),t}load(e){const t=pe(()=>Promise.resolve().then(()=>kne),void 0).then(({default:n})=>{xn(e),j_=n}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(n=>{var r;if(!this.hasAPIKey&&St){const i=St;this.credential=i.findCredential(this.restUrl),this.credential||this.authMode!==ds.AUTH_MODE_AUTO&&this.authMode!==ds.AUTH_MODE_NO_PROMPT||((r=this._esriIdCredentialCreateHandle)==null||r.remove(),this._esriIdCredentialCreateHandle=i.on("credential-create",ine(new WeakRef(this))),lF.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=n,this.read(n)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await pe(async()=>{const{default:n}=await import("./ElevationLayer-BQHkXF2P.js");return{default:n}},__vite__mapDeps([4,5,6,7,8]))).default;return e?e.map(n=>new t({id:n.id,url:n.url})):[]}async fetchBasemaps(e,t){const n=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const r=await this._fetchBasemaps3D(e,t);n.unshift(...r)}return n}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const t=new ta;t.query=this.default3DBasemapQuery,t.disableExtraQuery=!0;const n=(await this.queryItems(t,e)).results.find(r=>r.type==="Web Scene");return n?new j_({portalItem:n}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):la(e)?Promise.reject(rn()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,n=new ta({num:100,sortField:"title"});if(t!=null&&t.length){const r=[];for(const i of t)r.push(`(title:"${i.title}" AND owner:${i.owner})`);return n.query=r.join(" OR "),this.queryGroups(n,e).then(i=>i.results)}return la(e)?Promise.reject(rn()):Promise.resolve([])}fetchRegions(e){var n;const t=((n=this.user)==null?void 0:n.culture)||this.culture||Zi();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var n;const t=((n=this.user)==null?void 0:n.culture)||this.culture||Zi();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return ene(()=>new ds)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,n){const r=this.restUrl+"/portals/self",i={authMode:e,query:{culture:Zi().toLowerCase()},withCredentials:!0,...n};return i.authMode==="auto"&&(i.authMode="no-prompt"),t&&(i.query.default=!0),this.request(r,i)}queryPortal(e,t,n,r){const i=jn(ta,t),s=o=>this.request(this.restUrl+e,{...i.toRequestOptions(this),...r}).then(a=>{const h=i.clone();return h.start=a.nextStart,new nne({nextQueryParams:h,queryParams:i,total:a.total,results:ds._resultsToTypedArray(o,{portal:this},a,r)})}).then(a=>Promise.all(a.results.map(h=>typeof h.when=="function"?h.when():a)).then(()=>a,h=>(rl(h),a)));return n&&aF[n]?aF[n]().then(({default:o})=>(xn(r),s(o))):s()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new Y("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===ds.AUTH_MODE_ANONYMOUS||this.authMode===ds.AUTH_MODE_NO_PROMPT&&!St)return Promise.reject(new Y("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(n=>{n&&(this.sourceJSON=n,this.read(n))});return St?St.getCredential(this.restUrl,{prompt:this.authMode!==ds.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){var n;const t=(n=this.credential)==null?void 0:n.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,n){return this.request(e,t).then(r=>{const i=ds._resultsToTypedArray(n,{portal:this},r);return Promise.all(i.map(s=>typeof s.when=="function"?s.when():r)).then(()=>i,()=>i)})}request(e,t={}){const n={f:"json",...t.query},{authMode:r=this.authMode===ds.AUTH_MODE_ANONYMOUS||this.authMode===ds.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:i=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:h}=t,f={authMode:r,body:i,cacheBust:s,method:o,query:n,responseType:a,timeout:0,signal:h};return t.withCredentials&&(f.withCredentials=!0),Lt(this._normalizeSSL(e),f).then(_=>_.data)}toJSON(){throw new Y("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new ds({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new Y("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const n=new ta;n.query=e||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),n.disableExtraQuery=!0;const r=await this.queryGroups(n,t);if(!r.total)return[];const i=r.results[0];n.num=100,n.query='type:"Web Map" -type:"Web Application"',n.sortField=i.sortField||"name",n.sortOrder=i.sortOrder||"desc";const s=await i.queryItems(n,t);return s.total?s.results.filter(o=>o.type==="Web Map").map(o=>new j_({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const n=e||this.basemapGalleryGroupQuery3D;if(!n)return[];const r=new ta({query:n,disableExtraQuery:!0}),i=await this.queryGroups(r,t);if(!i.total)return[];const s=i.results[0];r.num=100,r.query='type:"Web Scene"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(r,t);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new j_({portalItem:a})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=j_.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,n,r){let i;if(n){const s=r!=null?r.signal:null;i=n.listings||n.notifications||n.userInvitations||n.tags||n.items||n.groups||n.comments||n.provisions||n.results||n.relatedItems||n,(e||t)&&(i=i.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(s),a}))}else i=[];return i}};Te.AUTH_MODE_ANONYMOUS="anonymous",Te.AUTH_MODE_AUTO="auto",Te.AUTH_MODE_IMMEDIATE="immediate",Te.AUTH_MODE_NO_PROMPT="no-prompt",l([p()],Te.prototype,"access",void 0),l([p()],Te.prototype,"allSSL",void 0),l([p()],Te.prototype,"authMode",void 0),l([p()],Te.prototype,"authorizedCrossOriginDomains",void 0),l([de("authorizedCrossOriginDomains")],Te.prototype,"readAuthorizedCrossOriginDomains",null),l([p()],Te.prototype,"basemapGalleryGroupQuery",void 0),l([p({json:{name:"3DBasemapGalleryGroupQuery"}})],Te.prototype,"basemapGalleryGroupQuery3D",void 0),l([p()],Te.prototype,"bingKey",void 0),l([p()],Te.prototype,"canListApps",void 0),l([p()],Te.prototype,"canListData",void 0),l([p()],Te.prototype,"canListPreProvisionedItems",void 0),l([p()],Te.prototype,"canProvisionDirectPurchase",void 0),l([p()],Te.prototype,"canSearchPublic",void 0),l([p()],Te.prototype,"canShareBingPublic",void 0),l([p()],Te.prototype,"canSharePublic",void 0),l([p()],Te.prototype,"canSignInArcGIS",void 0),l([p()],Te.prototype,"canSignInIDP",void 0),l([p()],Te.prototype,"colorSetsGroupQuery",void 0),l([p()],Te.prototype,"commentsEnabled",void 0),l([p({type:Date})],Te.prototype,"created",void 0),l([p()],Te.prototype,"credential",void 0),l([p()],Te.prototype,"culture",void 0),l([p()],Te.prototype,"currentVersion",void 0),l([p()],Te.prototype,"customBaseUrl",void 0),l([p()],Te.prototype,"default3DBasemapQuery",void 0),l([p()],Te.prototype,"defaultBasemap",void 0),l([de("defaultBasemap")],Te.prototype,"readDefaultBasemap",null),l([p()],Te.prototype,"defaultDevBasemap",void 0),l([de("defaultDevBasemap")],Te.prototype,"readDefaultDevBasemap",null),l([p({type:Xt})],Te.prototype,"defaultExtent",void 0),l([p()],Te.prototype,"defaultVectorBasemap",void 0),l([de("defaultVectorBasemap")],Te.prototype,"readDefaultVectorBasemap",null),l([p()],Te.prototype,"description",void 0),l([p()],Te.prototype,"devBasemapGalleryGroupQuery",void 0),l([p()],Te.prototype,"eueiEnabled",void 0),l([p({readOnly:!0})],Te.prototype,"extraQuery",null),l([p()],Te.prototype,"featuredGroups",void 0),l([p()],Te.prototype,"featuredItemsGroupQuery",void 0),l([p()],Te.prototype,"galleryTemplatesGroupQuery",void 0),l([p()],Te.prototype,"layoutGroupQuery",void 0),l([p()],Te.prototype,"livingAtlasGroupQuery",void 0),l([p({readOnly:!0})],Te.prototype,"hasAPIKey",null),l([p()],Te.prototype,"hasCategorySchema",void 0),l([p()],Te.prototype,"hasClassificationSchema",void 0),l([p()],Te.prototype,"helpBase",void 0),l([p()],Te.prototype,"helperServices",void 0),l([p()],Te.prototype,"helpMap",void 0),l([p()],Te.prototype,"homePageFeaturedContent",void 0),l([p()],Te.prototype,"homePageFeaturedContentCount",void 0),l([p()],Te.prototype,"httpPort",void 0),l([p()],Te.prototype,"httpsPort",void 0),l([p()],Te.prototype,"id",void 0),l([p()],Te.prototype,"ipCntryCode",void 0),l([p({readOnly:!0})],Te.prototype,"isOrganization",null),l([p()],Te.prototype,"isPortal",void 0),l([p()],Te.prototype,"isReadOnly",void 0),l([p({readOnly:!0})],Te.prototype,"itemPageUrl",null),l([p()],Te.prototype,"layerTemplatesGroupQuery",void 0),l([p()],Te.prototype,"maxTokenExpirationMinutes",void 0),l([p({type:Date})],Te.prototype,"modified",void 0),l([p()],Te.prototype,"name",void 0),l([p()],Te.prototype,"portalHostname",void 0),l([p()],Te.prototype,"portalMode",void 0),l([p()],Te.prototype,"portalProperties",void 0),l([p()],Te.prototype,"region",void 0),l([p()],Te.prototype,"recycleBinEnabled",void 0),l([p({readOnly:!0})],Te.prototype,"restUrl",null),l([p()],Te.prototype,"rotatorPanels",void 0),l([p()],Te.prototype,"showHomePageDescription",void 0),l([p()],Te.prototype,"sourceJSON",void 0),l([p()],Te.prototype,"staticImagesUrl",void 0),l([p({json:{name:"2DStylesGroupQuery"}})],Te.prototype,"stylesGroupQuery2d",void 0),l([p({json:{name:"stylesGroupQuery"}})],Te.prototype,"stylesGroupQuery3d",void 0),l([p()],Te.prototype,"supportsHostedServices",void 0),l([p()],Te.prototype,"symbolSetsGroupQuery",void 0),l([p()],Te.prototype,"templatesGroupQuery",void 0),l([p()],Te.prototype,"thumbnail",void 0),l([p({readOnly:!0})],Te.prototype,"thumbnailUrl",null),l([p()],Te.prototype,"units",void 0),l([p()],Te.prototype,"url",void 0),l([p()],Te.prototype,"urlKey",void 0),l([de("urlKey")],Te.prototype,"readUrlKey",null),l([p()],Te.prototype,"user",void 0),l([de("user")],Te.prototype,"readUser",null),l([p()],Te.prototype,"use3dBasemaps",void 0),l([p()],Te.prototype,"useDefault3dBasemap",void 0),l([p()],Te.prototype,"useStandardizedQuery",void 0),l([p()],Te.prototype,"useVectorBasemaps",void 0),l([p()],Te.prototype,"vectorBasemapGalleryGroupQuery",void 0),Te=ds=l([k("esri.portal.Portal")],Te);const oi=Te,lF=new FinalizationRegistry(e=>{e.remove()});function ine(e){const t=St;return()=>{const n=e.deref();n&&t.findCredential(n.restUrl)&&n.signIn().catch(()=>{})}}let Kl=class extends Fe{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:uF(t.path,t.portalItem)}:t}set path(t){t!=null&&Ss(t)?fe.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return uF(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",n){const r=this.cdnUrl;if(r==null)throw new Y("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:t,query:{token:this.portalItem.apiKey,_ts:n!=null&&n.cacheBust?Date.now():null},signal:n==null?void 0:n.signal})}async update(t,n){const{addOrUpdateResources:r}=await pe(()=>import("./resourceUtils-C3dQOEyf.js"),[]);return await r(this.portalItem,[{resource:this,content:t,compress:n==null?void 0:n.compress,access:n==null?void 0:n.access}],"update",n),this}hasPath(){return this.path!=null}};function uF(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&Ss(e)&&(e=ik(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}l([p()],Kl.prototype,"portalItem",void 0),l([p({type:String,value:null})],Kl.prototype,"path",null),l([kt("path")],Kl.prototype,"_castPath",null),l([p({type:String,readOnly:!0})],Kl.prototype,"url",null),l([p({type:String,readOnly:!0})],Kl.prototype,"cdnUrl",null),l([p({type:String,readOnly:!0})],Kl.prototype,"itemRelativeUrl",null),Kl=l([k("esri.portal.PortalItemResource")],Kl);const sne=Kl;let dw=class extends Fe{constructor(t){super(t),this.created=null,this.rating=null}};l([p()],dw.prototype,"created",void 0),l([p()],dw.prototype,"rating",void 0),dw=l([k("esri.portal.PortalRating")],dw);const mM=dw;function Lg(e,t){var r;const n=(r=t==null?void 0:t.url)==null?void 0:r.path;if(e&&n&&(e=qi(e,n,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const i=ik(e,t.portalItem.itemUrl);i!=null&&one.test(i)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(i).path)}return(e=x3(e,t==null?void 0:t.portal))&&Ax.test(e)?Sk(e):e}function L0(e,t,n=e0.YES){var i,s;if((e=e&&Ax.test(e)?h9(e):e)==null)return e;!Ss(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let r=qi(e);if(t){const o=((i=t.verifyItemRelativeUrls)==null?void 0:i.rootPath)||((s=t.url)==null?void 0:s.path);if(o){const a=x3(o,t.portal),h=x3(r,t.portal);r=ik(h,a,a),r!=null&&r!==h&&r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=d9(r,t==null?void 0:t.portal),Ss(r)&&(r=sa(r)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!Ss(r)&&!Fu(r)&&n===e0.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),r}function bk(e,t,n){return Lg(e,n)}function pf(e,t,n,r){const i=L0(e,r);i!==void 0&&(t[n]=i)}const Ax=/\/items\/([^/]+)\/resources\/(.*)/,one=/^\.\/resources\//;function ane(e){const t=(e==null?void 0:e.match(Ax))??null;return(t==null?void 0:t[1])??null}function lne(e){const t=(e==null?void 0:e.match(Ax))??null;if(t==null)return null;const n=t[2],r=n.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=BD(n);return{prefix:null,filename:o,extension:a}}const{path:i,extension:s}=BD(n.slice(r+1));return{prefix:n.slice(0,r),filename:i,extension:s}}function d9(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?i3(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function x3(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const n=`${t.urlKey}.${t.customBaseUrl}`,r=ek();return fg(r,`${r.scheme}://${n}`)?i3(e,t.portalHostname,n):i3(e,n,t.portalHostname)}function Sk(e){if(!e)return e||null;let t=e;return t&&St&&!St.findCredential(t)&&(t=yU(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function h9(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&St&&!St.findCredential(t)&&(t=yU(t)),t}var e0;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(e0||(e0={}));const sIe=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return e0},ensureMainOnlineDomain:d9,fromCDNUrl:h9,fromJSON:Lg,itemIdFromResourceUrl:ane,prefixAndFilenameFromResourceUrl:lne,read:bk,toCDNUrl:Sk,toJSON:L0,write:pf},Symbol.toStringTag,{value:"Module"}));var Xh;const une=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),cne=new Set(["KML","GeoJson","CSV"]);let mt=Xh=class extends kg(ho){static from(e){return bx(Xh,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let n=e;return e==="Feature Service"||e==="Feature Collection"?n=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?n=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?n="Scene Layer":e==="Video Service"?n="Video Layer":e==="Scene Package"?n="Scene Layer Package":e==="Stream Service"?n="Feature Layer":e==="Geoprocessing Service"?n=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?n="GeoEnrichment Service":e==="Geocoding Service"?n="Locator":e==="Microsoft Powerpoint"?n="Microsoft PowerPoint":e==="GeoJson"?n="GeoJSON":e==="Globe Service"?n="Globe Layer":e==="Vector Tile Service"?n="Tile Layer":e==="netCDF"?n="NetCDF":e==="Map Service"?n=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e!=null&&e.toLowerCase().includes("add in")?n=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?n="Big Data File Share":e==="Compact Tile Package"?n="Tile Package (tpkx)":e==="Raster function template"?n="Raster Function Template":e==="OGCFeatureServer"?n="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?n="Instant App":e==="Insights Page"?n="Insights Report":e==="Excalibur Imagery Project"?n="Excalibur Project":e==="3DTiles Service"?n="3D tiles layer":e==="3DTiles Package"&&(n="3D tiles package"),n}readExtent(e){return e&&e.length?new Xt(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var T;const e=((T=this.type)==null?void 0:T.toLowerCase())||"",t=this.typeKeywords||[],n="esri/images/portal/",r="16";let i,s=!1,o=!1,a=!1,h=!1,f=!1,_=!1,w=!1,b=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(s=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),h=t.includes("Markup"),f=t.includes("Spatiotemporal"),_=t.includes("UtilityNetwork"),i=f&&o?"spatiotemporaltable":o?"table":a?"routelayer":h?"markup":f?"spatiotemporal":_?"utilitynetwork":s?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(f=t.includes("Spatiotemporal"),w=t.includes("Relational"),i=f||w?"mapimages":s||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):i=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?i="maps":e==="web scene"?i=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?i="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?i="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?i="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?i="datafiles":e==="360 vr experience"?i="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?i="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?i="addindesktop":e==="pdf"?i="pdf":e==="microsoft word"?i="word":e==="microsoft excel"?i="excel":e==="microsoft powerpoint"?i="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?i="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?i="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?i="layersgray":e==="analysis model"?i="analysismodel":e==="scene package"?i="scenepackage":e==="3dtiles package"?i="3dtileslayerpackage":e==="3dtiles service"?i="3dtileslayer":e==="mobile scene package"?i="mobilescenepackage":e==="tile package"||e==="compact tile package"?i="tilepackage":e==="task file"?i="taskfile":e==="report template"?i="report-template":e==="statistical data collection"?i="statisticaldatacollection":e==="insights workbook"?i="workbook":e==="insights model"?i="insightsmodel":e==="insights page"?i="insightspage":e==="insights theme"?i="insightstheme":e==="hub initiative"?i="hubinitiative":e==="hub page"?i="hubpage":e==="hub site application"?i="hubsite":e==="hub event"?i="hubevent":e==="hub project"?i="hubproject":e==="relational database connection"?i="relationaldatabaseconnection":e==="big data file share"?i="datastorecollection":e==="image collection"?i="imagecollection":e==="desktop style"?i="desktopstyle":e==="style"?i=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?i="dashboard":e==="raster function template"?i="rasterprocessingtemplate":e==="vector tile package"?i="vectortilepackage":e==="ortho mapping project"?i="orthomappingproject":e==="ortho mapping template"?i="orthomappingtemplate":e==="solution"?i="solutions":e==="geopackage"?i="geopackage":e==="deep learning package"?i="deeplearningpackage":e==="real time analytic"?i="realtimeanalytics":e==="reality mapping project"?i="realitymappingproject":e==="big data analytic"?i="bigdataanalytics":e==="feed"?i="feed":e==="excalibur imagery project"?i="excaliburimageryproject":e==="notebook"?i="notebook":e==="storymap"?i="storymap":e==="survey123 add in"?i="survey123addin":e==="mission"?i="mission":e==="mission report"?i="missionreport":e==="mission template"?i="missiontemplate":e==="quickcapture project"?i="quickcaptureproject":e==="pro report"?i="proreport":e==="pro report template"?i="proreporttemplate":e==="urban model"?i="urbanmodel":e==="urban project"?i="urbanproject":e==="web experience"?i="experiencebuilder":e==="web experience template"?i="webexperiencetemplate":e==="experience builder widget"?i="experiencebuilderwidget":e==="experience builder widget package"?i="experiencebuilderwidgetpackage":e==="workflow"?i="workflow":e==="kernel gateway connection"?i="kernelgatewayconnection":e==="insights script"?i="insightsscript":e==="hub initiative template"?i="hubinitiativetemplate":e==="storymap theme"?i="storymaptheme":e==="knowledge graph"?i="knowledgegraph":e==="knowledge graph layer"?i="knowledgegraphlayer":e==="knowledge studio project"?i="knowledgestudio":e==="native application"?i="nativeapp":e==="native application installer"?i="nativeappinstaller":e==="web link chart"?i="linkchart":e==="knowledge graph web investigation"?i="investigation":e==="ogcfeatureserver"?i="features":e==="pro presentation"?i="propresentation":e==="pro project"?i="proproject":e==="insights workbook package"?i="insightsworkbookpackage":e==="apache parquet"?i="apacheparquet":e==="notebook code snippet library"?i="notebookcodesnippets":e==="suitability model"?i="suitabilitymodel":e==="esri classifier definition"?i="classifierdefinition":e==="esri classification schema"?i="classificationschema":e==="insights data engineering workbook"?i="dataengineeringworkbook":e==="insights data engineering model"?i="dataengineeringmodel":e==="deep learning studio project"?i="deeplearningproject":e==="discussion"?i="discussion":e==="allsource project"?i="allsourceproject":e==="api key"?i="apikey":e==="data pipeline"?i="datapipelines":e==="group layer"?(b=t.includes("Map"),i=b?"layergroup2d":"layergroup"):i=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",i?Gt(n+i+r+".png"):null}get isLayer(){return this.type!=null&&une.has(this.type)}get itemCdnUrl(){return Sk(this.itemUrl)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var n;const e=this.itemUrl,t=this.thumbnail;return e&&t?((n=this.portal)==null?void 0:n.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var n,r,i;const e=(n=this.portal)==null?void 0:n.restUrl;if(!e)return null;const t=this.owner||((i=(r=this.portal)==null?void 0:r.user)==null?void 0:i.username);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=oi.getDefault()),n=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(n),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof mM&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new mM({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:q(this.applicationProxies),avgRating:this.avgRating,categories:q(this.categories),classification:q(this.classification),created:q(this.created),culture:this.culture,description:this.description,extent:q(this.extent),groupCategories:q(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:q(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:q(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:q(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:q(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new Xh({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var t;const e=this.toJSON();for(const n of["tags","typeKeywords","categories"])e[n]=(t=e[n])==null?void 0:t.join(", ");for(const n of["extent","classification"]){const r=e[n];r&&(e[n]=JSON.stringify(r))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new mM(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Xh)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e==null?void 0:e.data,n={method:"post"};n.query=this.createPostQuery();for(const r in n.query)n.query[r]===null&&(n.query[r]="");return n.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?n.query.text=t:typeof t=="object"&&(n.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,n).then(()=>this.reload())}):Promise.reject(new Y("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new Y("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:n}=this;await t.signIn();const{copyResources:r,folder:i,tags:s,title:o}=e||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof i=="string"?i:i==null?void 0:i.id,includeResources:!!r,tags:s==null?void 0:s.join(","),title:o}},{itemId:h}=await t.request(`${n}/copy`,a);return new Xh({id:h,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,n=e.filename,r={method:"post"};if(typeof t=="string")Fu(t)?r.query={data:t}:r.query={url:qi(t)},n!=null&&(r.query.filename=n);else{const i=new FormData;n!=null?i.append("file",t,n):i.append("file",t),r.body=i}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new Y("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:n}=await pe(()=>import("./resourceUtils-C3dQOEyf.js"),[]);return n(this,e,t)}async addResource(e,t,n){const{addOrUpdateResources:r}=await pe(()=>import("./resourceUtils-C3dQOEyf.js"),[]);return e.portalItem=this,await r(this,[{resource:e,content:t,compress:n==null?void 0:n.compress,access:n==null?void 0:n.access}],"add",n),e}async removeResource(e,t){const{removeResource:n}=await pe(()=>import("./resourceUtils-C3dQOEyf.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new Y("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return n(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await pe(()=>import("./resourceUtils-C3dQOEyf.js"),[]);return t(this,e)}resourceFromPath(e){return new sne({portalItem:this,path:e})}toJSON(){var n,r;const e=this.extent,t={accessInformation:this.accessInformation,categories:q(this.categories),classification:q(this.classification),created:(n=this.created)==null?void 0:n.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(r=this.modified)==null?void 0:r.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:q(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:q(this.typeKeywords),url:this.url};return jK(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Xh({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};l([p({type:["private","shared","org","public"]})],mt.prototype,"access",void 0),l([p()],mt.prototype,"accessInformation",void 0),l([p({type:String})],mt.prototype,"apiKey",void 0),l([p({json:{read:{source:"appProxies"}}})],mt.prototype,"applicationProxies",void 0),l([p()],mt.prototype,"avgRating",void 0),l([p()],mt.prototype,"categories",void 0),l([p()],mt.prototype,"classification",void 0),l([p({type:Date})],mt.prototype,"created",void 0),l([p()],mt.prototype,"culture",void 0),l([p()],mt.prototype,"description",void 0),l([p({readOnly:!0})],mt.prototype,"displayName",null),l([p({type:Xt})],mt.prototype,"extent",void 0),l([de("extent")],mt.prototype,"readExtent",null),l([p()],mt.prototype,"groupCategories",void 0),l([p({readOnly:!0})],mt.prototype,"iconUrl",null),l([p()],mt.prototype,"id",void 0),l([p({readOnly:!0})],mt.prototype,"isLayer",null),l([p({type:Boolean,readOnly:!0})],mt.prototype,"isOrgItem",void 0),l([p()],mt.prototype,"itemControl",void 0),l([p({readOnly:!0})],mt.prototype,"itemPageUrl",null),l([p({readOnly:!0})],mt.prototype,"itemUrl",null),l([p()],mt.prototype,"licenseInfo",void 0),l([p({type:Date})],mt.prototype,"modified",void 0),l([p()],mt.prototype,"name",void 0),l([p()],mt.prototype,"numComments",void 0),l([p()],mt.prototype,"numRatings",void 0),l([p()],mt.prototype,"numViews",void 0),l([p()],mt.prototype,"owner",void 0),l([p()],mt.prototype,"ownerFolder",void 0),l([p({type:oi})],mt.prototype,"portal",void 0),l([p()],mt.prototype,"screenshots",void 0),l([p()],mt.prototype,"size",void 0),l([p()],mt.prototype,"snippet",void 0),l([p()],mt.prototype,"sourceJSON",void 0),l([p({type:String})],mt.prototype,"sourceUrl",void 0),l([p({type:String})],mt.prototype,"spatialReference",void 0),l([p()],mt.prototype,"tags",void 0),l([p()],mt.prototype,"thumbnail",void 0),l([p({readOnly:!0})],mt.prototype,"thumbnailUrl",null),l([p()],mt.prototype,"title",void 0),l([p()],mt.prototype,"type",void 0),l([p()],mt.prototype,"typeKeywords",void 0),l([p({type:String,json:{read(e,t){var n;if(cne.has(t.type)){const r=(n=this.portal)==null?void 0:n.restUrl;e||(e=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return e}}})],mt.prototype,"url",void 0),l([p({readOnly:!0})],mt.prototype,"userItemUrl",null),mt=Xh=l([k("esri.portal.PortalItem")],mt);const ll=mt,p9=Object.freeze(Object.defineProperty({__proto__:null,default:ll},Symbol.toStringTag,{value:"Module"})),cF=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,dne={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function dF(e){return e in dne}const hw=[],Ky=new Map;function hF(e){for(const t of Ky.keys())m9(e.pattern,t)&&Ky.delete(t)}function hne(e){return hw.includes(e)||(hF(e),hw.unshift(e)),Ft(()=>{const t=hw.indexOf(e);t>-1&&(hw.splice(t,1),hF(e))})}async function f9(e){const t=Zi();Ky.has(e)||Ky.set(e,fne(e,t));const n=Ky.get(e);return n&&await mne.add(n),n}function pne(e){if(!cF.test(e))return null;const t=cF.exec(e);if(t===null)return null;const[,n,r]=t,i=n+(r?"-"+r.toUpperCase():"");return dF(i)?i:dF(n)?n:null}async function fne(e,t){const n=[];for(const r of hw)if(m9(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(i){n.push(i)}throw n.length?new Y("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:n}):new Y("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function m9(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}wk(()=>{Ky.clear()});const mne=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=xs())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function yne(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,n=await f9("esri/t9n/basemaps");return n[e]||n[t]}const E3={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Gt("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Gt("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Gt("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Gt("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Gt("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Gt("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Gt("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Gt("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Gt("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Gt("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Gt("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Gt("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Gt("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Gt("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Gt("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Gt("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Gt("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return Gt("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Gt("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Gt("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Gt("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Gt("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Gt("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Gt("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Gt("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Gt("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Gt("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},gne=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let Xl=class extends Fe{constructor(t){super(t),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps",this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;const t=Zi().toLowerCase();switch(t){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const n=Qte(t);return n==="pt"?"pt-BR":n&&gne.has(n)?n:"global"}};l([p()],Xl.prototype,"apiKey",void 0),l([p()],Xl.prototype,"id",void 0),l([p()],Xl.prototype,"language",void 0),l([p()],Xl.prototype,"places",void 0),l([p()],Xl.prototype,"serviceUrl",void 0),l([p()],Xl.prototype,"worldview",void 0),Xl=l([k("esri.support.BasemapStyle")],Xl);const _ne=Xl;function wne(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function Qh(e){return(e==null?void 0:e.type)==="subtype-sublayer"}const aIe={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function $3(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function kx(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function lIe(e){var n;const t=e==null?void 0:e.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&((n=e.source)==null?void 0:n.type)==="feature-layer"}async function y9(e,t){const n=St==null?void 0:St.findServerInfo(e);if((n==null?void 0:n.currentVersion)!=null)return n.owningSystemUrl||null;const r=e.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const i=`${e.slice(0,r)}/rest/info`,s=t!=null?t.signal:null,{data:o}=await Lt(i,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function vne(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function bne(e){return vne(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function Sne(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function Tne(e){return!!Sne(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const xne=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),Ene=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function $ne(e){return e.layerContainerType==="basemap"?xne:e.layerContainerType==="operational-layers"?Ene:null}function Mne(e,t){if(t.restrictedWebMapWriting){const n=$ne(t);return n==null||n.has(e.type)&&!kx(e)}return!0}function Ine(e,t){var n;if(t)if(kx(e)){const r=fx("featureCollection.layers",t),i=(n=r==null?void 0:r[0])==null?void 0:n.layerDefinition;i&&pF(e,i)}else e.type!=="group"&&pF(e,t)}function pF(e,t){"maxScale"in e&&(t.maxScale=aT(e.maxScale)??void 0),"minScale"in e&&(t.minScale=aT(e.minScale)??void 0)}function Pne(e,t){if(Ine(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=aT(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(kx(e)){const n=t.featureCollection;n&&(n.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function M3(e,t,n){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return n!=null&&n.messages&&n.messages.push(new Y("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(kx(e)&&!e.isTable)t=e.resourceInfo;else if(Mne(e,n)){const r={};return e.write(r,n)?r:null}return t!=null&&Pne(e,t=q(t)),t}var pw;let Cne=0,hs=pw=class extends kg(ho){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Cne++,this.baseLayers=new Ae,this.referenceLayers=new Ae;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&fe.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},n=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>n(r.item)),this.referenceLayers.on("after-remove",r=>n(r.item))])}initialize(){this.when().catch(e=>{fe.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const n of e)n.destroy();const t=this.referenceLayers.toArray();for(const n of t)n.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=cn(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Fd(e,this._get("baseLayers")))}_writeBaseLayers(e,t,n){const r=[];e&&(n={...n,layerContainerType:"basemap"},this.baseLayers.forEach(i=>{const s=M3(i,n.webmap?n.webmap.getLayerJSONFromResourceInfo(i):null,n);s!=null&&r.push(s)}),this.referenceLayers.forEach(i=>{const s=M3(i,n.webmap?n.webmap.getLayerJSONFromResourceInfo(i):null,n);s!=null&&(i.type!=="scene"&&(s.isReference=!0),r.push(s))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",Fd(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return $x(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>H2(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>H2(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new pw({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){var n;return e=e||{},t!=null&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&((n=this.resourceInfo)!=null&&n.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const i=q(r);return i.url&&cl(i.url)&&(i.url=`https:${i.url}`),i.templateUrl&&cl(i.templateUrl)&&(i.templateUrl=`https:${i.templateUrl}`),i})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:n,style:r}=this;xn(e);const i=[];if(t){const s=t.context?t.context.url:null;if(i.push(this._loadLayersFromJSON(t.data,s,e)),t.data.id&&!t.data.title){const o=t.data.id;i.push(yne(o).then(a=>{a&&this.read({title:a},t.context)}))}}else n?i.push(this._loadFromItem(n,e)):r&&i.push(this._loadFromStylesService(r,e));await Promise.all(i)}async _loadLayersFromJSON(e,t,n){var h,f;const r=(h=this.resourceInfo)==null?void 0:h.context,i=((f=this.portalItem)==null?void 0:f.portal)||(r==null?void 0:r.portal)||null,s=Ane[(r==null?void 0:r.origin)||""]??"web-map",{populateOperationalLayers:o}=await pe(async()=>{const{populateOperationalLayers:_}=await import("./layersCreator-BXto2E8l.js");return{populateOperationalLayers:_}},__vite__mapDeps([9,10,11,12])),a=[];if(xn(n),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const _={context:{...r,origin:s,url:t,portal:i,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},w=M=>s==="web-scene"&&M.layerType==="ArcGISSceneServiceLayer"||M.isReference,b=o(this.baseLayers,e.baseMapLayers.filter(M=>!w(M)),_);a.push(b);const T=o(this.referenceLayers,e.baseMapLayers.filter(w),_);a.push(T)}await Promise.allSettled(a)}async _loadFromItem(e,t){const n=await e.load(t),r=await n.fetchData("json",t),i=cr(e.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:One[e.type||""]??"web-map",portal:e.portal||oi.getDefault(),url:i}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||oi.getDefault(),url:i}),this._loadLayersFromJSON(this.resourceInfo.data,i,t)}async _loadFromStylesService(e,t){const n=`${e.serviceUrl}/${e.id}`,r=(await Lt(n,{query:{language:e.getLanguageParamValue(),places:e.places,worldview:e.worldview,token:e.apiKey},signal:t==null?void 0:t.signal})).data,i=cr(n);if(this._set("resourceInfo",{data:r.baseMap??{},context:{origin:"web-map",url:i}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,i,t),e.apiKey)for(const s of[...this.baseLayers,...this.referenceLayers])"apiKey"in s&&(s.apiKey=e.apiKey)}static fromId(e){const t=E3[e];return t?t.itemId?new pw({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):pw.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};l([p({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,n,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Ae}},writer(e,t,n,r){this._writeBaseLayers(e,t,r)}}}}}})],hs.prototype,"baseLayers",null),l([p({type:String,json:{origins:{"web-scene":{write:!0}}}})],hs.prototype,"id",void 0),l([p({type:ll})],hs.prototype,"portalItem",void 0),l([p()],hs.prototype,"referenceLayers",null),l([p({readOnly:!0})],hs.prototype,"resourceInfo",void 0),l([p({type:dt})],hs.prototype,"spatialReference",void 0),l([p({type:_ne})],hs.prototype,"style",void 0),l([p()],hs.prototype,"thumbnailUrl",void 0),l([p({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],hs.prototype,"title",void 0),l([ge("title")],hs.prototype,"writeTitle",null),hs=pw=l([k("esri.Basemap")],hs);const One={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Ane={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},Ev=hs,kne=Object.freeze(Object.defineProperty({__proto__:null,default:Ev},Symbol.toStringTag,{value:"Module"})),ST={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function g9(e){return!!ST[e]||!!ST[e.toLowerCase()]}function Tk(e){return ST[e]??ST[e.toLowerCase()]}function Rne(e){return[...Tk(e)]}function yM(e,t,n){n<0&&++n,n>1&&--n;const r=6*n;return r<1?e+(t-e)*r:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function _9(e,t,n,r=1){const i=(e%360+360)%360/360,s=n<=.5?n*(t+1):n+t-n*t,o=2*n-s;return[Math.round(255*yM(o,s,i+1/3)),Math.round(255*yM(o,s,i)),Math.round(255*yM(o,s,i-1/3)),r]}function Lne(e){const t=e.length>5,n=t?8:4,r=(1<<n)-1,i=t?1:17,s=t?e.length===9:e.length===5;let o=+("0x"+e.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let h;return s&&(h=o&r,o>>=n,a[3]=i*h/255),h=o&r,o>>=n,a[2]=i*h,h=o&r,o>>=n,a[1]=i*h,h=o&r,o>>=n,a[0]=i*h,a}const fF=new Float32Array(1);function uIe(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function po(e,t,n){return Math.min(Math.max(e,t),n)}function cIe(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function fw(e,t,n){return e+(t-e)*n}function dIe(e,t,n,r,i){return fw(r,i,(e-t)/(n-t))}function Rx(e){return e*Math.PI/180}function w9(e){return 180*e/Math.PI}function hIe(e){return Math.acos(po(e,-1,1))}function Nne(e){return Math.asin(po(e,-1,1))}function gM(e,t,n=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=n}const TT=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function I3(e){return TT.setFloat64(0,e),TT.getBigInt64(0)}function Dne(e){return TT.setBigInt64(0,e),TT.getFloat64(0)}const PS=BigInt("1000000"),Fne=v9(1);function v9(e){const t=I3(e=Math.abs(e)),n=Dne(t<=PS?PS:t-PS);return Math.abs(e-n)}function pIe(e,t,n=Fne){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(n!=null&&v9(Math.min(Math.abs(e),Math.abs(t)))<n)return Math.abs(e-t)<=n;const r=I3(e),i=I3(t);return r<0!=i<0?!1:!((r<i?i-r:r-i)>PS)}function fIe(e){return b9(Math.max(-mF,Math.min(e,mF)))}function b9(e){return fF[0]=e,fF[0]}function mIe(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(gM(t,1)&&gM(n,1)&&gM(r,1))}const mF=b9(34028234663852886e22);function yIe(e,t,n){if(n===void 0||+n==0)return Math[e](t);if(t=+t,n=+n,isNaN(t)||typeof n!="number"||n%1!=0)return NaN;let r=t.toString().split("e");return r=(t=Math[e](+(r[0]+"e"+(r[1]?+r[1]-n:-n)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+n:n))}function gb(e){return po(JA(e),0,255)}function _b(e,t,n){return e=Number(e),isNaN(e)?n:e<t?t:e>n?n:e}function wb(e,t){const n=e.toString(16).padStart(2,"0");return t?n.slice(0,1):n}let CS=class ir{static blendColors(t,n,r,i=new ir){return i.r=Math.round(t.r+(n.r-t.r)*r),i.g=Math.round(t.g+(n.g-t.g)*r),i.b=Math.round(t.b+(n.b-t.b)*r),i.a=t.a+(n.a-t.a)*r,i._sanitize()}static fromRgb(t,n){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(r){const i=r[2].split(/\s*,\s*/),s=r[1];if(s==="rgb"&&i.length===3||s==="rgba"&&i.length===4){const o=i[0];if(o.charAt(o.length-1)==="%"){const a=i.map(h=>2.56*parseFloat(h));return i.length===4&&(a[3]=parseFloat(i[3])),ir.fromArray(a,n)}return ir.fromArray(i.map(a=>parseFloat(a)),n)}if(s==="hsl"&&i.length===3||s==="hsla"&&i.length===4)return ir.fromArray(_9(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])),n)}return null}static fromHex(t,n=new ir){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const r=parseInt(t.slice(1,2),16),i=parseInt(t.slice(2,3),16),s=parseInt(t.slice(3,4),16),o=t.length===5?15:parseInt(t.slice(4),16);return ir.fromArray([r+16*r,i+16*i,s+16*s,(o+16*o)/255],n)}case 7:case 9:{const r=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),s=parseInt(t.slice(5,7),16),o=t.length===7?255:parseInt(t.slice(7),16);return ir.fromArray([r,i,s,o/255],n)}default:return null}}static fromArray(t,n=new ir){return n._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(n.a)&&(n.a=1),n._sanitize()}static fromString(t,n){const r=g9(t)?Tk(t):null;return r&&ir.fromArray(r,n)||ir.fromRgb(t,n)||ir.fromHex(t,n)}static fromJSON(t){return t!=null?new ir([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?ir.fromString(t,this):Array.isArray(t)?ir.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof ir||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const n=(t==null?void 0:t.capitalize)??!1,r=(t==null?void 0:t.digits)??6,i=r===3||r===4,s=r===4||r===8,o=`#${wb(this.r,i)}${wb(this.g,i)}${wb(this.b,i)}${s?wb(Math.round(255*this.a),i):""}`;return n?o.toUpperCase():o}toCss(t=!1){const n=this.r+", "+this.g+", "+this.b;return t?`rgba(${n}, ${this.a})`:`rgb(${n})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=ir.AlphaMode.ALWAYS){const n=gb(this.r),r=gb(this.g),i=gb(this.b);return t===ir.AlphaMode.ALWAYS||this.a!==1?[n,r,i,gb(255*this.a)]:[n,r,i]}clone(){return new ir(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(_b(this.r,0,255)),this.g=Math.round(_b(this.g,0,255)),this.b=Math.round(_b(this.b,0,255)),this.a=_b(this.a,0,1),this}_set(t,n,r,i){this.r=t,this.g=n,this.b=r,this.a=i}};CS.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(CS||(CS={}));const Ze=CS;function gIe(e){}function jne(e){return()=>e}function ke(e,t={}){const n=e instanceof pt?e:new pt(e,t),{alwaysWriteDefaults:r,default:i,ignoreUnknown:s=!0,name:o,nonNullable:a,readOnly:h=!1}=t;return p({type:s?n.apiValues:String,json:{type:n.jsonValues,default:i,name:o,read:!h&&{reader:n.read},write:{writer:n.write,alwaysWriteDefaults:r}},nonNullable:a,readOnly:h})}var P3;let OS=P3=class extends ne{constructor(e){super(e),this.type="none"}clone(){return new P3({type:this.type})}};l([ke({none:"none",stayAbove:"stay-above"})],OS.prototype,"type",void 0),OS=P3=l([k("esri.ground.NavigationConstraint")],OS);function Lx(e){const t=JA(100*(1-e));return Math.max(0,Math.min(t,100))}function t0(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var C3;let Ql=C3=class extends kg(ho){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Ae;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&fe.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},n=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>n(r.item))])}initialize(){this.when().catch(e=>{li(e)||fe.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)cn(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",Fd(e,this._get("layers")))}writeLayers(e,t,n,r){const i=[];e&&(r={...r,layerContainerType:"ground"},e.forEach(s=>{if("write"in s){const o={};jne(s)().write(o,r)&&i.push(o)}else r!=null&&r.messages&&r.messages.push(new Y("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),t.layers=i}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return $x(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:n}=await pe(()=>import("./ElevationQuery-CqoniJag.js"),[]);xn(t);const r=new n,i=this.layers.filter(yF).toArray();return r.queryAll(i,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:n}=await pe(()=>import("./ElevationQuery-CqoniJag.js"),[]);xn(t);const r=new n,i=this.layers.filter(yF).toArray();return r.createSamplerAll(i,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:q(this.surfaceColor),navigationConstraint:q(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new C3({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,n){const r=(t==null?void 0:t.origin)||"web-scene",i=(t==null?void 0:t.portal)||null,s=(t==null?void 0:t.url)||null,{populateOperationalLayers:o}=await pe(async()=>{const{populateOperationalLayers:h}=await import("./layersCreator-BXto2E8l.js");return{populateOperationalLayers:h}},__vite__mapDeps([9,10,11,12]));xn(n);const a=[];if(e.layers&&Array.isArray(e.layers)){const h={context:{origin:r,url:s,portal:i,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,h))}await Promise.allSettled(a)}};function zne(e){return e&&"createElevationSampler"in e}function yF(e){return e.type==="elevation"||zne(e)}l([p({json:{read:!1}})],Ql.prototype,"layers",null),l([ge("layers")],Ql.prototype,"writeLayers",null),l([p({readOnly:!0})],Ql.prototype,"resourceInfo",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Mt,read:{reader:t0,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Lx(e)},target:"transparency"}}})],Ql.prototype,"opacity",void 0),l([p({type:Ze,json:{type:[Mt],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Ql.prototype,"surfaceColor",void 0),l([p({type:OS,json:{write:!0}})],Ql.prototype,"navigationConstraint",void 0),Ql=C3=l([k("esri.Ground")],Ql);const xT=Ql;function ct(e,t,n={}){return xk(e,t,n,S9)}function hl(e,t,n={}){return xk(e,t,n,T9)}function xk(e,t,n={},r){let i=null;const s=n.once?(o,a)=>{r(o)&&(wn(i),t(o,a))}:(o,a)=>{r(o)&&t(o,a)};if(i=nQ(e,s,n.sync,n.equals),n.initial){const o=e();s(o,o)}return i}function ff(e,t,n,r={}){let i=null,s=null,o=null;function a(){var _;i&&s&&(s.remove(),(_=r.onListenerRemove)==null||_.call(r,i),i=null,s=null)}function h(_){r.once&&r.once&&wn(o),n(_)}const f=ct(e,(_,w)=>{var b;a(),gx(_)&&(i=_,s=M0(_,t,h),(b=r.onListenerAdd)==null||b.call(r,_))},{sync:r.sync,initial:!0});return o=Ft(()=>{f.remove(),a()}),o}function Nx(e,t){return Vne(e,T9,t)}function Vne(e,t,n){if(la(n))return Promise.reject(rn());const r=e();if(t!=null&&t(r))return Promise.resolve(r);let i=null;function s(){i=wn(i)}return new Promise((o,a)=>{i=x0([lo(n,()=>{s(),a(rn())}),xk(e,h=>{s(),o(h)},{sync:!1,once:!0},t??S9)])})}function S9(e){return!0}function T9(e){return!!e}const pl={sync:!0},si={initial:!0},ws={sync:!0,initial:!0};let Gm=class extends Ae{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(BV(()=>this._refresh(),pl))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let n=0;for(const r of t)r!=null&&(n=this._processCollection(n,r));this.splice(n,this.length)}_createNewInstance(t){return new Ae(t)}_processCollection(t,n){if(!n)return t;const r=this.itemFilterFunction??(i=>!!i);for(const i of n)if(i){if(r(i)){const s=this.indexOf(i,t);s>=0?s!==t&&this.reorder(i,t):this.add(i,t),++t}if(this.getChildrenFunction){const s=this.getChildrenFunction(i);if(Array.isArray(s))for(const o of s)t=this._processCollection(t,o);else t=this._processCollection(t,s)}}return t}};l([p()],Gm.prototype,"getCollections",void 0),l([p()],Gm.prototype,"getChildrenFunction",void 0),l([p()],Gm.prototype,"itemFilterFunction",void 0),Gm=l([k("esri.core.CollectionFlattener")],Gm);const n0=Gm,vb=new WeakMap;function x9(e){return!e.destroyed&&(vb.has(e)||e.addHandles([ct(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||x9(t))},t=>vb.set(e,t),ws),Ft(()=>vb.delete(e))]),vb.get(e))}function Une(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function Gne(e){var t,n;return!(!Une(e)||!((n=(t=bne(e))==null?void 0:t.operations)!=null&&n.supportsEditing)||"editingEnabled"in e&&!Tne(e)||x9(e))}const Bne=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,qne="screenUtils.toPt: input not recognized!",E9=96;function Hne(e){return e?e/72*E9:0}function fo(e){return e?72*e/E9:0}function At(e){if(typeof e=="string"){const t=e.match(Bne);if(t){const n=Number(t[1]),r=t[3]&&t[3].toLowerCase(),i=e.charAt(0)==="-",s=r==="px"?fo(n):n;return i?-s:s}return console.warn(qne),null}return e}function Er(e=0,t=0){return{x:e,y:t}}function wIe(e){return e?Er(e.x,e.y):null}function vIe(e=0,t=0){return[e,t]}function bIe(e=0,t=0,n=0){return[e,t,n]}function SIe(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function Dx(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Wne(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Zne(e,t,n,r,i,s,o,a,h,f,_,w,b,T,M,I){const C=new Float32Array(16);return C[0]=e,C[1]=t,C[2]=n,C[3]=r,C[4]=i,C[5]=s,C[6]=o,C[7]=a,C[8]=h,C[9]=f,C[10]=_,C[11]=w,C[12]=b,C[13]=T,C[14]=M,C[15]=I,C}function Jne(e,t){return new Float32Array(e,t,16)}const Yne=Dx();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Yne,clone:Wne,create:Dx,createView:Jne,fromValues:Zne},Symbol.toStringTag,{value:"Module"}));function Jd(){return[0,0,0]}function Ek(e){return[e[0],e[1],e[2]]}function Ng(e,t,n){return[e,t,n]}function Kne(e,t,n){return[e,t,n]}function Xne(e,t=Jd()){const n=Math.min(3,e.length);for(let r=0;r<n;++r)t[r]=e[r];return t}function Qne(e,t){return new Float64Array(e,t,3)}function $9(){return Jd()}function M9(){return Ng(1,1,1)}function I9(){return Ng(1,0,0)}function P9(){return Ng(0,1,0)}function C9(){return Ng(0,0,1)}const ere=$9(),tre=M9(),nre=I9(),rre=P9(),ire=C9();Object.freeze(Object.defineProperty({__proto__:null,ONES:tre,UNIT_X:nre,UNIT_Y:rre,UNIT_Z:ire,ZEROS:ere,clone:Ek,create:Jd,createView:Qne,freeze:Kne,fromArray:Xne,fromValues:Ng,ones:M9,unitX:I9,unitY:P9,unitZ:C9,zeros:$9},Symbol.toStringTag,{value:"Module"}));let $k=1e-6;function Si(){return $k}function sre(e){$k=e}const Fx=Math.random,ore=Math.PI/180,are=180/Math.PI;function Mk(e){return e*ore}function lre(e){return e*are}function ure(e,t){return Math.abs(e-t)<=$k*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:Fx,equals:ure,getEpsilon:Si,setEpsilon:sre,toDegree:lre,toRadian:Mk},Symbol.toStringTag,{value:"Module"}));function O9(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Yd(e,t,n,r,i,s,o,a,h,f,_,w,b,T,M,I,C){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=h,e[8]=f,e[9]=_,e[10]=w,e[11]=b,e[12]=T,e[13]=M,e[14]=I,e[15]=C,e}function jx(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Kd(e,t){if(e===t){const n=t[1],r=t[2],i=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function cre(e,t){return A9(e,t)||jx(e),e}function A9(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],h=t[6],f=t[7],_=t[8],w=t[9],b=t[10],T=t[11],M=t[12],I=t[13],C=t[14],N=t[15],j=n*a-r*o,z=n*h-i*o,U=n*f-s*o,K=r*h-i*a,J=r*f-s*a,le=i*f-s*h,ue=_*I-w*M,be=_*C-b*M,xe=_*N-T*M,_e=w*C-b*I,$e=w*N-T*I,je=b*N-T*C;let Me=j*je-z*$e+U*_e+K*xe-J*be+le*ue;return Me?(Me=1/Me,e[0]=(a*je-h*$e+f*_e)*Me,e[1]=(i*$e-r*je-s*_e)*Me,e[2]=(I*le-C*J+N*K)*Me,e[3]=(b*J-w*le-T*K)*Me,e[4]=(h*xe-o*je-f*be)*Me,e[5]=(n*je-i*xe+s*be)*Me,e[6]=(C*U-M*le-N*z)*Me,e[7]=(_*le-b*U+T*z)*Me,e[8]=(o*$e-a*xe+f*ue)*Me,e[9]=(r*xe-n*$e-s*ue)*Me,e[10]=(M*J-I*U+N*j)*Me,e[11]=(w*U-_*J-T*j)*Me,e[12]=(a*be-o*_e-h*ue)*Me,e[13]=(n*_e-r*be+i*ue)*Me,e[14]=(I*z-M*K-C*j)*Me,e[15]=(_*K-w*z+b*j)*Me,e):null}function dre(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],h=t[6],f=t[7],_=t[8],w=t[9],b=t[10],T=t[11],M=t[12],I=t[13],C=t[14],N=t[15];return e[0]=a*(b*N-T*C)-w*(h*N-f*C)+I*(h*T-f*b),e[1]=-(r*(b*N-T*C)-w*(i*N-s*C)+I*(i*T-s*b)),e[2]=r*(h*N-f*C)-a*(i*N-s*C)+I*(i*f-s*h),e[3]=-(r*(h*T-f*b)-a*(i*T-s*b)+w*(i*f-s*h)),e[4]=-(o*(b*N-T*C)-_*(h*N-f*C)+M*(h*T-f*b)),e[5]=n*(b*N-T*C)-_*(i*N-s*C)+M*(i*T-s*b),e[6]=-(n*(h*N-f*C)-o*(i*N-s*C)+M*(i*f-s*h)),e[7]=n*(h*T-f*b)-o*(i*T-s*b)+_*(i*f-s*h),e[8]=o*(w*N-T*I)-_*(a*N-f*I)+M*(a*T-f*w),e[9]=-(n*(w*N-T*I)-_*(r*N-s*I)+M*(r*T-s*w)),e[10]=n*(a*N-f*I)-o*(r*N-s*I)+M*(r*f-s*a),e[11]=-(n*(a*T-f*w)-o*(r*T-s*w)+_*(r*f-s*a)),e[12]=-(o*(w*C-b*I)-_*(a*C-h*I)+M*(a*b-h*w)),e[13]=n*(w*C-b*I)-_*(r*C-i*I)+M*(r*b-i*w),e[14]=-(n*(a*C-h*I)-o*(r*C-i*I)+M*(r*h-i*a)),e[15]=n*(a*b-h*w)-o*(r*b-i*w)+_*(r*h-i*a),e}function hre(e){const t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],h=e[7],f=e[8],_=e[9],w=e[10],b=e[11],T=e[12],M=e[13],I=e[14],C=e[15];return(t*o-n*s)*(w*C-b*I)-(t*a-r*s)*(_*C-b*M)+(t*h-i*s)*(_*I-w*M)+(n*a-r*o)*(f*C-b*T)-(n*h-i*o)*(f*I-w*T)+(r*h-i*a)*(f*M-_*T)}function k9(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],h=t[5],f=t[6],_=t[7],w=t[8],b=t[9],T=t[10],M=t[11],I=t[12],C=t[13],N=t[14],j=t[15];let z=n[0],U=n[1],K=n[2],J=n[3];return e[0]=z*r+U*a+K*w+J*I,e[1]=z*i+U*h+K*b+J*C,e[2]=z*s+U*f+K*T+J*N,e[3]=z*o+U*_+K*M+J*j,z=n[4],U=n[5],K=n[6],J=n[7],e[4]=z*r+U*a+K*w+J*I,e[5]=z*i+U*h+K*b+J*C,e[6]=z*s+U*f+K*T+J*N,e[7]=z*o+U*_+K*M+J*j,z=n[8],U=n[9],K=n[10],J=n[11],e[8]=z*r+U*a+K*w+J*I,e[9]=z*i+U*h+K*b+J*C,e[10]=z*s+U*f+K*T+J*N,e[11]=z*o+U*_+K*M+J*j,z=n[12],U=n[13],K=n[14],J=n[15],e[12]=z*r+U*a+K*w+J*I,e[13]=z*i+U*h+K*b+J*C,e[14]=z*s+U*f+K*T+J*N,e[15]=z*o+U*_+K*M+J*j,e}function pre(e,t,n){const r=n[0],i=n[1],s=n[2];if(t===e)e[12]=t[0]*r+t[4]*i+t[8]*s+t[12],e[13]=t[1]*r+t[5]*i+t[9]*s+t[13],e[14]=t[2]*r+t[6]*i+t[10]*s+t[14],e[15]=t[3]*r+t[7]*i+t[11]*s+t[15];else{const o=t[0],a=t[1],h=t[2],f=t[3],_=t[4],w=t[5],b=t[6],T=t[7],M=t[8],I=t[9],C=t[10],N=t[11];e[0]=o,e[1]=a,e[2]=h,e[3]=f,e[4]=_,e[5]=w,e[6]=b,e[7]=T,e[8]=M,e[9]=I,e[10]=C,e[11]=N,e[12]=o*r+_*i+M*s+t[12],e[13]=a*r+w*i+I*s+t[13],e[14]=h*r+b*i+C*s+t[14],e[15]=f*r+T*i+N*s+t[15]}return e}function fre(e,t,n){const r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function mre(e,t,n,r){let i=r[0],s=r[1],o=r[2],a=Math.sqrt(i*i+s*s+o*o);if(a<=Si())return void O9(e,t);a=1/a,i*=a,s*=a,o*=a;const h=Math.sin(n),f=Math.cos(n),_=1-f,w=t[0],b=t[1],T=t[2],M=t[3],I=t[4],C=t[5],N=t[6],j=t[7],z=t[8],U=t[9],K=t[10],J=t[11],le=i*i*_+f,ue=s*i*_+o*h,be=o*i*_-s*h,xe=i*s*_-o*h,_e=s*s*_+f,$e=o*s*_+i*h,je=i*o*_+s*h,Me=s*o*_-i*h,Et=o*o*_+f;e[0]=w*le+I*ue+z*be,e[1]=b*le+C*ue+U*be,e[2]=T*le+N*ue+K*be,e[3]=M*le+j*ue+J*be,e[4]=w*xe+I*_e+z*$e,e[5]=b*xe+C*_e+U*$e,e[6]=T*xe+N*_e+K*$e,e[7]=M*xe+j*_e+J*$e,e[8]=w*je+I*Me+z*Et,e[9]=b*je+C*Me+U*Et,e[10]=T*je+N*Me+K*Et,e[11]=M*je+j*Me+J*Et,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function yre(e,t,n){const r=Math.sin(n),i=Math.cos(n),s=t[4],o=t[5],a=t[6],h=t[7],f=t[8],_=t[9],w=t[10],b=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+f*r,e[5]=o*i+_*r,e[6]=a*i+w*r,e[7]=h*i+b*r,e[8]=f*i-s*r,e[9]=_*i-o*r,e[10]=w*i-a*r,e[11]=b*i-h*r,e}function gre(e,t,n){const r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],a=t[2],h=t[3],f=t[8],_=t[9],w=t[10],b=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-f*r,e[1]=o*i-_*r,e[2]=a*i-w*r,e[3]=h*i-b*r,e[8]=s*r+f*i,e[9]=o*r+_*i,e[10]=a*r+w*i,e[11]=h*r+b*i,e}function _re(e,t,n){const r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],a=t[2],h=t[3],f=t[4],_=t[5],w=t[6],b=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+f*r,e[1]=o*i+_*r,e[2]=a*i+w*r,e[3]=h*i+b*r,e[4]=f*i-s*r,e[5]=_*i-o*r,e[6]=w*i-a*r,e[7]=b*i-h*r,e}function wre(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function vre(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function bre(e,t,n){if(t===0)return jx(e);let r=n[0],i=n[1],s=n[2],o=Math.sqrt(r*r+i*i+s*s);if(o<=Si())return null;o=1/o,r*=o,i*=o,s*=o;const a=Math.sin(t),h=Math.cos(t),f=1-h;return e[0]=r*r*f+h,e[1]=i*r*f+s*a,e[2]=s*r*f-i*a,e[3]=0,e[4]=r*i*f-s*a,e[5]=i*i*f+h,e[6]=s*i*f+r*a,e[7]=0,e[8]=r*s*f+i*a,e[9]=i*s*f-r*a,e[10]=s*s*f+h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Sre(e,t){const n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Tre(e,t){const n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function xre(e,t){const n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function R9(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=r+r,h=i+i,f=s+s,_=r*a,w=r*h,b=r*f,T=i*h,M=i*f,I=s*f,C=o*a,N=o*h,j=o*f;return e[0]=1-(T+I),e[1]=w+j,e[2]=b-N,e[3]=0,e[4]=w-j,e[5]=1-(_+I),e[6]=M+C,e[7]=0,e[8]=b+N,e[9]=M-C,e[10]=1-(_+T),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Ere(e,t){const n=$re,r=-t[0],i=-t[1],s=-t[2],o=t[3],a=t[4],h=t[5],f=t[6],_=t[7],w=r*r+i*i+s*s+o*o;return w>0?(n[0]=2*(a*o+_*r+h*s-f*i)/w,n[1]=2*(h*o+_*i+f*r-a*s)/w,n[2]=2*(f*o+_*s+a*i-h*r)/w):(n[0]=2*(a*o+_*r+h*s-f*i),n[1]=2*(h*o+_*i+f*r-a*s),n[2]=2*(f*o+_*s+a*i-h*r)),R9(e,t,n),e}const $re=Jd();function Mre(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Ire(e,t){const n=t[0],r=t[1],i=t[2],s=t[4],o=t[5],a=t[6],h=t[8],f=t[9],_=t[10];return e[0]=Math.sqrt(n*n+r*r+i*i),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(h*h+f*f+_*_),e}function Pre(e,t){const n=t[0]+t[5]+t[10];let r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function Cre(e,t,n,r){const i=t[0],s=t[1],o=t[2],a=t[3],h=i+i,f=s+s,_=o+o,w=i*h,b=i*f,T=i*_,M=s*f,I=s*_,C=o*_,N=a*h,j=a*f,z=a*_,U=r[0],K=r[1],J=r[2];return e[0]=(1-(M+C))*U,e[1]=(b+z)*U,e[2]=(T-j)*U,e[3]=0,e[4]=(b-z)*K,e[5]=(1-(w+C))*K,e[6]=(I+N)*K,e[7]=0,e[8]=(T+j)*J,e[9]=(I-N)*J,e[10]=(1-(w+M))*J,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Ore(e,t,n,r,i){const s=t[0],o=t[1],a=t[2],h=t[3],f=s+s,_=o+o,w=a+a,b=s*f,T=s*_,M=s*w,I=o*_,C=o*w,N=a*w,j=h*f,z=h*_,U=h*w,K=r[0],J=r[1],le=r[2],ue=i[0],be=i[1],xe=i[2],_e=(1-(I+N))*K,$e=(T+U)*K,je=(M-z)*K,Me=(T-U)*J,Et=(1-(b+N))*J,wt=(C+j)*J,Je=(M+z)*le,re=(C-j)*le,Ne=(1-(b+I))*le;return e[0]=_e,e[1]=$e,e[2]=je,e[3]=0,e[4]=Me,e[5]=Et,e[6]=wt,e[7]=0,e[8]=Je,e[9]=re,e[10]=Ne,e[11]=0,e[12]=n[0]+ue-(_e*ue+Me*be+Je*xe),e[13]=n[1]+be-($e*ue+Et*be+re*xe),e[14]=n[2]+xe-(je*ue+wt*be+Ne*xe),e[15]=1,e}function Are(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,a=r+r,h=i+i,f=n*o,_=r*o,w=r*a,b=i*o,T=i*a,M=i*h,I=s*o,C=s*a,N=s*h;return e[0]=1-w-M,e[1]=_+N,e[2]=b-C,e[3]=0,e[4]=_-N,e[5]=1-f-M,e[6]=T+I,e[7]=0,e[8]=b+C,e[9]=T-I,e[10]=1-f-w,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function kre(e,t,n,r,i,s,o){const a=1/(n-t),h=1/(i-r),f=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*h,e[6]=0,e[7]=0,e[8]=(n+t)*a,e[9]=(i+r)*h,e[10]=(o+s)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*f,e[15]=0,e}function Rre(e,t,n,r,i){const s=1/Math.tan(t/2);let o;return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e}function Lre(e,t,n,r){const i=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),h=2/(o+a),f=2/(i+s);return e[0]=h,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=f,e[6]=0,e[7]=0,e[8]=-(o-a)*h*.5,e[9]=(i-s)*f*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function Nre(e,t,n,r,i,s,o){const a=1/(t-n),h=1/(r-i),f=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*h,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(t+n)*a,e[13]=(i+r)*h,e[14]=(o+s)*f,e[15]=1,e}function Dre(e,t,n,r){const i=t[0],s=t[1],o=t[2];let a=i-n[0],h=s-n[1],f=o-n[2];const _=Si();if(Math.abs(a)<_&&Math.abs(h)<_&&Math.abs(f)<_)return void jx(e);let w=1/Math.sqrt(a*a+h*h+f*f);a*=w,h*=w,f*=w;const b=r[0],T=r[1],M=r[2];let I=T*f-M*h,C=M*a-b*f,N=b*h-T*a;w=Math.sqrt(I*I+C*C+N*N),w?(w=1/w,I*=w,C*=w,N*=w):(I=0,C=0,N=0);let j=h*N-f*C,z=f*I-a*N,U=a*C-h*I;w=Math.sqrt(j*j+z*z+U*U),w?(w=1/w,j*=w,z*=w,U*=w):(j=0,z=0,U=0),e[0]=I,e[1]=j,e[2]=a,e[3]=0,e[4]=C,e[5]=z,e[6]=h,e[7]=0,e[8]=N,e[9]=U,e[10]=f,e[11]=0,e[12]=-(I*i+C*s+N*o),e[13]=-(j*i+z*s+U*o),e[14]=-(a*i+h*s+f*o),e[15]=1}function Fre(e,t,n,r){const i=t[0],s=t[1],o=t[2],a=r[0],h=r[1],f=r[2];let _=i-n[0],w=s-n[1],b=o-n[2],T=_*_+w*w+b*b;T>0&&(T=1/Math.sqrt(T),_*=T,w*=T,b*=T);let M=h*b-f*w,I=f*_-a*b,C=a*w-h*_;return T=M*M+I*I+C*C,T>0&&(T=1/Math.sqrt(T),M*=T,I*=T,C*=T),e[0]=M,e[1]=I,e[2]=C,e[3]=0,e[4]=w*C-b*I,e[5]=b*M-_*C,e[6]=_*I-w*M,e[7]=0,e[8]=_,e[9]=w,e[10]=b,e[11]=0,e[12]=i,e[13]=s,e[14]=o,e[15]=1,e}function jre(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function zre(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function Vre(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function L9(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function Ure(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function Gre(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function Bre(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function qre(e,t){if(e===t)return!0;const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],h=e[6],f=e[7],_=e[8],w=e[9],b=e[10],T=e[11],M=e[12],I=e[13],C=e[14],N=e[15],j=t[0],z=t[1],U=t[2],K=t[3],J=t[4],le=t[5],ue=t[6],be=t[7],xe=t[8],_e=t[9],$e=t[10],je=t[11],Me=t[12],Et=t[13],wt=t[14],Je=t[15],re=Si();return Math.abs(n-j)<=re*Math.max(1,Math.abs(n),Math.abs(j))&&Math.abs(r-z)<=re*Math.max(1,Math.abs(r),Math.abs(z))&&Math.abs(i-U)<=re*Math.max(1,Math.abs(i),Math.abs(U))&&Math.abs(s-K)<=re*Math.max(1,Math.abs(s),Math.abs(K))&&Math.abs(o-J)<=re*Math.max(1,Math.abs(o),Math.abs(J))&&Math.abs(a-le)<=re*Math.max(1,Math.abs(a),Math.abs(le))&&Math.abs(h-ue)<=re*Math.max(1,Math.abs(h),Math.abs(ue))&&Math.abs(f-be)<=re*Math.max(1,Math.abs(f),Math.abs(be))&&Math.abs(_-xe)<=re*Math.max(1,Math.abs(_),Math.abs(xe))&&Math.abs(w-_e)<=re*Math.max(1,Math.abs(w),Math.abs(_e))&&Math.abs(b-$e)<=re*Math.max(1,Math.abs(b),Math.abs($e))&&Math.abs(T-je)<=re*Math.max(1,Math.abs(T),Math.abs(je))&&Math.abs(M-Me)<=re*Math.max(1,Math.abs(M),Math.abs(Me))&&Math.abs(I-Et)<=re*Math.max(1,Math.abs(I),Math.abs(Et))&&Math.abs(C-wt)<=re*Math.max(1,Math.abs(C),Math.abs(wt))&&Math.abs(N-Je)<=re*Math.max(1,Math.abs(N),Math.abs(Je))}function Hre(e){const t=Si(),n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],a=e[6],h=e[8],f=e[9],_=e[10];return Math.abs(1-(n*n+s*s+h*h))<=t&&Math.abs(1-(r*r+o*o+f*f))<=t&&Math.abs(1-(i*i+a*a+_*_))<=t}function Wre(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const Zre=k9,Jre=L9;Object.freeze(Object.defineProperty({__proto__:null,add:Vre,adjoint:dre,copy:O9,determinant:hre,equals:qre,exactEquals:Bre,frob:zre,fromQuat:Are,fromQuat2:Ere,fromRotation:bre,fromRotationTranslation:R9,fromRotationTranslationScale:Cre,fromRotationTranslationScaleOrigin:Ore,fromScaling:vre,fromTranslation:wre,fromXRotation:Sre,fromYRotation:Tre,fromZRotation:xre,frustum:kre,getRotation:Pre,getScaling:Ire,getTranslation:Mre,hasIdentityRotation:Wre,identity:jx,invert:A9,invertOrIdentity:cre,isOrthoNormal:Hre,lookAt:Dre,mul:Zre,multiply:k9,multiplyScalar:Ure,multiplyScalarAndAdd:Gre,ortho:Nre,perspective:Rre,perspectiveFromFieldOfView:Lre,rotate:mre,rotateX:yre,rotateY:gre,rotateZ:_re,scale:fre,set:Yd,str:jre,sub:Jre,subtract:L9,targetTo:Fre,translate:pre,transpose:Kd},Symbol.toStringTag,{value:"Module"}));const Yre=(e,t)=>{const n=Yd(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return Kd(n,n)},Kre=(e,t)=>{const n=Yd(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return Kd(n,n)},Xre=(e,t)=>{const n=1-t,r=Yd(e,.2126+.7874*n,.7152-.7152*n,.0722-.0722*n,0,.2126-.2126*n,.7152+.2848*n,.0722-.0722*n,0,.2126-.2126*n,.7152-.7152*n,.0722+.9278*n,0,0,0,0,1);return Kd(r,r)},Qre=(e,t)=>{const n=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),i=Yd(e,.213+.787*r-.213*n,.715-.715*r-.715*n,.072-.072*r+.928*n,0,.213-.213*r+.143*n,.715+.285*r+.14*n,.072-.072*r-.283*n,0,.213-.213*r-.787*n,.715-.715*r+.715*n,.072+.928*r+.072*n,0,0,0,0,1);return Kd(i,i)},eie=(e,t)=>{const n=1-2*t,r=Yd(e,n,0,0,t,0,n,0,t,0,0,n,t,0,0,0,1);return Kd(r,r)},tie=(e,t)=>{const n=Yd(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return Kd(n,n)},nie=(e,t)=>{const n=1-t,r=Yd(e,.393+.607*n,.769-.769*n,.189-.189*n,0,.349-.349*n,.686+.314*n,.168-.168*n,0,.272-.272*n,.534-.534*n,.131+.869*n,0,0,0,0,1);return Kd(r,r)};let N9=class D9{constructor(t,n,r){this.strength=t,this.radius=n,this.threshold=r,this.type="bloom"}interpolate(t,n,r){this.strength=Gi(t.strength,n.strength,r),this.radius=Gi(t.radius,n.radius,r),this.threshold=Gi(t.threshold,n.threshold,r)}clone(){return new D9(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:$v(this.radius),strength:this.strength,threshold:this.threshold}}},F9=class j9{constructor(t){this.radius=t,this.type="blur"}interpolate(t,n,r){this.radius=Math.round(Gi(t.radius,n.radius,r))}clone(){return new j9(this.radius)}toJSON(){return{type:"blur",radius:$v(this.radius)}}},O3=class z9{constructor(t,n){this.type=t,this.amount=n,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,n,r){this.amount=Gi(t.amount,n.amount,r),this._updateMatrix()}clone(){return new z9(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||Dx();switch(this.type){case"brightness":this._colorMatrix=Yre(t,this.amount);break;case"contrast":this._colorMatrix=Kre(t,this.amount);break;case"grayscale":this._colorMatrix=Xre(t,this.amount);break;case"invert":this._colorMatrix=eie(t,this.amount);break;case"saturate":this._colorMatrix=tie(t,this.amount);break;case"sepia":this._colorMatrix=nie(t,this.amount)}}},V9=class U9{constructor(t,n,r,i){this.offsetX=t,this.offsetY=n,this.blurRadius=r,this.color=i,this.type="drop-shadow"}interpolate(t,n,r){this.offsetX=Gi(t.offsetX,n.offsetX,r),this.offsetY=Gi(t.offsetY,n.offsetY,r),this.blurRadius=Gi(t.blurRadius,n.blurRadius,r),this.color[0]=Math.round(Gi(t.color[0],n.color[0],r)),this.color[1]=Math.round(Gi(t.color[1],n.color[1],r)),this.color[2]=Math.round(Gi(t.color[2],n.color[2],r)),this.color[3]=Gi(t.color[3],n.color[3],r)}clone(){return new U9(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:$v(this.offsetX),yoffset:$v(this.offsetY),blurRadius:$v(this.blurRadius),color:t}}},G9=class B9{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,n,r){this.angle=Gi(t.angle,n.angle,r),this._updateMatrix()}clone(){return new B9(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||Dx();this._colorMatrix=Qre(t,this.angle)}},q9=class H9{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,n,r){this.amount=Gi(t.amount,n.amount,r)}clone(){return new H9(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Gi(e,t,n){return e+(t-e)*n}function $v(e){return Math.round(1e3*fo(e))/1e3}function rie(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new O3(e.type,0);case"saturate":case"brightness":case"contrast":return new O3(e.type,1);case"opacity":return new q9(1);case"hue-rotate":return new G9(0);case"blur":return new F9(0);case"drop-shadow":return new V9(0,0,0,[...Tk("transparent")]);case"bloom":return new N9(0,0,1)}}function iie(e,t){const n=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,i)=>r.type===n[i].type)}function sie(e,t){const n=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let i=r.length;i<n.length;i++)r.push(rie(n[i]))}function oie(e){const t=e[0];return!!t&&"type"in t}const _M=()=>fe.getLogger("esri.support.basemapUtils");function aie(){return{}}function lie(e){for(const t in e){const n=e[t];cn(n),delete e[t]}}function uie(e,t){let n;if(typeof e=="string"){const r=e in E3,i=!r&&e.includes("/");if(!r&&!i){if(Bt.apiKey)_M().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(E3).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");_M().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${s}`)}return null}t&&(n=t[e]),n||(n=r?Ev.fromId(e):new Ev({style:{id:e}}),t&&(t[e]=n))}else n=jn(Ev,e);return n!=null&&n.destroyed&&(_M().warn("The provided basemap is already destroyed",{basemap:n}),n=null),n}function TIe(e){return!!(e!=null&&e.baseLayers.concat(e.referenceLayers).some(cie))}function cie(e){if(gF(e.url))return!0;if(e.type==="vector-tile")for(const t in e.sourceNameToSource){const n=e.sourceNameToSource[t];if(gF(n==null?void 0:n.sourceUrl))return!0}return!1}function xIe(e,t){var s;if(t==null||e==null)return{spatialReference:null,updating:!1};if(t.loadStatus==="not-loaded")return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(t.baseLayers.length===0)return{spatialReference:null,updating:!1};const n=t.baseLayers.at(0);switch(n.loadStatus){case"not-loaded":n.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const r=(("supportedSpatialReferences"in n?n.supportedSpatialReferences:null)||["tileInfo"in n?(s=n.tileInfo)==null?void 0:s.spatialReference:n.spatialReference]).filter(Boolean),i=e.spatialReference;return i?{spatialReference:r.find(o=>i.equals(o))??r[0]??null,updating:!1}:{spatialReference:r[0],updating:!1}}const die=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function gF(e){if(!e)return!1;const t=new Od(qi(e));return!!t.authority&&die.test(t.authority)}function hie(e){return new n0({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const n=[];return"tables"in t&&n.push(t.tables),"layers"in t&&n.push(t.layers),n},itemFilterFunction:t=>{const n=t.parent;return!!n&&"tables"in n&&n.tables.includes(t)}})}function wM(e){for(const t of e.values())t==null||t.destroy();e.clear()}const _F={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function pie(e){let t=null;if(typeof e=="string")if(e in _F){const n=_F[e];t=new xT({resourceInfo:{data:{layers:[n]}}})}else fe.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=jn(xT,e);return t}function _g(e,t,n=!1){let{hasM:r,hasZ:i}=e;Array.isArray(t)?t.length!==4||r||i?t.length===3&&n&&!r?(i=!0,r=!1):t.length===3&&r&&i&&(r=!1,i=!1):(r=!0,i=!0):(i=!i&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!i||t.hasZ)),e.hasZ=i,e.hasM=r}var A3;function wF(e){return(t,n)=>t==null?n:n==null?t:e(t,n)}function fie(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let jc=A3=class extends zu{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var i;if(!e&&!t)return{};const n={};Array.isArray(e)?(n.points=e,n.spatialReference=t):fie(e)?n.spatialReference=e:(e.points&&(n.points=e.points),e.spatialReference&&(n.spatialReference=e.spatialReference),e.hasZ&&(n.hasZ=e.hasZ),e.hasM&&(n.hasM=e.hasM));const r=(i=n.points)==null?void 0:i[0];return r&&(n.hasZ===void 0&&n.hasM===void 0?(n.hasZ=r.length>2,n.hasM=!1):n.hasZ===void 0?n.hasZ=r.length>3:n.hasM===void 0&&(n.hasM=r.length>3)),n}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Xt,n=this.hasZ,r=this.hasM,i=n?3:2,s=e[0],o=wF(Math.min),a=wF(Math.max);let h,f,_,w,[b,T]=s,[M,I]=s;for(let C=0,N=e.length;C<N;C++){const j=e[C],[z,U]=j;if(b=o(b,z),T=o(T,U),M=a(M,z),I=a(I,U),n&&j.length>2){const K=j[2];h=o(h,K),_=a(_,K)}if(r&&j.length>i){const K=j[i];f=o(f,K),w=a(w,K)}}return t.xmin=b,t.ymin=T,t.xmax=M,t.ymax=I,t.spatialReference=this.spatialReference,n?(t.zmin=h,t.zmax=_):(t.zmin=void 0,t.zmax=void 0),r?(t.mmin=f,t.mmax=w):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=q(this.points)}addPoint(e){return _g(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:q(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new A3(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],n={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(n.z=t[2],r=3),this.hasM&&(n.m=t[r]),new gt(n)}removePoint(e){if(!this._validateInputs(e))return null;const t=new gt(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(_g(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};l([p({readOnly:!0})],jc.prototype,"cache",null),l([p()],jc.prototype,"extent",null),l([p({type:[[Number]],json:{write:{isRequired:!0}}})],jc.prototype,"points",void 0),l([ge("points")],jc.prototype,"writePoints",null),jc=A3=l([k("esri.geometry.Multipoint")],jc),jc.prototype.toJSON.isDefaultToJSON=!0;const N0=jc;function EIe(e){const t=[];for(e.reset();e.nextPath();){const n=[];for(;e.nextPoint();)n.push([e.x,e.y]);t.push(n)}return e.reset(),t}function mie(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var ET;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(ET||(ET={}));function Ik(e,t){const n=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}return Math.sqrt(n*n+r*r)}function yie(e,t,n){const r=e[0]+n*(t[0]-e[0]),i=e[1]+n*(t[1]-e[1]);return e.length>2&&t.length>2?[r,i,e[2]+n*(t[2]-e[2])]:[r,i]}function gie(e,t,n,r){return _ie(e,t,n[r],n[r+1])}function _ie(e,t,n,r){const[i,s]=t,[o,a]=n,[h,f]=r,_=h-o,w=f-a,b=_*_+w*w,T=(i-o)*_+(s-a)*w,M=Math.min(1,Math.max(0,T/b));return e[0]=o+_*M,e[1]=a+w*M,e}function $Ie(e,t,n,r,i,s){let o=n,a=r,h=i-o,f=s-a;if(h!==0||f!==0){const _=((e-o)*h+(t-a)*f)/(h*h+f*f);_>1?(o=i,a=s):_>0&&(o+=h*_,a+=f*_)}return h=e-o,f=t-a,h*h+f*f}function W9(e,t){return yie(e,t,.5)}function MIe(e){const t=e.length;let n=0;for(let r=0;r<t-1;++r)n+=Ik(e[r],e[r+1]);return n}function Z9(e,t=ET.X,n=ET.Y){let r=0;const i=e.length;let s=e[0];for(let o=1;o<i;o++){const a=e[o];r+=(a[t]-s[t])*(a[n]+s[n]),s=a}if(!J9(e)){const o=e[0];r+=(o[t]-s[t])*(o[n]+s[n])}return r>=0}function J9(e){const t=e.length;return t<3||dx(e[0],e[t-1])}function IIe(e){"rings"in e&&(wie(e),vie(e))}function wie(e){if(!("rings"in e))return!1;let t=!1;for(const n of e.rings)J9(n)||(n.push(n[0].slice()),t=!0);return t}function vie(e){if(!("rings"in e)||e.rings.length===0||Z9(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function PIe(e){return e.type!=="polygon"&&e.type!=="polyline"||bie(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function bie(e,t){const n=bi(t);if(!n)return;const r=n.valid[0],i=n.valid[1],s=i-r;for(const o of e){let a=1/0,h=-1/0;for(const _ of o){const w=Sie(_[0],r,i);a=Math.min(a,w),h=Math.max(h,w),_[0]=w}const f=h-a;s-f<f&&o.forEach(_=>{_[0]<0&&(_[0]+=s)})}}function Sie(e,t,n){const r=n-t;return e<t?n-(t-e)%r:e>n?t+(e-t)%r:e}function CIe(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="mesh"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[n,r]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return n.length===r.length&&n.every((i,s)=>i.length===r[s].length)}function OIe(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function Tie(e){return e?xie(e.rings,e.hasZ??!1):null}function xie(e,t){if(!(e!=null&&e.length))return null;const n=[],r=[],i=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=e.length;s<o;s++){const a=Y9(e[s],t,i);a&&r.push(a)}if(r.sort((s,o)=>{let a=s[2]-o[2];return a===0&&t&&(a=s[4]-o[4]),a}),r.length&&(n[0]=r[0][0],n[1]=r[0][1],t&&(n[2]=r[0][3]),(n[0]<i[0]||n[0]>i[1]||n[1]<i[2]||n[1]>i[3]||t&&(n[2]<i[4]||n[2]>i[5]))&&(n.length=0)),!n.length){const s=e[0]&&e[0].length?Eie(e[0],t):null;if(!s)return null;n[0]=s[0],n[1]=s[1],t&&s.length>2&&(n[2]=s[2])}return n}function Y9(e,t,n){let r=0,i=0,s=0,o=0,a=0;const h=e.length?e[0][0]:0,f=e.length?e[0][1]:0,_=e.length&&t?e[0][2]:0;for(let b=0;b<e.length;b++){const T=e[b],M=e[(b+1)%e.length],[I,C,N]=T,j=I-h,z=C-f,[U,K,J]=M,le=U-h,ue=K-f,be=j*ue-le*z;if(o+=be,r+=(j+le)*be,i+=(z+ue)*be,t&&T.length>2&&M.length>2){const xe=N-_,_e=J-_,$e=j*_e-le*xe;s+=(xe+_e)*$e,a+=$e}I<n[0]&&(n[0]=I),I>n[1]&&(n[1]=I),C<n[2]&&(n[2]=C),C>n[3]&&(n[3]=C),t&&(N<n[4]&&(n[4]=N),N>n[5]&&(n[5]=N))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const w=[r/(6*o)+h,i/(6*o)+f,o];return t&&(n[4]===n[5]||a===0?(w[3]=(n[4]+n[5])/2,w[4]=0):(w[3]=s/(6*a)+_,w[4]=a)),w}function AIe(e,t){let n=0,r=0,i=0;e.nextPoint();const s=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let a=0;a<e.pathSize;a++){e.seekInPath(a);const h=[e.x,e.y];e.seekInPath((a+1)%e.pathSize);const f=[e.x,e.y],[_,w]=h,b=_-s,T=w-o,[M,I]=f,C=M-s,N=I-o,j=b*N-C*T;i+=j,n+=(b+C)*j,r+=(T+N)*j,_<t[0]&&(t[0]=_),_>t[1]&&(t[1]=_),w<t[2]&&(t[2]=w),w>t[3]&&(t[3]=w)}return i>0&&(i*=-1),i?(i*=.5,[n/(6*i)+s,r/(6*i)+o,i]):null}function Eie(e,t){const n=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let i=0,s=0,o=0,a=0;for(let h=0,f=e.length;h<f-1;h++){const _=e[h],w=e[h+1];if(_&&w){n[0]=_[0],n[1]=_[1],r[0]=w[0],r[1]=w[1],t&&_.length>2&&w.length>2&&(n[2]=_[2],r[2]=w[2]);const b=Ik(n,r);if(b){i+=b;const T=W9(_,w);s+=b*T[0],o+=b*T[1],t&&T.length>2&&(a+=b*T[2])}}}return i>0?t?[s/i,o/i,a/i]:[s/i,o/i]:e.length?e[0]:null}function $ie(e){const{hasZ:t,totalSize:n}=e;if(n===0)return null;const r=[],i=[],s=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=Y9(mie(e),e.hasZ,s);o&&i.push(o)}if(i.sort((o,a)=>{let h=o[2]-a[2];return h===0&&t&&(h=o[4]-a[4]),h}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||t&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){e.reset(),e.nextPath();const o=e.pathSize?Mie(e):null;if(!o)return null;r[0]=o[0],r[1]=o[1],t&&o.length>2&&(r[2]=o[2])}return r}function Mie(e){const{hasZ:t}=e,n=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let i=0,s=0,o=0,a=0;if(e.nextPoint()){let h=e.x,f=e.y,_=e.z;for(;e.nextPoint();){const w=e.x,b=e.y,T=e.z;n[0]=h,n[1]=f,r[0]=w,r[1]=b,t&&(n[2]=_,r[2]=T);const M=Ik(n,r);if(M){i+=M;const I=W9(n,r);s+=M*I[0],o+=M*I[1],t&&I.length>2&&(a+=M*I[2])}h=w,f=b,_=T}}return i>0?t?[s/i,o/i,a/i]:[s/i,o/i]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const Iie=1e-6;function kIe(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<Iie){const i=$ie(e);return i?[i[0],i[1]]:null}const n=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const r=[e.x,e.y];for(e.reset();e.nextPath();)Cie(n,r,e);return n[0]*=1/t,n[1]*=1/t,n[0]+=r[0],n[1]+=r[1],n}const Pie=1/3;function Cie(e,t,n){if(!e||!n||n.pathSize<3)return null;n.nextPoint();const r=n.x,i=n.y;n.nextPoint();let s,o=n.x-r,a=n.y-i,h=0,f=0;for(;n.nextPoint();)h=n.x-r,f=n.y-i,s=.5*Pie*(h*a-f*o),e[0]+=s*(o+h),e[1]+=s*(a+f),o=h,a=f;const _=n.getCurrentRingArea(),w=[r,i];return w[0]-=t[0],w[1]-=t[1],w[0]*=_,w[1]*=_,e[0]+=w[0],e[1]+=w[1],e}function Hi(e=Aie){return[e[0],e[1],e[2],e[3]]}function K9(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function RIe(e,t,n,r,i=Hi()){return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function LIe(e,t=Hi()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function NIe(e,t){return new Xt({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function DIe(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function FIe(e,t,n){if(t!=null)if("length"in t)k3(t)?(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[0]),n[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":n[0]=Math.min(e[0],t.xmin),n[1]=Math.min(e[1],t.ymin),n[2]=Math.max(e[2],t.xmax),n[3]=Math.max(e[3],t.ymax);break;case"point":n[0]=Math.min(e[0],t.x),n[1]=Math.min(e[1],t.y),n[2]=Math.max(e[2],t.x),n[3]=Math.max(e[3],t.y)}else K9(n,e)}function X9(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function Q9(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function jIe(e){return X9(e)*Q9(e)}function zIe(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function VIe(e,t,n){return t>=e[0]&&n>=e[1]&&t<=e[2]&&n<=e[3]}function UIe(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function Oie(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function GIe(e){return e?K9(e,vF):Hi(vF)}function k3(e){return e!=null&&e.length===4}function BIe(e,t){return k3(e)&&k3(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const vF=[1/0,1/0,-1/0,-1/0],Aie=[0,0,0,0];function e7(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function t7(e){return e.points!==void 0}function n7(e){return e.x!==void 0&&e.y!==void 0}function r7(e){return e.paths!==void 0}function i7(e){return e.rings!==void 0}function s7(e){function t(n,r){return n==null?r:r==null?n:e(n,r)}return t}const xd=s7(Math.min),Ed=s7(Math.max);function qIe(e,t){return r7(t)?wg(e,t.paths,!1,!1):i7(t)?wg(e,t.rings,!1,!1):t7(t)?Pk(e,t.points,!1,!1,!1,!1):e7(t)?o7(e,t):(n7(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function HIe(e){let t,n,r,i;for(e.reset(),t=r=1/0,n=i=-1/0;e.nextPath();){const s=kie(e);t=Math.min(s[0],t),r=Math.min(s[1],r),n=Math.max(s[2],n),i=Math.max(s[3],i)}return Hi([t,r,n,i])}function kie(e){let t,n,r,i;for(t=r=1/0,n=i=-1/0;e.nextPoint();)t=Math.min(e.x,t),r=Math.min(e.y,r),n=Math.max(e.x,n),i=Math.max(e.y,i);return Hi([t,r,n,i])}function WIe(e,t){return r7(t)?wg(e,t.paths,!0,!1):i7(t)?wg(e,t.rings,!0,!1):t7(t)?Pk(e,t.points,!0,!1,!0,!1):e7(t)?o7(e,t,!0,!1,!0,!1):(n7(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function wg(e,t,n,r){const i=n?3:2;if(!t.length||!t[0].length)return null;let s,o,a,h,[f,_]=t[0][0],[w,b]=t[0][0];for(let T=0;T<t.length;T++){const M=t[T];for(let I=0;I<M.length;I++){const C=M[I],[N,j]=C;if(f=xd(f,N),_=xd(_,j),w=Ed(w,N),b=Ed(b,j),n&&C.length>2){const z=C[2];s=xd(s,z),o=Ed(o,z)}if(r&&C.length>i){const z=C[i];a=xd(s,z),h=Ed(o,z)}}}return n?r?(e[0]=f,e[1]=_,e[2]=s,e[3]=a,e[4]=w,e[5]=b,e[6]=o,e[7]=h,e.length=8,e):(e[0]=f,e[1]=_,e[2]=s,e[3]=w,e[4]=b,e[5]=o,e.length=6,e):r?(e[0]=f,e[1]=_,e[2]=a,e[3]=w,e[4]=b,e[5]=h,e.length=6,e):(e[0]=f,e[1]=_,e[2]=w,e[3]=b,e.length=4,e)}function o7(e,t,n,r,i,s){const o=t.xmin,a=t.xmax,h=t.ymin,f=t.ymax;let _=t.zmin,w=t.zmax,b=t.mmin,T=t.mmax;return i?(_=_||0,w=w||0,s?(b=b||0,T=T||0,e[0]=o,e[1]=h,e[2]=_,e[3]=b,e[4]=a,e[5]=f,e[6]=w,e[7]=T,e):(e[0]=o,e[1]=h,e[2]=_,e[3]=a,e[4]=f,e[5]=w,e)):s?(b=b||0,T=T||0,e[0]=o,e[1]=h,e[2]=b,e[3]=a,e[4]=f,e[5]=T,e):(e[0]=o,e[1]=h,e[2]=a,e[3]=f,e)}function Pk(e,t,n,r,i,s){const o=n?3:2,a=r&&s,h=n&&i;if(!t.length||!t[0].length)return null;let f,_,w,b,[T,M]=t[0],[I,C]=t[0];for(let N=0;N<t.length;N++){const j=t[N],[z,U]=j;if(T=xd(T,z),M=xd(M,U),I=Ed(I,z),C=Ed(C,U),h&&j.length>2){const K=j[2];f=xd(f,K),_=Ed(_,K)}if(a&&j.length>o){const K=j[o];w=xd(f,K),b=Ed(_,K)}}return i?(f=f||0,_=_||0,s?(w=w||0,b=b||0,e[0]=T,e[1]=M,e[2]=f,e[3]=w,e[4]=I,e[5]=C,e[6]=_,e[7]=b,e):(e[0]=T,e[1]=M,e[2]=f,e[3]=I,e[4]=C,e[5]=_,e)):s?(w=w||0,b=b||0,e[0]=T,e[1]=M,e[2]=w,e[3]=I,e[4]=C,e[5]=b,e):(e[0]=T,e[1]=M,e[2]=I,e[3]=C,e)}function Rie(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Lie(e){return e.points!==void 0}function Nie(e){return e.x!==void 0&&e.y!==void 0}function Die(e){return e.paths!==void 0}function Fie(e){return e.rings!==void 0}const Ck=[];function a7(e,t,n,r){return{xmin:e,ymin:t,xmax:n,ymax:r}}function l7(e,t,n,r,i,s){return{xmin:e,ymin:t,zmin:n,xmax:r,ymax:i,zmax:s}}function u7(e,t,n,r,i,s){return{xmin:e,ymin:t,mmin:n,xmax:r,ymax:i,mmax:s}}function c7(e,t,n,r,i,s,o,a){return{xmin:e,ymin:t,zmin:n,mmin:r,xmax:i,ymax:s,zmax:o,mmax:a}}function Ok(e,t=!1,n=!1){return t?n?c7(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):l7(e[0],e[1],e[2],e[3],e[4],e[5]):n?u7(e[0],e[1],e[2],e[3],e[4],e[5]):a7(e[0],e[1],e[2],e[3])}function ZIe(e){return e?Rie(e)?e:Nie(e)?zie(e):Fie(e)?d7(e):Die(e)?h7(e):Lie(e)?jie(e):null:null}function jie(e){const{hasZ:t,hasM:n,points:r}=e;return Ok(Pk(Ck,r,t??!1,n??!1),t,n)}function zie(e){const{x:t,y:n,z:r,m:i}=e,s=i!=null;return r!=null?s?c7(t,n,r,i,t,n,r,i):l7(t,n,r,t,n,r):s?u7(t,n,i,t,n,i):a7(t,n,t,n)}function d7(e){const{hasZ:t,hasM:n,rings:r}=e,i=wg(Ck,r,t??!1,n??!1);return i?Ok(i,t,n):null}function h7(e){const{hasZ:t,hasM:n,paths:r}=e,i=wg(Ck,r,t??!1,n??!1);return i?Ok(i,t,n):null}var AS;function bF(e){return!Array.isArray(e[0])}function Vie(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function Uie(e){var s,o;if(!e)return;let{rings:t,hasM:n,hasZ:r,spatialReference:i}=e;switch(t??(t=[]),Vie(t)&&(t=[t]),(o=(s=t[0])==null?void 0:s[0])==null?void 0:o.length){case 4:r??(r=!0),n??(n=!0);break;case 3:r??(r=n!==!0),n??(n=!r);break;default:r??(r=!1),n??(n=!1)}return i??(i=dt.WGS84),{...e,hasM:n,hasZ:r,rings:t,spatialReference:i}}let Ka=AS=class extends zu{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:n}=e;let r=!1,i=!1;for(const o of t)o.hasZ&&(r=!0),o.hasM&&(i=!0);const s={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const h=o.zmin+.5*(o.zmax-o.zmin);for(let f=0;f<a.length;f++)a[f].push(h)}if(i&&o.hasM){const h=o.mmin+.5*(o.mmax-o.mmin);for(let f=0;f<a.length;f++)a[f].push(h)}return a}),spatialReference:n};return r&&(s.hasZ=!0),i&&(s.hasM=!0),new AS(s)}constructor(e){super(Uie(e)),this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=Tie(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new gt;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=d7(this);if(!t)return null;const n=new Xt(t);return n.spatialReference=e,n}get isSelfIntersecting(){return Jte(this.rings)}writeRings(e,t){t.rings=q(this.rings)}addRing(e){if(!e)return;const t=this.rings,n=t.length;if(bF(e)){const r=[];for(let i=0,s=e.length;i<s;i++)r[i]=e[i].toArray();t[n]=r}else t[n]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new AS;return e.spatialReference=this.spatialReference,e.rings=q(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,n=e.spatialReference;if(t!=null!=(n!=null)||t!=null&&n!=null&&!t.equals(n)||this.rings.length!==e.rings.length)return!1;const r=([i,s,o,a],[h,f,_,w])=>i===h&&s===f&&(o==null&&_==null||o===_)&&(a==null&&w==null||a===w);for(let i=0;i<this.rings.length;i++){const s=this.rings[i],o=e.rings[i];if(!dx(s,o,r))return!1}return!0}contains(e){if(!e)return!1;const t=Cx(e,this.spatialReference);return gk(this,t??e)}isClockwise(e){const t=bF(e)?e.map(n=>this.hasZ?this.hasM?[n.x,n.y,n.z,n.m]:[n.x,n.y,n.z]:[n.x,n.y]):e;return Z9(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const n=this.rings[e][t],r=this.hasZ,i=this.hasM;return r&&!i?new gt(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new gt(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new gt(n[0],n[1],n[2],n[3],this.spatialReference):new gt(n[0],n[1],this.spatialReference)}insertPoint(e,t,n){return this._validateInputs(e,t,!0)?(_g(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[e].splice(t,0,n),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const n=new gt(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),n}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],n=this.spatialReference,r=t.map(i=>new gt(i,n));return this.notifyChange("rings"),r}setPoint(e,t,n){return this._validateInputs(e,t)?(_g(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[e][t]=n,this.notifyChange("rings"),this):this}_validateInputs(e,t,n=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(n&&(t<0||t>r.length)||!n&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};l([p({readOnly:!0})],Ka.prototype,"cache",null),l([p({readOnly:!0})],Ka.prototype,"centroid",null),l([p({readOnly:!0})],Ka.prototype,"extent",null),l([p({readOnly:!0})],Ka.prototype,"isSelfIntersecting",null),l([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ka.prototype,"rings",void 0),l([ge("rings")],Ka.prototype,"writeRings",null),Ka=AS=l([k("esri.geometry.Polygon")],Ka);const mo=Ka;Ka.prototype.toJSON.isDefaultToJSON=!0;var R3;function Gie(e){return!Array.isArray(e[0])}function Bie(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function qie(e){var s,o;if(!e)return;let{paths:t,hasM:n,hasZ:r,spatialReference:i}=e;switch(t??(t=[]),Bie(t)&&(t=[t]),(o=(s=t[0])==null?void 0:s[0])==null?void 0:o.length){case 4:r??(r=!0),n??(n=!0);break;case 3:r??(r=n!==!0),n??(n=!r);break;default:r??(r=!1),n??(n=!1)}return i??(i=dt.WGS84),{...e,hasM:n,hasZ:r,paths:t,spatialReference:i}}let pd=R3=class extends zu{constructor(e){super(qie(e)),this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=h7(this);if(!t)return null;const n=new Xt(t);return n.spatialReference=e,n}writePaths(e,t){t.paths=q(this.paths)}addPath(e){if(!e)return;const t=this.paths,n=t.length;if(Gie(e)){const r=[];for(let i=0,s=e.length;i<s;i++)r[i]=e[i].toArray();t[n]=r}else t[n]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new R3;return e.spatialReference=this.spatialReference,e.paths=q(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const n=this.paths[e][t],r=this.hasZ,i=this.hasM;return r&&!i?new gt(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new gt(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new gt(n[0],n[1],n[2],n[3],this.spatialReference):new gt(n[0],n[1],this.spatialReference)}insertPoint(e,t,n){return this._validateInputs(e,t,!0)?(_g(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[e].splice(t,0,n),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],n=this.spatialReference,r=t.map(i=>new gt(i,n));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const n=new gt(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),n}setPoint(e,t,n){return this._validateInputs(e,t)?(_g(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[e][t]=n,this.notifyChange("paths"),this):this}_validateInputs(e,t,n=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(n&&(t<0||t>r.length)||!n&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};l([p({readOnly:!0})],pd.prototype,"cache",null),l([p({readOnly:!0})],pd.prototype,"extent",null),l([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],pd.prototype,"paths",void 0),l([ge("paths")],pd.prototype,"writePaths",null),pd=R3=l([k("esri.geometry.Polyline")],pd);const so=pd;pd.prototype.toJSON.isDefaultToJSON=!0;const Hie=hr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),SF=hr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function p7(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function f7(e){return e.points!==void 0}function m7(e){return e.x!==void 0&&e.y!==void 0}function Ak(e){return e.paths!==void 0}function ef(e){return e.rings!==void 0}function Du(e){return e==null?null:e instanceof zu?e:m7(e)?gt.fromJSON(e):Ak(e)?so.fromJSON(e):ef(e)?mo.fromJSON(e):f7(e)?N0.fromJSON(e):p7(e)?Xt.fromJSON(e):null}function D0(e){return e?m7(e)?"esriGeometryPoint":Ak(e)?"esriGeometryPolyline":ef(e)?"esriGeometryPolygon":p7(e)?"esriGeometryEnvelope":f7(e)?"esriGeometryMultipoint":null:null}const Wie={esriGeometryPoint:gt,esriGeometryPolyline:so,esriGeometryPolygon:mo,esriGeometryEnvelope:Xt,esriGeometryMultipoint:N0,esriGeometryMultiPatch:mo};function Zie(e){return e&&Wie[e]||null}const Tf={base:zu,key:"type",typeMap:{extent:Xt,multipoint:N0,point:gt,polyline:so,polygon:mo}};co(Tf);let y7=0;const zx=e=>{let t=class extends e{constructor(...n){super(...n),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+y7++})}};return t=l([k("esri.core.Identifiable")],t),t},kk=e=>{let t=class extends e{constructor(...n){super(...n),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:y7++})}};return t=l([k("esri.core.Identifiable.NumericIdentifiable")],t),t};let TF=class extends zx(class{}){};TF=l([k("esri.core.Identifiable")],TF);async function Jie(e){var r;const t="portalItem"in e?e:{portalItem:e},{fromItem:n}=await pe(async()=>{const{fromItem:i}=await import("./portalLayers-JonThmQa.js").then(s=>s.p);return{fromItem:i}},__vite__mapDeps([10,11,12]));try{return await n(t)}catch(i){const s=t==null?void 0:t.portalItem,o=(s==null?void 0:s.id)||"unset",a=((r=s==null?void 0:s.portal)==null?void 0:r.url)||Bt.portalUrl;throw fe.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+o+"')",i),i}}const xF=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class xf extends Error{}class Yie extends xf{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Kie extends xf{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Xie extends xf{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class Gy extends xf{}class g7 extends xf{constructor(t){super(`Invalid unit ${t}`)}}class ei extends xf{}class kc extends xf{constructor(){super("Zone is an abstract class")}}const Ce="numeric",ua="short",Ts="long",$T={year:Ce,month:Ce,day:Ce},_7={year:Ce,month:ua,day:Ce},Qie={year:Ce,month:ua,day:Ce,weekday:ua},w7={year:Ce,month:Ts,day:Ce},v7={year:Ce,month:Ts,day:Ce,weekday:Ts},b7={hour:Ce,minute:Ce},S7={hour:Ce,minute:Ce,second:Ce},T7={hour:Ce,minute:Ce,second:Ce,timeZoneName:ua},x7={hour:Ce,minute:Ce,second:Ce,timeZoneName:Ts},E7={hour:Ce,minute:Ce,hourCycle:"h23"},$7={hour:Ce,minute:Ce,second:Ce,hourCycle:"h23"},M7={hour:Ce,minute:Ce,second:Ce,hourCycle:"h23",timeZoneName:ua},I7={hour:Ce,minute:Ce,second:Ce,hourCycle:"h23",timeZoneName:Ts},P7={year:Ce,month:Ce,day:Ce,hour:Ce,minute:Ce},C7={year:Ce,month:Ce,day:Ce,hour:Ce,minute:Ce,second:Ce},O7={year:Ce,month:ua,day:Ce,hour:Ce,minute:Ce},A7={year:Ce,month:ua,day:Ce,hour:Ce,minute:Ce,second:Ce},ese={year:Ce,month:ua,day:Ce,weekday:ua,hour:Ce,minute:Ce},k7={year:Ce,month:Ts,day:Ce,hour:Ce,minute:Ce,timeZoneName:ua},R7={year:Ce,month:Ts,day:Ce,hour:Ce,minute:Ce,second:Ce,timeZoneName:ua},L7={year:Ce,month:Ts,day:Ce,weekday:Ts,hour:Ce,minute:Ce,timeZoneName:Ts},N7={year:Ce,month:Ts,day:Ce,weekday:Ts,hour:Ce,minute:Ce,second:Ce,timeZoneName:Ts};class Dg{get type(){throw new kc}get name(){throw new kc}get ianaName(){return this.name}get isUniversal(){throw new kc}offsetName(t,n){throw new kc}formatOffset(t,n){throw new kc}offset(t){throw new kc}equals(t){throw new kc}get isValid(){throw new kc}}let vM=null;class Vx extends Dg{static get instance(){return vM===null&&(vM=new Vx),vM}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:n,locale:r}){return q7(t,n,r)}formatOffset(t,n){return Mv(this.offset(t),n)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let kS={};function tse(e){return kS[e]||(kS[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),kS[e]}const nse={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function rse(e,t){const n=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,o,a,h,f,_]=r;return[o,i,s,a,h,f,_]}function ise(e,t){const n=e.formatToParts(t),r=[];for(let i=0;i<n.length;i++){const{type:s,value:o}=n[i],a=nse[s];s==="era"?r[a]=o:yt(a)||(r[a]=parseInt(o,10))}return r}let bb={};class $s extends Dg{static create(t){return bb[t]||(bb[t]=new $s(t)),bb[t]}static resetCache(){bb={},kS={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=$s.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:n,locale:r}){return q7(t,n,r,this.name)}formatOffset(t,n){return Mv(this.offset(t),n)}offset(t){const n=new Date(t);if(isNaN(n))return NaN;const r=tse(this.name);let[i,s,o,a,h,f,_]=r.formatToParts?ise(r,n):rse(r,n);a==="BC"&&(i=-Math.abs(i)+1);const b=Gx({year:i,month:s,day:o,hour:h===24?0:h,minute:f,second:_,millisecond:0});let T=+n;const M=T%1e3;return T-=M>=0?M:1e3+M,(b-T)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let EF={};function sse(e,t={}){const n=JSON.stringify([e,t]);let r=EF[n];return r||(r=new Intl.ListFormat(e,t),EF[n]=r),r}let L3={};function N3(e,t={}){const n=JSON.stringify([e,t]);let r=L3[n];return r||(r=new Intl.DateTimeFormat(e,t),L3[n]=r),r}let D3={};function ose(e,t={}){const n=JSON.stringify([e,t]);let r=D3[n];return r||(r=new Intl.NumberFormat(e,t),D3[n]=r),r}let F3={};function ase(e,t={}){const{base:n,...r}=t,i=JSON.stringify([e,r]);let s=F3[i];return s||(s=new Intl.RelativeTimeFormat(e,t),F3[i]=s),s}let mw=null;function lse(){return mw||(mw=new Intl.DateTimeFormat().resolvedOptions().locale,mw)}let $F={};function use(e){let t=$F[e];if(!t){const n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,$F[e]=t}return t}function cse(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(n===-1)return[e];{let r,i;try{r=N3(e).resolvedOptions(),i=e}catch{const h=e.substring(0,n);r=N3(h).resolvedOptions(),i=h}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function dse(e,t,n){return(n||t)&&(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`)),e}function hse(e){const t=[];for(let n=1;n<=12;n++){const r=ut.utc(2009,n,1);t.push(e(r))}return t}function pse(e){const t=[];for(let n=1;n<=7;n++){const r=ut.utc(2016,11,13+n);t.push(e(r))}return t}function Sb(e,t,n,r){const i=e.listingMode();return i==="error"?null:i==="en"?n(t):r(t)}function fse(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class mse{constructor(t,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=ose(t,a)}}format(t){if(this.inf){const n=this.floor?Math.floor(t):t;return this.inf.format(n)}else{const n=this.floor?Math.floor(t):Fk(t,3);return Yn(n,this.padTo)}}}class yse{constructor(t,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&$s.create(a).valid?(i=a,this.dt=t):(i="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,i=t.zone.name):(i="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=N3(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(n=>{if(n.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:r}}else return n}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class gse{constructor(t,n,r){this.opts={style:"long",...r},!n&&G7()&&(this.rtf=ase(t,r))}format(t,n){return this.rtf?this.rtf.format(t,n):zse(n,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,n){return this.rtf?this.rtf.formatToParts(t,n):[]}}const _se={firstDay:1,minimalDays:4,weekend:[6,7]};class Yt{static fromOpts(t){return Yt.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,n,r,i,s=!1){const o=t||Fn.defaultLocale,a=o||(s?"en-US":lse()),h=n||Fn.defaultNumberingSystem,f=r||Fn.defaultOutputCalendar,_=j3(i)||Fn.defaultWeekSettings;return new Yt(a,h,f,_,o)}static resetCache(){mw=null,L3={},D3={},F3={}}static fromObject({locale:t,numberingSystem:n,outputCalendar:r,weekSettings:i}={}){return Yt.create(t,n,r,i)}constructor(t,n,r,i,s){const[o,a,h]=cse(t);this.locale=o,this.numberingSystem=n||a||null,this.outputCalendar=r||h||null,this.weekSettings=i,this.intl=dse(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=fse(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&n?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Yt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,j3(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,n=!1){return Sb(this,t,Z7,()=>{const r=n?{month:t,day:"numeric"}:{month:t},i=n?"format":"standalone";return this.monthsCache[i][t]||(this.monthsCache[i][t]=hse(s=>this.extract(s,r,"month"))),this.monthsCache[i][t]})}weekdays(t,n=!1){return Sb(this,t,K7,()=>{const r=n?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},i=n?"format":"standalone";return this.weekdaysCache[i][t]||(this.weekdaysCache[i][t]=pse(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][t]})}meridiems(){return Sb(this,void 0,()=>X7,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ut.utc(2016,11,13,9),ut.utc(2016,11,13,19)].map(n=>this.extract(n,t,"dayperiod"))}return this.meridiemCache})}eras(t){return Sb(this,t,Q7,()=>{const n={era:t};return this.eraCache[t]||(this.eraCache[t]=[ut.utc(-40,1,1),ut.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[t]})}extract(t,n,r){const i=this.dtFormatter(t,n),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(t={}){return new mse(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,n={}){return new yse(t,this.intl,n)}relFormatter(t={}){return new gse(this.intl,this.isEnglish(),t)}listFormatter(t={}){return sse(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:B7()?use(this.locale):_se}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let bM=null;class Nr extends Dg{static get utcInstance(){return bM===null&&(bM=new Nr(0)),bM}static instance(t){return t===0?Nr.utcInstance:new Nr(t)}static parseSpecifier(t){if(t){const n=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new Nr(Bx(n[1],n[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Mv(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Mv(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,n){return Mv(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class wse extends Dg{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function bd(e,t){if(yt(e)||e===null)return t;if(e instanceof Dg)return e;if(Ese(e)){const n=e.toLowerCase();return n==="default"?t:n==="local"||n==="system"?Vx.instance:n==="utc"||n==="gmt"?Nr.utcInstance:Nr.parseSpecifier(n)||$s.create(e)}else return kd(e)?Nr.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new wse(e)}const Rk={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},MF={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},vse=Rk.hanidec.replace(/[\[|\]]/g,"").split("");function bse(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);if(e[n].search(Rk.hanidec)!==-1)t+=vse.indexOf(e[n]);else for(const i in MF){const[s,o]=MF[i];r>=s&&r<=o&&(t+=r-s)}}return parseInt(t,10)}else return t}let Bm={};function Sse(){Bm={}}function Co({numberingSystem:e},t=""){const n=e||"latn";return Bm[n]||(Bm[n]={}),Bm[n][t]||(Bm[n][t]=new RegExp(`${Rk[n]}${t}`)),Bm[n][t]}let IF=()=>Date.now(),PF="system",CF=null,OF=null,AF=null,kF=60,RF,LF=null;class Fn{static get now(){return IF}static set now(t){IF=t}static set defaultZone(t){PF=t}static get defaultZone(){return bd(PF,Vx.instance)}static get defaultLocale(){return CF}static set defaultLocale(t){CF=t}static get defaultNumberingSystem(){return OF}static set defaultNumberingSystem(t){OF=t}static get defaultOutputCalendar(){return AF}static set defaultOutputCalendar(t){AF=t}static get defaultWeekSettings(){return LF}static set defaultWeekSettings(t){LF=j3(t)}static get twoDigitCutoffYear(){return kF}static set twoDigitCutoffYear(t){kF=t%100}static get throwOnInvalid(){return RF}static set throwOnInvalid(t){RF=t}static resetCaches(){Yt.resetCache(),$s.resetCache(),ut.resetCache(),Sse()}}class ra{constructor(t,n){this.reason=t,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const D7=[0,31,59,90,120,151,181,212,243,273,304,334],F7=[0,31,60,91,121,152,182,213,244,274,305,335];function oo(e,t){return new ra("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function Lk(e,t,n){const r=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function j7(e,t,n){return n+(F0(e)?F7:D7)[t-1]}function z7(e,t){const n=F0(e)?F7:D7,r=n.findIndex(s=>s<t),i=t-n[r];return{month:r+1,day:i}}function Nk(e,t){return(e-t+7)%7+1}function MT(e,t=4,n=1){const{year:r,month:i,day:s}=e,o=j7(r,i,s),a=Nk(Lk(r,i,s),n);let h=Math.floor((o-a+14-t)/7),f;return h<1?(f=r-1,h=r0(f,t,n)):h>r0(r,t,n)?(f=r+1,h=1):f=r,{weekYear:f,weekNumber:h,weekday:a,...qx(e)}}function NF(e,t=4,n=1){const{weekYear:r,weekNumber:i,weekday:s}=e,o=Nk(Lk(r,1,t),n),a=Xy(r);let h=i*7+s-o-7+t,f;h<1?(f=r-1,h+=Xy(f)):h>a?(f=r+1,h-=Xy(r)):f=r;const{month:_,day:w}=z7(f,h);return{year:f,month:_,day:w,...qx(e)}}function SM(e){const{year:t,month:n,day:r}=e,i=j7(t,n,r);return{year:t,ordinal:i,...qx(e)}}function DF(e){const{year:t,ordinal:n}=e,{month:r,day:i}=z7(t,n);return{year:t,month:r,day:i,...qx(e)}}function FF(e,t){if(!yt(e.localWeekday)||!yt(e.localWeekNumber)||!yt(e.localWeekYear)){if(!yt(e.weekday)||!yt(e.weekNumber)||!yt(e.weekYear))throw new Gy("Cannot mix locale-based week fields with ISO-based week fields");return yt(e.localWeekday)||(e.weekday=e.localWeekday),yt(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),yt(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Tse(e,t=4,n=1){const r=Ux(e.weekYear),i=ao(e.weekNumber,1,r0(e.weekYear,t,n)),s=ao(e.weekday,1,7);return r?i?s?!1:oo("weekday",e.weekday):oo("week",e.weekNumber):oo("weekYear",e.weekYear)}function xse(e){const t=Ux(e.year),n=ao(e.ordinal,1,Xy(e.year));return t?n?!1:oo("ordinal",e.ordinal):oo("year",e.year)}function V7(e){const t=Ux(e.year),n=ao(e.month,1,12),r=ao(e.day,1,IT(e.year,e.month));return t?n?r?!1:oo("day",e.day):oo("month",e.month):oo("year",e.year)}function U7(e){const{hour:t,minute:n,second:r,millisecond:i}=e,s=ao(t,0,23)||t===24&&n===0&&r===0&&i===0,o=ao(n,0,59),a=ao(r,0,59),h=ao(i,0,999);return s?o?a?h?!1:oo("millisecond",i):oo("second",r):oo("minute",n):oo("hour",t)}function yt(e){return typeof e>"u"}function kd(e){return typeof e=="number"}function Ux(e){return typeof e=="number"&&e%1===0}function Ese(e){return typeof e=="string"}function $se(e){return Object.prototype.toString.call(e)==="[object Date]"}function G7(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function B7(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Mse(e){return Array.isArray(e)?e:[e]}function jF(e,t,n){if(e.length!==0)return e.reduce((r,i)=>{const s=[t(i),i];return r&&n(r[0],s[0])===r[0]?r:s},null)[1]}function Ise(e,t){return t.reduce((n,r)=>(n[r]=e[r],n),{})}function vg(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function j3(e){if(e==null)return null;if(typeof e!="object")throw new ei("Week settings must be an object");if(!ao(e.firstDay,1,7)||!ao(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!ao(t,1,7)))throw new ei("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function ao(e,t,n){return Ux(e)&&e>=t&&e<=n}function Pse(e,t){return e-t*Math.floor(e/t)}function Yn(e,t=2){const n=e<0;let r;return n?r="-"+(""+-e).padStart(t,"0"):r=(""+e).padStart(t,"0"),r}function fd(e){if(!(yt(e)||e===null||e===""))return parseInt(e,10)}function Vh(e){if(!(yt(e)||e===null||e===""))return parseFloat(e)}function Dk(e){if(!(yt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function Fk(e,t,n=!1){const r=10**t;return(n?Math.trunc:Math.round)(e*r)/r}function F0(e){return e%4===0&&(e%100!==0||e%400===0)}function Xy(e){return F0(e)?366:365}function IT(e,t){const n=Pse(t-1,12)+1,r=e+(t-n)/12;return n===2?F0(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function Gx(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function zF(e,t,n){return-Nk(Lk(e,1,t),n)+t-1}function r0(e,t=4,n=1){const r=zF(e,t,n),i=zF(e+1,t,n);return(Xy(e)-r+i)/7}function z3(e){return e>99?e:e>Fn.twoDigitCutoffYear?1900+e:2e3+e}function q7(e,t,n,r=null){const i=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(n,o).formatToParts(i).find(h=>h.type.toLowerCase()==="timezonename");return a?a.value:null}function Bx(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const r=parseInt(t,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function H7(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new ei(`Invalid unit value ${e}`);return t}function PT(e,t){const n={};for(const r in e)if(vg(e,r)){const i=e[r];if(i==null)continue;n[t(r)]=H7(i)}return n}function Mv(e,t){const n=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),i=e>=0?"+":"-";switch(t){case"short":return`${i}${Yn(n,2)}:${Yn(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${Yn(n,2)}${Yn(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function qx(e){return Ise(e,["hour","minute","second","millisecond"])}const Cse=["January","February","March","April","May","June","July","August","September","October","November","December"],W7=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ose=["J","F","M","A","M","J","J","A","S","O","N","D"];function Z7(e){switch(e){case"narrow":return[...Ose];case"short":return[...W7];case"long":return[...Cse];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const J7=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Y7=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Ase=["M","T","W","T","F","S","S"];function K7(e){switch(e){case"narrow":return[...Ase];case"short":return[...Y7];case"long":return[...J7];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const X7=["AM","PM"],kse=["Before Christ","Anno Domini"],Rse=["BC","AD"],Lse=["B","A"];function Q7(e){switch(e){case"narrow":return[...Lse];case"short":return[...Rse];case"long":return[...kse];default:return null}}function Nse(e){return X7[e.hour<12?0:1]}function Dse(e,t){return K7(t)[e.weekday-1]}function Fse(e,t){return Z7(t)[e.month-1]}function jse(e,t){return Q7(t)[e.year<0?0:1]}function zse(e,t,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(n==="auto"&&s){const w=e==="days";switch(t){case 1:return w?"tomorrow":`next ${i[e][0]}`;case-1:return w?"yesterday":`last ${i[e][0]}`;case 0:return w?"today":`this ${i[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),h=a===1,f=i[e],_=r?h?f[1]:f[2]||f[1]:h?i[e][0]:e;return o?`${a} ${_} ago`:`in ${a} ${_}`}function VF(e,t){let n="";for(const r of e)r.literal?n+=r.val:n+=t(r.val);return n}const Vse={D:$T,DD:_7,DDD:w7,DDDD:v7,t:b7,tt:S7,ttt:T7,tttt:x7,T:E7,TT:$7,TTT:M7,TTTT:I7,f:P7,ff:O7,fff:k7,ffff:L7,F:C7,FF:A7,FFF:R7,FFFF:N7};class ri{static create(t,n={}){return new ri(t,n)}static parseFormat(t){let n=null,r="",i=!1;const s=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),n=null,r="",i=!i):i||a===n?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,n=a)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(t){return Vse[t]}constructor(t,n){this.opts=n,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...n}).format()}dtFormatter(t,n={}){return this.loc.dtFormatter(t,{...this.opts,...n})}formatDateTime(t,n){return this.dtFormatter(t,n).format()}formatDateTimeParts(t,n){return this.dtFormatter(t,n).formatToParts()}formatInterval(t,n){return this.dtFormatter(t.start,n).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,n){return this.dtFormatter(t,n).resolvedOptions()}num(t,n=0){if(this.opts.forceSimple)return Yn(t,n);const r={...this.opts};return n>0&&(r.padTo=n),this.loc.numberFormatter(r).format(t)}formatDateTimeFromString(t,n){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(T,M)=>this.loc.extract(t,T,M),o=T=>t.isOffsetFixed&&t.offset===0&&T.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,T.format):"",a=()=>r?Nse(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),h=(T,M)=>r?Fse(t,T):s(M?{month:T}:{month:T,day:"numeric"},"month"),f=(T,M)=>r?Dse(t,T):s(M?{weekday:T}:{weekday:T,month:"long",day:"numeric"},"weekday"),_=T=>{const M=ri.macroTokenToFormatOpts(T);return M?this.formatWithSystemDefault(t,M):T},w=T=>r?jse(t,T):s({era:T},"era"),b=T=>{switch(T){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(t.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return f("short",!0);case"cccc":return f("long",!0);case"ccccc":return f("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return f("short",!1);case"EEEE":return f("long",!1);case"EEEEE":return f("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return h("short",!0);case"LLLL":return h("long",!0);case"LLLLL":return h("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(t.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return h("short",!1);case"MMMM":return h("long",!1);case"MMMMM":return h("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(t.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return w("short");case"GG":return w("long");case"GGGGG":return w("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return _(T)}};return VF(ri.parseFormat(n),b)}formatDurationFromString(t,n){const r=h=>{switch(h[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=h=>f=>{const _=r(f);return _?this.num(h.get(_),f.length):f},s=ri.parseFormat(n),o=s.reduce((h,{literal:f,val:_})=>f?h:h.concat(_),[]),a=t.shiftTo(...o.map(r).filter(h=>h));return VF(s,i(a))}}const eG=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Fg(...e){const t=e.reduce((n,r)=>n+r.source,"");return RegExp(`^${t}$`)}function jg(...e){return t=>e.reduce(([n,r,i],s)=>{const[o,a,h]=s(t,i);return[{...n,...o},a||r,h]},[{},null,1]).slice(0,2)}function zg(e,...t){if(e==null)return[null,null];for(const[n,r]of t){const i=n.exec(e);if(i)return r(i)}return[null,null]}function tG(...e){return(t,n)=>{const r={};let i;for(i=0;i<e.length;i++)r[e[i]]=fd(t[n+i]);return[r,null,n+i]}}const nG=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Use=`(?:${nG.source}?(?:\\[(${eG.source})\\])?)?`,jk=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,rG=RegExp(`${jk.source}${Use}`),zk=RegExp(`(?:T${rG.source})?`),Gse=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Bse=/(\d{4})-?W(\d\d)(?:-?(\d))?/,qse=/(\d{4})-?(\d{3})/,Hse=tG("weekYear","weekNumber","weekDay"),Wse=tG("year","ordinal"),Zse=/(\d{4})-(\d\d)-(\d\d)/,iG=RegExp(`${jk.source} ?(?:${nG.source}|(${eG.source}))?`),Jse=RegExp(`(?: ${iG.source})?`);function Qy(e,t,n){const r=e[t];return yt(r)?n:fd(r)}function Yse(e,t){return[{year:Qy(e,t),month:Qy(e,t+1,1),day:Qy(e,t+2,1)},null,t+3]}function Vg(e,t){return[{hours:Qy(e,t,0),minutes:Qy(e,t+1,0),seconds:Qy(e,t+2,0),milliseconds:Dk(e[t+3])},null,t+4]}function j0(e,t){const n=!e[t]&&!e[t+1],r=Bx(e[t+1],e[t+2]),i=n?null:Nr.instance(r);return[{},i,t+3]}function z0(e,t){const n=e[t]?$s.create(e[t]):null;return[{},n,t+1]}const Kse=RegExp(`^T?${jk.source}$`),Xse=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Qse(e){const[t,n,r,i,s,o,a,h,f]=e,_=t[0]==="-",w=h&&h[0]==="-",b=(T,M=!1)=>T!==void 0&&(M||T&&_)?-T:T;return[{years:b(Vh(n)),months:b(Vh(r)),weeks:b(Vh(i)),days:b(Vh(s)),hours:b(Vh(o)),minutes:b(Vh(a)),seconds:b(Vh(h),h==="-0"),milliseconds:b(Dk(f),w)}]}const eoe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Vk(e,t,n,r,i,s,o){const a={year:t.length===2?z3(fd(t)):fd(t),month:W7.indexOf(n)+1,day:fd(r),hour:fd(i),minute:fd(s)};return o&&(a.second=fd(o)),e&&(a.weekday=e.length>3?J7.indexOf(e)+1:Y7.indexOf(e)+1),a}const toe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function noe(e){const[,t,n,r,i,s,o,a,h,f,_,w]=e,b=Vk(t,i,r,n,s,o,a);let T;return h?T=eoe[h]:f?T=0:T=Bx(_,w),[b,new Nr(T)]}function roe(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const ioe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,soe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ooe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function UF(e){const[,t,n,r,i,s,o,a]=e;return[Vk(t,i,r,n,s,o,a),Nr.utcInstance]}function aoe(e){const[,t,n,r,i,s,o,a]=e;return[Vk(t,a,n,r,i,s,o),Nr.utcInstance]}const loe=Fg(Gse,zk),uoe=Fg(Bse,zk),coe=Fg(qse,zk),doe=Fg(rG),sG=jg(Yse,Vg,j0,z0),hoe=jg(Hse,Vg,j0,z0),poe=jg(Wse,Vg,j0,z0),foe=jg(Vg,j0,z0);function moe(e){return zg(e,[loe,sG],[uoe,hoe],[coe,poe],[doe,foe])}function yoe(e){return zg(roe(e),[toe,noe])}function goe(e){return zg(e,[ioe,UF],[soe,UF],[ooe,aoe])}function _oe(e){return zg(e,[Xse,Qse])}const woe=jg(Vg);function voe(e){return zg(e,[Kse,woe])}const boe=Fg(Zse,Jse),Soe=Fg(iG),Toe=jg(Vg,j0,z0);function xoe(e){return zg(e,[boe,sG],[Soe,Toe])}const GF="Invalid Duration",oG={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Eoe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...oG},Bs=146097/400,Pm=146097/4800,$oe={years:{quarters:4,months:12,weeks:Bs/7,days:Bs,hours:Bs*24,minutes:Bs*24*60,seconds:Bs*24*60*60,milliseconds:Bs*24*60*60*1e3},quarters:{months:3,weeks:Bs/28,days:Bs/4,hours:Bs*24/4,minutes:Bs*24*60/4,seconds:Bs*24*60*60/4,milliseconds:Bs*24*60*60*1e3/4},months:{weeks:Pm/7,days:Pm,hours:Pm*24,minutes:Pm*24*60,seconds:Pm*24*60*60,milliseconds:Pm*24*60*60*1e3},...oG},Hp=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Moe=Hp.slice(0).reverse();function Rc(e,t,n=!1){const r={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Dt(r)}function aG(e,t){let n=t.milliseconds??0;for(const r of Moe.slice(1))t[r]&&(n+=t[r]*e[r].milliseconds);return n}function BF(e,t){const n=aG(e,t)<0?-1:1;Hp.reduceRight((r,i)=>{if(yt(t[i]))return r;if(r){const s=t[r]*n,o=e[i][r],a=Math.floor(s/o);t[i]+=a*n,t[r]-=a*o*n}return i},null),Hp.reduce((r,i)=>{if(yt(t[i]))return r;if(r){const s=t[r]%1;t[r]-=s,t[i]+=s*e[r][i]}return i},null)}function Ioe(e){const t={};for(const[n,r]of Object.entries(e))r!==0&&(t[n]=r);return t}class Dt{constructor(t){const n=t.conversionAccuracy==="longterm"||!1;let r=n?$oe:Eoe;t.matrix&&(r=t.matrix),this.values=t.values,this.loc=t.loc||Yt.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(t,n){return Dt.fromObject({milliseconds:t},n)}static fromObject(t,n={}){if(t==null||typeof t!="object")throw new ei(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Dt({values:PT(t,Dt.normalizeUnit),loc:Yt.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(t){if(kd(t))return Dt.fromMillis(t);if(Dt.isDuration(t))return t;if(typeof t=="object")return Dt.fromObject(t);throw new ei(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,n){const[r]=_oe(t);return r?Dt.fromObject(r,n):Dt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,n){const[r]=voe(t);return r?Dt.fromObject(r,n):Dt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,n=null){if(!t)throw new ei("need to specify a reason the Duration is invalid");const r=t instanceof ra?t:new ra(t,n);if(Fn.throwOnInvalid)throw new Xie(r);return new Dt({invalid:r})}static normalizeUnit(t){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!n)throw new g7(t);return n}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,n={}){const r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?ri.create(this.loc,r).formatDurationFromString(this,t):GF}toHuman(t={}){if(!this.isValid)return GF;const n=Hp.map(r=>{const i=this.values[r];return yt(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=Fk(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},ut.fromMillis(n,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?aG(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const n=Dt.fromDurationLike(t),r={};for(const i of Hp)(vg(n.values,i)||vg(this.values,i))&&(r[i]=n.get(i)+this.get(i));return Rc(this,{values:r},!0)}minus(t){if(!this.isValid)return this;const n=Dt.fromDurationLike(t);return this.plus(n.negate())}mapUnits(t){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=H7(t(this.values[r],r));return Rc(this,{values:n},!0)}get(t){return this[Dt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const n={...this.values,...PT(t,Dt.normalizeUnit)};return Rc(this,{values:n})}reconfigure({locale:t,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:n}),matrix:i,conversionAccuracy:r};return Rc(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return BF(this.matrix,t),Rc(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=Ioe(this.normalize().shiftToAll().toObject());return Rc(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>Dt.normalizeUnit(o));const n={},r={},i=this.toObject();let s;for(const o of Hp)if(t.indexOf(o)>=0){s=o;let a=0;for(const f in r)a+=this.matrix[f][o]*r[f],r[f]=0;kd(i[o])&&(a+=i[o]);const h=Math.trunc(a);n[o]=h,r[o]=(a*1e3-h*1e3)/1e3}else kd(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(n[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return BF(this.matrix,n),Rc(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=this.values[n]===0?0:-this.values[n];return Rc(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of Hp)if(!n(this.values[r],t.values[r]))return!1;return!0}}const Cm="Invalid Interval";function Poe(e,t){return!e||!e.isValid?Dn.invalid("missing or invalid start"):!t||!t.isValid?Dn.invalid("missing or invalid end"):t<e?Dn.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Dn{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,n=null){if(!t)throw new ei("need to specify a reason the Interval is invalid");const r=t instanceof ra?t:new ra(t,n);if(Fn.throwOnInvalid)throw new Kie(r);return new Dn({invalid:r})}static fromDateTimes(t,n){const r=z_(t),i=z_(n),s=Poe(r,i);return s??new Dn({start:r,end:i})}static after(t,n){const r=Dt.fromDurationLike(n),i=z_(t);return Dn.fromDateTimes(i,i.plus(r))}static before(t,n){const r=Dt.fromDurationLike(n),i=z_(t);return Dn.fromDateTimes(i.minus(r),i)}static fromISO(t,n){const[r,i]=(t||"").split("/",2);if(r&&i){let s,o;try{s=ut.fromISO(r,n),o=s.isValid}catch{o=!1}let a,h;try{a=ut.fromISO(i,n),h=a.isValid}catch{h=!1}if(o&&h)return Dn.fromDateTimes(s,a);if(o){const f=Dt.fromISO(i,n);if(f.isValid)return Dn.after(s,f)}else if(h){const f=Dt.fromISO(r,n);if(f.isValid)return Dn.before(a,f)}}return Dn.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",n){if(!this.isValid)return NaN;const r=this.start.startOf(t,n);let i;return n!=null&&n.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(t,n),Math.floor(i.diff(r,t).get(t))+(i.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:n}={}){return this.isValid?Dn.fromDateTimes(t||this.s,n||this.e):this}splitAt(...t){if(!this.isValid)return[];const n=t.map(z_).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=n[s]||this.e,a=+o>+this.e?this.e:o;r.push(Dn.fromDateTimes(i,a)),i=a,s+=1}return r}splitBy(t){const n=Dt.fromDurationLike(t);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(n.mapUnits(h=>h*i));s=+a>+this.e?this.e:a,o.push(Dn.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const n=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return n>=r?null:Dn.fromDateTimes(n,r)}union(t){if(!this.isValid)return this;const n=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return Dn.fromDateTimes(n,r)}static merge(t){const[n,r]=t.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&n.push(r),n}static xor(t){let n=null,r=0;const i=[],s=t.map(h=>[{time:h.s,type:"s"},{time:h.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((h,f)=>h.time-f.time);for(const h of a)r+=h.type==="s"?1:-1,r===1?n=h.time:(n&&+n!=+h.time&&i.push(Dn.fromDateTimes(n,h.time)),n=null);return Dn.merge(i)}difference(...t){return Dn.xor([this].concat(t)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Cm}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=$T,n={}){return this.isValid?ri.create(this.s.loc.clone(n),t).formatInterval(this):Cm}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Cm}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Cm}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Cm}toFormat(t,{separator:n="  "}={}){return this.isValid?`${this.s.toFormat(t)}${n}${this.e.toFormat(t)}`:Cm}toDuration(t,n){return this.isValid?this.e.diff(this.s,t,n):Dt.invalid(this.invalidReason)}mapEndpoints(t){return Dn.fromDateTimes(t(this.s),t(this.e))}}class Tb{static hasDST(t=Fn.defaultZone){const n=ut.now().setZone(t).set({month:12});return!t.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(t){return $s.isValidZone(t)}static normalizeZone(t){return bd(t,Fn.defaultZone)}static getStartOfWeek({locale:t=null,locObj:n=null}={}){return(n||Yt.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:n=null}={}){return(n||Yt.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:n=null}={}){return(n||Yt.create(t)).getWeekendDays().slice()}static months(t="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Yt.create(n,r,s)).months(t)}static monthsFormat(t="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Yt.create(n,r,s)).months(t,!0)}static weekdays(t="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Yt.create(n,r,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Yt.create(n,r,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Yt.create(t).meridiems()}static eras(t="short",{locale:n=null}={}){return Yt.create(n,null,"gregory").eras(t)}static features(){return{relative:G7(),localeWeek:B7()}}}function qF(e,t){const n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(t)-n(e);return Math.floor(Dt.fromMillis(r).as("days"))}function Coe(e,t,n){const r=[["years",(h,f)=>f.year-h.year],["quarters",(h,f)=>f.quarter-h.quarter+(f.year-h.year)*4],["months",(h,f)=>f.month-h.month+(f.year-h.year)*12],["weeks",(h,f)=>{const _=qF(h,f);return(_-_%7)/7}],["days",qF]],i={},s=e;let o,a;for(const[h,f]of r)n.indexOf(h)>=0&&(o=h,i[h]=f(e,t),a=s.plus(i),a>t?(i[h]--,e=s.plus(i),e>t&&(a=e,i[h]--,e=s.plus(i))):e=a);return[e,i,a,o]}function Ooe(e,t,n,r){let[i,s,o,a]=Coe(e,t,n);const h=t-i,f=n.filter(w=>["hours","minutes","seconds","milliseconds"].indexOf(w)>=0);f.length===0&&(o<t&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+h/(o-i)));const _=Dt.fromObject(s,r);return f.length>0?Dt.fromMillis(h,r).shiftTo(...f).plus(_):_}const Aoe="missing Intl.DateTimeFormat.formatToParts support";function Ht(e,t=n=>n){return{regex:e,deser:([n])=>t(bse(n))}}const koe="",lG=`[ ${koe}]`,uG=new RegExp(lG,"g");function Roe(e){return e.replace(/\./g,"\\.?").replace(uG,lG)}function HF(e){return e.replace(/\./g,"").replace(uG," ").toLowerCase()}function Oo(e,t){return e===null?null:{regex:RegExp(e.map(Roe).join("|")),deser:([n])=>e.findIndex(r=>HF(n)===HF(r))+t}}function WF(e,t){return{regex:e,deser:([,n,r])=>Bx(n,r),groups:t}}function xb(e){return{regex:e,deser:([t])=>t}}function Loe(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Noe(e,t){const n=Co(t),r=Co(t,"{2}"),i=Co(t,"{3}"),s=Co(t,"{4}"),o=Co(t,"{6}"),a=Co(t,"{1,2}"),h=Co(t,"{1,3}"),f=Co(t,"{1,6}"),_=Co(t,"{1,9}"),w=Co(t,"{2,4}"),b=Co(t,"{4,6}"),T=C=>({regex:RegExp(Loe(C.val)),deser:([N])=>N,literal:!0}),I=(C=>{if(e.literal)return T(C);switch(C.val){case"G":return Oo(t.eras("short"),0);case"GG":return Oo(t.eras("long"),0);case"y":return Ht(f);case"yy":return Ht(w,z3);case"yyyy":return Ht(s);case"yyyyy":return Ht(b);case"yyyyyy":return Ht(o);case"M":return Ht(a);case"MM":return Ht(r);case"MMM":return Oo(t.months("short",!0),1);case"MMMM":return Oo(t.months("long",!0),1);case"L":return Ht(a);case"LL":return Ht(r);case"LLL":return Oo(t.months("short",!1),1);case"LLLL":return Oo(t.months("long",!1),1);case"d":return Ht(a);case"dd":return Ht(r);case"o":return Ht(h);case"ooo":return Ht(i);case"HH":return Ht(r);case"H":return Ht(a);case"hh":return Ht(r);case"h":return Ht(a);case"mm":return Ht(r);case"m":return Ht(a);case"q":return Ht(a);case"qq":return Ht(r);case"s":return Ht(a);case"ss":return Ht(r);case"S":return Ht(h);case"SSS":return Ht(i);case"u":return xb(_);case"uu":return xb(a);case"uuu":return Ht(n);case"a":return Oo(t.meridiems(),0);case"kkkk":return Ht(s);case"kk":return Ht(w,z3);case"W":return Ht(a);case"WW":return Ht(r);case"E":case"c":return Ht(n);case"EEE":return Oo(t.weekdays("short",!1),1);case"EEEE":return Oo(t.weekdays("long",!1),1);case"ccc":return Oo(t.weekdays("short",!0),1);case"cccc":return Oo(t.weekdays("long",!0),1);case"Z":case"ZZ":return WF(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return WF(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return xb(/[a-z_+-/]{1,256}?/i);case" ":return xb(/[^\S\n\r]/);default:return T(C)}})(e)||{invalidReason:Aoe};return I.token=e,I}const Doe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Foe(e,t,n){const{type:r,value:i}=e;if(r==="literal"){const h=/^\s+$/.test(i);return{literal:!h,val:h?" ":i}}const s=t[r];let o=r;r==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let a=Doe[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function joe(e){return[`^${e.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,e]}function zoe(e,t,n){const r=e.match(t);if(r){const i={};let s=1;for(const o in n)if(vg(n,o)){const a=n[o],h=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(r.slice(s,s+h))),s+=h}return[r,i]}else return[r,{}]}function Voe(e){const t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,r;return yt(e.z)||(n=$s.create(e.z)),yt(e.Z)||(n||(n=new Nr(e.Z)),r=e.Z),yt(e.q)||(e.M=(e.q-1)*3+1),yt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),yt(e.u)||(e.S=Dk(e.u)),[Object.keys(e).reduce((s,o)=>{const a=t(o);return a&&(s[a]=e[o]),s},{}),n,r]}let TM=null;function Uoe(){return TM||(TM=ut.fromMillis(1555555555555)),TM}function Goe(e,t){if(e.literal)return e;const n=ri.macroTokenToFormatOpts(e.val),r=pG(n,t);return r==null||r.includes(void 0)?e:r}function cG(e,t){return Array.prototype.concat(...e.map(n=>Goe(n,t)))}class dG{constructor(t,n){if(this.locale=t,this.format=n,this.tokens=cG(ri.parseFormat(n),t),this.units=this.tokens.map(r=>Noe(r,t)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,i]=joe(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(t){if(this.isValid){const[n,r]=zoe(t,this.regex,this.handlers),[i,s,o]=r?Voe(r):[null,null,void 0];if(vg(r,"a")&&vg(r,"H"))throw new Gy("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:n,matches:r,result:i,zone:s,specificOffset:o}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function hG(e,t,n){return new dG(e,n).explainFromTokens(t)}function Boe(e,t,n){const{result:r,zone:i,specificOffset:s,invalidReason:o}=hG(e,t,n);return[r,i,s,o]}function pG(e,t){if(!e)return null;const r=ri.create(t,e).dtFormatter(Uoe()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>Foe(o,e,s))}const xM="Invalid DateTime",qoe=864e13;function yw(e){return new ra("unsupported zone",`the zone "${e.name}" is not supported`)}function EM(e){return e.weekData===null&&(e.weekData=MT(e.c)),e.weekData}function $M(e){return e.localWeekData===null&&(e.localWeekData=MT(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Uh(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new ut({...n,...t,old:n})}function fG(e,t,n){let r=e-t*60*1e3;const i=n.offset(r);if(t===i)return[r,t];r-=(i-t)*60*1e3;const s=n.offset(r);return i===s?[r,i]:[e-Math.min(i,s)*60*1e3,Math.max(i,s)]}function Eb(e,t){e+=t*60*1e3;const n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function RS(e,t,n){return fG(Gx(e),t,n)}function ZF(e,t){const n=e.o,r=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:r,month:i,day:Math.min(e.c.day,IT(r,i))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=Dt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=Gx(s);let[h,f]=fG(a,n,e.zone);return o!==0&&(h+=o,f=e.zone.offset(h)),{ts:h,o:f}}function Om(e,t,n,r,i,s){const{setZone:o,zone:a}=n;if(e&&Object.keys(e).length!==0||t){const h=t||a,f=ut.fromObject(e,{...n,zone:h,specificOffset:s});return o?f:f.setZone(a)}else return ut.invalid(new ra("unparsable",`the input "${i}" can't be parsed as ${r}`))}function $b(e,t,n=!0){return e.isValid?ri.create(Yt.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function MM(e,t){const n=e.c.year>9999||e.c.year<0;let r="";return n&&e.c.year>=0&&(r+="+"),r+=Yn(e.c.year,n?6:4),t?(r+="-",r+=Yn(e.c.month),r+="-",r+=Yn(e.c.day)):(r+=Yn(e.c.month),r+=Yn(e.c.day)),r}function JF(e,t,n,r,i,s){let o=Yn(e.c.hour);return t?(o+=":",o+=Yn(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=":")):o+=Yn(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=Yn(e.c.second),(e.c.millisecond!==0||!r)&&(o+=".",o+=Yn(e.c.millisecond,3))),i&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=Yn(Math.trunc(-e.o/60)),o+=":",o+=Yn(Math.trunc(-e.o%60))):(o+="+",o+=Yn(Math.trunc(e.o/60)),o+=":",o+=Yn(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const mG={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Hoe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Woe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},yG=["year","month","day","hour","minute","second","millisecond"],Zoe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Joe=["year","ordinal","hour","minute","second","millisecond"];function Yoe(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new g7(e);return t}function YF(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Yoe(e)}}function Koe(e){return NS[e]||(LS===void 0&&(LS=Fn.now()),NS[e]=e.offset(LS)),NS[e]}function KF(e,t){const n=bd(t.zone,Fn.defaultZone);if(!n.isValid)return ut.invalid(yw(n));const r=Yt.fromObject(t);let i,s;if(yt(e.year))i=Fn.now();else{for(const h of yG)yt(e[h])&&(e[h]=mG[h]);const o=V7(e)||U7(e);if(o)return ut.invalid(o);const a=Koe(n);[i,s]=RS(e,a,n)}return new ut({ts:i,zone:n,loc:r,o:s})}function XF(e,t,n){const r=yt(n.round)?!0:n.round,i=(o,a)=>(o=Fk(o,r||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(o,a)),s=o=>n.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(n.unit)return i(s(n.unit),n.unit);for(const o of n.units){const a=s(o);if(Math.abs(a)>=1)return i(a,o)}return i(e>t?-0:0,n.units[n.units.length-1])}function QF(e){let t={},n;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],n=Array.from(e).slice(0,e.length-1)):n=Array.from(e),[t,n]}let LS,NS={};class ut{constructor(t){const n=t.zone||Fn.defaultZone;let r=t.invalid||(Number.isNaN(t.ts)?new ra("invalid input"):null)||(n.isValid?null:yw(n));this.ts=yt(t.ts)?Fn.now():t.ts;let i=null,s=null;if(!r)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(n))[i,s]=[t.old.c,t.old.o];else{const a=kd(t.o)&&!t.old?t.o:n.offset(this.ts);i=Eb(this.ts,a),r=Number.isNaN(i.year)?new ra("invalid input"):null,i=r?null:i,s=r?null:a}this._zone=n,this.loc=t.loc||Yt.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new ut({})}static local(){const[t,n]=QF(arguments),[r,i,s,o,a,h,f]=n;return KF({year:r,month:i,day:s,hour:o,minute:a,second:h,millisecond:f},t)}static utc(){const[t,n]=QF(arguments),[r,i,s,o,a,h,f]=n;return t.zone=Nr.utcInstance,KF({year:r,month:i,day:s,hour:o,minute:a,second:h,millisecond:f},t)}static fromJSDate(t,n={}){const r=$se(t)?t.valueOf():NaN;if(Number.isNaN(r))return ut.invalid("invalid input");const i=bd(n.zone,Fn.defaultZone);return i.isValid?new ut({ts:r,zone:i,loc:Yt.fromObject(n)}):ut.invalid(yw(i))}static fromMillis(t,n={}){if(kd(t))return t<-864e13||t>qoe?ut.invalid("Timestamp out of range"):new ut({ts:t,zone:bd(n.zone,Fn.defaultZone),loc:Yt.fromObject(n)});throw new ei(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,n={}){if(kd(t))return new ut({ts:t*1e3,zone:bd(n.zone,Fn.defaultZone),loc:Yt.fromObject(n)});throw new ei("fromSeconds requires a numerical input")}static fromObject(t,n={}){t=t||{};const r=bd(n.zone,Fn.defaultZone);if(!r.isValid)return ut.invalid(yw(r));const i=Yt.fromObject(n),s=PT(t,YF),{minDaysInFirstWeek:o,startOfWeek:a}=FF(s,i),h=Fn.now(),f=yt(n.specificOffset)?r.offset(h):n.specificOffset,_=!yt(s.ordinal),w=!yt(s.year),b=!yt(s.month)||!yt(s.day),T=w||b,M=s.weekYear||s.weekNumber;if((T||_)&&M)throw new Gy("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&_)throw new Gy("Can't mix ordinal dates with month/day");const I=M||s.weekday&&!T;let C,N,j=Eb(h,f);I?(C=Zoe,N=Hoe,j=MT(j,o,a)):_?(C=Joe,N=Woe,j=SM(j)):(C=yG,N=mG);let z=!1;for(const xe of C){const _e=s[xe];yt(_e)?z?s[xe]=N[xe]:s[xe]=j[xe]:z=!0}const U=I?Tse(s,o,a):_?xse(s):V7(s),K=U||U7(s);if(K)return ut.invalid(K);const J=I?NF(s,o,a):_?DF(s):s,[le,ue]=RS(J,f,r),be=new ut({ts:le,zone:r,o:ue,loc:i});return s.weekday&&T&&t.weekday!==be.weekday?ut.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${be.toISO()}`):be.isValid?be:ut.invalid(be.invalid)}static fromISO(t,n={}){const[r,i]=moe(t);return Om(r,i,n,"ISO 8601",t)}static fromRFC2822(t,n={}){const[r,i]=yoe(t);return Om(r,i,n,"RFC 2822",t)}static fromHTTP(t,n={}){const[r,i]=goe(t);return Om(r,i,n,"HTTP",n)}static fromFormat(t,n,r={}){if(yt(t)||yt(n))throw new ei("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=Yt.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,h,f,_]=Boe(o,t,n);return _?ut.invalid(_):Om(a,h,r,`format ${n}`,t,f)}static fromString(t,n,r={}){return ut.fromFormat(t,n,r)}static fromSQL(t,n={}){const[r,i]=xoe(t);return Om(r,i,n,"SQL",t)}static invalid(t,n=null){if(!t)throw new ei("need to specify a reason the DateTime is invalid");const r=t instanceof ra?t:new ra(t,n);if(Fn.throwOnInvalid)throw new Yie(r);return new ut({invalid:r})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,n={}){const r=pG(t,Yt.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(t,n={}){return cG(ri.parseFormat(t),Yt.fromObject(n)).map(i=>i.val).join("")}static resetCache(){LS=void 0,NS={}}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?EM(this).weekYear:NaN}get weekNumber(){return this.isValid?EM(this).weekNumber:NaN}get weekday(){return this.isValid?EM(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?$M(this).weekday:NaN}get localWeekNumber(){return this.isValid?$M(this).weekNumber:NaN}get localWeekYear(){return this.isValid?$M(this).weekYear:NaN}get ordinal(){return this.isValid?SM(this.c).ordinal:NaN}get monthShort(){return this.isValid?Tb.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Tb.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Tb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Tb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,n=6e4,r=Gx(this.c),i=this.zone.offset(r-t),s=this.zone.offset(r+t),o=this.zone.offset(r-i*n),a=this.zone.offset(r-s*n);if(o===a)return[this];const h=r-o*n,f=r-a*n,_=Eb(h,o),w=Eb(f,a);return _.hour===w.hour&&_.minute===w.minute&&_.second===w.second&&_.millisecond===w.millisecond?[Uh(this,{ts:h}),Uh(this,{ts:f})]:[this]}get isInLeapYear(){return F0(this.year)}get daysInMonth(){return IT(this.year,this.month)}get daysInYear(){return this.isValid?Xy(this.year):NaN}get weeksInWeekYear(){return this.isValid?r0(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?r0(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:n,numberingSystem:r,calendar:i}=ri.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(t=0,n={}){return this.setZone(Nr.instance(t),n)}toLocal(){return this.setZone(Fn.defaultZone)}setZone(t,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(t=bd(t,Fn.defaultZone),t.equals(this.zone))return this;if(t.isValid){let i=this.ts;if(n||r){const s=t.offset(this.ts),o=this.toObject();[i]=RS(o,s,t)}return Uh(this,{ts:i,zone:t})}else return ut.invalid(yw(t))}reconfigure({locale:t,numberingSystem:n,outputCalendar:r}={}){const i=this.loc.clone({locale:t,numberingSystem:n,outputCalendar:r});return Uh(this,{loc:i})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const n=PT(t,YF),{minDaysInFirstWeek:r,startOfWeek:i}=FF(n,this.loc),s=!yt(n.weekYear)||!yt(n.weekNumber)||!yt(n.weekday),o=!yt(n.ordinal),a=!yt(n.year),h=!yt(n.month)||!yt(n.day),f=a||h,_=n.weekYear||n.weekNumber;if((f||o)&&_)throw new Gy("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&o)throw new Gy("Can't mix ordinal dates with month/day");let w;s?w=NF({...MT(this.c,r,i),...n},r,i):yt(n.ordinal)?(w={...this.toObject(),...n},yt(n.day)&&(w.day=Math.min(IT(w.year,w.month),w.day))):w=DF({...SM(this.c),...n});const[b,T]=RS(w,this.o,this.zone);return Uh(this,{ts:b,o:T})}plus(t){if(!this.isValid)return this;const n=Dt.fromDurationLike(t);return Uh(this,ZF(this,n))}minus(t){if(!this.isValid)return this;const n=Dt.fromDurationLike(t).negate();return Uh(this,ZF(this,n))}startOf(t,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const r={},i=Dt.normalizeUnit(t);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(n){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(t,n){return this.isValid?this.plus({[t]:1}).startOf(t,n).minus(1):this}toFormat(t,n={}){return this.isValid?ri.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,t):xM}toLocaleString(t=$T,n={}){return this.isValid?ri.create(this.loc.clone(n),t).formatDateTime(this):xM}toLocaleParts(t={}){return this.isValid?ri.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=MM(this,o);return a+="T",a+=JF(this,o,n,r,i,s),a}toISODate({format:t="extended"}={}){return this.isValid?MM(this,t==="extended"):null}toISOWeekDate(){return $b(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+JF(this,o==="extended",n,t,r,s):null}toRFC2822(){return $b(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return $b(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?MM(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||t)&&(r&&(i+=" "),n?i+="z":t&&(i+="ZZ")),$b(this,i,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():xM}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const n={...this.c};return t.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,n="milliseconds",r={}){if(!this.isValid||!t.isValid)return Dt.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=Mse(n).map(Dt.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,h=o?t:this,f=Ooe(a,h,s,i);return o?f.negate():f}diffNow(t="milliseconds",n={}){return this.diff(ut.now(),t,n)}until(t){return this.isValid?Dn.fromDateTimes(this,t):this}hasSame(t,n,r){if(!this.isValid)return!1;const i=t.valueOf(),s=this.setZone(t.zone,{keepLocalTime:!0});return s.startOf(n,r)<=i&&i<=s.endOf(n,r)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const n=t.base||ut.fromObject({},{zone:this.zone}),r=t.padding?this<n?-t.padding:t.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(i=t.unit,s=void 0),XF(n,this.plus(r),{...t,numeric:"always",units:i,unit:s})}toRelativeCalendar(t={}){return this.isValid?XF(t.base||ut.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(ut.isDateTime))throw new ei("min requires all arguments be DateTimes");return jF(t,n=>n.valueOf(),Math.min)}static max(...t){if(!t.every(ut.isDateTime))throw new ei("max requires all arguments be DateTimes");return jF(t,n=>n.valueOf(),Math.max)}static fromFormatExplain(t,n,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=Yt.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return hG(o,t,n)}static fromStringExplain(t,n,r={}){return ut.fromFormatExplain(t,n,r)}static buildFormatParser(t,n={}){const{locale:r=null,numberingSystem:i=null}=n,s=Yt.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new dG(s,t)}static fromFormatParser(t,n,r={}){if(yt(t)||yt(n))throw new ei("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=r,o=Yt.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(n.locale))throw new ei(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${n.locale}`);const{result:a,zone:h,specificOffset:f,invalidReason:_}=n.explainFromTokens(t);return _?ut.invalid(_):Om(a,h,r,`format ${n.format}`,t,f)}static get DATE_SHORT(){return $T}static get DATE_MED(){return _7}static get DATE_MED_WITH_WEEKDAY(){return Qie}static get DATE_FULL(){return w7}static get DATE_HUGE(){return v7}static get TIME_SIMPLE(){return b7}static get TIME_WITH_SECONDS(){return S7}static get TIME_WITH_SHORT_OFFSET(){return T7}static get TIME_WITH_LONG_OFFSET(){return x7}static get TIME_24_SIMPLE(){return E7}static get TIME_24_WITH_SECONDS(){return $7}static get TIME_24_WITH_SHORT_OFFSET(){return M7}static get TIME_24_WITH_LONG_OFFSET(){return I7}static get DATETIME_SHORT(){return P7}static get DATETIME_SHORT_WITH_SECONDS(){return C7}static get DATETIME_MED(){return O7}static get DATETIME_MED_WITH_SECONDS(){return A7}static get DATETIME_MED_WITH_WEEKDAY(){return ese}static get DATETIME_FULL(){return k7}static get DATETIME_FULL_WITH_SECONDS(){return R7}static get DATETIME_HUGE(){return L7}static get DATETIME_HUGE_WITH_SECONDS(){return N7}}function z_(e){if(ut.isDateTime(e))return e;if(e&&e.valueOf&&kd(e.valueOf()))return ut.fromJSDate(e);if(e&&typeof e=="object")return ut.fromObject(e);throw new ei(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const ca="system",mf="unknown",Vd="UTC",Xoe=Intl.DateTimeFormat().resolvedOptions().timeZone,Qoe="shortOffset";function eae(e){return"timeZoneIANA"in e}function tae(e){return e.startsWith("UTC")}function CT(e,t=!1){return{json:{read:{source:e,reader:(n,r)=>r[e]?DS(r[e]):null},write:!!t&&{allowNull:!0,writer(n,r){r[e]=n?nae(n):null}}}}}function DS(e,t=ca){return e?eae(e)?e.timeZoneIANA:rae(e,t):t}function nae(e){return{timeZoneIANA:e}}function rae(e,t=ca){if(!e||!xF.has(e.timeZone))return t;const n=xF.get(e.timeZone);return tae(e.timeZone)||e.respectsDaylightSaving?n:iae(n)}function iae(e){const t=ut.local().setZone(e),n=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return n===0?"Etc/UTC":`Etc/GMT${Nr.instance(-n).formatOffset(0,"narrow")}`}function YIe(e,t,n,r,i){if(t&&i==="date")return{timeZone:Vd,timeZoneName:void 0};const s=r.timeStyle||r.hour,o=n===mf;return{timeZone:o?i==="timestamp-offset"?void 0:e??Vd:n,timeZoneName:o&&s?Qoe:void 0}}function sae(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),n=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return e===ca||e===mf||t.has(e.toLowerCase())||n.has(e.toLowerCase())}const oae={year:void 0,month:void 0,day:void 0,weekday:void 0},aae={hour:void 0,minute:void 0,second:void 0},gG={timeZone:Vd},Ca={year:"numeric",month:"numeric",day:"numeric"},V_={year:"numeric",month:"long",day:"numeric"},U_={year:"numeric",month:"short",day:"numeric"},G_={year:"numeric",month:"long",weekday:"long",day:"numeric"},md={hour:"numeric",minute:"numeric"},ep={...md,second:"numeric"},_G={hourCycle:"h23"},B_={...md,..._G},q_={...ep,..._G},wG={"short-date":Ca,"short-date-short-time":{...Ca,...md},"short-date-short-time-24":{...Ca,...B_},"short-date-long-time":{...Ca,...ep},"short-date-long-time-24":{...Ca,...q_},"short-date-le":Ca,"short-date-le-short-time":{...Ca,...md},"short-date-le-short-time-24":{...Ca,...B_},"short-date-le-long-time":{...Ca,...ep},"short-date-le-long-time-24":{...Ca,...q_},"long-month-day-year":V_,"long-month-day-year-short-time":{...V_,...md},"long-month-day-year-short-time-24":{...V_,...B_},"long-month-day-year-long-time":{...V_,...ep},"long-month-day-year-long-time-24":{...V_,...q_},"day-short-month-year":U_,"day-short-month-year-short-time":{...U_,...md},"day-short-month-year-short-time-24":{...U_,...B_},"day-short-month-year-long-time":{...U_,...ep},"day-short-month-year-long-time-24":{...U_,...q_},"long-date":G_,"long-date-short-time":{...G_,...md},"long-date-short-time-24":{...G_,...B_},"long-date-long-time":{...G_,...ep},"long-date-long-time-24":{...G_,...q_},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":md,"long-time":ep},lae=hr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),vG={ar:"ar-u-nu-latn-ca-gregory"};let V3=new WeakMap;const Hx=wG["short-date-short-time"];function uae(e){let t=V3.get(e);if(!t){const n=Zi(),r=vG[n]||n,i=Gk(e.timeZone??ca),s={...e,timeZone:i};t=new Intl.DateTimeFormat(r,s),V3.set(e,t)}return t}function KIe(e){return wG[e]}function Uk(e,t=Hx){return uae(t).format(e)}function XIe(e,t=Hx){return Uk(new Date(e),{...t,...gG,...aae})}function QIe(e,t=Hx){return Uk(new Date(`1970-01-01T${e}Z`),{...t,...gG,...oae})}function e3e(e,t=Hx){if(t.timeZone)return Uk(new Date(e),t);const n=ut.fromISO(e,{setZone:!0}),r=Zi(),i=vG[r]??r,s=n.offset===0?Vd:t.timeZone,o={...t,timeZone:s};return n.toLocaleString(o,{locale:i})}function Gk(e){switch(e){case ca:return Xoe;case mf:return Vd;default:return e}}wk(()=>{V3=new WeakMap});const e5={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function IM(e,t,n,r=ca){const i=new $s(Gk(r)),s=ut.fromJSDate(e,{zone:i}),o=n==="decades"||n==="centuries"?"year":SG(n);return n==="decades"&&(t*=10),n==="centuries"&&(t*=100),s.plus({[o]:t}).toJSDate()}function t3e(e,t,n="milliseconds"){const r=e.getTime(),i=bG(t,n,"milliseconds");return new Date(r+i)}function t5(e,t,n=ca){const r=new $s(Gk(n)),i=ut.fromJSDate(e,{zone:r});if(t==="decades"||t==="centuries"){const o=i.startOf("year"),{year:a}=o,h=a-a%(t==="decades"?10:100);return o.set({year:h}).toJSDate()}const s=SG(t);return i.startOf(s).toJSDate()}function bG(e,t,n){return e===0?0:e*e5[t]/e5[n]}function SG(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Ws;let gs=Ws=class extends ne{static get allTime(){return n5}static get empty(){return cae}static fromArray(e){return new Ws({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(Ws.allTime)}get isEmpty(){return this.equals(Ws.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=(e==null?void 0:e.getTime())??null}clone(){return new Ws({end:this.end,start:this.start})}equals(e){var s,o,a,h;if(!e)return!1;const t=((s=this.start)==null?void 0:s.getTime())??this.start,n=((o=this.end)==null?void 0:o.getTime())??this.end,r=((a=e.start)==null?void 0:a.getTime())??e.start,i=((h=e.end)==null?void 0:h.getTime())??e.end;return t===r&&n===i}expandTo(e,t=ca){if(this.isEmpty||this.isAllTime)return this.clone();let n=this.start;n&&(n=t5(n,e,t));let r=this.end;if(r){const i=t5(r,e,t);r=r.getTime()===i.getTime()?i:IM(i,1,e,t)}return new Ws({start:n,end:r})}intersection(e){var a,h,f,_;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Ws.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((a=this.start)==null?void 0:a.getTime())??-1/0,n=((h=this.end)==null?void 0:h.getTime())??1/0,r=((f=e.start)==null?void 0:f.getTime())??-1/0,i=((_=e.end)==null?void 0:_.getTime())??1/0;let s,o;return r>=t&&r<=n?s=r:t>=r&&t<=i&&(s=t),n>=r&&n<=i?o=n:i>=t&&i<=n&&(o=i),s==null||o==null||isNaN(s)||isNaN(o)?Ws.empty:new Ws({start:s===-1/0?null:new Date(s),end:o===1/0?null:new Date(o)})}offset(e,t,n=ca){if(this.isEmpty||this.isAllTime)return this.clone();const r=new Ws,{start:i,end:s}=this;return i!=null&&(r.start=IM(i,e,t,n)),s!=null&&(r.end=IM(s,e,t,n)),r}toArray(){var e,t;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((t=this.end)==null?void 0:t.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return n5.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,n=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Ws({start:t,end:n})}};l([p({type:Date,json:{write:{allowNull:!0}}})],gs.prototype,"end",void 0),l([de("end")],gs.prototype,"readEnd",null),l([ge("end")],gs.prototype,"writeEnd",null),l([p({readOnly:!0,json:{read:!1}})],gs.prototype,"isAllTime",null),l([p({readOnly:!0,json:{read:!1}})],gs.prototype,"isEmpty",null),l([p({type:Date,json:{write:{allowNull:!0}}})],gs.prototype,"start",void 0),l([de("start")],gs.prototype,"readStart",null),l([ge("start")],gs.prototype,"writeStart",null),gs=Ws=l([k("esri.time.TimeExtent")],gs);const ur=gs,n5=new gs,cae=new gs({start:void 0,end:void 0});let dae=0,Rn=class extends ju.EventedMixin(zx(ho)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Xt(-180,-90,180,90,dt.WGS84),this.id=Date.now().toString(16)+"-layer-"+dae++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=dt.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const n=typeof t=="string"?{url:t}:t;return(await pe(async()=>{const{fromUrl:r}=await import("./arcgisLayers-CyJaodJO.js");return{fromUrl:r}},__vite__mapDeps([13,11,12]))).fromUrl(n)}static fromPortalItem(t){return Jie(t)}initialize(){this.when().catch(t=>{li(t)||fe.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const n=this;"layers"in t&&t.layers.includes(n)?t.layers.remove(n):"tables"in t&&t.tables.includes(n)?t.tables.remove(n):"baseLayers"in t&&t.baseLayers.includes(n)?t.baseLayers.remove(n):"referenceLayers"in t&&t.referenceLayers.includes(n)&&t.referenceLayers.remove(n),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const n=this.parent;return t&&n&&"effectiveVisible"in n&&t&&(t=n.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return cr(this.url)}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await Lt(t,{query:{f:"json"},responseType:"json"})).data;throw new Y("layer:no-attribution-data","Layer does not have attribution data")}};l([p({type:String})],Rn.prototype,"attributionDataUrl",void 0),l([p({readOnly:!0})],Rn.prototype,"effectiveVisible",null),l([p({type:Xt})],Rn.prototype,"fullExtent",void 0),l([p({readOnly:!0})],Rn.prototype,"hasAttributionData",null),l([p({type:String,clonable:!1})],Rn.prototype,"id",void 0),l([p({type:Boolean,nonNullable:!0})],Rn.prototype,"legendEnabled",void 0),l([p({type:["show","hide","hide-children"]})],Rn.prototype,"listMode",void 0),l([p({type:Number,range:{min:0,max:1},nonNullable:!0})],Rn.prototype,"opacity",void 0),l([p({clonable:!1})],Rn.prototype,"parent",void 0),l([p({readOnly:!0})],Rn.prototype,"parsedUrl",null),l([p({type:Boolean,readOnly:!0})],Rn.prototype,"persistenceEnabled",void 0),l([p({type:Boolean})],Rn.prototype,"popupEnabled",void 0),l([p({type:Boolean})],Rn.prototype,"attributionVisible",void 0),l([p({type:dt})],Rn.prototype,"spatialReference",void 0),l([p({type:String})],Rn.prototype,"title",void 0),l([p({readOnly:!0,json:{read:!1}})],Rn.prototype,"type",void 0),l([p()],Rn.prototype,"url",void 0),l([p({type:ur})],Rn.prototype,"visibilityTimeExtent",void 0),l([p({type:Boolean,nonNullable:!0})],Rn.prototype,"visible",void 0),Rn=l([k("esri.layers.Layer")],Rn);const TG=Rn;function U3(e,t,n){let r,i;if(e)for(let s=0,o=e.length;s<o;s++){if(r=e.at(s),(r==null?void 0:r[t])===n)return r;if((r==null?void 0:r.type)==="group"&&(i=U3(r.layers,t,n),i))return i}}const hae=e=>{let t=class extends e{constructor(...n){super(...n),this.layers=new Ae;const r=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},i=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||fe.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void fe.getLogger(this).error("#add()","Cannot add layer to itself.");r(o.item)}),this.layers.on("after-add",o=>i(o.item)),this.layers.on("after-remove",o=>s(o.item))])}destroy(){const n=this.layers.toArray();for(const r of n)r.destroy();this.layers.destroy()}set layers(n){this._set("layers",Fd(n,this._get("layers")))}add(n,r){const i=this.layers;if(r=i.getNextIndex(r),n instanceof TG){const s=n;s.parent===this?this.reorder(s,r):i.add(s,r)}else _l(n)?n.then(s=>{this.destroyed||this.add(s,r)}):fe.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(n,r){const i=this.layers;let s=i.getNextIndex(r);n.slice().forEach(o=>{o.parent!==this?(i.add(o,s),s+=1):this.reorder(o,s)})}findLayerById(n){return U3(this.layers,"id",n)}findLayerByUid(n){return U3(this.layers,"uid",n)}remove(n){return this.layers.remove(n)}removeMany(n){return this.layers.removeMany(n)}removeAll(){return this.layers.removeAll()}reorder(n,r){return this.layers.reorder(n,r)}layerAdded(n){}layerRemoved(n){}};return l([p()],t.prototype,"layers",null),t=l([k("esri.support.LayersMixin")],t),t};function G3(e,t,n){if(e)for(let r=0,i=e.length;r<i;r++){const s=e.at(r);if(s[t]===n)return s;if((s==null?void 0:s.type)==="group"){const o=G3(s.tables,t,n);if(o)return o}}}const pae=e=>{let t=class extends e{constructor(...n){super(...n),this.tables=new Ae,this.addHandles([this.tables.on("after-add",r=>{const i=r.item;i.parent&&i.parent!==this&&"tables"in i.parent&&i.parent.tables.remove(i),i.parent=this,i.type!=="feature"&&fe.getLogger(this).error(`Layer 'title:${i.title}, id:${i.id}' of type '${i.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})])}destroy(){const n=this.tables.toArray();for(const r of n)r.destroy();this.tables.destroy()}set tables(n){this._set("tables",Fd(n,this._get("tables")))}findTableById(n){return G3(this.tables,"id",n)}findTableByUid(n){return G3(this.tables,"uid",n)}};return l([p()],t.prototype,"tables",null),t=l([k("esri.support.TablesMixin")],t),t};let Lo=class extends pae(hae(ju.EventedMixin(Fe))){constructor(t){super(t),this.allLayers=new n0({getCollections:()=>{var n,r,i;return[(n=this.basemap)==null?void 0:n.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(i=this.basemap)==null?void 0:i.referenceLayers]},getChildrenFunction:n=>"layers"in n?n.layers:null}),this.allTables=hie(this),this.basemap=null,this.editableLayers=new n0({getCollections:()=>[this.allLayers],itemFilterFunction:Gne}),this.ground=new xT,this._basemapCache=aie()}destroy(){lie(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=cn(this.basemap),cn(this.ground),this._set("ground",null)}castBasemap(t){return uie(t,this._basemapCache)}castGround(t){return pie(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(n=>n.id===t)}findTableById(t){return this.allTables.find(n=>n.id===t)}};l([p({readOnly:!0,dependsOn:[]})],Lo.prototype,"allLayers",void 0),l([p({readOnly:!0})],Lo.prototype,"allTables",void 0),l([p({type:Ev,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Lo.prototype,"basemap",void 0),l([kt("basemap")],Lo.prototype,"castBasemap",null),l([p({readOnly:!0})],Lo.prototype,"editableLayers",void 0),l([p({type:xT,nonNullable:!0})],Lo.prototype,"ground",void 0),l([kt("ground")],Lo.prototype,"castGround",null),l([p()],Lo.prototype,"undoRedo",void 0),Lo=l([k("esri.Map")],Lo);const xG=Lo,vt=e=>{let t=class extends e{clone(){var h;const n=Yi(this);bV(n,"unable to clone instance of non-accessor class");const r=n.metadata,i=n.store,s={},o=new Map;for(const f in r){const _=r[f],w=i==null?void 0:i.originOf(f),b=_.clonable;if(_.readOnly||b===!1||w!==xt.USER&&w!==xt.DEFAULTS&&w!==xt.WEB_MAP&&w!==xt.WEB_SCENE)continue;const T=this[f];let M=null;M=typeof b=="function"?b(T):b==="reference"?T:FI(T),T!=null&&M==null||(w===xt.DEFAULTS?o.set(f,M):s[f]=M)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const f=(h=Yi(a))==null?void 0:h.store;if(f)for(const[_,w]of o)f.set(_,w,xt.DEFAULTS)}return a}};return t=l([k("esri.core.Clonable")],t),t};let B3=class extends vt(Fe){};B3=l([k("esri.core.Clonable")],B3);let tp=class extends B3{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};l([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],tp.prototype,"row",void 0),l([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],tp.prototype,"column",void 0),l([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],tp.prototype,"rows",void 0),l([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],tp.prototype,"columns",void 0),tp=l([k("esri.CameraLayout")],tp);const EG=tp;let fae=class{constructor(t,n){this.min=t,this.max=n,this.range=n-t}normalize(t,n=0,r=!1){return r5(this.range,this.min,this.max,t,n,r)}clamp(t,n=0){return po(t-n,this.min,this.max)+n}monotonic(t,n,r){return t<n?n:n+q3(this.range,t-n,r)}minimalMonotonic(t,n,r){return r5(this.range,t,t+this.range,n,r)}center(t,n,r){return n=this.monotonic(t,n,r),this.normalize((t+n)/2,r)}diff(t,n,r){return this.monotonic(t,n,r)-t}shortestSignedDiff(t,n){t=this.normalize(t);const r=(n=this.normalize(n))-t,i=n<t?this.minimalMonotonic(t,n)-t:n-this.minimalMonotonic(n,t);return Math.abs(r)<Math.abs(i)?r:i}contains(t,n,r){return n=this.minimalMonotonic(t,n),(r=this.minimalMonotonic(t,r))>t&&r<n}};function r5(e,t,n,r,i=0,s=!1){return(r-=i)<t?r+=q3(e,t-r):r>n&&(r-=q3(e,r-n)),s&&r===n&&(r=t),r+i}function q3(e,t,n=0){return Math.ceil((t-n)/e)*e+n}const mae=new fae(0,360);let Ra=class extends vt(ne){constructor(...t){super(...t),this.position=new gt([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new EG}normalizeCtorArgs(t,n,r,i){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const s={position:t};return n!=null&&(s.heading=n),r!=null&&(s.tilt=r),i!=null&&(s.fov=i),s}return t}writePosition(t,n,r,i){const s=t.clone();s.x=vi(t.x||0),s.y=vi(t.y||0),s.z=t.hasZ?vi(t.z||0):t.z,n[r]=s.write({},i)}readPosition(t,n){const r=new gt;return r.read(t,n),r.x=vi(r.x||0),r.y=vi(r.y||0),r.z=r.hasZ?vi(r.z||0):r.z,r}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};l([p({type:gt,json:{write:{isRequired:!0}}})],Ra.prototype,"position",void 0),l([ge("position")],Ra.prototype,"writePosition",null),l([de("position")],Ra.prototype,"readPosition",null),l([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),kt(e=>mae.normalize(vi(e)))],Ra.prototype,"heading",void 0),l([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),kt(e=>po(vi(e),-180,180))],Ra.prototype,"tilt",void 0),l([p({type:Number,nonNullable:!0,json:{default:55,write:!0}}),kt(e=>po(vi(e,55),1,170))],Ra.prototype,"fov",void 0),l([p({type:EG,nonNullable:!0,json:{read:!1,write:!1}})],Ra.prototype,"layout",void 0),Ra=l([k("esri.Camera")],Ra);const yae=Ra;var H3;let zc=H3=class extends ne{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new H3({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};l([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:PM}}}}})],zc.prototype,"rotation",void 0),l([kt("rotation")],zc.prototype,"castRotation",null),l([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:PM}}}}})],zc.prototype,"scale",void 0),l([p({types:Tf,json:{read:Du,write:!0,origins:{"web-scene":{read:Du,write:{overridePolicy:PM}}}}})],zc.prototype,"targetGeometry",void 0),l([p({type:yae,json:{write:!0}})],zc.prototype,"camera",void 0),zc=H3=l([k("esri.Viewpoint")],zc);const $r=zc;function PM(){return{enabled:!this.camera}}let gae=class $G{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(zI),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const n=new $G,r=this._originStores[xt.DEFAULTS];r&&r.forEach((i,s)=>{n.set(s,q(i),xt.DEFAULTS)});for(let i=xt.SERVICE;i<zI;i++){const s=this._originStores[i];s&&s.forEach((o,a)=>{t&&t.has(a)||n.set(a,q(o),i)})}return n}get(t,n){const r=n===void 0?this._values:this._originStores[n];return r?r.get(t):void 0}keys(t){const n=t==null?this._values:this._originStores[t];return n?[...n.keys()]:[]}set(t,n,r=xt.USER){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(t,n),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const s=this._values.get(t);return this._values.set(t,n),this._propertyOriginMap.set(t,r),s!==n}return!1}delete(t,n=xt.USER){const r=this._originStores[n];if(!r)return;const i=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===n){this._values.delete(t);for(let s=n-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,s);break}}}return i}has(t,n){const r=n===void 0?this._values:this._originStores[n];return!!r&&r.has(t)}revert(t,n){for(;n>0&&!this.has(t,n);)--n;const r=this._originStores[n],i=r==null?void 0:r.get(t),s=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,n),s!==i}originOf(t){return this._propertyOriginMap.get(t)||xt.DEFAULTS}forEach(t){this._values.forEach(t)}};const MG=e=>{let t=class extends e{constructor(...n){super(...n);const r=Yi(this),i=r.store,s=new gae;r.store=s,cU(r,i,s)}read(n,r){hU(this,n,r)}getAtOrigin(n,r){const i=CM(this),s=Td(r);if(typeof n=="string")return i.get(n,s);const o={};return n.forEach(a=>{o[a]=i.get(a,s)}),o}originOf(n){return J2(this.originIdOf(n))}originIdOf(n){return CM(this).originOf(n)}revert(n,r){const i=CM(this),s=Td(r),o=Yi(this);let a;a=typeof n=="string"?n==="*"?i.keys(s):[n]:n,a.forEach(h=>{o.invalidate(h),i.revert(h,s),o.commit(h)})}};return t=l([k("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function CM(e){return Yi(e).store}let i5=class extends MG(Fe){};i5=l([k("esri.core.ReadOnlyMultiOriginJSONSupport")],i5);const _ae=e=>{let t=class extends e{constructor(...n){super(...n)}clear(n,r="user"){return OM(this).delete(n,Td(r))}write(n,r){return mU(this,n=n||{},r),n}setAtOrigin(n,r,i){Yi(this).setAtOrigin(n,r,Td(i))}removeOrigin(n){const r=OM(this),i=Td(n),s=r.keys(i);for(const o of s)r.originOf(o)===i&&r.set(o,r.get(o,i),xt.USER)}updateOrigin(n,r){const i=OM(this),s=Td(r),o=ia(this,n);for(let a=s+1;a<zI;++a)i.delete(n,a);i.set(n,o,s)}toJSON(n){return this.write({},n)}};return t=l([k("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function OM(e){return Yi(e).store}const Wx=e=>{let t=class extends _ae(MG(e)){constructor(...n){super(...n)}};return t=l([k("esri.core.MultiOriginJSONSupport")],t),t};let W3=class extends Wx(Fe){};W3=l([k("esri.core.MultiOriginJSONSupport")],W3);const c3e=Math.PI/180,d3e=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Lc=Cn.radius,Ao=Cn.eccentricitySquared,wae={a1:Lc*Ao,a2:Lc*Ao*Lc*Ao,a3:Lc*Ao*Ao/2,a4:Lc*Ao*Lc*Ao*2.5,a5:Lc*Ao+Lc*Ao*Ao/2,a6:1-Ao},h3e={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Cn.radius,f:Cn.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:jd.radius,f:jd.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:al.radius,f:al.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:al.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var Z;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(Z||(Z={}));const vae={[Z.WGS84]:{[Z.CGCS2000]:gn,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:gn,[Z.SPHERICAL_ECEF]:Pv,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:eg,[Z.PLATE_CARREE]:tg,[Z.WGS84]:gn,[Z.WGS84_ECEF]:ig},[Z.CGCS2000]:{[Z.CGCS2000]:gn,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:gn,[Z.SPHERICAL_ECEF]:Pv,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:eg,[Z.PLATE_CARREE]:tg,[Z.WGS84]:gn,[Z.WGS84_ECEF]:ig},[Z.GCSMARS2000]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:gn,[Z.GCSMOON2000]:null,[Z.LON_LAT]:gn,[Z.SPHERICAL_ECEF]:null,[Z.SPHERICAL_MARS_PCPF]:a5,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:null,[Z.WGS84]:null,[Z.WGS84_ECEF]:null},[Z.GCSMOON2000]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:gn,[Z.LON_LAT]:gn,[Z.SPHERICAL_ECEF]:null,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:o5,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:null,[Z.WGS84]:null,[Z.WGS84_ECEF]:null},[Z.WEB_MERCATOR]:{[Z.CGCS2000]:Iv,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:Iv,[Z.SPHERICAL_ECEF]:bae,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:gn,[Z.PLATE_CARREE]:xae,[Z.WGS84]:Iv,[Z.WGS84_ECEF]:Sae},[Z.WGS84_ECEF]:{[Z.CGCS2000]:sg,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:sg,[Z.SPHERICAL_ECEF]:kae,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:Rae,[Z.PLATE_CARREE]:Eae,[Z.WGS84]:sg,[Z.WGS84_ECEF]:gn},[Z.SPHERICAL_ECEF]:{[Z.CGCS2000]:rg,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:rg,[Z.SPHERICAL_ECEF]:gn,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:Cae,[Z.PLATE_CARREE]:$ae,[Z.WGS84]:rg,[Z.WGS84_ECEF]:Oae},[Z.SPHERICAL_MARS_PCPF]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:u5,[Z.GCSMOON2000]:null,[Z.LON_LAT]:u5,[Z.SPHERICAL_ECEF]:null,[Z.SPHERICAL_MARS_PCPF]:gn,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:null,[Z.WGS84]:null,[Z.WGS84_ECEF]:null},[Z.SPHERICAL_MOON_PCPF]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:l5,[Z.LON_LAT]:l5,[Z.SPHERICAL_ECEF]:null,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:gn,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:null,[Z.WGS84]:null,[Z.WGS84_ECEF]:null},[Z.UNKNOWN]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:null,[Z.SPHERICAL_ECEF]:null,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:gn,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:null,[Z.WGS84]:null,[Z.WGS84_ECEF]:null},[Z.LON_LAT]:{[Z.CGCS2000]:gn,[Z.GCSMARS2000]:gn,[Z.GCSMOON2000]:gn,[Z.LON_LAT]:gn,[Z.SPHERICAL_ECEF]:Pv,[Z.SPHERICAL_MARS_PCPF]:a5,[Z.SPHERICAL_MOON_PCPF]:o5,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:eg,[Z.PLATE_CARREE]:tg,[Z.WGS84]:gn,[Z.WGS84_ECEF]:ig},[Z.PLATE_CARREE]:{[Z.CGCS2000]:ng,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:ng,[Z.SPHERICAL_ECEF]:Mae,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:Iae,[Z.PLATE_CARREE]:gn,[Z.WGS84]:ng,[Z.WGS84_ECEF]:Pae}};function IG(e,t,n=PG()){return e==null||t==null?null:Lae(e,t,n).projector}function s5(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Zd(e,1)),wT(e)?t.spatialReferenceId=Z.SPHERICAL_ECEF:lf(e)?t.spatialReferenceId=Z.WGS84:dl(e)?t.spatialReferenceId=Z.WEB_MERCATOR:ste(e)?t.spatialReferenceId=Z.PLATE_CARREE:e.wkt===ute.wkt?t.spatialReferenceId=Z.WGS84_ECEF:e.wkid===af.CGCS2000?t.spatialReferenceId=Z.CGCS2000:e.wkt===mk.wkt?t.spatialReferenceId=Z.SPHERICAL_MARS_PCPF:e.wkt===yk.wkt?t.spatialReferenceId=Z.SPHERICAL_MOON_PCPF:HU(e)?t.spatialReferenceId=Z.GCSMARS2000:WU(e)?t.spatialReferenceId=Z.GCSMOON2000:t.spatialReferenceId=Z.UNKNOWN):Z.UNKNOWN}function gn(e,t,n,r){e!==n&&(n[r++]=e[t++],n[r++]=e[t++],n[r]=e[t])}function Iv(e,t,n,r){n[r]=Sg*(e[t]/tf),n[r+1]=Sg*(OG-2*Math.atan(Math.exp(-e[t+1]/tf))),n[r+2]=e[t+2]}function bae(e,t,n,r){const i=e[t]/tf,s=OG-2*Math.atan(Math.exp(-e[t+1]/tf)),o=tf+e[t+2],a=Math.cos(s)*o;n[r]=Math.cos(i)*a,n[r+1]=Math.sin(i)*a,n[r+2]=Math.sin(s)*o}function Sae(e,t,n,r){Iv(e,t,n,r),ig(n,r,n,r)}function Tae(e,t,n,r,i){const s=.4999999*Zx,o=po(bg*e[t+1],-s,s),a=Math.sin(o);n[r++]=bg*e[t]*i.radius,n[r++]=i.halfSemiMajorAxis*Math.log((1+a)/(1-a)),n[r]=e[t+2]}function eg(e,t,n,r){Tae(e,t,n,r,Cn)}function tg(e,t,n,r){n[r]=e[t]*c5,n[r+1]=e[t+1]*c5,n[r+2]=e[t+2]}function ng(e,t,n,r){n[r]=e[t]*d5,n[r+1]=e[t+1]*d5,n[r+2]=e[t+2]}function xae(e,t,n,r){Iv(e,t,n,r),tg(n,r,n,r)}function Eae(e,t,n,r){sg(e,t,n,r),tg(n,r,n,r)}function $ae(e,t,n,r){rg(e,t,n,r),tg(n,r,n,r)}function Mae(e,t,n,r){ng(e,t,n,r),Pv(n,r,n,r)}function Iae(e,t,n,r){ng(e,t,n,r),eg(n,r,n,r)}function Pae(e,t,n,r){ng(e,t,n,r),ig(n,r,n,r)}function Bk(e,t,n,r,i){const s=i+e[t+2],o=bg*e[t+1],a=bg*e[t],h=Math.cos(o)*s;n[r]=Math.cos(a)*h,n[r+1]=Math.sin(a)*h,n[r+2]=Math.sin(o)*s}function o5(e,t,n,r){Bk(e,t,n,r,jd.radius)}function a5(e,t,n,r){Bk(e,t,n,r,al.radius)}function Pv(e,t,n,r){Bk(e,t,n,r,Cn.radius)}function qk(e,t,n,r,i){const s=e[t],o=e[t+1],a=e[t+2],h=Math.sqrt(s*s+o*o+a*a),f=Nne(a/(h===0?1:h)),_=Math.atan2(o,s);n[r++]=Sg*_,n[r++]=Sg*f,n[r]=h-i}function l5(e,t,n,r){qk(e,t,n,r,jd.radius)}function u5(e,t,n,r){qk(e,t,n,r,al.radius)}function rg(e,t,n,r){qk(e,t,n,r,Cn.radius)}function Cae(e,t,n,r){rg(e,t,n,r),eg(n,r,n,r)}function Oae(e,t,n,r){rg(e,t,n,r),ig(n,r,n,r)}function Aae(e,t,n,r,i){const s=bg*e[t],o=bg*e[t+1],a=e[t+2],h=Math.sin(o),f=Math.cos(o),_=i.radius/Math.sqrt(1-i.eccentricitySquared*h*h);n[r++]=(_+a)*f*Math.cos(s),n[r++]=(_+a)*f*Math.sin(s),n[r++]=(_*(1-i.eccentricitySquared)+a)*h}function ig(e,t,n,r){Aae(e,t,n,r,Cn)}function sg(e,t,n,r){const i=wae,s=e[t],o=e[t+1],a=e[t+2];let h,f,_,w,b,T,M,I,C,N,j,z,U,K,J,le,ue,be,xe,_e,$e;h=Math.abs(a),f=s*s+o*o,_=Math.sqrt(f),w=f+a*a,b=Math.sqrt(w),_e=Math.atan2(o,s),T=a*a/w,M=f/w,K=i.a2/b,J=i.a3-i.a4/b,M>.3?(I=h/b*(1+M*(i.a1+K+T*J)/b),xe=Math.asin(I),N=I*I,C=Math.sqrt(1-N)):(C=_/b*(1-T*(i.a5-K-M*J)/b),xe=Math.acos(C),N=1-C*C,I=Math.sqrt(N)),j=1-Cn.eccentricitySquared*N,z=Cn.radius/Math.sqrt(j),U=i.a6*z,K=_-z*C,J=h-U*I,ue=C*K+I*J,le=C*J-I*K,be=le/(U/j+ue),xe+=be,$e=ue+le*be/2,a<0&&(xe=-xe),n[r++]=Sg*_e,n[r++]=Sg*xe,n[r]=$e}function kae(e,t,n,r){sg(e,t,n,r),Pv(n,r,n,r)}function Rae(e,t,n,r){sg(e,t,n,r),eg(n,r,n,r)}function Lae(e,t,n){if(e==null||t==null||n.source.spatialReference===e&&n.dest.spatialReference===t)return n;const r=s5(e,n.source),i=s5(t,n.dest);return r===Z.UNKNOWN&&i===Z.UNKNOWN?dr(e,t)?n.projector=gn:n.projector=null:n.projector=vae[r][i],n}function PG(){return{source:{spatialReference:null,spatialReferenceId:Z.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:Z.UNKNOWN,metersPerUnit:1},projector:gn}}const p3e={spatialReference:null,spatialReferenceId:Z.UNKNOWN},f3e={spatialReference:null,spatialReferenceId:Z.UNKNOWN},CG=PG(),bg=Rx(1),Sg=w9(1),Zx=Math.PI,OG=.5*Zx,tf=Cn.radius,c5=tf*Zx/180,d5=180/(tf*Zx);function V0(e,t,n,r,i,s,o=Math.floor(e.length/3)){const a=IG(t,i,CG);if(a==null)return!1;if(a===gn){if(e===r&&n===s)return!0;const f=n+3*o;for(let _=n,w=s;_<f;_++,w++)r[w]=e[_];return!0}const h=n+3*o;for(let f=n,_=s;f<h;f+=3,_+=3)a(e,f,r,_);return!0}const m3e=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:V0},Symbol.toStringTag,{value:"Module"}));function h5(e,t,n,r,i,s){return Mb[0]=e,Mb[1]=t,Mb[2]=n,V0(Mb,r,0,i,s,0)}const Mb=Jd();let Ib=0,AM=class Z3{static fromGE(t){const n=new Z3;return n._wkt=t.wkt,n._wkid=t.wkid,n._isInverse=t.isInverse,n}constructor(t){this.uid=Ib++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=Ib++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=Ib++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=Ib++}getInverse(){const t=new Z3;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},OT=class gw{static cacheKey(t,n){var r,i,s,o,a,h;return[((r=t.wkid)==null?void 0:r.toString())??"-1",((i=t.wkt)==null?void 0:i.toString())??"",((s=t.wkt2)==null?void 0:s.toString())??"",((o=n.wkid)==null?void 0:o.toString())??"-1",((a=n.wkt)==null?void 0:a.toString())??"",((h=n.wkt2)==null?void 0:h.toString())??""].join()}static fromGE(t){const n=new gw;let r="";for(const i of t.steps){const s=AM.fromGE(i);n.steps.push(s),r+=s.uid.toString()+","}return n._cachedProjection={},n._gtlistentry=null,n._chain=r,n}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const n of t.steps)n instanceof AM?this.steps.push(n):this.steps.push(new AM({wkid:n.wkid,wkt:n.wkt,isInverse:n.isInverse}))}getInverse(){const t=new gw;t.steps=[];for(let n=this.steps.length-1;n>=0;n--){const r=this.steps[n];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const n of this.steps)t+=n.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,n,r){this._cachedProjection[gw.cacheKey(t,n)]=r}getCachedGeTransformation(t,n){let r="";for(const s of this.steps)r+=s.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const i=this._cachedProjection[gw.cacheKey(t,n)];return i===void 0?null:i}};function AG(e,t,n){if(t==null||n==null||n.vcsWkid||dr(t,n)||zd(t)||zd(n))return null;const r=vT(t)/vT(n);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return i=>Nae(i,r);case"polyline":case"esriGeometryPolyline":return i=>Fae(i,r);case"polygon":case"esriGeometryPolygon":return i=>Dae(i,r);case"multipoint":case"esriGeometryMultipoint":return i=>jae(i,r);case"extent":case"esriGeometryEnvelope":return i=>zae(i,r);default:return null}}function Nae(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function Dae(e,t){if(e)for(const n of e.rings)for(const r of n)r.length>2&&(r[2]*=t)}function Fae(e,t){if(e)for(const n of e.paths)for(const r of n)r.length>2&&(r[2]*=t)}function jae(e,t){if(e)for(const n of e.points)n.length>2&&(n[2]*=t)}function zae(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let oa=null,Ud=null,Cv=null,FS={};const Hk=new O0;function Xd(){return!!oa&&pk()}function kG(){return!!Xd()||(tt(Hk),Gd(),!1)}function RG(e,t){return!e||!t||fl(e,t)||kG()}function Vae(e,t){return!fl(e,t)&&!Xd()}function Gd(e){return Cv==null&&(Cv=Promise.all([zU(),pe(()=>import("./geometryEngineBase-C0k-Dc0I.js"),__vite__mapDeps([14,3])).then(t=>t.g),pe(()=>import("./hydrated-BW7jEKhG.js"),[])])),Cv.then(([,t,{hydratedAdapter:n}])=>{xn(e),Ud=n,oa=t.default,oa._enableProjection(tte),Hk.notify()})}function Qd(e,t,n=null,r=null){return Array.isArray(e)?e.length===0?[]:J3(Ud,e,e[0].spatialReference,t,n,r):J3(Ud,[e],e.spatialReference,t,n,r)[0]}function J3(e,t,n,r,i=null,s=null){if(n==null||r==null)return t;if(fl(n,r,i))return t.map(o=>jS(o,n,r));if(i==null&&wT(n))return t.map(o=>jS(o,n,dt.WGS84)).map(o=>i0(o,r));if(i==null&&wT(r))return t.map(o=>i0(o,dt.WGS84)).map(o=>jS(o,dt.WGS84,r));if(i==null){const o=OT.cacheKey(n,r);FS[o]!==void 0?i=FS[o]:((i=NG(n,r,void 0))==null&&(i=new OT),FS[o]=i)}if(oa==null||e==null)throw new Jx;return s!=null?oa._project(e,t,n,r,i,s):oa._project(e,t,n,r,i)}function Uae(e,t){const n=LG([e],t);return n.pending!=null?{pending:n.pending,geometry:null}:n.geometries!=null?{pending:null,geometry:n.geometries[0]}:{pending:null,geometry:null}}function LG(e,t){if(!Xd()){for(const n of e)if(n!=null&&!dr(n.spatialReference,t)&&vs(n.spatialReference)&&vs(t)&&!fl(n.spatialReference,t))return tt(Hk),{pending:Gd(),geometries:null}}return{pending:null,geometries:e.map(n=>n==null?null:dr(n.spatialReference,t)?n:vs(n.spatialReference)&&vs(t)?i0(n,t):null)}}function NG(e,t,n=null){if(e==null||t==null)return null;if(oa==null||Ud==null)throw new Jx;const r=oa._getTransformation(Ud,e,t,n,n==null?void 0:n.spatialReference);return r!==null?OT.fromGE(r):null}function Gae(e,t,n=null){if(oa==null||Ud==null)throw new Jx;const r=oa._getTransformationBySuitability(Ud,e,t,n,n==null?void 0:n.spatialReference);if(r!==null){const i=[];for(const s of r)i.push(OT.fromGE(s));return i}return[]}let Jx=class extends Y{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function Bae(){oa=null,Ud=null,Cv=null,FS={}}const qae={get loadPromise(){return Cv}};function i0(e,t){try{const n=Qd(e,t);if(n==null)return null;"xmin"in e&&"xmin"in n&&(n.zmin=e.zmin,n.zmax=e.zmax);const r=AG(n.type,e.spatialReference,t);return r!=null&&r(n),n}catch(n){if(!(n instanceof Jx))throw n;return null}}async function Hae(e,t,n){const r=e.spatialReference;return r!=null&&t!=null&&await Wk(r,t,null,n),i0(e,t)}function fl(e,t,n){return!n&&(!!dr(e,t)||vs(e)&&vs(t)&&!!IG(e,t,CG))}function Wae(e,t){if(dr(e,t))return!0;if(!vs(e)||!vs(t))return!1;const n=lf(e)||dl(e)||QD(e),r=lf(t)||dl(t)||QD(t);return n&&r}async function Wk(e,t,n,r){if(Xd())return CD(r);if(Array.isArray(e)){for(const{source:i,dest:s,geographicTransformation:o}of e)if(i&&s&&!fl(i,s,o))return Gd(r)}else if(e&&t&&!fl(e,t,n))return Gd(r);return CD(r)}function jS(e,t,n){return e?"x"in e?DG(e,t,new gt,n,0):"xmin"in e?VG(e,t,new Xt,n,0):"rings"in e?zG(e,t,new mo,n,0):"paths"in e?jG(e,t,new so,n,0):"points"in e?FG(e,t,new N0,n,0):null:null}function Zae(e,t,n=t.spatialReference,r=0){return n!=null&&e.spatialReference!=null&&DG(e,e.spatialReference,t,n,r)!=null}function DG(e,t,n,r,i){ti[0]=e.x,ti[1]=e.y;const s=e.z;return ti[2]=s!==void 0?s:i,V0(ti,t,0,ti,r,0)?(n.x=ti[0],n.y=ti[1],n.spatialReference=r,s!==void 0||zd(r)?(n.z=ti[2],n.hasZ=!0):(n.z=void 0,n.hasZ=!1),e.m===void 0?(n.m=void 0,n.hasM=!1):(n.m=e.m,n.hasM=!0),n):null}function Jae(e,t,n=t.spatialReference,r=0){return e.spatialReference!=null&&n!=null&&FG(e,e.spatialReference,t,n,r)!=null}function FG(e,t,n,r,i){const{points:s,hasZ:o,hasM:a}=e,h=[],f=s.length,_=[];for(const b of s)_.push(b[0],b[1],o?b[2]:i);if(!V0(_,t,0,_,r,0,f))return null;const w=o||zd(r);for(let b=0;b<f;++b){const T=3*b,M=_[T],I=_[T+1];w&&a?h.push([M,I,_[T+2],s[b][3]]):w?h.push([M,I,_[T+2]]):a?h.push([M,I,s[b][2]]):h.push([M,I])}return n.points=h,n.spatialReference=r,n.hasZ=o,n.hasM=a,n}function Yae(e,t,n=t.spatialReference,r=0){return e.spatialReference!=null&&n!=null&&jG(e,e.spatialReference,t,n,r)!=null}function jG(e,t,n,r,i){const{paths:s,hasZ:o,hasM:a}=e,h=[];if(!UG(s,o??!1,a??!1,t,h,r,i))return null;const f=o||zd(r);return n.paths=h,n.spatialReference=r,n.hasZ=f,n.hasM=a,n}function Kae(e,t,n=t.spatialReference,r=0){return e.spatialReference!=null&&n!=null&&zG(e,e.spatialReference,t,n,r)!=null}function zG(e,t,n,r,i){const{rings:s,hasZ:o,hasM:a}=e,h=[];if(!UG(s,o??!1,a??!1,t,h,r,i))return null;const f=o||zd(r);return n.rings=h,n.spatialReference=r,n.hasZ=f,n.hasM=a,n}function Xae(e,t,n=t.spatialReference,r=0){return e.spatialReference!=null&&n!=null&&VG(e,e.spatialReference,t,n,r)!=null}function VG(e,t,n,r,i){const{xmin:s,ymin:o,xmax:a,ymax:h,hasZ:f,hasM:_}=e,w=f?e.zmin:i;if(!h5(s,o,w,t,ti,r))return null;const b=f||zd(r);n.xmin=ti[0],n.ymin=ti[1],b&&(n.zmin=ti[2]);const T=f?e.zmax:i;return h5(a,h,T,t,ti,r)?(n.xmax=ti[0],n.ymax=ti[1],b&&(n.zmax=ti[2]),_&&(n.mmin=e.mmin,n.mmax=e.mmax),n.spatialReference=r,n):null}function UG(e,t,n,r,i,s,o=0){const a=new Array;for(const _ of e)for(const w of _)a.push(w[0],w[1],t?w[2]:o);if(!V0(a,r,0,a,s,0))return!1;let h=0;i.length=0;const f=t||zd(s);for(const _ of e){const w=new Array;for(const b of _)f&&n?w.push([a[h++],a[h++],a[h++],b[3]]):f?w.push([a[h++],a[h++],a[h++]]):n?(w.push([a[h++],a[h++],b[2]]),h++):(w.push([a[h++],a[h++]]),h++);i.push(w)}return!0}const ti=Jd(),g3e=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:fl,getTransformation:NG,getTransformations:Gae,initializeProjection:Wk,isEqualBaseGCS:Wae,isLoaded:Xd,isLoadedOrLoad:kG,isLoadedOrLoadFor:RG,load:Gd,project:Qd,projectExtent:Xae,projectMany:J3,projectMultipoint:Jae,projectOrLoad:Uae,projectOrLoadMany:LG,projectPoint:Zae,projectPolygon:Kae,projectPolyline:Yae,projectWithZConversion:Hae,projectWithoutEngine:jS,requiresLoad:Vae,test:qae,tryProjectWithZConversion:i0,unload:Bae},Symbol.toStringTag,{value:"Module"}));async function Qae(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return Uy(e);const n=dt.WGS84;return await Wk(t,n),Qd(e,n)}function ele(e,t){if(!GG(e,t)){const n=e.typeKeywords;n?n.push(t):e.typeKeywords=[t]}}function GG(e,t){var n;return!!((n=e.typeKeywords)!=null&&n.includes(t))}function _3e(e){return GG(e,BG.HOSTED_SERVICE)}function tle(e,t){const n=e.typeKeywords;if(n){const r=n.indexOf(t);r>-1&&n.splice(r,1)}}function w3e(e,t,n){n?ele(e,t):tle(e,t)}async function v3e(e){const t=e.clone().normalize();let n;if(t.length>1)for(const r of t)n?r.width>n.width&&(n=r):n=r;else n=t[0];return Qae(n)}const BG={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer"};function p5(e){var h;const{portal:t,isOrgItem:n,itemControl:r}=e,i=(h=t.user)==null?void 0:h.privileges;let s=!i||i.includes("features:user:edit"),o=!!n&&!!(i!=null&&i.includes("features:user:fullEdit"));const a=r==="update"||r==="admin";return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}let Vc=class extends ne{constructor(t){super(t),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};l([p({type:String,json:{write:!0}})],Vc.prototype,"facilityIdField",void 0),l([p({type:String,json:{write:!0}})],Vc.prototype,"layerId",void 0),l([p({type:String,json:{write:!0}})],Vc.prototype,"nameField",void 0),l([p({type:String,json:{write:!0}})],Vc.prototype,"siteIdField",void 0),l([p({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Vc.prototype,"sublayerId",void 0),Vc=l([k("esri.layers.support.FacilityLayerInfo")],Vc);const nle=Vc;let No=class extends ne{constructor(t){super(t),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};l([p({type:String,json:{write:!0}})],No.prototype,"facilityIdField",void 0),l([p({type:String,json:{write:!0}})],No.prototype,"layerId",void 0),l([p({type:String,json:{write:!0}})],No.prototype,"levelIdField",void 0),l([p({type:String,json:{write:!0}})],No.prototype,"levelNumberField",void 0),l([p({type:String,json:{write:!0}})],No.prototype,"longNameField",void 0),l([p({type:String,json:{write:!0}})],No.prototype,"shortNameField",void 0),l([p({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],No.prototype,"sublayerId",void 0),l([p({type:String,json:{write:!0}})],No.prototype,"verticalOrderField",void 0),No=l([k("esri.layers.support.LevelLayerInfo")],No);const rle=No;let np=class extends ne{constructor(t){super(t),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};l([p({type:String,json:{write:!0}})],np.prototype,"layerId",void 0),l([p({type:String,json:{write:!0}})],np.prototype,"nameField",void 0),l([p({type:String,json:{write:!0}})],np.prototype,"siteIdField",void 0),l([p({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],np.prototype,"sublayerId",void 0),np=l([k("esri.layers.support.SiteLayerInfo")],np);const ile=np;let qm=class extends ne{constructor(t){super(t),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};l([p({type:rle,json:{write:!0}})],qm.prototype,"levelLayer",void 0),l([p({type:nle,json:{write:!0}})],qm.prototype,"facilityLayer",void 0),l([p({type:ile,json:{write:!0}})],qm.prototype,"siteLayer",void 0),qm=l([k("esri.support.MapFloorInfo")],qm);const sle=qm;var sl;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(sl||(sl={}));var Y3;let Hm=Y3=class extends ne{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new Y3(q({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};l([p({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],Hm.prototype,"activeRange",void 0),l([p({type:[Number],json:{write:!0}})],Hm.prototype,"currentRangeExtent",void 0),l([p({type:[Number],json:{write:!0}})],Hm.prototype,"fullRangeExtent",void 0),Hm=Y3=l([k("esri.webdoc.RangeInfo")],Hm);const Zk=Hm;var K3;let La=K3=class extends ne{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new K3(q({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};l([p({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],La.prototype,"enabled",void 0),l([p({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],La.prototype,"longNames",void 0),l([p({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],La.prototype,"minimized",void 0),l([p({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],La.prototype,"pinnedLevels",void 0),l([p({type:String,json:{read:{source:"site"},write:{target:"site"}}})],La.prototype,"site",void 0),l([p({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],La.prototype,"facility",void 0),l([p({type:String,json:{read:{source:"level"},write:{target:"level"}}})],La.prototype,"level",void 0),La=K3=l([k("esri.webdoc.widgets.FloorFilter")],La);const ole=La;var X3;const Pb=new pt({slider:"slider",picker:"picker"});let Wm=X3=class extends ne{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new X3({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};l([p({type:Pb.apiValues,nonNullable:!0,json:{type:Pb.jsonValues,default:null,read:{reader:Pb.read},write:{isRequired:!0,writer:Pb.write}}})],Wm.prototype,"interactionMode",void 0),l([p({type:Mt,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=this.stopInterval!=null;return{enabled:!e,isRequired:!e}}}}})],Wm.prototype,"numStops",void 0),l([p({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],Wm.prototype,"stopInterval",void 0),Wm=X3=l([k("esri.webdoc.widgets.Range")],Wm);const ale=Wm,Jk=hr()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let _w=class extends vt(ne){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return bG(this.value,this.unit,"milliseconds")}};l([ke(Jk,{nonNullable:!0})],_w.prototype,"unit",void 0),l([p({type:Number,json:{write:!0},nonNullable:!0})],_w.prototype,"value",void 0),_w=l([k("esri.time.TimeInterval")],_w);const Tg=_w;var Q3;let sr=Q3=class extends ne{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){return e?ur.fromArray(e):void 0}writeCurrentTimeExtent(e,t,n){e&&lr(n,e.toArray(),t)}readFullTimeExtent(e,t){const n=t.properties;if(!n)return;const r=n.endTime!=null?new Date(n.endTime):null,i=n.startTime!=null?new Date(n.startTime):null;return new ur({start:i,end:r})}writeFullTimeExtent(e,t){if(!e)return;const n=t.properties=t.properties||{},r=e.end,i=e.start;r&&(n.endTime=r!=null?r.getTime():null),i&&(n.startTime=i!=null?i.getTime():null)}readStopInterval(e,t,n){return e?Tg.fromJSON({value:e.interval,unit:e.units},n):null}writeStopInterval(e,t,n,r){if(!e)return;const i=e.toJSON(r);lr("properties.timeStopInterval",{interval:i.value,units:i.unit},t)}readStops(e){return e!=null&&e.length?e.map(t=>new Date(t)):null}writeStops(e,t,n){e!=null&&e.length&&lr(n,e.map(r=>r.getTime()),t)}clone(){return new Q3(q({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};l([p({type:ur,json:{type:[[Mt,Og]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],sr.prototype,"currentTimeExtent",void 0),l([de("currentTimeExtent")],sr.prototype,"readCurrentTimeExtent",null),l([ge("currentTimeExtent")],sr.prototype,"writeCurrentTimeExtent",null),l([p({type:ur,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],sr.prototype,"fullTimeExtent",void 0),l([de("fullTimeExtent")],sr.prototype,"readFullTimeExtent",null),l([ge("fullTimeExtent")],sr.prototype,"writeFullTimeExtent",null),l([p({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],sr.prototype,"loop",void 0),l([p({type:Mt,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var r;const e=!!this.stopInterval,t=!!((r=this.stops)!=null&&r.length),n=!(e||t);return{enabled:n,isRequired:n}}}}})],sr.prototype,"numStops",void 0),l([p({type:[1,2],nonNullable:!0,json:{type:Mt,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],sr.prototype,"numThumbs",void 0),l([p({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],sr.prototype,"stopDelay",void 0),l([p({type:Tg,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:Jk.jsonValues.filter(e=>e!=="esriTimeUnitsUnknown")}},overridePolicy(){var n;const e=this.numStops!=null,t=!!((n=this.stops)!=null&&n.length);return{enabled:!t,isRequired:!(e||t)}}}}})],sr.prototype,"stopInterval",void 0),l([de("stopInterval")],sr.prototype,"readStopInterval",null),l([ge("stopInterval")],sr.prototype,"writeStopInterval",null),l([p({type:[Date],json:{type:[Mt],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],sr.prototype,"stops",void 0),l([de("stops")],sr.prototype,"readStops",null),l([ge("stops")],sr.prototype,"writeStops",null),sr=Q3=l([k("esri.webdoc.widgets.TimeSlider")],sr);const lle=sr;var eP;let Zm=eP=class extends ne{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new eP(q({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};l([p({type:ale,json:{write:!0}})],Zm.prototype,"range",void 0),l([p({type:lle,json:{write:!0}})],Zm.prototype,"timeSlider",void 0),l([p({type:ole,json:{write:!0}})],Zm.prototype,"floorFilter",void 0),Zm=eP=l([k("esri.webdoc.Widgets")],Zm);const ule=Zm,cle={width:600,height:400},Cb=1.5;function dle(e,t){t=t||cle;let{width:n,height:r}=t;const i=n/r;return i<Cb?r=n/Cb:i>Cb&&(n=r*Cb),n>e.width&&(r*=e.width/n,n=e.width),r>e.height&&(n*=e.height/r,r=e.height),{width:Math.round(n),height:Math.round(r)}}function hle(e,t){return{...qG(e,t),readResourcePaths:[]}}function $3e(e,t,n){const r=cr(e.itemUrl);return{...qG(e,t),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:r?{rootPath:r.path,writtenUrls:[]}:null,resources:n?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function qG(e,t){return{origin:t,url:cr(e.itemUrl),portal:e.portal||oi.getDefault(),portalItem:e}}function ple(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function HG(e){return typeof e=="string"?cr(e):q(e)}function fle(e,t,n){const r={};for(const i in e){if(i==="declaredClass")continue;const s=e[i];if(s!=null&&typeof s!="function")if(Array.isArray(s))r[i]=s.map(o=>fle(o));else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(n==null?void 0:n[i]);r[i]=JSON.stringify(o)}else r[i]=JSON.stringify(s);else r[i]=s}return r}function mle(e){return{geometryType:D0(e[0]),geometries:e.map(t=>t.toJSON())}}function WG(e,t,n){const r=Zie(t);return e.map(i=>{const s=r.fromJSON(i);return s.spatialReference=n,s})}let rp=class extends ne{constructor(t){super(t),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const t=this.geometries.map(i=>i.toJSON()),n=this.geometries[0],r={};return r.outSR=_T(this.outSpatialReference),r.inSR=_T(n.spatialReference),r.geometries=JSON.stringify({geometryType:D0(n),geometries:t}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};l([p()],rp.prototype,"geometries",void 0),l([p({json:{read:{source:"outSR"}}})],rp.prototype,"outSpatialReference",void 0),l([p()],rp.prototype,"transformation",void 0),l([p()],rp.prototype,"transformForward",void 0),rp=l([k("esri.rest.support.ProjectParameters")],rp);const ZG=rp,yle=jn(ZG);async function gle(e,t,n){t=yle(t);const r=HG(e),i={...r.query,f:"json",...t.toJSON()},s=t.outSpatialReference,o=D0(t.geometries[0]),a=ple(i,n);return Lt(r.path+"/project",a).then(({data:{geometries:h}})=>WG(h,o,s))}function _le(e,t){var n;return t.resourceInfo?JG(t,t.resourceInfo,{origin:e.origin}):(n=t.portalItem)!=null&&n.id?wle(e,t,t.portalItem):Promise.resolve()}function JG(e,t,n){const r={context:{...n,layerContainerType:"operational-layers"}};return e.portalItem&&(r.context.portal=e.portalItem.portal||oi.getDefault()),pe(()=>import("./layersCreator-BXto2E8l.js"),__vite__mapDeps([9,10,11,12])).then(({populateOperationalLayers:i})=>{const s=[],o=t.operationalLayers;o!=null&&o.length&&s.push(i(e.layers,o,r));const a={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},h=t.tables;return h!=null&&h.length&&s.push(i(e.tables,h,a)),Promise.allSettled(s).then(()=>{})})}async function wle(e,t,n){var o;if(await n.load().catch(a=>{throw new Y(`${e.name}:load-portal-item`,"Failed to load portal item",{error:a})}),n.type!==e.itemType)throw new Y(`${e.name}:invalid-portal-item`,`Invalid portal item type '${n.type}', expected '${e.itemType}'`,{type:n.type});const r=await n.fetchData();t.resourceInfo=r;const i=hle(n,e.origin);await vle(e,t,r,i),t.resourceReferences={portalItem:n,paths:i.readResourcePaths};const s=await Sle(t.initialViewProperties,n,fe.getLogger(t));if(s){const a=((o=t.initialViewProperties)==null?void 0:o.clone())??e.createInitialViewProperties();a.viewpoint=s,t.initialViewProperties=a}}function vle(e,t,n,r){const i=ble(e,n);return t.read(i,r),JG(t,i,r)}function ble(e,t){const n=e.parseVersion(t.version||"",e.name);return e.currentVersion.validate(n),t.version=`${n.major}.${n.minor}`,t}async function Sle(e,t,n){var s;if((s=e==null?void 0:e.viewpoint)==null?void 0:s.targetGeometry)return null;const i=await Tle(e,t,n);return i?new $r({targetGeometry:i}):null}async function Tle(e,t,n){const r=e==null?void 0:e.spatialReference,i=t==null?void 0:t.extent;if(!r||!i)return null;if(r.isWGS84)return i.clone();if(r.isWebMercator)return Ad(i);const{getGeometryServiceURL:s}=await pe(()=>import("./geometryServiceUtils-BccF8_EG.js"),[]);try{const o=await s(t),a=new ZG({geometries:[i],outSpatialReference:r});return(await gle(o,a))[0]}catch(o){n.error("Error projecting item's extent:",o)}return null}function f5(e){return{enabled:!!(e!=null&&e.length)}}const Yk=new pt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var tP;let Jm=tP=class extends ne{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new tP({exactMatch:this.exactMatch,type:this.type,name:this.name})}};l([p({type:Boolean,json:{write:!0}})],Jm.prototype,"exactMatch",void 0),l([p({type:String,json:{write:!0}})],Jm.prototype,"name",void 0),l([ke(Yk)],Jm.prototype,"type",void 0),Jm=tP=l([k("esri.webdoc.applicationProperties.SearchLayerField")],Jm);const xle=Jm;var nP;let Ym=nP=class extends ne{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new nP(q({field:this.field,id:this.id,subLayer:this.subLayer}))}};l([p({type:xle,json:{write:{isRequired:!0}}})],Ym.prototype,"field",void 0),l([p({type:String,json:{write:{isRequired:!0}}})],Ym.prototype,"id",void 0),l([p({type:Mt,json:{write:!0}})],Ym.prototype,"subLayer",void 0),Ym=nP=l([k("esri.webdoc.applicationProperties.SearchLayer")],Ym);const Ele=Ym;var rP;let Km=rP=class extends ne{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new rP({exactMatch:this.exactMatch,type:this.type,name:this.name})}};l([p({type:Boolean,json:{write:!0}})],Km.prototype,"exactMatch",void 0),l([p({type:String,json:{write:!0}})],Km.prototype,"name",void 0),l([ke(Yk)],Km.prototype,"type",void 0),Km=rP=l([k("esri.webdoc.applicationProperties.SearchTableField")],Km);const $le=Km;var iP;let ww=iP=class extends ne{constructor(e){super(e),this.field=null,this.id=null}clone(){return new iP(q({field:this.field,id:this.id}))}};l([p({type:$le,json:{write:{isRequired:!0}}})],ww.prototype,"field",void 0),l([p({type:String,json:{write:{isRequired:!0}}})],ww.prototype,"id",void 0),ww=iP=l([k("esri.webdoc.applicationProperties.SearchTable")],ww);const Mle=ww;var sP;const YG=Ae.ofType(Ele),KG=Ae.ofType(Mle);let Na=sP=class extends ne{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new YG,this.tables=new KG}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,n){t[n]=!e}clone(){return new sP(q({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};l([p({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],Na.prototype,"addressSearchEnabled",void 0),l([de("addressSearchEnabled")],Na.prototype,"readAddressSearchEnabled",null),l([ge("addressSearchEnabled")],Na.prototype,"writeAddressSearchEnabled",null),l([p({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],Na.prototype,"enabled",void 0),l([p({type:String,json:{write:!0}})],Na.prototype,"hintText",void 0),l([p({type:YG,json:{write:{overridePolicy:f5},origins:{"web-scene":{write:{isRequired:!0}}}}})],Na.prototype,"layers",void 0),l([p({type:KG,json:{read:!0,write:{overridePolicy:f5}}})],Na.prototype,"tables",void 0),Na=sP=l([k("esri.webdoc.applicationProperties.Search")],Na);const Ile=Na;var oP;let zS=oP=class extends ne{constructor(e){super(e),this.search=null}clone(){return new oP(q({search:this.search}))}};l([p({type:Ile,json:{write:!0}})],zS.prototype,"search",void 0),zS=oP=l([k("esri.webdoc.applicationProperties.Viewing")],zS);const Ple=zS;var aP;let Xm=aP=class extends ne{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new aP(q({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};l([p({json:{write:!0}})],Xm.prototype,"editing",void 0),l([p({json:{write:!0}})],Xm.prototype,"offline",void 0),l([p({type:Ple,json:{write:!0}})],Xm.prototype,"viewing",void 0),Xm=aP=l([k("esri.webmap.ApplicationProperties")],Xm);const Cle=Xm;var lP;let Cu=lP=class extends ne{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return xU(this.url)}get isDataURI(){return Fu(this.url)}clone(){return new lP({url:this.url})}};l([p({type:String,json:{write:{isRequired:!0}}})],Cu.prototype,"url",void 0),l([p()],Cu.prototype,"isSecureUrl",null),l([p()],Cu.prototype,"isDataURI",null),Cu=lP=l([k("esri.webdoc.support.SlideThumbnail")],Cu);const Ole={type:ur,json:{read:{source:"timeExtent",reader:e=>e?Array.isArray(e)?ur.fromArray(e):ur.fromJSON(e):null},write:{writer:(e,t,n,r)=>{e&&(e.isEmpty?r!=null&&r.messages&&r.messages.push(new Y("invalid-timeExtent","TimeExtent cannot be empty")):t[n]=e.toArray())},target:{timeExtent:{type:[[Mt,Og]]}}}}};var uP;let Da=uP=class extends zx(ne){constructor(e){super(e),this.name=null,this.thumbnail=new Cu,this.timeExtent=null}castThumbnail(e){return typeof e=="string"?new Cu({url:e}):jn(Cu,e)}set viewpoint(e){const{targetGeometry:t,scale:n}=e;t!=null&&t.type==="point"&&n==null&&fe.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e),this._set("viewpoint",e)}readViewpoint(e,t){const{extent:n,viewpoint:r}=t;return $r.fromJSON(r||{targetGeometry:n})}writeViewpoint(e,t,n,r){if(!e)return;const{targetGeometry:i}=e;if(i==null||i.type==="extent")i!=null&&(t.extent=i.toJSON()),t[n]=e.toJSON();else{const s="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";r!=null&&r.messages?r.messages.push(new Y("property:unsupported",s)):fe.getLogger(this).error(s)}}clone(){return new uP(q({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};l([p({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Da.prototype,"name",void 0),l([p({type:Cu,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],Da.prototype,"thumbnail",void 0),l([kt("thumbnail")],Da.prototype,"castThumbnail",null),l([p(Ole)],Da.prototype,"timeExtent",void 0),l([p({type:$r,nonNullable:!0,json:{write:!0}})],Da.prototype,"viewpoint",null),l([de("viewpoint",["extent","viewpoint"])],Da.prototype,"readViewpoint",null),l([ge("viewpoint")],Da.prototype,"writeViewpoint",null),Da=uP=l([k("esri.webmap.Bookmark")],Da);const Ale=Da;var cP;let VS=cP=class extends ne{constructor(e){super(e),this.color=new Ze([0,0,0,1])}clone(){return new cP(q({color:this.color}))}};l([p({type:Ze,json:{write:!0}})],VS.prototype,"color",void 0),VS=cP=l([k("esri.webmap.background.ColorBackground")],VS);const Yx=VS;let eu=class extends vt(Fe){constructor(t){super(t),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=ca,this.viewpoint=null}};l([p({type:Yx})],eu.prototype,"background",void 0),l([p({type:Zk})],eu.prototype,"rangeInfo",void 0),l([p({type:dt})],eu.prototype,"spatialReference",void 0),l([p({type:ur})],eu.prototype,"timeExtent",void 0),l([p({nonNullable:!0})],eu.prototype,"timeZone",void 0),l([p({type:$r})],eu.prototype,"viewpoint",void 0),eu=l([k("esri.webmap.InitialViewProperties")],eu);const AT=eu;let XG=class dP{constructor(t,n,r=""){this.major=t,this.minor=n,this._context=r}lessThan(t,n){return this.major<t||t===this.major&&this.minor<n}greaterEqual(t,n){return!this.lessThan(t,n)}validate(t){if(this.major!==t.major){const n=this._context&&this._context+":",r=this._context&&this._context+" ";throw new Y(n+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new dP(this.major,this.minor,this._context)}static parse(t,n=""){const[r,i]=t.split("."),s=/^\s*\d+\s*$/;if(!(r!=null&&r.match)||!s.test(r))throw new Y((n&&n+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(i!=null&&i.match)||!s.test(i))throw new Y((n&&n+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(r,10),a=parseInt(i,10);return new dP(o,a,n)}},og=class extends XG{constructor(t,n){super(t,n,"webmap")}};const QG=Ae.ofType(Ale),kle=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),Rle="ArcGIS Pro",Lle=BG.JSAPI;let an=class extends Wx(ho.LoadableMixin(A0(xG))){constructor(t){super(t),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new QG,this.floorInfo=null,this.initialViewProperties=new AT,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=_x(async(n,r,i)=>{const{save:s,saveAs:o}=await pe(()=>import("./webdocSaveUtils-ChvRCv3b.js"),__vite__mapDeps([15,16,17,18,19,20]));switch(n){case sl.SAVE:return s(this.context,this,r);case sl.SAVE_AS:return o(this.context,this,i,r)}}),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=cn(this.portalItem)}initialize(){if(this.when().catch(t=>{fe.getLogger(this).error("#load()","Failed to load web map",t)}),this.resourceInfo){let t;try{t=this._validateJSON(this.resourceInfo)}catch(n){return void this.addResolvingPromise(Promise.reject(n))}this.read(t)}}set authoringApp(t){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",t)}writeAuthoringApp(t,n){t&&this._isAuthoringAppSetByUser?n.authoringApp=t:n.authoringApp=Lle}set authoringAppVersion(t){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",t)}writeAuthoringAppVersion(t,n){t&&this._isAuthoringAppVersionSetByUser?n.authoringAppVersion=t:n.authoringAppVersion=OU}readInitialViewProperties(t,n){var o,a;const r=new AT;n.background&&(r.background=Yx.fromJSON(n.background));const i=(o=n.initialState)==null?void 0:o.timeExtent;i&&(r.timeExtent=ur.fromArray(i));const s=(a=n.initialState)==null?void 0:a.viewpoint;return s&&(s.rotation&&og.parse(n.version||"","webmap").lessThan(2,20)&&n.authoringApp===Rle&&(s.rotation*=-1),r.viewpoint=$r.fromJSON(s)),n.mapRangeInfo&&(r.rangeInfo=Zk.fromJSON(n.mapRangeInfo)),n.spatialReference&&(r.spatialReference=dt.fromJSON(n.spatialReference)),n.timeZone&&(r.timeZone=n.timeZone),r}writeInitialViewProperties(t,n,r,i){var a;if(!t)return;(a=t.background)!=null&&a.color&&(n.background=t.background.write({},i));const{timeExtent:s,viewpoint:o}=t;if(o||s){const h={};o&&(h.viewpoint=o.write({},i)),s&&(h.timeExtent=s.toArray()),n.initialState=h}t.rangeInfo&&(n.mapRangeInfo=t.rangeInfo.toJSON(i)),t.spatialReference&&(n.spatialReference=t.spatialReference.write({},i)),n.timeZone=t.timeZone}writeLayers(t,n,r,i){n[r]=this._writeLayers(t,i,"operational-layers")}readSourceVersion(t,n){const[r,i]=n.version.split(".");return new og(parseInt(r,10),parseInt(i,10))}writeSourceVersion(t,n,r){n[r]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(t,n,r,i){const s=this._writeLayers(t,i,"tables");s.length&&(n[r]=s)}get thumbnailUrl(){var t;return((t=this.portalItem)==null?void 0:t.thumbnailUrl)||null}set thumbnailUrl(t){t?(this._override("thumbnailUrl",t),this._thumbnailFilename=this._generateCustomThumbnailFilename(t)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(t){return this.addResolvingPromise(_le(this.context,this)),Promise.resolve(this)}loadAll(){return $x(this,t=>{t(this.ground,this.basemap,this.layers,this.tables)})}read(t,n){n={...n,origin:this.context.origin};const r=this._getAuthoringPropsState();pU(this,t,i=>super.read(t,i),n),this._restoreAuthoringPropsFromState(r)}write(t,n){if(this.loadStatus!=="loaded"){const r=new Y("webmap:not-loaded","Web map must be loaded before it can be serialized");throw fe.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),n={...n,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(t,n)}async save(t){return this._debouncedSaveOperations(sl.SAVE,t)}async saveAs(t,n){return this._debouncedSaveOperations(sl.SAVE_AS,n,t)}async updateFrom(t,n){const r=this._updateFromInternal(t,n);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(t){var r,i,s,o;const n=this.resourceInfo;return this._collectAllLayersJSON([...((r=n==null?void 0:n.baseMap)==null?void 0:r.baseMapLayers)||[],...(n==null?void 0:n.operationalLayers)||[],...((o=(s=(i=this.basemap)==null?void 0:i.resourceInfo)==null?void 0:s.data)==null?void 0:o.baseMapLayers)||[]]).find(a=>a.id===t.id)}async updateItemThumbnail(){var t;this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await((t=this.portalItem)==null?void 0:t.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename})),this._clearThumbnailOverride())}getThumbnailState(){let t=this.thumbnailUrl;return t&&(t=this._isOverridden("thumbnailUrl")?t:MU(t,"w","8192")),{thumbnailUrl:t,filename:this._thumbnailFilename}}restoreThumbnailFromState(t){this.thumbnailUrl=t.thumbnailUrl,this._thumbnailFilename=t.filename}_collectAllLayersJSON(t){return t.reduce((n,r)=>(n.push(r),r.layerType==="GroupLayer"&&(n=n.concat(this._collectAllLayersJSON(r.layers||[]))),n),[])}_writeLayers(t,n,r){return n={...n,layerContainerType:r},t.map(i=>M3(i,r==="tables"?null:this.getLayerJSONFromResourceInfo(i),n)).filter(Dd).toArray()}_validateJSON(t){const n=og.parse(t.version||"","webmap");return this.context.currentVersion.validate(n),t.version=`${n.major}.${n.minor}`,t}_removeDanglingLayerRefs(){var o,a;const t=this.applicationProperties,n=(o=t==null?void 0:t.viewing)==null?void 0:o.search,r=h=>this.allLayers.some(f=>f.id===h);if(n!=null&&n.layers&&(n.layers=n.layers.filter(h=>r(h.id))),n!=null&&n.tables&&(n.tables=n.tables.filter(h=>this.tables.some(f=>f.id===h.id))),t){const h=(a=t.editing)==null?void 0:a.locationTracking;h!=null&&h.info&&!r(h.info.layerId)&&(t.editing=null)}const i="presentation"in this?this.presentation:null,s=i==null?void 0:i.slides;s&&s.forEach(h=>{h.visibleLayers&&(h.visibleLayers=h.visibleLayers.filter(f=>r(f.id)))})}async _updateFromInternal(t,n){if(n??(n={}),await Nx(()=>t.ready),this._updateInitialViewProperties(t,n),t.map===this)for(const r of t.allLayerViews)"visible"in r&&"visible"in r.layer&&r._isOverridden("visible")&&(r.layer.visible=r.visible),"featureEffect"in r&&"featureEffect"in r.layer&&r._isOverridden("featureEffect")&&(r.layer.featureEffect=r.featureEffect);await this._updateThumbnailUrl(t,n)}_updateInitialViewProperties(t,n){var r,i;if(n.backgroundExcluded||(this.initialViewProperties.background=(r=t.background)==null?void 0:r.clone()),this.initialViewProperties.spatialReference=(i=t.spatialReference)==null?void 0:i.clone(),this.initialViewProperties.timeZone=t.timeZone,n.viewpointExcluded||(this.initialViewProperties.viewpoint=new $r({rotation:t.rotation,scale:n.scalePreserved?t.scale:null,targetGeometry:this._getViewExtent(t)})),!n.widgetsExcluded)for(const s of t.persistableViewModels)s.updateWebDocument(this)}_getViewExtent(t){const n=t.center.clone().normalize(),r=t.extent.clone(),i=r.width/2;return r.xmin=n.x-i,r.xmax=n.x+i,r}async _updateThumbnailUrl(t,n){if(n.thumbnailExcluded)return;const r=dle(t,n.thumbnailSize),i=await t.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(i.dataUrl)}_setAutoGeneratedThumbnail(t){this.thumbnailUrl=t,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(t){if(Fu(t)){const n=of(t),r=n==null?void 0:n.mediaType,i=r&&kle.get(r.toLowerCase())||null,s=`thumbnail${Date.now()}`;return i?`${s}.${i}`:s}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(t){t.isAuthoringAppSetByUser?this.authoringApp=t.authoringApp:this._isAuthoringAppSetByUser=!1,t.isAuthoringAppVersionSetByUser?this.authoringAppVersion=t.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};l([p()],an.prototype,"_updateFromPromise",void 0),l([p({type:Cle,json:{write:!0}})],an.prototype,"applicationProperties",void 0),l([p({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],an.prototype,"authoringApp",null),l([ge("authoringApp")],an.prototype,"writeAuthoringApp",null),l([p({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],an.prototype,"authoringAppVersion",null),l([ge("authoringAppVersion")],an.prototype,"writeAuthoringAppVersion",null),l([p({type:QG,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],an.prototype,"bookmarks",void 0),l([p({type:sle,json:{name:"mapFloorInfo",write:!0}})],an.prototype,"floorInfo",void 0),l([p({type:AT,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:Yx},"initialState.timeExtent":{type:ur},"initialState.viewpoint":{type:$r},mapRangeInfo:{type:Zk},spatialReference:{type:dt},"timeZone:":{type:String}}}}})],an.prototype,"initialViewProperties",void 0),l([de("initialViewProperties")],an.prototype,"readInitialViewProperties",null),l([ge("initialViewProperties")],an.prototype,"writeInitialViewProperties",null),l([p({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],an.prototype,"layers",void 0),l([ge("layers")],an.prototype,"writeLayers",null),l([p({type:ll})],an.prototype,"portalItem",void 0),l([p()],an.prototype,"resourceInfo",void 0),l([p({readOnly:!0,type:og,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],an.prototype,"sourceVersion",void 0),l([de("sourceVersion")],an.prototype,"readSourceVersion",null),l([ge("sourceVersion")],an.prototype,"writeSourceVersion",null),l([p({json:{read:!1,write:{ignoreOrigin:!0}}})],an.prototype,"tables",void 0),l([ge("tables")],an.prototype,"writeTables",null),l([p()],an.prototype,"thumbnailUrl",null),l([p()],an.prototype,"updatingFromView",null),l([p({type:ule,json:{write:!0}})],an.prototype,"widgets",void 0),an=l([k("esri.WebDocument2D")],an);const Nle=an;async function eB(e,t){const{WhereClause:n}=await pe(()=>import("./WhereClause-BWgheUn_.js").then(r=>r.W),__vite__mapDeps([21,22]));return n.create(e,{fieldsIndex:t})}function Dle(e,t){return e==="1=1"?t??e:t==="1=1"?e??t:e!=null&&e!==""?t!=null&&t!==""?`(${e}) AND (${t})`:e:t}const Fle={ar:"ar-u-nu-latn"};let US=new WeakMap,tB={};function hP(e){const t=e||tB;if(!US.has(t)){const n=Zi(),r=Fle[Zi()]||n;US.set(t,new Intl.NumberFormat(r,e))}return US.get(t)}function O3e(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function A3e(e,t){return Object.is(e,-0)&&(e=0),hP(t).format(e)}function k3e(e,t=Zi()){var r,i;if(!e)return null;let n=m5.get(t);if(!n){const s=hP().formatToParts(12345.6),o=[...hP({useGrouping:!1}).format(9876543210)].reverse(),a=new Map(o.map((T,M)=>[T,M])),h=new RegExp(`[${(r=s.find(T=>T.type==="group"))==null?void 0:r.value}]`,"g"),f=new RegExp(`[${(i=s.find(T=>T.type==="decimal"))==null?void 0:i.value}]`),_=new RegExp(`[${o.join("")}]`,"g"),w=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,b=/[-\u2212\u2013\u2014\u2015]/g;n=T=>{if((T=T.trim().replaceAll(h,"").replace(f,".").replace(_,I=>String(a.get(I))).replaceAll(w,"").replaceAll(b,"-"))==="")return null;const M=Number(T);return isNaN(M)?null:M},m5.set(t,n)}return n(e)}wk(()=>{US=new WeakMap,tB={}});const m5=new Map;async function jle(e,t,n,r){const i=t.exec(n);if(!i)throw new Y("esri-intl:invalid-bundle",`Bundle id "${n}" is not compatible with the pattern "${t}"`);const s=i[1]?`${i[1]}/`:"",o=i[2],a=pne(r),h=`${s}${o}.json`,f=a?`${s}${o}_${a}.json`:h;let _;try{_=await y5(e(f))}catch(w){if(f===h)throw new Y("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:w});try{_=await y5(e(h))}catch(b){throw new Y("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:b})}}return _}async function y5(e){if(g5.fetchBundleAsset!=null)return g5.fetchBundleAsset(e);const t=await Lt(e,{responseType:"text"});return JSON.parse(t.data)}let zle=class{constructor({base:t="",pattern:n,location:r=new URL(window.location.href)}){let i;i=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof n=="string"?new RegExp(`^${n}`):n,this.getAssetUrl=i,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,n){return jle(this.getAssetUrl,this.matcher,t,n)}};function Vle(e){return new zle(e)}const g5={};hne(Vle({pattern:"esri/",location:Gt}));function Kk(e){return typeof e=="string"||e instanceof String}var ag;(function(e){e.HM="HH:mm",e.HMS="HH:mm:ss",e.HMS_MS="HH:mm:ss.SSS"})(ag||(ag={}));const Ule=[ag.HMS_MS,ag.HMS,ag.HM,"TT"],Gle="yyyy-MM-dd";ag.HMS;function _5(e){if(!e||!Kk(e))return null;const t=ut.fromFormat(e,Gle);return t.isValid?t:null}function w5(e){return e&&Kk(e)?KK(Ule,t=>{const n=ut.fromFormat(e,t);return n.isValid?n:null})??null:null}function v5(e){if(!e||!Kk(e))return null;const t=ut.fromISO(e);return t.isValid?t:null}var xg;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(xg||(xg={}));const Ble=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function qle(e){return e!=null&&Ble.has(e.type)}function nB(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function rB(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function iB(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function Hle(e,t,n){const r=e==null?void 0:e.domain;if(!r)return null;switch(r.type){case"range":{const{min:i,max:s}=Wle(e);if(i!=null&&+t<i||s!=null&&+t>s)return xg.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(r.codedValues==null||r.codedValues.every(i=>i==null||i.code!==t))return xg.INVALID_CODED_VALUE}return null}function Wle(e,t){const n=e==null?void 0:e.domain;if(!n||n.type!=="range")return;const r="range"in n?n.range[0]:n.minValue,i="range"in n?n.range[1]:n.maxValue,s=qle(e);return nB(e)||iB(e)||rB(e)?{...Zle(e,i,r),isInteger:s}:{min:r!=null&&typeof r=="number"?r:null,max:i!=null&&typeof i=="number"?i:null,rawMin:r,rawMax:i,isInteger:s}}function Zle(e,t,n){var r,i,s,o,a,h;return nB(e)?{min:(r=_5(n))==null?void 0:r.toMillis(),max:(i=_5(t))==null?void 0:i.toMillis(),rawMin:n,rawMax:t}:iB(e)?{min:(s=w5(n))==null?void 0:s.toMillis(),max:(o=w5(t))==null?void 0:o.toMillis(),rawMin:n,rawMax:t}:rB(e)?{min:(a=v5(n))==null?void 0:a.toMillis(),max:(h=v5(t))==null?void 0:h.toMillis(),rawMin:n,rawMax:t}:{max:null,min:null}}const Jle=()=>fe.getLogger("esri.support.arcadeOnDemand");let kM;function yf(){return kM||(kM=(async()=>{const e=await pe(()=>import("./arcadeUtils-DFGO5x6Y.js").then(t=>t.i),__vite__mapDeps([23,24,22,25,26,27,28,29,30]));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),kM}const Yle=(e,t,n)=>sB.create(e,t,n,null,["$feature","$view"],[]),Kle=(e,t,n,r)=>sB.create(e,t,n,r,["$feature","$view"],[]);let sB=class oB{constructor(t,n,r,i,s,o,a){this.services=null,this.script=t,this.evaluate=i;const h=Array.isArray(o)?o:o==null?void 0:o.fields;this.fields=h??[],this._syntaxTree=r,this._arcade=n,this._arcadeFeature=s,this._spatialReference=a,this._referencesGeometry=n.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,n,r,i,s,o){const{arcade:a,Feature:h,Dictionary:f}=await yf(),_=n instanceof dt?n:dt.fromJSON(n);let w;try{w=a.parseScript(t,o)}catch(ue){return Jle().error(new Y("arcade-bad-expression","Failed to parse arcade script",{script:t,error:ue})),null}const b=s.reduce((ue,be)=>({...ue,[be]:null}),{});let T=null;i!=null&&(T=new f(i),T.immutable=!0,b.$config=null);const M=a.scriptUsesGeometryEngine(w),I=M&&a.enableGeometrySupport(),C=a.scriptUsesFeatureSet(w)&&a.enableFeatureSetSupport(),N=a.scriptIsAsync(w),j=N&&a.enableAsyncSupport(),z={vars:b,spatialReference:_,useAsync:!!j};await Promise.all([I,C,j]);const U=new Set;await a.loadDependentModules(U,w,null,N,M);const K=new f;K.immutable=!1,K.setField("scale",0);const J=a.compileScript(w,z),le=(ue,be)=>{var _e;const xe=(_e=ue.$view)==null?void 0:_e.timeZone;return"$view"in ue&&ue.$view&&(K.setField("scale",typeof ue.$view=="object"&&"scale"in ue.$view?ue.$view.scale:void 0),ue.$view=K),T&&(ue.$config=T),J({vars:ue,spatialReference:_,services:be,timeZone:xe})};return new oB(t,a,w,le,new h,r,_)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const Xle=/^([0-9_])/,Qle=/[^a-z0-9_\u0080-\uffff]+/gi;function eue(e){return e==null?null:e.trim().replaceAll(Qle,"_").replace(Xle,"F$1")||null}const tue=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],nue=["field","normalizationField"];function b5(e,t){if(e!=null&&t!=null){for(const n of Array.isArray(e)?e:[e])if(S5(tue,n,t),"visualVariables"in n&&n.visualVariables)for(const r of n.visualVariables)S5(nue,r,t)}}function S5(e,t,n){if(e)for(const r of e){const i=fx(r,t),s=i&&typeof i!="function"&&n.get(i);s&&lr(r,s.name,t)}}function aB(e,t){var n;if(e!=null&&((n=t==null?void 0:t.fields)!=null&&n.length))if("startField"in e){const r=t.get(e.startField),i=t.get(e.endField);e.startField=(r==null?void 0:r.name)??null,e.endField=(i==null?void 0:i.name)??null}else{const r=t.get(e.startTimeField),i=t.get(e.endTimeField);e.startTimeField=(r==null?void 0:r.name)??null,e.endTimeField=(i==null?void 0:i.name)??null}}const RM=new Set;function Kx(e,t){return e&&t?(RM.clear(),gf(RM,e,t),Array.from(RM).sort()):[]}function gf(e,t,n){var r;if(n)if((r=t==null?void 0:t.fields)!=null&&r.length)if(n.includes("*"))for(const{name:i}of t.fields)e.add(i);else for(const i of n)Ti(e,t,i);else{if(n.includes("*"))return e.clear(),void e.add("*");for(const i of n)i!=null&&e.add(i)}}function Ti(e,t,n){if(typeof n=="string")if(t){const r=t.get(n);r&&e.add(r.name)}else e.add(n)}function L3e(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(n=>n.name):t}function N3e(e,t,n=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const r=Kx(e,t);return r.length/e.fields.length>=n?["*"]:r}async function ai(e,t,n){var s;if(!n)return;const{arcadeUtils:r}=await yf(),i=r.extractFieldNames(n,(s=t==null?void 0:t.fields)==null?void 0:s.map(o=>o.name));for(const o of i)Ti(e,t,o)}async function lB(e,t,n){if(n&&n!=="1=1"){const r=await eB(n,t);if(!r.isStandardized)throw new Y("fieldUtils:collectFilterFields","Where clause is not standardized",{where:n});gf(e,t,r.fieldNames)}}function rue({displayField:e,fields:t}){return e||(t!=null&&t.length?LM(t,"name-or-title")||LM(t,"unique-identifier")||LM(t,"type-or-category")||iue(t):null)}function iue(e){for(const t of e){if(!(t!=null&&t.name))continue;const n=t.name.toLowerCase();if(n.includes("name")||n.includes("title"))return t.name}return null}function LM(e,t){for(const n of e)if(n!=null&&n.valueType&&n.valueType===t)return n.name;return null}async function D3e(e,t){var r;if(!t)return;const n=(r=t.elevationInfo)==null?void 0:r.featureExpressionInfo;return n?n.collectRequiredFields(e,t.fieldsIndex):void 0}function sue(e,t,n){n.onStatisticExpression?ai(e,t,n.onStatisticExpression.expression):e.add(n.onStatisticField)}async function F3e(e,t,n){if(!t||!n||!("fields"in n))return;const r=[],i=n.popupTemplate;r.push(oue(e,t,i)),n.fields&&r.push(...n.fields.map(async s=>sue(e,t.fieldsIndex,s))),await Promise.all(r)}async function oue(e,t,n){const r=[];n!=null&&n.expressionInfos&&r.push(...n.expressionInfos.map(s=>ai(e,t.fieldsIndex,s.expression)));const i=n==null?void 0:n.content;if(Array.isArray(i))for(const s of i)s.type==="expression"&&s.expressionInfo&&r.push(ai(e,t.fieldsIndex,s.expressionInfo.expression));await Promise.all(r)}async function j3e(e,t,n){t&&(t.timeInfo&&(n!=null&&n.timeExtent)&&gf(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&gf(e,t.fieldsIndex,[t.floorInfo.floorField]),(n==null?void 0:n.where)!=null&&await lB(e,t.fieldsIndex,n.where))}async function z3e(e,t,n){t&&n&&await Promise.all(n.map(r=>aue(e,t,r)))}async function aue(e,t,n){t&&n&&(n.valueExpression?await ai(e,t.fieldsIndex,n.valueExpression):n.field&&Ti(e,t.fieldsIndex,n.field))}function V3e(e){return e?Kx(e.fieldsIndex,uB(e)):[]}function lue(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?Kx(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const uue=new Set(["oid","global-id","guid"]),cue=new Set(["oid","global-id"]),due=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function hue(e){const t=new Set;cB(e).forEach(r=>t.add(r)),lue(e).forEach(r=>t.add(r.toLowerCase()));const n=e&&"infoFor3D"in e?e.infoFor3D:void 0;return n&&(Object.values(n.assetMapFieldRoles).forEach(r=>t.add(r.toLowerCase())),Object.values(n.transformFieldRoles).forEach(r=>t.add(r.toLowerCase()))),Array.from(t)}function uB(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:n,creatorField:r,editDateField:i,editorField:s}=t;return[n,r,i,s].filter(Boolean)}function cB(e){return uB(e).map(t=>t.toLowerCase())}function pue(e,t){var n;return e.editable&&!uue.has(e.type)&&!cB(t).includes(((n=e.name)==null?void 0:n.toLowerCase())??"")}function fue(e,t){var r;const n=((r=e.name)==null?void 0:r.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&n===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&n===t.globalIdField.toLowerCase()||hue(t).includes(n)||cue.has(e.type)||due.some(i=>i.test(n)))}async function U3e(e,t){const{labelingInfo:n,fieldsIndex:r}=t;n!=null&&n.length&&await Promise.all(n.map(i=>mue(e,r,i)))}async function mue(e,t,n){if(!n)return;const r=n.getLabelExpression(),i=n.where;if(r.type==="arcade")await ai(e,t,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{Ti(e,t,o.slice(1,-1))})}await lB(e,t,i)}function yue(e){const t=e.defaultValue;return t!==void 0&&pB(e,t)?t:e.nullable?null:void 0}function G3e(e){const t=typeof e=="string"?{type:e}:e;return yB(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function dB(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function gue(e){return e===null||dB(e)}function _ue(e){return e===null||Number.isInteger(e)}function hB(e){return e!=null&&typeof e=="string"}function wue(e){return e===null||hB(e)}function vue(){return!0}function pB(e,t){let n;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":n=e.nullable?_ue:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":n=e.nullable?gue:dB;break;case"string":case"esriFieldTypeString":n=e.nullable?wue:hB;break;default:n=vue}return arguments.length===1?n:n(t)}const bue=["integer","small-integer","big-integer"],Sue=["single","double"],Tue=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],xue=["esriFieldTypeSingle","esriFieldTypeDouble"],fB=new Set([...bue,...Tue]),Eue=new Set([...Sue,...xue]),$ue=VV(fB,Eue);function Mue(e){return e!=null&&fB.has(e.type)}function mB(e){return e!=null&&$ue.has(e.type)}function yB(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function Iue(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function B3e(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function q3e(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function Pue(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function T5(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function x5(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function H3e(e,t){return Cue(e,t)===null}var kT,RT;function W3e(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function Cue(e,t){return e==null||e.nullable&&t===null?null:mB(e)&&!Oue(e.type,Number(t))?kT.OUT_OF_RANGE:pB(e,t)?e.domain?Hle(e,t):null:RT.INVALID_TYPE}function Oue(e,t){const n=typeof e=="string"?gB(e):e;if(!n)return!1;const r=n.min,i=n.max;return n.isInteger?Number.isInteger(t)&&t>=r&&t<=i:t>=r&&t<=i}function gB(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Aue;case"esriFieldTypeInteger":case"integer":return kue;case"esriFieldTypeBigInteger":case"big-integer":return Rue;case"esriFieldTypeSingle":case"single":return Lue;case"esriFieldTypeDouble":case"double":return Nue}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(kT||(kT={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(RT||(RT={}));const Aue={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},kue={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},Rue={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},Lue={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},Nue={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function Z3e(e,t,n){switch(e){case xg.INVALID_CODED_VALUE:return`Value ${n} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case xg.VALUE_OUT_OF_RANGE:return`Value ${n} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case RT.INVALID_TYPE:return`Value ${n} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case kT.OUT_OF_RANGE:{const{min:r,max:i}=gB(t.type);return`Value ${n} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${i}`}}}function J3e(e,t){return!Due(e,t,null)}function Due(e,t,n){if(!(t!=null&&t.attributes)||!e)return!0;const r=new Set(Object.keys(t.attributes));let i=!1;for(const s of e)if(!r.has(s)&&(i=!0,n==null))break;return i}function Fue(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}function _B(e){const t=e==null?void 0:e.match(/{[^}]+}/g);return t?t.map(n=>n.slice(1,-1).split(":")[0].trim()):[]}let GS=class extends ne{constructor(t){super(t),this.type=null}};l([p({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],GS.prototype,"type",void 0),GS=l([k("esri.popup.content.Content")],GS);const Vu=GS;var pP;let ip=pP=class extends Vu{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new pP({description:this.description,displayType:this.displayType,title:this.title})}};l([p({type:String,json:{write:!0}})],ip.prototype,"description",void 0),l([p({type:["auto","preview","list"],json:{write:!0}})],ip.prototype,"displayType",void 0),l([p({type:String,json:{write:!0}})],ip.prototype,"title",void 0),l([p({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],ip.prototype,"type",void 0),ip=pP=l([k("esri.popup.content.AttachmentsContent")],ip);const Eg=ip;var fP;let sp=fP=class extends Vu{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new fP({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?q(this.outFields):null})}};l([p()],sp.prototype,"creator",void 0),l([p()],sp.prototype,"destroyer",void 0),l([p()],sp.prototype,"outFields",void 0),l([p({type:["custom"],readOnly:!0})],sp.prototype,"type",void 0),sp=fP=l([k("esri.popup.content.CustomContent")],sp);const jue=sp;var mP;let Qm=mP=class extends ne{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new mP({title:this.title,expression:this.expression})}};l([p({type:String,json:{write:!0}})],Qm.prototype,"title",void 0),l([p({type:String,json:{write:!0}})],Qm.prototype,"expression",void 0),l([p({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Qm.prototype,"returnType",void 0),Qm=mP=l([k("esri.popup.ElementExpressionInfo")],Qm);const zue=Qm;var yP;let vw=yP=class extends Vu{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new yP({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};l([p({type:zue,json:{write:!0}})],vw.prototype,"expressionInfo",void 0),l([p({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],vw.prototype,"type",void 0),vw=yP=l([k("esri.popup.content.ExpressionContent")],vw);const Xx=vw;let ey=class extends vt(ne){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};l([ke(lae)],ey.prototype,"dateFormat",void 0),l([p({type:Boolean,json:{write:!0}})],ey.prototype,"digitSeparator",void 0),l([p({type:Mt,json:{write:!0}})],ey.prototype,"places",void 0),ey=l([k("esri.popup.support.FieldInfoFormat")],ey);const BS=ey;var gP;let Do=gP=class extends ne{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new gP({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};l([p({type:String,json:{write:!0}})],Do.prototype,"fieldName",void 0),l([p({type:BS,json:{write:!0}})],Do.prototype,"format",void 0),l([p({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Do.prototype,"isEditable",void 0),l([p({type:String,json:{write:!0}})],Do.prototype,"label",void 0),l([ke(new pt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Do.prototype,"stringFieldOption",void 0),l([p({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Do.prototype,"statisticType",void 0),l([p({type:String,json:{write:!0}})],Do.prototype,"tooltip",void 0),l([p({type:Boolean,json:{write:!0}})],Do.prototype,"visible",void 0),Do=gP=l([k("esri.popup.FieldInfo")],Do);const Xk=Do;var _P;let tu=_P=class extends Vu{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(n=>n.toJSON())}clone(){return new _P(q({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};l([p({type:Object,json:{write:!0}})],tu.prototype,"attributes",void 0),l([p({type:String,json:{write:!0}})],tu.prototype,"description",void 0),l([p({type:[Xk]})],tu.prototype,"fieldInfos",void 0),l([ge("fieldInfos")],tu.prototype,"writeFieldInfos",null),l([p({type:String,json:{write:!0}})],tu.prototype,"title",void 0),l([p({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],tu.prototype,"type",void 0),tu=_P=l([k("esri.popup.content.FieldsContent")],tu);const $g=tu;let op=class extends ne{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};l([p({type:String,json:{write:!0}})],op.prototype,"altText",void 0),l([p({type:String,json:{write:!0}})],op.prototype,"caption",void 0),l([p({type:String,json:{write:!0}})],op.prototype,"title",void 0),l([p({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],op.prototype,"type",void 0),op=l([k("esri.popup.content.mixins.MediaInfo")],op);const Qk=op;var wP;let ap=wP=class extends Fe{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new wP({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};l([p()],ap.prototype,"color",void 0),l([p()],ap.prototype,"fieldName",void 0),l([p()],ap.prototype,"tooltip",void 0),l([p()],ap.prototype,"value",void 0),ap=wP=l([k("esri.popup.content.support.ChartMediaInfoValueSeries")],ap);const Vue=ap;var vP;let Uc=vP=class extends ne{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new vP({colors:q(this.colors),fields:q(this.fields),normalizeField:this.normalizeField,series:q(this.series),tooltipField:this.tooltipField})}};l([p({type:[Ze],json:{type:[[Mt]],write:!0}})],Uc.prototype,"colors",void 0),l([p({type:[String],json:{write:!0}})],Uc.prototype,"fields",void 0),l([p({type:String,json:{write:!0}})],Uc.prototype,"normalizeField",void 0),l([p({type:[Vue],json:{read:!1}})],Uc.prototype,"series",void 0),l([p({type:String,json:{write:!0}})],Uc.prototype,"tooltipField",void 0),Uc=vP=l([k("esri.popup.content.support.ChartMediaInfoValue")],Uc);const Uue=Uc;let bw=class extends Qk{constructor(t){super(t),this.type=null,this.value=void 0}};l([p({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],bw.prototype,"type",void 0),l([p({type:Uue,json:{write:!0}})],bw.prototype,"value",void 0),bw=l([k("esri.popup.content.mixins.ChartMediaInfo")],bw);const Qx=bw,eE=hr()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var bP;let qS=bP=class extends Qx{constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new bP({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};l([p({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:eE.write}})],qS.prototype,"type",void 0),qS=bP=l([k("esri.popup.content.BarChartMediaInfo")],qS);const wB=qS;var SP;let HS=SP=class extends Qx{constructor(e){super(e),this.type="column-chart"}clone(){var e;return new SP({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};l([p({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:eE.write}})],HS.prototype,"type",void 0),HS=SP=l([k("esri.popup.content.ColumnChartMediaInfo")],HS);const vB=HS;var TP;let Sw=TP=class extends ne{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new TP({linkURL:this.linkURL,sourceURL:this.sourceURL})}};l([p({type:String,json:{write:!0}})],Sw.prototype,"linkURL",void 0),l([p({type:String,json:{write:!0}})],Sw.prototype,"sourceURL",void 0),Sw=TP=l([k("esri.popup.content.support.ImageMediaInfoValue")],Sw);const Gue=Sw;var xP;let ty=xP=class extends Qk{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new xP({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};l([p({type:Number,json:{write:!0}})],ty.prototype,"refreshInterval",void 0),l([p({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],ty.prototype,"type",void 0),l([p({type:Gue,json:{write:!0}})],ty.prototype,"value",void 0),ty=xP=l([k("esri.popup.content.ImageMediaInfo")],ty);const bB=ty;var EP;let WS=EP=class extends Qx{constructor(e){super(e),this.type="line-chart"}clone(){var e;return new EP({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};l([p({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:eE.write}})],WS.prototype,"type",void 0),WS=EP=l([k("esri.popup.content.LineChartMediaInfo")],WS);const SB=WS;var $P;let ZS=$P=class extends Qx{constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new $P({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};l([p({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:eE.write}})],ZS.prototype,"type",void 0),ZS=$P=l([k("esri.popup.content.PieChartMediaInfo")],ZS);const TB=ZS,MP={base:Qk,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":wB,"column-chart":vB,"line-chart":SB,"pie-chart":TB,image:bB}};var IP;let Fo=IP=class extends Vu{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?bB.fromJSON(t):t.type==="barchart"?wB.fromJSON(t):t.type==="columnchart"?vB.fromJSON(t):t.type==="linechart"?SB.fromJSON(t):t.type==="piechart"?TB.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(n=>n.toJSON())}clone(){return new IP(q({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};l([p()],Fo.prototype,"activeMediaInfoIndex",void 0),l([p({type:Object,json:{write:!0}})],Fo.prototype,"attributes",void 0),l([p({type:String,json:{write:!0}})],Fo.prototype,"description",void 0),l([p({types:[MP]})],Fo.prototype,"mediaInfos",void 0),l([de("mediaInfos")],Fo.prototype,"readMediaInfos",null),l([ge("mediaInfos")],Fo.prototype,"writeMediaInfos",null),l([p({type:String,json:{write:!0}})],Fo.prototype,"title",void 0),l([p({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Fo.prototype,"type",void 0),Fo=IP=l([k("esri.popup.content.MediaContent")],Fo);const s0=Fo;var PP;let Tw=PP=class extends ne{constructor(e){super(e),this.field=null,this.order=null}clone(){return new PP({field:this.field,order:this.order})}};l([p({type:String,json:{write:!0}})],Tw.prototype,"field",void 0),l([p({type:["asc","desc"],json:{write:!0}})],Tw.prototype,"order",void 0),Tw=PP=l([k("esri.popup.support.RelatedRecordsInfoFieldOrder")],Tw);const eR=Tw;let Fa=class extends vt(Vu){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};l([p({type:String,json:{write:!0}})],Fa.prototype,"description",void 0),l([p({type:Number,json:{type:Mt,write:!0}})],Fa.prototype,"displayCount",void 0),l([p({type:["list"],json:{write:!0}})],Fa.prototype,"displayType",void 0),l([p({type:[eR],json:{write:!0}})],Fa.prototype,"orderByFields",void 0),l([p({type:Number,json:{type:Mt,write:!0}})],Fa.prototype,"relationshipId",void 0),l([p({type:String,json:{write:!0}})],Fa.prototype,"title",void 0),l([p({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Fa.prototype,"type",void 0),Fa=l([k("esri.popup.content.RelationshipContent")],Fa);const o0=Fa;var CP;let xw=CP=class extends Vu{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new CP({text:this.text})}};l([p({type:String,json:{write:!0}})],xw.prototype,"text",void 0),l([p({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],xw.prototype,"type",void 0),xw=CP=l([k("esri.popup.content.TextContent")],xw);const a0=xw;let ja=class extends vt(ne){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.open=!1,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};l([p({type:String,json:{write:!0}})],ja.prototype,"title",void 0),l([p({type:String,json:{write:!0}})],ja.prototype,"description",void 0),l([p({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],ja.prototype,"type",void 0),l([p({type:Boolean,json:{read:!1}})],ja.prototype,"open",void 0),l([p({type:Number,json:{type:Mt,write:!0}})],ja.prototype,"associatedNetworkSourceId",void 0),l([p({type:Number,json:{type:Mt,write:!0}})],ja.prototype,"associatedAssetGroup",void 0),l([p({type:Number,json:{type:Mt,write:!0}})],ja.prototype,"associatedAssetType",void 0),ja=l([k("esri.popup.support.UtilityNetworkAssociationType")],ja);const Bue=ja;let lp=class extends vt(Vu){constructor(t){super(t),this.description=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};l([p({type:String,json:{write:!0}})],lp.prototype,"description",void 0),l([p({type:String,json:{write:!0}})],lp.prototype,"title",void 0),l([p({type:[Bue],json:{write:!0}})],lp.prototype,"associationTypes",void 0),l([ke({utilityNetworkAssociations:"utility-network-associations"})],lp.prototype,"type",void 0),lp=l([k("esri.popup.content.UtilityNetworkAssociationsContent")],lp);const tR=lp,que={base:null,key:"type",typeMap:{attachment:Eg,media:s0,text:a0,expression:Xx,field:$g,relationship:o0,utilityNetworkAssociations:tR}},Hue={base:null,key:"type",typeMap:{attachment:Eg,media:s0,text:a0,expression:Xx,field:$g,relationship:o0}};var OP;let up=OP=class extends ne{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new OP({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([p({type:String,json:{write:!0}})],up.prototype,"name",void 0),l([p({type:String,json:{write:!0}})],up.prototype,"title",void 0),l([p({type:String,json:{write:!0}})],up.prototype,"expression",void 0),l([p({type:["string","number"],json:{write:!0}})],up.prototype,"returnType",void 0),up=OP=l([k("esri.popup.ExpressionInfo")],up);const Wue=up;var AP;let Ew=AP=class extends ne{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new AP({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};l([p({type:Boolean,json:{write:!0}})],Ew.prototype,"returnTopmostRaster",void 0),l([p({type:Boolean,json:{write:!0}})],Ew.prototype,"showNoDataRecords",void 0),Ew=AP=l([k("esri.popup.LayerOptions")],Ew);const Zue=Ew;var kP;let $w=kP=class extends ne{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new kP({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?q(this.orderByFields):null})}};l([p({type:Boolean,json:{write:!0}})],$w.prototype,"showRelatedRecords",void 0),l([p({type:[eR],json:{write:!0}})],$w.prototype,"orderByFields",void 0),$w=kP=l([k("esri.popup.RelatedRecordsInfo")],$w);const E5=$w;var RP;let Zs=RP=class extends zx(Fe){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new RP({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};l([p()],Zs.prototype,"active",void 0),l([p()],Zs.prototype,"className",void 0),l([p()],Zs.prototype,"disabled",void 0),l([p()],Zs.prototype,"icon",void 0),l([p()],Zs.prototype,"id",void 0),l([p()],Zs.prototype,"indicator",void 0),l([p()],Zs.prototype,"title",void 0),l([p()],Zs.prototype,"type",void 0),l([p()],Zs.prototype,"visible",void 0),Zs=RP=l([k("esri.support.actions.ActionBase")],Zs);const nR=Zs;var LP;let JS=LP=class extends nR{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new LP({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};l([p()],JS.prototype,"image",void 0),JS=LP=l([k("esri.support.actions.ActionButton")],JS);const Jue=JS;var NP;let Mw=NP=class extends nR{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new NP({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};l([p()],Mw.prototype,"image",void 0),l([p()],Mw.prototype,"value",void 0),Mw=NP=l([k("esri.support.actions.ActionToggle")],Mw);const Yue=Mw,H_="relationships/",$5="expression/",Kue=Ae.ofType({key:"type",defaultKeyValue:"button",base:nR,typeMap:{button:Jue,toggle:Yue}}),Xue={base:Vu,key:"type",typeMap:{media:s0,custom:jue,text:a0,attachments:Eg,fields:$g,expression:Xx,relationship:o0,utilityNetworkAssociations:tR}},xB=new Set(["attachments","fields","media","text","expression","relationship"]),Que=new Set([...xB,"utility-network-associations"]);let Hn=class extends vt(ne){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(n=>co(Xue,n)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||_l(t)?t:(fe.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,n){const{popupElements:r}=n;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(n.description,n.mediaInfos,r):this._readPopupInfo(n)}writeWebSceneContent(t,n,r,i){this._writePopupTemplateContent(t,n,i)}writeWebMapContent(t,n,r,i){this._writePopupTemplateContent(t,n,i)}writeFieldInfos(t,n,r,i){const{content:s}=this,o=Array.isArray(s)?s:null;if(t){const a=o?o.filter(f=>f.type==="fields"):[],h=a.length&&a.every(f=>{var _;return(_=f.fieldInfos)==null?void 0:_.length});n.fieldInfos=t.filter(Boolean).map(f=>{const _=f.toJSON(i);return h&&(_.visible=!1),_})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,n)}writeLayerOptions(t,n,r,i){n[r]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(i)}writeTitle(t,n){n.title=t||""}async collectRequiredFields(t,n){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(t,n,[...r,...this._getContentExpressionInfos(this.content,r)]),gf(t,n,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const n=new Set;return await this.collectRequiredFields(n,t),[...n].sort()}_writePopupTemplateContent(t,n,r){typeof t!="string"?Array.isArray(t)&&(n.popupElements=t.filter(i=>(r==null?void 0:r.origin)==="web-scene"?xB.has(i.type):Que.has(i.type)).map(i=>i==null?void 0:i.toJSON(r)),n.popupElements.forEach(i=>{i.type==="attachments"?this._writeAttachmentContent(n):i.type==="media"?this._writeMediaContent(i,n):i.type==="text"?this._writeTextContent(i,n):i.type==="relationship"&&this._writeRelationshipContent(i,n)})):n.description=t}_writeFieldsContent(t,n){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const r=q(t.fieldInfos);Array.isArray(n.fieldInfos)?r.forEach(i=>{const s=n.fieldInfos.find(o=>{var a,h;return((a=o.fieldName)==null?void 0:a.toLowerCase())===((h=i.fieldName)==null?void 0:h.toLowerCase())});s?s.visible=!0:n.fieldInfos.push(i)}):n.fieldInfos=r}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,n){var s,o;const r=((s=t.orderByFields)==null?void 0:s.map(a=>this._toFieldOrderJSON(a,t.relationshipId)))||[],i=[...((o=n.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...r];n.relatedRecordsInfo={showRelatedRecords:!0,...(i==null?void 0:i.length)&&{orderByFields:i}}}_writeTextContent(t,n){!n.description&&t.text&&(n.description=t.text)}_writeMediaContent(t,n){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const r=q(t.mediaInfos);Array.isArray(n.mediaInfos)?n.mediaInfos=[...n.mediaInfos,...r]:n.mediaInfos=r}_readPopupInfoElements(t,n,r){const i={description:!1,mediaInfos:!1};return r.map(s=>s.type==="media"?(s.mediaInfos||!n||i.mediaInfos||(s.mediaInfos=n,i.mediaInfos=!0),s0.fromJSON(s)):s.type==="text"?(s.text||!t||i.description||(s.text=t,i.description=!0),a0.fromJSON(s)):s.type==="attachments"?Eg.fromJSON(s):s.type==="fields"?$g.fromJSON(s):s.type==="expression"?Xx.fromJSON(s):s.type==="relationship"?o0.fromJSON(s):s.type==="utilityNetworkAssociations"?tR.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:n,order:r}=t;if(!(n!=null&&n.startsWith(H_)))return null;const i=n.replace(H_,"").split("/");if(i.length!==2)return null;const s=parseInt(i[0],10),o=i[1];return typeof s=="number"&&o?o0.fromJSON({relationshipId:s,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(t,n){const{order:r,field:i}=t;return{field:`${H_}${n}/${i}`,order:r}}_readPopupInfo({description:t,mediaInfos:n,showAttachments:r,relatedRecordsInfo:i={showRelatedRecords:!1}}){const s=[];t?s.push(new a0({text:t})):s.push(new $g),Array.isArray(n)&&n.length&&s.push(s0.fromJSON({mediaInfos:n})),r&&s.push(Eg.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=i;return o&&(a!=null&&a.length)&&a.forEach(h=>{const f=this._toRelationshipContent(h);f&&s.push(f)}),s.length?s:t}_getContentElementFields(t){const n=t==null?void 0:t.type;if(n==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(n==="custom")return t.outFields||[];if(n==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(n==="media"){const r=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...r.reduce((i,s)=>[...i,...this._getMediaInfoFields(s)],[])]}return n==="text"?this._extractFieldNames(t.text):n==="relationship"||n==="utility-network-associations"?[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)]:[]}_getMediaInfoFields(t){const{caption:n,title:r,value:i}=t,s=i||{},{fields:o,normalizeField:a,tooltipField:h,sourceURL:f,linkURL:_}=s,w=[...this._extractFieldNames(r),...this._extractFieldNames(n),...this._extractFieldNames(f),...this._extractFieldNames(_),...o??[]];return a&&w.push(a),h&&w.push(h),w}_getContentExpressionInfos(t,n){return Array.isArray(t)?t.reduce((r,i)=>[...r,...i.type==="expression"&&i.expressionInfo?[i.expressionInfo]:[]],n):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((n,r)=>[...n,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(t,n,r){r&&await Promise.all(r.map(i=>ai(t,n,i.expression)))}_getFieldInfoFields(t){return t?t.filter(({fieldName:n,visible:r})=>!(r!==void 0&&!r||!n||n.startsWith(H_)||n.startsWith($5))).map(n=>n.fieldName):[]}_getActionsFields(t){return t?t.toArray().reduce((n,r)=>[...n,...this._getActionFields(r)],[]):[]}_getActionFields(t){const{className:n,title:r,type:i}=t,s=i==="button"||i==="toggle"?t.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(n),...this._extractFieldNames(s)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return _B(t).filter(n=>!(n.indexOf(H_)===0||n.indexOf($5)===0))}};l([p({type:Kue})],Hn.prototype,"actions",void 0),l([p()],Hn.prototype,"content",void 0),l([kt("content")],Hn.prototype,"castContent",null),l([de("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Hn.prototype,"readContent",null),l([ge("web-scene","content",{popupElements:{type:Ae.ofType(Hue)},showAttachments:{type:Boolean},mediaInfos:{type:Ae.ofType(MP)},description:{type:String},relatedRecordsInfo:{type:E5}})],Hn.prototype,"writeWebSceneContent",null),l([ge("content",{popupElements:{type:Ae.ofType(que)},showAttachments:{type:Boolean},mediaInfos:{type:Ae.ofType(MP)},description:{type:String},relatedRecordsInfo:{type:E5}})],Hn.prototype,"writeWebMapContent",null),l([p({type:[Wue],json:{write:!0}})],Hn.prototype,"expressionInfos",void 0),l([p({type:[Xk]})],Hn.prototype,"fieldInfos",void 0),l([ge("fieldInfos")],Hn.prototype,"writeFieldInfos",null),l([p({type:Zue})],Hn.prototype,"layerOptions",void 0),l([ge("layerOptions")],Hn.prototype,"writeLayerOptions",null),l([p({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Hn.prototype,"lastEditInfoEnabled",void 0),l([p()],Hn.prototype,"outFields",void 0),l([p()],Hn.prototype,"overwriteActions",void 0),l([p()],Hn.prototype,"returnGeometry",void 0),l([p({json:{type:String}})],Hn.prototype,"title",void 0),l([ge("title")],Hn.prototype,"writeTitle",null),Hn=l([k("esri.PopupTemplate")],Hn);const U0=Hn,M5=new pt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let ece=0,ny=class extends ne{constructor(t){super(t),this.id="sym"+ece++,this.type=null,this.color=new Ze([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,n){}hash(){return JSON.stringify(this.toJSON())}clone(){}};l([p({type:M5.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:M5.write}}})],ny.prototype,"type",void 0),l([p({type:Ze,json:{write:{allowNull:!0}}})],ny.prototype,"color",void 0),l([de("color")],ny.prototype,"readColor",null),ny=l([k("esri.symbols.Symbol")],ny);const Dr=ny;var DP;let Gc=DP=class extends Dr{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var n;if(((n=this.data)==null?void 0:n.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const i=r.map(s=>{const o=s.valueExpressionInfo;return o?ai(e,t,o.expression):null});await Promise.all(i)}}}clone(){return new DP({data:q(this.data)})}hash(){return gV(JSON.stringify(this.data)).toString()}};l([p({json:{write:!1}})],Gc.prototype,"color",void 0),l([p({json:{write:!0}})],Gc.prototype,"data",void 0),l([de("data",["symbol"])],Gc.prototype,"readData",null),l([ge("data",{})],Gc.prototype,"writeData",null),l([ke({CIMSymbolReference:"cim"},{readOnly:!0})],Gc.prototype,"type",void 0),Gc=DP=l([k("esri.symbols.CIMSymbol")],Gc);const eh=Gc;let ry=class extends ne{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,n,r){t||(n[r]=t)}};l([p({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],ry.prototype,"enabled",void 0),l([ge("enabled")],ry.prototype,"writeEnabled",null),l([p({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],ry.prototype,"type",void 0),ry=l([k("esri.symbols.Symbol3DLayer")],ry);const wl=ry;function tce(e,t){const n=t.transparency!=null?t0(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new Ze([r[0]||0,r[1]||0,r[2]||0,n]):null}function nce(e,t){t.color=e.toJSON().slice(0,3);const n=Lx(e.a);n!==0&&(t.transparency=n)}const th={type:Ze,json:{type:[Mt],default:null,read:{source:["color","transparency"],reader:tce},write:{target:{color:{type:[Mt]},transparency:{type:Mt}},writer:nce}}},ml={type:Number,cast:At,json:{write:!0}};let cp=class extends ne{constructor(t){super(t),this.color=new Ze([0,0,0,1]),this.extensionLength=0,this.size=fo(1)}clone(){}cloneProperties(){return{color:q(this.color),size:this.size,extensionLength:this.extensionLength}}};l([p({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],cp.prototype,"type",void 0),l([p(th)],cp.prototype,"color",void 0),l([p({...ml,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],cp.prototype,"extensionLength",void 0),l([p(ml)],cp.prototype,"size",void 0),cp=l([k("esri.symbols.edges.Edges3D")],cp);const rR=cp;var FP;let YS=FP=class extends rR{constructor(e){super(e),this.type="sketch"}clone(){return new FP(this.cloneProperties())}};l([ke({sketch:"sketch"},{readOnly:!0})],YS.prototype,"type",void 0),YS=FP=l([k("esri.symbols.edges.SketchEdges3D")],YS);const rce=YS;var jP;let KS=jP=class extends rR{constructor(e){super(e),this.type="solid"}clone(){return new jP(this.cloneProperties())}};l([ke({solid:"solid"},{readOnly:!0})],KS.prototype,"type",void 0),KS=jP=l([k("esri.symbols.edges.SolidEdges3D")],KS);const EB=KS,$B={types:{key:"type",base:rR,typeMap:{solid:EB,sketch:rce}},json:{write:!0}};var zP;let bs=zP=class extends ne{constructor(e){super(e),this.color=null,this.emissiveFactor=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?Ek(this.emissiveFactor):null};return new zP(e)}};l([p(th)],bs.prototype,"color",void 0),l([p({type:[Number],json:{write:!1}})],bs.prototype,"emissiveFactor",void 0),bs=zP=l([k("esri.symbols.support.Symbol3DMaterial")],bs);var VP;let Bc=VP=class extends wl{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,t;return new VP({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(t=this.material)==null?void 0:t.clone(),castShadows:this.castShadows,size:this.size})}};l([ke({Extrude:"extrude"},{readOnly:!0})],Bc.prototype,"type",void 0),l([p({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Bc.prototype,"size",void 0),l([p({type:bs,json:{write:!0}})],Bc.prototype,"material",void 0),l([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Bc.prototype,"castShadows",void 0),l([p($B)],Bc.prototype,"edges",void 0),Bc=VP=l([k("esri.symbols.ExtrudeSymbol3DLayer")],Bc);const MB=Bc;let Iw=class extends Dr{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};l([ke({esriSLS:"simple-line"},{readOnly:!0})],Iw.prototype,"type",void 0),l([p({type:Number,cast:At,json:{write:!0}})],Iw.prototype,"width",void 0),Iw=l([k("esri.symbols.LineSymbol")],Iw);const ice=Iw,sce=["begin","end","begin-end"],IB=["arrow","circle","square","diamond","cross","x"];var UP;let za=UP=class extends ne{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,n,r){t[n]=(r==null?void 0:r.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,n,r){(r==null?void 0:r.origin)==="web-map"||(t[n]=e)}clone(){return new UP({color:q(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};l([p({type:["begin","end","begin-end"],json:{write:!0}})],za.prototype,"placement",void 0),l([ke({"line-marker":"line-marker"},{readOnly:!0}),p({json:{origins:{"web-map":{write:!1}}}})],za.prototype,"type",void 0),l([p({type:IB})],za.prototype,"style",void 0),l([ge("style")],za.prototype,"writeStyle",null),l([p({type:Ze,value:null,json:{write:{allowNull:!0}}})],za.prototype,"color",null),l([de("color")],za.prototype,"readColor",null),l([ge("color")],za.prototype,"writeColor",null),za=UP=l([k("esri.symbols.LineSymbolMarker")],za);const oce=za;var GP;const NM=new pt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let nu=GP=class extends ice{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,n,r,i,s){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),n!=null&&(o.width=At(n)),r!=null&&(o.cap=r),i!=null&&(o.join=i),s!=null&&(o.miterLimit=At(s)),o}clone(){var e;return new GP({color:q(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};l([ke({esriSLS:"simple-line"},{readOnly:!0})],nu.prototype,"type",void 0),l([p({type:NM.apiValues,json:{read:NM.read,write:NM.write}})],nu.prototype,"style",void 0),l([p({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,n)=>({enabled:e!=="round"&&(n==null?void 0:n.origin)==null})}}})],nu.prototype,"cap",void 0),l([p({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,n)=>({enabled:e!=="round"&&(n==null?void 0:n.origin)==null})}}})],nu.prototype,"join",void 0),l([p({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":oce}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],nu.prototype,"marker",void 0),l([p({type:Number,json:{read:!1,write:!1}})],nu.prototype,"miterLimit",void 0),nu=GP=l([k("esri.symbols.SimpleLineSymbol")],nu);const Ms=nu;let Pw=class extends Dr{constructor(t){super(t),this.outline=null,this.type=null}hash(){var t;return`${this.type}.${(t=this.outline)==null?void 0:t.hash()}`}};l([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ms}},json:{default:null,write:!0}})],Pw.prototype,"outline",void 0),l([p({type:["simple-fill","picture-fill"],readOnly:!0})],Pw.prototype,"type",void 0),Pw=l([k("esri.symbols.FillSymbol")],Pw);const PB=Pw;let XS=class extends ne{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};l([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],XS.prototype,"type",void 0),XS=l([k("esri.symbols.patterns.LinePattern3D")],XS);const CB=XS,ace=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var BP;const lce=hr()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Cw=BP=class extends CB{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new BP(e)}};l([p({type:["style"]})],Cw.prototype,"type",void 0),l([ke(lce),p({type:ace})],Cw.prototype,"style",void 0),Cw=BP=l([k("esri.symbols.patterns.LineStylePattern3D")],Cw);const iR=Cw;let QS=class extends ne{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};l([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],QS.prototype,"type",void 0),QS=l([k("esri.symbols.patterns.Pattern3D")],QS);const OB=QS,uce=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var qP;let Ow=qP=class extends OB{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new qP({style:this.style})}};l([p({type:["style"]})],Ow.prototype,"type",void 0),l([p({type:uce,json:{read:!0,write:!0}})],Ow.prototype,"style",void 0),Ow=qP=l([k("esri.symbols.patterns.StylePattern3D")],Ow);const AB=Ow,cce={types:{key:"type",base:OB,typeMap:{style:AB}},json:{write:!0}},kB={types:{key:"type",base:CB,typeMap:{style:iR}},json:{write:!0}},Ov=new Ze("white");new Ze("black");const dce=new Ze([255,255,255,0]);function hce(e){return e.r===0&&e.g===0&&e.b===0}var HP;let Av=HP=class extends bs{constructor(e){super(e),this.colorMixMode=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?Ek(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new HP(e)}};l([ke({multiply:"multiply",replace:"replace",tint:"tint"})],Av.prototype,"colorMixMode",void 0),Av=HP=l([k("esri.symbols.support.Symbol3DFillMaterial")],Av);function pce(e,t=!1){return e<=cV?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function dPe(e){return(uV(e)?e.length:e.byteLength/8)<=cV?Array.from(e):new Float64Array(e)}function hPe(e,t,n){return Array.isArray(e)?e.slice(t,t+n):e.subarray(t,t+n)}function G0(e=gce){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function sR(e,t,n,r,i,s,o=G0()){return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o[4]=i,o[5]=s,o}function pPe(e,t=G0()){return fce(e,0,e.length/3,t)}function fce(e,t,n,r=G0()){return yce(r,RB),mce(r,e,t,n),r}function fPe(e,t=pce(24)){const[n,r,i,s,o,a]=e;return t[0]=n,t[1]=r,t[2]=i,t[3]=n,t[4]=r,t[5]=a,t[6]=n,t[7]=o,t[8]=i,t[9]=n,t[10]=o,t[11]=a,t[12]=s,t[13]=r,t[14]=i,t[15]=s,t[16]=r,t[17]=a,t[18]=s,t[19]=o,t[20]=i,t[21]=s,t[22]=o,t[23]=a,t}function mPe(e,t){const n=isFinite(e[2])||isFinite(e[5]);return new Xt(n?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function yPe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function gPe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function mce(e,t,n=0,r=t.length/3){let i=e[0],s=e[1],o=e[2],a=e[3],h=e[4],f=e[5];for(let _=0;_<r;_++)i=Math.min(i,t[n+3*_]),s=Math.min(s,t[n+3*_+1]),o=Math.min(o,t[n+3*_+2]),a=Math.max(a,t[n+3*_]),h=Math.max(h,t[n+3*_+1]),f=Math.max(f,t[n+3*_+2]);e[0]=i,e[1]=s,e[2]=o,e[3]=a,e[4]=h,e[5]=f}function oR(e){return e[0]>=e[3]?0:e[3]-e[0]}function aR(e){return e[1]>=e[4]?0:e[4]-e[1]}function lR(e){return e[2]>=e[5]?0:e[5]-e[2]}function _Pe(e){const t=oR(e),n=lR(e),r=aR(e);return Math.sqrt(t*t+n*n+r*r)}function wPe(e,t=[0,0,0]){return t[0]=e[0]+oR(e)/2,t[1]=e[1]+aR(e)/2,t[2]=e[2]+lR(e)/2,t}function vPe(e,t=[0,0,0]){return t[0]=oR(e),t[1]=aR(e),t[2]=lR(e),t}function bPe(e,t,n=e){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n!==e&&(n[3]=e[3],n[4]=e[4],n[5]=e[5]),n}function SPe(e,t,n=e){return n[3]=t[0],n[4]=t[1],n[5]=t[2],n!==e&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),e}function yce(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function TPe(e){return G0(RB)}function xPe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function EPe(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=Number.NEGATIVE_INFINITY,e[3]=r,e[4]=i,e[5]=Number.POSITIVE_INFINITY,e}function I5(e){return e.length===6}function $Pe(e,t,n){if(e==null||t==null)return e===t;if(!I5(e)||!I5(t))return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const RB=[1/0,1/0,1/0,-1/0,-1/0,-1/0],gce=[0,0,0,0,0,0];G0();function MPe(e,{isPrimitive:t,width:n,depth:r,height:i}){const s=Ng(n,r,i);let o;for(let a=0;a<3;a++){const h=s[a];if(h!=null){o=h/e[a];break}}for(let a=0;a<3;a++)s[a]==null&&(s[a]=e[a]*o);return s}const _ce=sR(-.5,-.5,-.5,.5,.5,.5),wce=sR(-.5,-.5,0,.5,.5,1),vce=sR(-.5,-.5,0,.5,.5,.5);function IPe(e){switch(e){case"sphere":case"cube":case"diamond":return _ce;case"cylinder":case"cone":case"inverted-cone":return wce;case"tetrahedron":return vce;default:return}}const uR=["butt","square","round"],bce=[...uR,"none"],LB=["miter","bevel","round"];var WP;let dp=WP=class extends ne{constructor(e){super(e),this.color=new Ze([0,0,0,1]),this.size=fo(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new WP(e)}};l([p(th)],dp.prototype,"color",void 0),l([p(ml)],dp.prototype,"size",void 0),l([p(kB)],dp.prototype,"pattern",void 0),l([p({type:uR,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],dp.prototype,"patternCap",void 0),dp=WP=l([k("esri.symbols.support.Symbol3DOutline")],dp);var e2;let ru=e2=class extends wl{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new e2(e)}static fromSimpleFillSymbol(e){var r,i,s;const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new iR({style:e.outline.style}):null,n={size:((r=e.outline)==null?void 0:r.width)??0,color:(((i=e.outline)==null?void 0:i.color)??Ov).clone(),pattern:t};return t&&((s=e.outline)!=null&&s.cap)&&(n.patternCap=e.outline.cap),new e2({material:new Av({color:(e.color??dce).clone()}),pattern:e.style&&e.style!=="solid"?new AB({style:e.style}):null,outline:n})}};l([ke({Fill:"fill"},{readOnly:!0})],ru.prototype,"type",void 0),l([p({type:Av,json:{write:!0}})],ru.prototype,"material",void 0),l([p(cce)],ru.prototype,"pattern",void 0),l([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ru.prototype,"castShadows",void 0),l([p({type:dp,json:{write:!0}})],ru.prototype,"outline",void 0),l([p($B)],ru.prototype,"edges",void 0),ru=e2=l([k("esri.symbols.FillSymbol3DLayer")],ru);const Ef=ru,Sce=["none","underline","line-through"],Tce=["normal","italic","oblique"],xce=["normal","lighter","bold","bolder"],NB={type:Number,cast:e=>{const t=vi(e);return t===0?1:po(t,.1,4)},nonNullable:!0},Ece=["left","right","center"],$ce=["baseline","top","middle","bottom"],DB={type:Ece,nonNullable:!0},FB={type:$ce,nonNullable:!0},PPe=8;var ZP;let iu=ZP=class extends ne{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return At(e)}clone(){return new ZP({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};l([p({type:Sce,json:{default:"none",write:!0}})],iu.prototype,"decoration",void 0),l([p({type:String,json:{write:!0}})],iu.prototype,"family",void 0),l([p({type:Number,json:{write:{overridePolicy:(e,t,n)=>({enabled:!n||!n.textSymbol3D})}}})],iu.prototype,"size",void 0),l([kt("size")],iu.prototype,"castSize",null),l([p({type:Tce,json:{default:"normal",write:!0}})],iu.prototype,"style",void 0),l([p({type:xce,json:{default:"normal",write:!0}})],iu.prototype,"weight",void 0),iu=ZP=l([k("esri.symbols.Font")],iu);const tE=iu;var JP;const Mce=hr()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let hp=JP=class extends ne{constructor(e){super(e)}readHref(e,t,n){return e?Lg(e,n):t.dataURI}writeHref(e,t,n,r){e&&(Fu(e)?t.dataURI=e:(t.href=L0(e,r),Ss(t.href)&&(t.href=sa(t.href))))}clone(){return new JP({href:this.href,primitive:this.primitive})}};l([p({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],hp.prototype,"href",void 0),l([de("href")],hp.prototype,"readHref",null),l([ge("href",{href:{type:String},dataURI:{type:String}})],hp.prototype,"writeHref",null),l([ke(Mce)],hp.prototype,"primitive",void 0),hp=JP=l([k("esri.symbols.support.IconSymbol3DLayerResource")],hp);var YP;let By=YP=class extends Fe{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new YP({x:this.x,y:this.y})}};l([p({type:Number})],By.prototype,"x",void 0),l([p({type:Number})],By.prototype,"y",void 0),By=YP=l([k("esri.symbols.support.Symbol3DAnchorPosition2D")],By);var KP;let Aw=KP=class extends ne{constructor(e){super(e),this.color=new Ze([0,0,0,1]),this.size=fo(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new KP(e)}};l([p(th)],Aw.prototype,"color",void 0),l([p(ml)],Aw.prototype,"size",void 0),Aw=KP=l([k("esri.symbols.support.Symbol3DIconOutline")],Aw);var iy;const jB="esri.symbols.IconSymbol3DLayer";let jo=iy=class extends wl{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new iy({anchor:this.anchor,anchorPosition:q(this.anchorPosition),enabled:this.enabled,material:q(this.material),outline:q(this.outline),resource:q(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Ov,n=P5(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Ov).clone()}:null;return new iy({size:e.size,angle:e.angle,resource:{primitive:Pce(e.style)},material:{color:t},outline:r,anchor:n?"relative":void 0,anchorPosition:n})}static fromPictureMarkerSymbol(e){const t=!e.color||hce(e.color)?Ov:e.color,n=P5(e);return new iy({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:n?"relative":void 0,anchorPosition:n})}static fromCIMSymbol(e){return new iy({resource:{href:TU({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};l([p({type:bs,json:{write:!0}})],jo.prototype,"material",void 0),l([p({type:hp,json:{write:!0}})],jo.prototype,"resource",void 0),l([ke({Icon:"icon"},{readOnly:!0})],jo.prototype,"type",void 0),l([p(ml)],jo.prototype,"size",void 0),l([ke({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],jo.prototype,"anchor",void 0),l([p({type:By,json:{type:[Number],read:{reader:e=>new By({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],jo.prototype,"anchorPosition",void 0),l([p({type:Aw,json:{write:!0}})],jo.prototype,"outline",void 0),l([p({type:Number,json:{write:!0,default:0}})],jo.prototype,"angle",void 0),jo=iy=l([k(jB)],jo);const Wp=jo;function P5(e){const t="width"in e?e.width:e.size,n="height"in e?e.height:e.size,r=C5(e.xoffset),i=C5(e.yoffset);return(r||i)&&t&&n?{x:-r/t,y:i/n}:null}function C5(e){return isFinite(e)?e:0}const Ice={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Pce(e){return Ice[e]||(fe.getLogger(jB).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let pp=class extends vt(ne){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};l([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],pp.prototype,"type",void 0),l([p({type:sce,json:{default:"begin-end",write:!0}})],pp.prototype,"placement",void 0),l([p({type:IB,json:{default:"arrow",write:!0}})],pp.prototype,"style",void 0),l([p({type:Ze,json:{type:[Mt],default:null,write:!0}})],pp.prototype,"color",void 0),pp=l([k("esri.symbols.LineStyleMarker3D")],pp);const XP=pp;var t2;let Va=t2=class extends wl{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=fo(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new t2(e)}static fromSimpleLineSymbol(e){var n;const t={enabled:!0,size:e.width??fo(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new iR({style:e.style}):null,material:new bs({color:(e.color||Ov).clone()}),marker:e.marker?new XP({placement:e.marker.placement,style:e.marker.style,color:((n=e.marker.color)==null?void 0:n.clone())??null}):null};return new t2(t)}};l([p({type:bs,json:{write:!0}})],Va.prototype,"material",void 0),l([ke({Line:"line"},{readOnly:!0})],Va.prototype,"type",void 0),l([p({type:LB,json:{write:!0,default:"miter"}})],Va.prototype,"join",void 0),l([p({type:uR,json:{write:!0,default:"butt"}})],Va.prototype,"cap",void 0),l([p(ml)],Va.prototype,"size",void 0),l([p(kB)],Va.prototype,"pattern",void 0),l([p({types:{key:"type",base:XP,typeMap:{style:XP}},json:{write:!0}})],Va.prototype,"marker",void 0),Va=t2=l([k("esri.symbols.LineSymbol3DLayer")],Va);const Ug=Va;var QP;const Cce=hr()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let kw=QP=class extends ne{clone(){return new QP({href:this.href,primitive:this.primitive})}};l([p({type:String,json:{read:bk,write:pf}})],kw.prototype,"href",void 0),l([ke(Cce)],kw.prototype,"primitive",void 0),kw=QP=l([k("esri.symbols.support.ObjectSymbol3DLayerResource")],kw);var eC;let Vp=eC=class extends Fe{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new eC({x:this.x,y:this.y,z:this.z})}};l([p({type:Number})],Vp.prototype,"x",void 0),l([p({type:Number})],Vp.prototype,"y",void 0),l([p({type:Number})],Vp.prototype,"z",void 0),Vp=eC=l([k("esri.symbols.support.Symbol3DAnchorPosition3D")],Vp);var tC;let Jr=tC=class extends wl{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,n;return new tC({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(n=this.resource)==null?void 0:n.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};l([p({type:bs,json:{write:!0}})],Jr.prototype,"material",void 0),l([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Jr.prototype,"castShadows",void 0),l([p({type:kw,json:{write:!0}})],Jr.prototype,"resource",void 0),l([ke({Object:"object"},{readOnly:!0})],Jr.prototype,"type",void 0),l([p({type:Number,json:{write:!0}})],Jr.prototype,"width",void 0),l([p({type:Number,json:{write:!0}})],Jr.prototype,"height",void 0),l([p({type:Number,json:{write:!0}})],Jr.prototype,"depth",void 0),l([ke({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Jr.prototype,"anchor",void 0),l([p({type:Vp,json:{type:[Number],read:{reader:e=>new Vp({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Jr.prototype,"anchorPosition",void 0),l([p({type:Number,json:{write:!0}})],Jr.prototype,"heading",void 0),l([p({type:Number,json:{write:!0}})],Jr.prototype,"tilt",void 0),l([p({type:Number,json:{write:!0}})],Jr.prototype,"roll",void 0),l([p({readOnly:!0})],Jr.prototype,"isPrimitive",null),Jr=tC=l([k("esri.symbols.ObjectSymbol3DLayer")],Jr);const cR=Jr;var nC;let yi=nC=class extends wl{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new nC({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};l([p({type:bs,json:{write:!0}})],yi.prototype,"material",void 0),l([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],yi.prototype,"castShadows",void 0),l([ke({Path:"path"},{readOnly:!0})],yi.prototype,"type",void 0),l([p({type:["circle","quad"],json:{write:!0,default:"circle"}})],yi.prototype,"profile",void 0),l([p({type:LB,json:{write:!0,default:"miter"}})],yi.prototype,"join",void 0),l([p({type:bce,json:{write:!0,default:"butt"}})],yi.prototype,"cap",void 0),l([p({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],yi.prototype,"width",void 0),l([de("width",["width","size","height"])],yi.prototype,"readWidth",null),l([p({type:Number,json:{write:!0}})],yi.prototype,"height",void 0),l([de("height",["height","size","width"])],yi.prototype,"readHeight",null),l([p({type:["center","bottom","top"],json:{write:!0,default:"center"}})],yi.prototype,"anchor",void 0),l([p({type:["heading","all"],json:{write:!0,default:"all"}})],yi.prototype,"profileRotation",void 0),yi=nC=l([k("esri.symbols.PathSymbol3DLayer")],yi);const dR=yi;var rC;let qy=rC=class extends ne{constructor(){super(...arguments),this.color=new Ze([0,0,0,1]),this.size=0}clone(){const e={color:q(this.color),size:this.size};return new rC(e)}};l([p(th)],qy.prototype,"color",void 0),l([p(ml)],qy.prototype,"size",void 0),qy=rC=l([k("esri.symbols.support.Symbol3DHalo")],qy);let kv=class extends vt(ne){constructor(t){super(t),this.color=null}};l([p(th)],kv.prototype,"color",void 0),kv=l([k("esri.symbols.support.Symbol3DTextBackground")],kv);var n2;let Ni=n2=class extends wl{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,n,r){const i={...r,textSymbol3D:!0};t.font=e.write({},i),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new n2({enabled:this.enabled,font:this.font&&q(this.font),halo:this.halo&&q(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:q(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new n2({font:e.font!=null?e.font.clone():new tE,halo:Oce(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new bs({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new kv({color:e.backgroundColor.clone()}):null})}};function Oce(e,t){return e&&t!=null&&t>0?new qy({color:q(e),size:t}):null}l([p({type:tE,json:{write:!0}})],Ni.prototype,"font",null),l([ge("font")],Ni.prototype,"writeFont",null),l([p({type:qy,json:{write:!0}})],Ni.prototype,"halo",void 0),l([p({...DB,json:{default:"center",write:!0}})],Ni.prototype,"horizontalAlignment",void 0),l([p({...NB,json:{default:1,write:!0}})],Ni.prototype,"lineHeight",void 0),l([p({type:bs,json:{write:!0}})],Ni.prototype,"material",void 0),l([p({type:kv,json:{write:!0}})],Ni.prototype,"background",void 0),l([p(ml)],Ni.prototype,"size",null),l([p({type:String,json:{write:!0}})],Ni.prototype,"text",void 0),l([ke({Text:"text"},{readOnly:!0})],Ni.prototype,"type",void 0),l([p({...FB,json:{default:"baseline",write:!0}})],Ni.prototype,"verticalAlignment",void 0),Ni=n2=l([k("esri.symbols.TextSymbol3DLayer")],Ni);const Gg=Ni;var iC;let qc=iC=class extends wl{constructor(e){super(e),this.color=sC.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new iC({color:q(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};l([p({type:Ze,nonNullable:!0,json:{type:[Mt],write:(e,t,n)=>t[n]=e.toArray(Ze.AlphaMode.UNLESS_OPAQUE),default:()=>sC.clone(),defaultEquals:e=>e.toCss(!0)===sC.toCss(!0)}})],qc.prototype,"color",void 0),l([ke({Water:"water"},{readOnly:!0})],qc.prototype,"type",void 0),l([p({type:["small","medium","large"],json:{write:!0,default:"medium"}})],qc.prototype,"waterbodySize",void 0),l([p({type:Number,json:{write:!0,default:null}})],qc.prototype,"waveDirection",void 0),l([p({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],qc.prototype,"waveStrength",void 0),qc=iC=l([k("esri.symbols.WaterSymbol3DLayer")],qc);const zB=qc,sC=new Ze([0,119,190]);var oC;let fp=oC=class extends Fe{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new oC({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};l([p({type:String})],fp.prototype,"name",void 0),l([p({type:String})],fp.prototype,"styleUrl",void 0),l([p({type:String})],fp.prototype,"styleName",void 0),l([p({type:oi})],fp.prototype,"portal",void 0),fp=oC=l([k("esri.symbols.support.StyleOrigin")],fp);const aC=fp;var lC;let Rv=lC=class extends Fe{constructor(){super(...arguments),this.url=""}clone(){return new lC({url:this.url})}};l([p({type:String})],Rv.prototype,"url",void 0),Rv=lC=l([k("esri.symbols.support.Thumbnail")],Rv);const VB={icon:Wp,object:cR,line:Ug,path:dR,fill:Ef,extrude:MB,text:Gg,water:zB},Ace=Ae.ofType({base:wl,key:"type",typeMap:VB,errorContext:"symbol-layer"});let Ua=class extends Dr{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const n=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=n==null?void 0:n.type,i=r||Ae;this._set("symbolLayers",new i)}get color(){return null}set color(t){this.constructed&&fe.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){Fd(t,this._get("symbolLayers"))}readStyleOrigin(t,n,r){if(t.styleUrl&&t.name){const i=Lg(t.styleUrl,r);return new aC({styleUrl:i,name:t.name})}if(t.styleName&&t.name)return new aC({portal:(r==null?void 0:r.portal)||oi.getDefault(),styleName:t.styleName,name:t.name});r!=null&&r.messages&&r.messages.push(new Es("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:t}))}writeStyleOrigin(t,n,r,i){if(t.styleUrl&&t.name){let s=L0(t.styleUrl,i);Ss(s)&&(s=sa(s)),n.styleOrigin={styleUrl:s,name:t.name}}else t.styleName&&t.name&&(t.portal&&(i!=null&&i.portal)&&!SU(t.portal.restUrl,i.portal.restUrl)?i!=null&&i.messages&&i.messages.push(new Es("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):n.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof wl||t&&VB[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};l([p({json:{read:!1,write:!1}})],Ua.prototype,"color",null),l([p({type:Ace,nonNullable:!0,json:{write:!0}}),kt(FU)],Ua.prototype,"symbolLayers",null),l([p({type:aC})],Ua.prototype,"styleOrigin",void 0),l([de("styleOrigin")],Ua.prototype,"readStyleOrigin",null),l([ge("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Ua.prototype,"writeStyleOrigin",null),l([p({type:Rv,json:{read:!1}})],Ua.prototype,"thumbnail",void 0),l([p({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Ua.prototype,"type",void 0),Ua=l([k("esri.symbols.Symbol3D")],Ua);const $f=Ua;let Rw=class extends ne{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};l([p({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Rw.prototype,"type",void 0),l([p({readOnly:!0})],Rw.prototype,"visible",void 0),Rw=l([k("esri.symbols.callouts.Callout3D")],Rw);const UB=Rw;var uC;let r2=uC=class extends ne{constructor(e){super(e),this.color=new Ze("white")}clone(){return new uC({color:q(this.color)})}};l([p(th)],r2.prototype,"color",void 0),r2=uC=l([k("esri.symbols.callouts.LineCallout3DBorder")],r2);const kce=r2;var cC;let Hc=cC=class extends UB{constructor(e){super(e),this.type="line",this.color=new Ze([0,0,0,1]),this.size=fo(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new cC({color:q(this.color),size:this.size,border:q(this.border)})}};l([ke({line:"line"})],Hc.prototype,"type",void 0),l([p(th)],Hc.prototype,"color",void 0),l([p(ml)],Hc.prototype,"size",void 0),l([p({type:kce,json:{write:!0}})],Hc.prototype,"border",void 0),l([p({readOnly:!0})],Hc.prototype,"visible",null),Hc=cC=l([k("esri.symbols.callouts.LineCallout3D")],Hc);const GB=Hc;function hR(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function BB(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!hR(e)}const qB={types:{key:"type",base:UB,typeMap:{line:GB}},json:{write:!0}};var dC;let sy=dC=class extends ne{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new dC({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};l([p(ml)],sy.prototype,"screenLength",void 0),l([p({type:Number,nonNullable:!0,json:{write:!0,default:0}})],sy.prototype,"minWorldLength",void 0),l([p({type:Number,json:{write:!0}})],sy.prototype,"maxWorldLength",void 0),sy=dC=l([k("esri.symbols.support.Symbol3DVerticalOffset")],sy);const pR=sy;var i2;const HB=Ae.ofType({base:null,key:"type",typeMap:{text:Gg}});let Wc=i2=class extends $f{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new HB,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return BB(this)}hasVisibleVerticalOffset(){return hR(this)}clone(){return new i2({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail),callout:q(this.callout),verticalOffset:q(this.verticalOffset)})}static fromTextSymbol(e){return new i2({symbolLayers:new Ae([Gg.fromTextSymbol(e)])})}};l([p({type:pR,json:{write:!0}})],Wc.prototype,"verticalOffset",void 0),l([p(qB)],Wc.prototype,"callout",void 0),l([p({json:{read:!1,write:!1}})],Wc.prototype,"styleOrigin",void 0),l([p({type:HB})],Wc.prototype,"symbolLayers",void 0),l([ke({LabelSymbol3D:"label-3d"},{readOnly:!0})],Wc.prototype,"type",void 0),Wc=i2=l([k("esri.symbols.LabelSymbol3D")],Wc);const nE=Wc;var s2;const WB=Ae.ofType({base:null,key:"type",typeMap:{line:Ug,path:dR}}),Rce=Ae.ofType({base:null,key:"type",typeMap:{line:Ug,path:dR}});let Lw=s2=class extends $f{constructor(e){super(e),this.symbolLayers=new WB,this.type="line-3d"}clone(){return new s2({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromSimpleLineSymbol(e){return new s2({symbolLayers:new Ae([Ug.fromSimpleLineSymbol(e)])})}};l([p({type:WB,json:{type:Rce}})],Lw.prototype,"symbolLayers",void 0),l([ke({LineSymbol3D:"line-3d"},{readOnly:!0})],Lw.prototype,"type",void 0),Lw=s2=l([k("esri.symbols.LineSymbol3D")],Lw);const Mf=Lw;let Zc=class extends Dr{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};l([p({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Zc.prototype,"angle",void 0),l([p({type:["simple-marker","picture-marker"],readOnly:!0})],Zc.prototype,"type",void 0),l([p({type:Number,cast:At,json:{write:!0}})],Zc.prototype,"xoffset",void 0),l([p({type:Number,cast:At,json:{write:!0}})],Zc.prototype,"yoffset",void 0),l([p({cast:e=>e==="auto"?e:vi(At(e)),json:{write:!0}})],Zc.prototype,"size",void 0),Zc=l([k("esri.symbols.MarkerSymbol")],Zc);const ZB=Zc;var o2;const JB=Ae.ofType({base:null,key:"type",typeMap:{fill:Ef}});let Nw=o2=class extends $f{constructor(e){super(e),this.symbolLayers=new JB,this.type="mesh-3d"}clone(){return new o2({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromSimpleFillSymbol(e){return new o2({symbolLayers:new Ae([Ef.fromSimpleFillSymbol(e)])})}};l([p({type:JB})],Nw.prototype,"symbolLayers",void 0),l([ke({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Nw.prototype,"type",void 0),Nw=o2=l([k("esri.symbols.MeshSymbol3D")],Nw);const B0=Nw;function Lce(e,t,n){return t.imageData?TU({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):YB(t.url,n)}function YB(e,t){if(!Ss(e)){const n=Dce(t);if(n)return mg(n,"images",e)}return Lg(e,t)}function Nce(e,t,n,r){if(Fu(e)){const i=of(e);if(!i)return;t.contentType=i.mediaType,t.imageData=i.data,n&&n.imageData===t.imageData&&n.url&&pf(n.url,t,"url",r)}else pf(e,t,"url",r)}const KB={json:{read:{source:["imageData","url"],reader:Lce},write:{writer(e,t,n,r){Nce(e,t,this.source,r)}}}},XB={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,n){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=YB(t.url,n)),r}}}};function Dce(e){var i,s;if(!e)return null;const{origin:t,layer:n}=e;if(t!=="service"&&t!=="portal-item")return null;const r=n==null?void 0:n.type;return r==="feature"||r==="stream"?(i=n.parsedUrl)==null?void 0:i.path:r==="map-image"||r==="tile"?(s=e.url)==null?void 0:s.path:null}var hC;let Js=hC=class extends PB{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,n,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t&&(i.outline=t),n!=null&&(i.width=At(n)),r!=null&&(i.height=At(r)),i}clone(){const e=new hC({color:q(this.color),height:this.height,outline:q(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",q(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};l([ke({esriPFS:"picture-fill"},{readOnly:!0})],Js.prototype,"type",void 0),l([p(KB)],Js.prototype,"url",void 0),l([p({type:Number,json:{write:!0}})],Js.prototype,"xscale",void 0),l([p({type:Number,json:{write:!0}})],Js.prototype,"yscale",void 0),l([p({type:Number,cast:At,json:{write:!0}})],Js.prototype,"width",void 0),l([p({type:Number,cast:At,json:{write:!0}})],Js.prototype,"height",void 0),l([p({type:Number,cast:At,json:{write:!0}})],Js.prototype,"xoffset",void 0),l([p({type:Number,cast:At,json:{write:!0}})],Js.prototype,"yoffset",void 0),l([p(XB)],Js.prototype,"source",void 0),Js=hC=l([k("esri.symbols.PictureFillSymbol")],Js);const fR=Js;var pC;let zo=pC=class extends ZB{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,n){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=At(t)),n!=null&&(r.height=At(n)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new pC({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",q(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};l([p({json:{write:!1}})],zo.prototype,"color",void 0),l([ke({esriPMS:"picture-marker"},{readOnly:!0})],zo.prototype,"type",void 0),l([p(KB)],zo.prototype,"url",void 0),l([p(XB)],zo.prototype,"source",void 0),l([p({type:Number,cast:At,json:{write:!0}})],zo.prototype,"height",void 0),l([de("height",["height","size"])],zo.prototype,"readHeight",null),l([p({type:Number,cast:At,json:{write:!0}})],zo.prototype,"width",void 0),l([p({json:{write:!1}})],zo.prototype,"size",void 0),zo=pC=l([k("esri.symbols.PictureMarkerSymbol")],zo);const q0=zo;var mp;const QB=Ae.ofType({base:null,key:"type",typeMap:{icon:Wp,object:cR,text:Gg}});let yp=mp=class extends $f{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new QB,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return BB(this)}hasVisibleVerticalOffset(){return hR(this)}clone(){return new mp({verticalOffset:q(this.verticalOffset),callout:q(this.callout),styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new mp({symbolLayers:new Ae([Wp.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new mp({symbolLayers:new Ae([Wp.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var r,i;if(((i=(r=e.data)==null?void 0:r.symbol)==null?void 0:i.type)!=="CIMPointSymbol")return null;const n=e.data.symbol;return new mp(n!=null&&n.callout?{symbolLayers:new Ae([Wp.fromCIMSymbol(e)]),callout:new GB({size:.5,color:new Ze([0,0,0])}),verticalOffset:new pR({screenLength:40})}:{symbolLayers:new Ae([Wp.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new mp({symbolLayers:new Ae([Gg.fromTextSymbol(e)])})}};l([p({type:pR,json:{write:!0}})],yp.prototype,"verticalOffset",void 0),l([p(qB)],yp.prototype,"callout",void 0),l([p({type:QB,json:{origins:{"web-scene":{write:!0}}}})],yp.prototype,"symbolLayers",void 0),l([ke({PointSymbol3D:"point-3d"},{readOnly:!0})],yp.prototype,"type",void 0),yp=mp=l([k("esri.symbols.PointSymbol3D")],yp);const Ou=yp;var Dw;const eq=Ae.ofType({base:null,key:"type",typeMap:{extrude:MB,fill:Ef,icon:Wp,line:Ug,object:cR,text:Gg,water:zB}});let Fw=Dw=class extends $f{constructor(e){super(e),this.symbolLayers=new eq,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&Hv(fe.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&Hv(fe.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(ff(()=>this.symbolLayers,"after-add",({item:t})=>e(t),pl))}clone(){return new Dw({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromJSON(e){var n;const t=new Dw;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const r=t.symbolLayers.at(0),i=t.symbolLayers.at(1);!i.enabled||(n=e.symbolLayers)!=null&&n[1]&&e.symbolLayers[1].enable===!1||(r.outline={size:i.size,color:i.material!=null?i.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Dw({symbolLayers:new Ae([Ef.fromSimpleFillSymbol(e)])})}};l([p({type:eq,json:{write:!0}})],Fw.prototype,"symbolLayers",void 0),l([ke({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Fw.prototype,"type",void 0),Fw=Dw=l([k("esri.symbols.PolygonSymbol3D")],Fw);const nh=Fw;var fC;const DM=new pt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let gp=fC=class extends PB{constructor(...e){super(...e),this.color=new Ze([0,0,0,.25]),this.outline=new Ms,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,n){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),n&&(r.color=n),r}clone(){return new fC({color:q(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};l([p()],gp.prototype,"color",void 0),l([p()],gp.prototype,"outline",void 0),l([ke({esriSFS:"simple-fill"},{readOnly:!0})],gp.prototype,"type",void 0),l([p({type:DM.apiValues,json:{read:DM.read,write:DM.write}})],gp.prototype,"style",void 0),gp=fC=l([k("esri.symbols.SimpleFillSymbol")],gp);const If=gp;var mC;const FM=new pt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Ga=mC=class extends ZB{constructor(...e){super(...e),this.color=new Ze([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Ms}normalizeCtorArgs(e,t,n,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t!=null&&(i.size=At(t)),n&&(i.outline=n),r&&(i.color=r),i}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new mC({angle:this.angle,color:q(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};l([p()],Ga.prototype,"color",void 0),l([ge("color")],Ga.prototype,"writeColor",null),l([ke({esriSMS:"simple-marker"},{readOnly:!0})],Ga.prototype,"type",void 0),l([p()],Ga.prototype,"size",void 0),l([p({type:FM.apiValues,json:{read:FM.read,write:FM.write}})],Ga.prototype,"style",void 0),l([p({type:String,json:{write:!0}})],Ga.prototype,"path",null),l([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ms}},json:{default:null,write:!0}})],Ga.prototype,"outline",void 0),Ga=mC=l([k("esri.symbols.SimpleMarkerSymbol")],Ga);const vl=Ga;var yC;let mn=yC=class extends Dr{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new tE,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,n){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),n&&(r.color=n),r}writeLineWidth(e,t,n,r){r&&typeof r!="string"?r.origin:t[n]=e}castLineWidth(e){return At(e)}writeLineHeight(e,t,n,r){r&&typeof r!="string"?r.origin:t[n]=e}clone(){return new yC({angle:this.angle,backgroundColor:q(this.backgroundColor),borderLineColor:q(this.borderLineColor),borderLineSize:this.borderLineSize,color:q(this.color),font:this.font&&this.font.clone(),haloColor:q(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,n;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(n=this.haloColor)==null?void 0:n.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};l([p({type:Ze,json:{write:!0}})],mn.prototype,"backgroundColor",void 0),l([p({type:Ze,json:{write:!0}})],mn.prototype,"borderLineColor",void 0),l([p({type:Number,json:{write:!0},cast:At})],mn.prototype,"borderLineSize",void 0),l([p({type:tE,json:{write:!0}})],mn.prototype,"font",void 0),l([p({...DB,json:{write:!0}})],mn.prototype,"horizontalAlignment",void 0),l([p({type:Boolean,json:{write:!0}})],mn.prototype,"kerning",void 0),l([p({type:Ze,json:{write:!0}})],mn.prototype,"haloColor",void 0),l([p({type:Number,cast:At,json:{write:!0}})],mn.prototype,"haloSize",void 0),l([p({type:Boolean,json:{write:!0}})],mn.prototype,"rightToLeft",void 0),l([p({type:Boolean,json:{write:!0}})],mn.prototype,"rotated",void 0),l([p({type:String,json:{write:!0}})],mn.prototype,"text",void 0),l([ke({esriTS:"text"},{readOnly:!0})],mn.prototype,"type",void 0),l([p({...FB,json:{write:!0}})],mn.prototype,"verticalAlignment",void 0),l([p({type:Number,cast:At,json:{write:!0}})],mn.prototype,"xoffset",void 0),l([p({type:Number,cast:At,json:{write:!0}})],mn.prototype,"yoffset",void 0),l([p({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],mn.prototype,"angle",void 0),l([p({type:Number,json:{write:!0}})],mn.prototype,"width",void 0),l([p({type:Number})],mn.prototype,"lineWidth",void 0),l([ge("lineWidth")],mn.prototype,"writeLineWidth",null),l([kt("lineWidth")],mn.prototype,"castLineWidth",null),l([p(NB)],mn.prototype,"lineHeight",void 0),l([ge("lineHeight")],mn.prototype,"writeLineHeight",null),mn=yC=l([k("esri.symbols.TextSymbol")],mn);const Bg=mn;var gC;let Vo=gC=class extends Dr{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:oi.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new gC({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const n=t!=null?t.cache:null,r=n?this._fetchCacheKey:null;if(n!=null){const a=r&&n.get(r);if(a)return a.clone()}const{resolveWebStyleSymbol:i}=await pe(()=>import("./webStyleSymbolUtils-ykljKkkD.js"),__vite__mapDeps([31,32]));xn(t);const s=i(this,{portal:this.portal},e,t);s.catch(a=>{fe.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await s;return e==="webRef"&&o.type==="point-3d"||e==="cimRef"&&o.type==="cim"?(n!=null&&n.set(r,o.clone()),o):null}};l([p({json:{write:!1}})],Vo.prototype,"color",void 0),l([p({type:String,json:{write:!0}})],Vo.prototype,"styleName",void 0),l([p({type:oi,json:{write:!1}})],Vo.prototype,"portal",void 0),l([p({type:String,json:{read:bk,write:pf}})],Vo.prototype,"styleUrl",void 0),l([p({type:Rv,json:{read:!1}})],Vo.prototype,"thumbnail",void 0),l([p({type:String,json:{write:!0}})],Vo.prototype,"name",void 0),l([ke({styleSymbolReference:"web-style"},{readOnly:!0})],Vo.prototype,"type",void 0),l([p()],Vo.prototype,"_fetchCacheKey",null),Vo=gC=l([k("esri.symbols.WebStyleSymbol")],Vo);const Pf=Vo;function LPe(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function O5(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const $d={base:Dr,key:"type",typeMap:{"simple-fill":If,"picture-fill":fR,"picture-marker":q0,"simple-line":Ms,"simple-marker":vl,text:Bg,"label-3d":nE,"line-3d":Mf,"mesh-3d":B0,"point-3d":Ou,"polygon-3d":nh,"web-style":Pf,cim:eh},errorContext:"symbol"},NPe={base:Dr,key:"type",typeMap:{"picture-marker":q0,"simple-marker":vl,"point-3d":Ou,cim:eh},errorContext:"symbol"},DPe={base:Dr,key:"type",typeMap:{"simple-line":Ms,"line-3d":Mf,cim:eh},errorContext:"symbol"},FPe={base:Dr,key:"type",typeMap:{"simple-fill":If,"picture-fill":fR,"polygon-3d":nh,cim:eh},errorContext:"symbol"},Fce={base:Dr,key:"type",typeMap:{"picture-marker":q0,"simple-marker":vl,text:Bg,"web-style":Pf,cim:eh},errorContext:"symbol"},jce=Ag({types:$d}),tq={base:Dr,key:"type",typeMap:{"simple-fill":If,"picture-fill":fR,"picture-marker":q0,"simple-line":Ms,"simple-marker":vl,text:Bg,"line-3d":Mf,"mesh-3d":B0,"point-3d":Ou,"polygon-3d":nh,"web-style":Pf,cim:eh},errorContext:"symbol"},zce={base:Dr,key:"type",typeMap:{text:Bg,"label-3d":nE},errorContext:"symbol"},A5={base:Dr,key:"type",typeMap:{"line-3d":Mf,"mesh-3d":B0,"point-3d":Ou,"polygon-3d":nh,"web-style":Pf,cim:eh},errorContext:"symbol"},Vce={base:Dr,key:"type",typeMap:{"label-3d":nE},errorContext:"symbol"},nq=co($d);var _C;function Uce(e){if(!e)return null;const t={};for(const n in e){const r=Du(e[n]);r&&(t[n]=r)}return Object.keys(t).length!==0?t:null}function Gce(e){if(e==null)return null;const t={};for(const n in e){const r=e[n];r&&(t[n]=r.toJSON())}return Object.keys(t).length!==0?t:null}let Di=_C=class extends vt(ne){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:bS(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&ZK(fe.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new _C({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const n of[t,this.sourceLayer,this.layer])if(n){if("popupTemplate"in n&&n.popupTemplate)return n.popupTemplate;if(e&&"defaultPopupTemplate"in n&&n.defaultPopupTemplate!=null)return n.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const n=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",n,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:Gce(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:lT(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const n={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",n,n,e.action)}}_notifyLayer(e,t,n,r){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const i={graphic:this,property:e,oldValue:t,newValue:n};e==="origin-transform"&&(i.action=r),e==="attributes"&&(i.attributeName=r),this.layer.graphicChanged(i)}_watchMeshGeometryChanges(){this.addHandles([hl(()=>{var e,t;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(t=this.geometry.transform)==null?void 0:t.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),hl(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var t;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(t=e.transform)==null?void 0:t.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};l([p({value:null,json:{read:Uce}})],Di.prototype,"aggregateGeometries",null),l([p({value:null})],Di.prototype,"attributes",null),l([p({value:null,types:Tf,json:{read:Du}})],Di.prototype,"geometry",null),l([p({type:Boolean})],Di.prototype,"isAggregate",void 0),l([p({clonable:"reference"})],Di.prototype,"layer",void 0),l([p({clonable:"reference"})],Di.prototype,"origin",void 0),l([p({type:U0})],Di.prototype,"popupTemplate",void 0),l([p({clonable:"reference"})],Di.prototype,"sourceLayer",void 0),l([p({value:null,types:$d})],Di.prototype,"symbol",null),l([p({clonable:!1,json:{read:!1,write:!1}})],Di.prototype,"_version",void 0),l([p({type:Boolean,value:!0})],Di.prototype,"visible",null),Di=_C=l([k("esri.Graphic")],Di);const yl=Di;var wC;let jw=wC=class extends ne{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new wC({minValue:this.minValue,maxValue:this.maxValue})}};l([p({type:Number,json:{write:!0}})],jw.prototype,"minValue",void 0),l([p({type:Number,json:{write:!0}})],jw.prototype,"maxValue",void 0),jw=wC=l([k("esri.renderers.support.AuthoringInfoClassBreakInfo")],jw);var vC;let yd=vC=class extends ne{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new vC({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:q(this.classBreakInfos)})}};l([p({type:String,json:{write:!0}})],yd.prototype,"field",void 0),l([p({type:String,json:{write:!0}})],yd.prototype,"normalizationField",void 0),l([p({type:String,json:{write:!0}})],yd.prototype,"label",void 0),l([p({type:[jw],json:{write:!0}})],yd.prototype,"classBreakInfos",void 0),yd=vC=l([k("esri.renderers.support.AuthoringInfoFieldInfo")],yd);var bC;let oy=bC=class extends ne{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new bC({label:this.label,value:this.value,size:this.size})}};l([p({type:String,json:{write:!0}})],oy.prototype,"label",void 0),l([p({type:Number,json:{write:!0}})],oy.prototype,"size",void 0),l([p({type:Number,json:{write:!0}})],oy.prototype,"value",void 0),oy=bC=l([k("esri.renderers.support.AuthoringInfoSizeStop")],oy);const Bce=oy;var SC;const Ob=new pt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),Ab=new pt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),k5={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},R5=["high-to-low","above-and-below","centered-on","extremes"],L5=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],N5=["seconds","minutes","hours","days","months","years"],qce=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let _r=SC=class extends ne{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new SC({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:q(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};l([p({types:k5,json:{write:!0}})],_r.prototype,"endTime",void 0),l([kt("endTime")],_r.prototype,"castEndTime",null),l([p({type:String,json:{write:!0}})],_r.prototype,"field",void 0),l([p({type:Number,json:{write:!0}})],_r.prototype,"maxSliderValue",void 0),l([p({type:Number,json:{write:!0}})],_r.prototype,"minSliderValue",void 0),l([p({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],_r.prototype,"normalizationField",null),l([p({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],_r.prototype,"referenceSizeScale",null),l([p({type:qce,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],_r.prototype,"referenceSizeSymbolStyle",null),l([p({types:k5,json:{write:!0}})],_r.prototype,"startTime",void 0),l([kt("startTime")],_r.prototype,"castStartTime",null),l([p({type:[Bce],json:{origins:{"web-scene":{write:!1}},write:!0}})],_r.prototype,"sizeStops",null),l([p({type:Ob.apiValues,value:null,json:{type:Ob.jsonValues,read:Ob.read,write:Ob.write}})],_r.prototype,"style",null),l([p({type:L5,value:null,json:{type:L5,origins:{"web-scene":{type:R5,write:{writer:(e,t)=>{R5.includes(e)&&(t.theme=e)}}}},write:!0}})],_r.prototype,"theme",null),l([p({type:Ab.apiValues,json:{type:Ab.jsonValues,read:Ab.read,write:Ab.write}})],_r.prototype,"type",void 0),l([p({type:N5,json:{type:N5,write:!0}})],_r.prototype,"units",void 0),_r=SC=l([k("esri.renderers.support.AuthoringInfoVisualVariable")],_r);const Hce=_r;let a2=class extends ne{constructor(t){super(t),this.type=null}};l([p({readOnly:!0,json:{read:!1,write:!0}})],a2.prototype,"type",void 0),a2=l([k("esri.rest.support.ColorRamp")],a2);const mR=a2;var TC;let _p=TC=class extends mR{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new TC({fromColor:q(this.fromColor),toColor:q(this.toColor),algorithm:this.algorithm})}};l([ke({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],_p.prototype,"algorithm",void 0),l([p({type:Ze,json:{type:[Mt],write:!0}})],_p.prototype,"fromColor",void 0),l([p({type:Ze,json:{type:[Mt],write:!0}})],_p.prototype,"toColor",void 0),l([p({type:["algorithmic"]})],_p.prototype,"type",void 0),_p=TC=l([k("esri.rest.support.AlgorithmicColorRamp")],_p);const yR=_p;var xC;let zw=xC=class extends mR{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new xC({colorRamps:q(this.colorRamps)})}};l([p({type:[yR],json:{write:!0}})],zw.prototype,"colorRamps",void 0),l([p({type:["multipart"]})],zw.prototype,"type",void 0),zw=xC=l([k("esri.rest.support.MultipartColorRamp")],zw);const rq=zw,Wce={key:"type",base:mR,typeMap:{algorithmic:yR,multipart:rq}};function Zce(e){return e!=null&&e.type?e.type==="algorithmic"?yR.fromJSON(e):e.type==="multipart"?rq.fromJSON(e):null:null}var EC;const Gh=new pt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),kb=new pt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),D5=new pt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),F5=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],Jce=["high-to-low","above-and-below","above","below"],Yce=["flow-line","wave-front"],Kce=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let In=EC=class extends ne{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?Zce(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){var e;return new EC({classificationMethod:this.classificationMethod,colorRamp:q(this.colorRamp),fadeRatio:q(this.fadeRatio),fields:(e=this.fields)==null?void 0:e.slice(),field1:q(this.field1),field2:q(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};l([p({type:Gh.apiValues,value:null,json:{type:Gh.jsonValues,read:Gh.read,write:Gh.write,origins:{"web-document":{default:"manual",type:Gh.jsonValues,read:Gh.read,write:Gh.write}}}})],In.prototype,"classificationMethod",null),l([p({types:Wce,json:{write:!0}})],In.prototype,"colorRamp",void 0),l([de("colorRamp")],In.prototype,"readColorRamp",null),l([p({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],In.prototype,"fadeRatio",void 0),l([p({type:[String],value:null,json:{write:!0}})],In.prototype,"fields",null),l([p({type:yd,value:null,json:{write:!0}})],In.prototype,"field1",null),l([p({type:yd,value:null,json:{write:!0}})],In.prototype,"field2",null),l([p({type:Yce,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],In.prototype,"flowTheme",null),l([p({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],In.prototype,"focus",null),l([p({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],In.prototype,"isAutoGenerated",void 0),l([p({type:Number,value:null,json:{type:Mt,write:!0}})],In.prototype,"numClasses",null),l([p({type:F5,json:{type:F5,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],In.prototype,"lengthUnit",void 0),l([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],In.prototype,"maxSliderValue",void 0),l([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],In.prototype,"minSliderValue",void 0),l([p({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],In.prototype,"statistics",null),l([p({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],In.prototype,"standardDeviationInterval",null),l([p({type:kb.apiValues,value:null,json:{type:kb.jsonValues,read:kb.read,write:kb.write,origins:{"web-scene":{type:D5.jsonValues,write:{writer:D5.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],In.prototype,"type",null),l([p({type:[Hce],json:{write:!0}})],In.prototype,"visualVariables",void 0),l([p({type:Kce,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],In.prototype,"univariateSymbolStyle",null),l([p({type:Jce,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],In.prototype,"univariateTheme",null),In=EC=l([k("esri.renderers.support.AuthoringInfo")],In);const gR=In,jM=new pt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Vw=class extends ne{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const n=new Set;return await this.collectRequiredFields(n,t),Array.from(n).sort()}getSymbol(t,n){}async getSymbolAsync(t,n){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};l([p({type:gR,json:{write:!0}})],Vw.prototype,"authoringInfo",void 0),l([p({type:jM.apiValues,readOnly:!0,json:{type:jM.jsonValues,read:!1,write:{writer:jM.write,ignoreOrigin:!0}}})],Vw.prototype,"type",void 0),Vw=l([k("esri.renderers.Renderer")],Vw);const Uu=Vw;function Xce(e){var t,n;return((n=(t=e.match(Qce))==null?void 0:t[1])==null?void 0:n.replace(/\\'/g,"'"))??null}const Qce=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let Uw=class extends vt(ne){constructor(){super(...arguments),this.showLegend=null,this.title=null}};l([p({type:Boolean,json:{write:!0}})],Uw.prototype,"showLegend",void 0),l([p({type:String,json:{write:!0}})],Uw.prototype,"title",void 0),Uw=l([k("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],Uw);const iq=Uw,zM=new pt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Uo=class extends ne{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(fe.getLogger(this).error(".field: field must be a string value"),null):C0(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};l([p()],Uo.prototype,"index",void 0),l([p({type:zM.apiValues,readOnly:!0,json:{read:zM.read,write:zM.write}})],Uo.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],Uo.prototype,"field",void 0),l([kt("field")],Uo.prototype,"castField",null),l([p({type:String,json:{write:!0}})],Uo.prototype,"valueExpression",void 0),l([p({type:String,json:{write:!0}})],Uo.prototype,"valueExpressionTitle",void 0),l([p({readOnly:!0})],Uo.prototype,"arcadeRequired",null),l([p({type:iq,json:{write:!0}})],Uo.prototype,"legendOptions",void 0),Uo=l([k("esri.renderers.visualVariables.VisualVariable")],Uo);const qg=Uo;var $C;let wp=$C=class extends ne{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,n){t[n]=e??0}clone(){return new $C({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};l([p({type:Ze,json:{type:[Mt],write:!0}})],wp.prototype,"color",void 0),l([p({type:String,json:{write:!0}})],wp.prototype,"label",void 0),l([p({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],wp.prototype,"value",void 0),l([ge("value")],wp.prototype,"writeValue",null),wp=$C=l([k("esri.renderers.visualVariables.support.ColorStop")],wp);const ede=wp;var MC;let vp=MC=class extends qg{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,n)=>t.value-n.value),this._set("stops",e)}clone(){var e;return new MC({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};l([p({readOnly:!0})],vp.prototype,"cache",null),l([p({type:["color"],json:{type:["colorInfo"]}})],vp.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],vp.prototype,"normalizationField",void 0),l([p({type:[ede],json:{write:!0}})],vp.prototype,"stops",null),vp=MC=l([k("esri.renderers.visualVariables.ColorVariable")],vp);const sq=vp;var IC;let Jc=IC=class extends ne{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return t0(t.transparency)}writeOpacity(e,t,n){t[n]=Lx(e)}clone(){return new IC({label:this.label,opacity:this.opacity,value:this.value})}};l([p({type:String,json:{write:!0}})],Jc.prototype,"label",void 0),l([p({type:Number,json:{type:Mt,write:{target:"transparency"}}})],Jc.prototype,"opacity",void 0),l([de("opacity",["transparency"])],Jc.prototype,"readOpacity",null),l([ge("opacity")],Jc.prototype,"writeOpacity",null),l([p({type:Number,json:{write:!0}})],Jc.prototype,"value",void 0),Jc=IC=l([k("esri.renderers.visualVariables.support.OpacityStop")],Jc);const tde=Jc;var PC;let bp=PC=class extends qg{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,n)=>t.value-n.value),this._set("stops",e)}clone(){var e;return new PC({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};l([p({readOnly:!0})],bp.prototype,"cache",null),l([p({type:["opacity"],json:{type:["transparencyInfo"]}})],bp.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],bp.prototype,"normalizationField",void 0),l([p({type:[tde],json:{write:!0}})],bp.prototype,"stops",null),bp=PC=l([k("esri.renderers.visualVariables.OpacityVariable")],bp);const _R=bp;var CC;let Sp=CC=class extends qg{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var e;return new CC({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}};l([p({readOnly:!0})],Sp.prototype,"cache",null),l([p({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Sp.prototype,"axis",void 0),l([p({type:["rotation"],json:{type:["rotationInfo"]}})],Sp.prototype,"type",void 0),l([p({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Sp.prototype,"rotationType",void 0),Sp=CC=l([k("esri.renderers.visualVariables.RotationVariable")],Sp);const oq=Sp;function nde(e){return At(e)}var OC;let Yc=OC=class extends ne{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new OC({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};l([p({type:String,json:{write:!0}})],Yc.prototype,"label",void 0),l([p({type:Number,cast:At,json:{write:!0}})],Yc.prototype,"size",void 0),l([p({type:Number,json:{write:!0}})],Yc.prototype,"value",void 0),l([p({type:Boolean,json:{write:!1}})],Yc.prototype,"useMinValue",void 0),l([p({type:Boolean,json:{write:!1}})],Yc.prototype,"useMaxValue",void 0),Yc=OC=l([k("esri.renderers.visualVariables.support.SizeStop")],Yc);const l2=Yc;let u2=class extends iq{constructor(){super(...arguments),this.customValues=null}};l([p({type:[Number],json:{write:!0}})],u2.prototype,"customValues",void 0),u2=l([k("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],u2);const rde=u2;var ku,or;function Hy(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function l0(e){return e!=null&&!isNaN(e)&&isFinite(e)}function aq(e){return e.valueExpression?ku.Expression:e.field&&typeof e.field=="string"?ku.Field:ku.Unknown}function ide(e,t){const n=t||aq(e),r=e.valueUnit||"unknown";return n===ku.Unknown?or.Constant:e.stops?or.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?or.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?or.Proportional:or.Additive:or.Identity:or.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(ku||(ku={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(or||(or={}));const wR={unknown:1,inches:Sr(1,"meters","inches"),feet:Sr(1,"meters","feet"),"us-feet":Sr(1,"meters","us-feet"),yards:Sr(1,"meters","yards"),miles:Sr(1,"meters","miles"),"nautical-miles":Sr(1,"meters","nautical-miles"),millimeters:Sr(1,"meters","millimeters"),centimeters:Sr(1,"meters","centimeters"),decimeters:Sr(1,"meters","decimeters"),meters:Sr(1,"meters","meters"),kilometers:Sr(1,"meters","kilometers"),"decimal-degrees":1/bte(1,"meters",Cn.radius)},lq=()=>fe.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),rE=e=>lq().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),iE=()=>lq().error("Use of arcade expressions requires an arcade context"),j5=new yl,c2=Math.PI,uq=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function cq(e,t,n){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(M=>M.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void rE("ColorVariable");const i=typeof t=="number",s=i?null:t,o=s==null?void 0:s.attributes;let a=i?t:null;const h=r.field,{ipData:f,hasExpression:_}=r.cache;let w=r.cache.compiledFunc;if(!h&&!_){const M=r.stops;return M&&M[0]&&M[0].color}if(typeof a!="number")if(_){if((n==null?void 0:n.arcade)==null)return void iE();const M={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},I=n.arcade.arcadeUtils,C=I.getViewInfo(M),N=I.createExecContext(s,C,n.timeZone);if(!w){const j=I.createSyntaxTree(r.valueExpression);w=I.createFunction(j),r.cache.compiledFunc=w}a=I.executeFunction(w,N)}else o&&(a=o[h]);const b=r.normalizationField,T=o!=null&&b!=null?parseFloat(o[b]):void 0;if(a!=null&&(!b||i||!isNaN(T)&&T!==0)){isNaN(T)||i||(a/=T);const M=vR(a,f);if(M){const I=M[0],C=M[1],N=I===C?r.stops[I].color:Ze.blendColors(r.stops[I].color,r.stops[C].color,M[2],n!=null?n.color:void 0);return new Ze(N)}}}function dq(e,t,n){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(M=>M.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void rE("OpacityVariable");const i=typeof t=="number",s=i?null:t,o=s==null?void 0:s.attributes;let a=i?t:null;const h=r.field,{ipData:f,hasExpression:_}=r.cache;let w=r.cache.compiledFunc;if(!h&&!_){const M=r.stops;return M&&M[0]&&M[0].opacity}if(typeof a!="number")if(_){if((n==null?void 0:n.arcade)==null)return void iE();const M={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},I=n.arcade.arcadeUtils,C=I.getViewInfo(M),N=I.createExecContext(s,C,n.timeZone);if(!w){const j=I.createSyntaxTree(r.valueExpression);w=I.createFunction(j),r.cache.compiledFunc=w}a=I.executeFunction(w,N)}else o&&(a=o[h]);const b=r.normalizationField,T=o!=null&&b!=null?parseFloat(o[b]):void 0;if(a!=null&&(!b||i||!isNaN(T)&&T!==0)){isNaN(T)||i||(a/=T);const M=vR(a,f);if(M){const I=M[0],C=M[1];if(I===C)return r.stops[I].opacity;{const N=r.stops[I].opacity;return N+(r.stops[C].opacity-N)*M[2]}}}}function hq(e,t,n){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(T=>T.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void rE("RotationVariable");const i=r.axis||"heading",s=i==="heading"&&r.rotationType==="arithmetic"?90:0,o=i==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,h=a==null?void 0:a.attributes,f=r.field,{hasExpression:_}=r.cache;let w=r.cache.compiledFunc,b=0;if(!f&&!_)return b;if(_){if((n==null?void 0:n.arcade)==null)return void iE();const T={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},M=n.arcade.arcadeUtils,I=M.getViewInfo(T),C=M.createExecContext(a,I,n.timeZone);if(!w){const N=M.createSyntaxTree(r.valueExpression);w=M.createFunction(N),r.cache.compiledFunc=w}b=M.executeFunction(w,C)}else h&&(b=h[f]||0);return b=typeof b!="number"||isNaN(b)?null:s+o*b,b}function sde(e,t,n){const r=typeof t=="number",i=r?null:t,s=i==null?void 0:i.attributes;let o=r?t:null;const{isScaleDriven:a}=e.cache;let h=e.cache.compiledFunc;if(a){const _=n!=null?n.scale:void 0,w=n!=null?n.view:void 0;o=_==null||w==="3d"?ode(e):_}else if(!r)switch(e.inputValueType){case ku.Expression:{if((n==null?void 0:n.arcade)==null)return void iE();const _={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},w=n.arcade.arcadeUtils,b=w.getViewInfo(_),T=w.createExecContext(i,b,n.timeZone);if(!h){const M=w.createSyntaxTree(e.valueExpression);h=w.createFunction(M),e.cache.compiledFunc=h}o=w.executeFunction(h,T);break}case ku.Field:s&&(o=s[e.field]);break;case ku.Unknown:o=null}if(!l0(o))return null;if(r||!e.normalizationField)return o;const f=s?parseFloat(s[e.normalizationField]):null;return l0(f)&&f!==0?o/f:null}function ode(e){let t=null,n=null;const r=e.stops;return r?(t=r[0].value,n=r[r.length-1].value):(t=e.minDataValue||0,n=e.maxDataValue||0),(t+n)/2}function sE(e,t,n){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(s=>s.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void rE("SizeVariable");const i=fq(sde(r,t,n),r,t,n,r.cache.ipData);return i==null||isNaN(i)?0:i}function Ji(e,t,n){return e==null?null:Hy(e)?sE(e,t,n):l0(e)?e:null}function pq(e,t,n){return l0(n)&&e>n?n:l0(t)&&e<t?t:e}function ade(e,t,n,r){return e+((Ji(t.minSize,n,r)||t.minDataValue)??0)}function lde(e,t,n){const r=e.stops;let i=(r==null?void 0:r.length)&&r[0].size;return i==null&&(i=e.minSize),Ji(i,t,n)}function ude(e,t,n,r){const i=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=Ji(t.minSize,n,r),o=Ji(t.maxSize,n,r),a=r!=null?r.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return o;if(s==null||o==null)return null;if(t.scaleBy==="area"&&a){const h=a==="circle",f=h?c2*(s/2)**2:s*s,_=f+i*((h?c2*(o/2)**2:o*o)-f);return h?2*Math.sqrt(_/c2):Math.sqrt(_)}return s+i*(o-s)}function cde(e,t,n,r){const i=r!=null?r.shape:void 0,s=e/t.minDataValue,o=Ji(t.minSize,n,r),a=Ji(t.maxSize,n,r);let h=null;return h=i==="circle"?2*Math.sqrt(s*(o/2)**2):i==="square"||i==="diamond"||i==="image"?Math.sqrt(s*o**2):s*o,pq(h,o,a)}function dde(e,t,n,r,i){var h,f,_;const[s,o,a]=vR(e,i);if(s===o)return Ji((h=t.stops)==null?void 0:h[s].size,n,r);{const w=Ji((f=t.stops)==null?void 0:f[s].size,n,r);return w+(Ji((_=t.stops)==null?void 0:_[o].size,n,r)-w)*a}}function hde(e,t,n,r){const i=((r==null?void 0:r.resolution)??1)*wR[t.valueUnit],s=Ji(t.minSize,n,r),o=Ji(t.maxSize,n,r),{valueRepresentation:a}=t;let h=null;return h=a==="area"?2*Math.sqrt(e/c2)/i:a==="radius"||a==="distance"?2*e/i:e/i,pq(h,s,o)}function fq(e,t,n,r,i){switch(t.transformationType){case or.Additive:return ade(e,t,n,r);case or.Constant:return lde(t,n,r);case or.ClampedLinear:return ude(e,t,n,r);case or.Proportional:return cde(e,t,n,r);case or.Stops:return dde(e,t,n,r,i);case or.RealWorldSize:return hde(e,t,n,r);case or.Identity:return e;case or.Unknown:return null}}function pde(e,t,n){const{isScaleDriven:r}=e.cache;if(!(r&&n==="3d"||t))return null;const i={scale:t,view:n};let s=Ji(e.minSize,j5,i),o=Ji(e.maxSize,j5,i);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function fde(e,t,n){if(!e.visualVariables)return;const r=[],i=[],s=[],o=[],a=[];for(const h of e.visualVariables)switch(h.type){case"color":i.push(h);break;case"opacity":s.push(h);break;case"rotation":a.push(h);break;case"size":o.push(h)}return i.forEach(h=>{const f=cq(h,t,n);r.push({variable:h,value:f})}),s.forEach(h=>{const f=dq(h,t,n);r.push({variable:h,value:f})}),a.forEach(h=>{const f=hq(h,t,n);r.push({variable:h,value:f})}),o.forEach(h=>{const f=sE(h,t,n);r.push({variable:h,value:f})}),r.filter(h=>h.value!=null)}function vR(e,t){if(!t)return;let n=0,r=t.length-1;return t.some((i,s)=>e<i?(r=s,!0):(n=s,!1)),[n,r,(e-t[n])/(t[r]-t[n])]}function mde(e,t,n){const r=["proportional","proportional","proportional"];for(const i of e){const s=i.useSymbolValue?"symbol-value":sE(i,t,n);switch(i.axis){case"width":r[0]=s;break;case"depth":r[1]=s;break;case"height":r[2]=s;break;case"width-and-depth":r[0]=s,r[1]=s;break;case"all":case void 0:case null:r[0]=s,r[1]=s,r[2]=s;break;default:i.axis}}return r}const BPe=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:mde,getColor:cq,getOpacity:dq,getRotationAngle:hq,getSize:sE,getSizeForValue:fq,getSizeFromNumberOrVariable:Ji,getSizeRangeAtScale:pde,getVisualVariableValues:fde,viewScaleRE:uq},Symbol.toStringTag,{value:"Module"}));var AC;const Rb=new pt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),kC=new pt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function z5(e){if(e!=null)return typeof e=="string"||typeof e=="number"?nde(e):e.type==="size"?Hy(e)?e:(delete(e={...e}).type,new Ut(e)):void 0}function V5(e,t,n){if(typeof e!="object")return e;const r=new Ut;return r.read(e,n),r}let Ut=AC=class extends qg{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&uq.test(this.valueExpression)}}set index(e){Hy(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),Hy(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return aq(this)}set maxDataValue(e){e&&this.stops&&(fe.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(fe.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return z5(e)}readMaxSize(e,t,n){return V5(e,t,n)}set minDataValue(e){e&&this.stops&&(fe.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(fe.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return z5(e)}readMinSize(e,t,n){return V5(e,t,n)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,n)=>t.value-n.value):e&&(fe.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return ide(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,n,r){if(e==="$view.scale"){if(r!=null&&r.messages){const i=this.index,s=typeof i=="string"?i:`visualVariables[${i}]`;r.messages.push(new Y("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:r}))}}else t[n]=e}readValueUnit(e){return e?kC.read(e):null}clone(){var e,t;return new AC({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Hy(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Hy(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(e=this.stops)==null?void 0:e.map(n=>n.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}flipSizes(){if(this.transformationType===or.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===or.Stops){const e=this.stops;if(!e)return this;const t=e.map(r=>r.size).reverse(),n=e.length;for(let r=0;r<n;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var e;return(e=this.stops)==null?void 0:e.map(t=>t.value||0)}};l([p({readOnly:!0})],Ut.prototype,"cache",null),l([p({type:Rb.apiValues,json:{type:Rb.jsonValues,origins:{"web-map":{read:!1}},read:Rb.read,write:Rb.write}})],Ut.prototype,"axis",void 0),l([p()],Ut.prototype,"index",null),l([p({type:String,readOnly:!0})],Ut.prototype,"inputValueType",null),l([p({type:rde,json:{write:!0}})],Ut.prototype,"legendOptions",void 0),l([p({type:Number,value:null,json:{write:!0}})],Ut.prototype,"maxDataValue",null),l([p({type:Number,value:null,json:{write:!0}})],Ut.prototype,"maxSize",null),l([kt("maxSize")],Ut.prototype,"castMaxSize",null),l([de("maxSize")],Ut.prototype,"readMaxSize",null),l([p({type:Number,value:null,json:{write:!0}})],Ut.prototype,"minDataValue",null),l([p({type:Number,value:null,json:{write:!0}})],Ut.prototype,"minSize",null),l([kt("minSize")],Ut.prototype,"castMinSize",null),l([de("minSize")],Ut.prototype,"readMinSize",null),l([p({type:String,json:{write:!0}})],Ut.prototype,"normalizationField",void 0),l([p({readOnly:!0})],Ut.prototype,"arcadeRequired",null),l([p({type:String})],Ut.prototype,"scaleBy",void 0),l([p({type:[l2],value:null,json:{write:!0}})],Ut.prototype,"stops",null),l([p({type:["outline"],json:{write:!0}})],Ut.prototype,"target",void 0),l([p({type:String,readOnly:!0})],Ut.prototype,"transformationType",null),l([p({type:["size"],json:{type:["sizeInfo"]}})],Ut.prototype,"type",void 0),l([p({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Ut.prototype,"useSymbolValue",void 0),l([p({type:String,json:{write:!0}})],Ut.prototype,"valueExpression",void 0),l([de("valueExpression",["valueExpression","expression"])],Ut.prototype,"readValueExpression",null),l([ge("web-scene","valueExpression")],Ut.prototype,"writeValueExpressionWebScene",null),l([p({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Ut.prototype,"valueRepresentation",void 0),l([p({type:kC.apiValues,json:{write:kC.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Ut.prototype,"valueUnit",void 0),l([de("valueUnit")],Ut.prototype,"readValueUnit",null),Ut=AC=l([k("esri.renderers.visualVariables.SizeVariable")],Ut);const oE=Ut,yde={color:sq,size:oE,opacity:_R,rotation:oq},gde=new pt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),_de=/^\[([^\]]+)\]$/i;let d2=class extends Fe{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t==null?void 0:t.filter(n=>!!n),t==null?void 0:t.length){for(const n of t)switch(n.type){case"color":this.colorVariables.push(n);break;case"opacity":this.opacityVariables.push(n);break;case"rotation":this.rotationVariables.push(n);break;case"size":this.sizeVariables.push(n)}this.sizeVariables.length&&this.sizeVariables.some(n=>!!n.target)&&t.sort((n,r)=>{let i=null;return i=n.target===r.target?0:n.target?1:-1,i});for(let n=0;n<t.length;n++)t[n].index=n;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,n,r){const{rotationExpression:i,rotationType:s}=n,o=i==null?void 0:i.match(_de),a=o==null?void 0:o[1];if(a&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:s,field:a})),t)return t.map(h=>{const f=gde.read(h.type),_=yde[f];_||(fe.getLogger(this).warn(`Unknown variable type: ${f}`),r!=null&&r.messages&&r.messages.push(new Es("visual-variable:unsupported",`visualVariable of type '${f}' is not supported`,{definition:h,context:r})));const w=new _;return w.read(h,r),w})}writeVariables(t,n){const r=[];for(const i of t){const s=i.toJSON(n);s&&r.push(s)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};l([p()],d2.prototype,"visualVariables",null),d2=l([k("esri.renderers.visualVariables.VisualVariableFactory")],d2);const wde=d2,vde={base:qg,key:"type",typeMap:{opacity:_R,color:sq,rotation:oq,size:oE}},Hg=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new wde}set visualVariables(n){this._vvFactory.visualVariables=n,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(n,r,i){return this._vvFactory.readVariables(n,r,i)}writeVisualVariables(n,r,i,s){r[i]=this._vvFactory.writeVariables(n,s)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const n of this.visualVariables)if(n.arcadeRequired)return!0;return!1}hasVisualVariables(n,r){return n?this.getVisualVariablesForType(n,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(n,r){const i=this.visualVariables;return i?i.filter(s=>s.type===n&&(typeof r=="string"?s.target===r:r!==!1||!s.target)):[]}async collectVVRequiredFields(n,r){let i=[];this.visualVariables&&(i=i.concat(this.visualVariables));for(const s of i)s&&(s.field&&Ti(n,r,s.field),s.normalizationField&&Ti(n,r,s.normalizationField),s.valueExpression&&(bde(s.valueExpression,n,r)||await ai(n,r,s.valueExpression)))}};return l([p({types:[vde],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),l([de("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),l([ge("visualVariables")],t.prototype,"writeVisualVariables",null),t=l([k("esri.renderers.mixins.VisualVariablesMixin")],t),t};function bde(e,t,n){const r=Xce(e);return r!=null&&(Ti(t,n,r),!0)}const bR=[252,146,31,255],Sde=[153,153,153,255],Tde={type:"esriSMS",style:"esriSMSCircle",size:6,color:bR,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},xde={type:"esriSLS",style:"esriSLSSolid",width:.75,color:bR},Ede={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},$de={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Mde={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Ide={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Pde={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},mq=vl.fromJSON(Tde),yq=Ms.fromJSON(xde),gq=If.fromJSON(Ede),Cde=Bg.fromJSON($de);function HPe(e){if(e==null)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return mq;case"polyline":return yq;case"polygon":case"extent":return gq}return null}const WPe=vl.fromJSON(Mde),ZPe=Ms.fromJSON(Ide),JPe=If.fromJSON(Pde);Ou.fromSimpleMarkerSymbol(mq);Mf.fromSimpleLineSymbol(yq);nh.fromSimpleFillSymbol(gq);new B0({symbolLayers:new Ae([new Ef({material:{color:bR},edges:new EB({size:fo(1),color:new Ze(Sde)})})])});const Ode=new Mf({symbolLayers:new Ae([new Ug({material:{color:new Ze([0,0,0])},size:fo(1)})])}),Ade=new nh({symbolLayers:new Ae([new Ef({outline:{color:new Ze([0,0,0]),size:fo(1)}})])}),U5="#useCIMFallbackSymbology()",Am={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function kde(e,t=Am){var h,f,_,w;if(!e)return{symbol:null};const{retainId:n=Am.retainId,ignoreDrivers:r=Am.ignoreDrivers,hasLabelingContext:i=Am.hasLabelingContext,retainCIM:s=Am.retainCIM,cimFallbackEnabled:o=Am.cimFallbackEnabled}=t;let a=null;if(O5(e)||e instanceof Pf)a=e.clone();else if(e.type==="cim"){const b=(f=(h=e.data)==null?void 0:h.symbol)==null?void 0:f.type;switch(b){case"CIMPointSymbol":a=s?e.clone():Ou.fromCIMSymbol(e);break;case"CIMLineSymbol":o&&(a=Ode.clone(),(_=t==null?void 0:t.logWarning)==null||_.call(t,U5,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(a=Ade.clone(),(w=t==null?void 0:t.logWarning)==null||w.call(t,U5,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!a)return{error:new Y("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${b||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof Ms)a=Mf.fromSimpleLineSymbol(e);else if(e instanceof vl)a=Ou.fromSimpleMarkerSymbol(e);else if(e instanceof q0)a=Ou.fromPictureMarkerSymbol(e);else if(e instanceof If)a=t.geometryType&&t.geometryType==="mesh"?B0.fromSimpleFillSymbol(e):nh.fromSimpleFillSymbol(e);else{if(!(e instanceof Bg))return{error:new Y("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};a=i?nE.fromTextSymbol(e):Ou.fromTextSymbol(e)}return n&&a&&a.type!=="cim"&&(a.id=e.id),r&&O5(a)&&a.symbolLayers.forEach(b=>b.ignoreDrivers=!0),{symbol:a}}function LT(e,t,n,r){const i=_q(e,{},{context:r,isLabelSymbol:!1});i!=null&&(t[n]=i)}function G5(e,t,n,r){const i=_q(e,{},{context:r,isLabelSymbol:!0});i!=null&&(t[n]=i)}function B5(e){return e instanceof $f||e instanceof Pf}function Rde(e){return e instanceof $f&&(e.type==="polygon-3d"||e.type==="line-3d")}function _q(e,t,n){var a;if(e==null)return null;const{context:r,isLabelSymbol:i}=n,s=r==null?void 0:r.origin,o=r==null?void 0:r.messages;if(s==="web-scene"&&!B5(e)){const h=kde(e,{retainCIM:!0,hasLabelingContext:i});return h.symbol!=null?h.symbol.write(t,r):(o==null||o.push(new Y("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:h.error})),null)}return $3(r==null?void 0:r.layer)&&Rde(e)?(o==null||o.push(new Y("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${(a=r==null?void 0:r.layer)==null?void 0:a.declaredClass}'.`,{symbol:e,context:r})),null):(s==="web-map"||s==="portal-item"&&!$3(r==null?void 0:r.layer))&&B5(e)?(o==null||o.push(new Y("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function YPe(e,t){return jce(e,null,t)}const aE={types:tq,json:{write:{writer:LT},origins:{"web-scene":{types:A5,write:{writer:LT},read:{reader:Ag({types:A5})}}}}},SR=GA({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},aE),TR={types:{base:Dr,key:"type",typeMap:{"simple-fill":$d.typeMap["simple-fill"],"picture-fill":$d.typeMap["picture-fill"],"polygon-3d":$d.typeMap["polygon-3d"],cim:$d.typeMap.cim}},json:{write:{writer:LT},origins:{"web-scene":{type:nh,write:{writer:LT}}}}},h2={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var RC;let Kc=RC=class extends ne{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var e;return new RC({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((e=this.symbol)==null?void 0:e.clone())??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};l([p({type:String,json:{write:!0}})],Kc.prototype,"description",void 0),l([p({type:String,json:{write:!0}})],Kc.prototype,"label",void 0),l([p({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Kc.prototype,"minValue",void 0),l([p({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Kc.prototype,"maxValue",void 0),l([p(SR)],Kc.prototype,"symbol",void 0),Kc=RC=l([k("esri.renderers.support.ClassBreakInfo")],Kc);const NT=Kc,Lde=hr()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let Gw=class extends vt(ne){constructor(t){super(t),this.title=null,this.order=null}};l([p({type:String,json:{write:!0}})],Gw.prototype,"title",void 0),l([ke(Lde)],Gw.prototype,"order",void 0),Gw=l([k("esri.renderers.support.RendererLegendOptions")],Gw);const xR=Gw;var LC;const wq="log",p2="percent-of-total",f2="field",Lb=new pt({esriNormalizeByLog:wq,esriNormalizeByPercentOfTotal:p2,esriNormalizeByField:f2}),Nde=jn(NT);let Wn=LC=class extends Hg(Uu){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,n){if(!Array.isArray(e))return;let r=t.minValue;return e.map(i=>{const s=new NT;return s.read(i,n),s.minValue==null&&(s.minValue=r),s.maxValue==null&&(s.maxValue=s.minValue),r=s.maxValue,s})}writeClassBreakInfos(e,t,n,r){const i=e.map(s=>s.write({},r));this._areClassBreaksConsecutive()&&i.forEach(s=>delete s.classMinValue),t[n]=i}castField(e){return e==null?e:typeof e=="function"?(fe.getLogger(this).error(".field: field must be a string value"),null):C0(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,n=this.normalizationTotal!=null;return t||n?(e=t&&f2||n&&p2||null,t&&n&&fe.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==f2&&e!==p2||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,n){let r=null;r=typeof e=="number"?new NT({minValue:e,maxValue:t,symbol:nq(n)}):Nde(q(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const n=this.classBreakInfos.length;for(let r=0;r<n;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]===e&&i[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(t==null?void 0:t.arcade)==null&&fe.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let n=t;this.valueExpression&&(t==null?void 0:t.arcade)==null&&(n={...n,arcade:await yf()});const r=this.getBreakIndex(e,n);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void fe.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const n=this.getBreakIndex(e,t);return n>-1?this.classBreakInfos[n].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let n=t;if(this.valueExpression&&(t==null?void 0:t.arcade)==null){const i=await yf(),{arcadeUtils:s}=i;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),n={...n,arcade:i}}const r=this.getBreakIndex(e,n);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,n)=>t+n.getAttributeHash(),""))??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),n=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,i)=>r+i.getMeshHash(),"")}.${n}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new LC({field:this.field,backgroundFillSymbol:(e=this.backgroundFillSymbol)==null?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(t=this.defaultSymbol)==null?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:q(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:q(this.visualVariables),legendOptions:q(this.legendOptions),authoringInfo:q(this.authoringInfo)})}async collectRequiredFields(e,t){const n=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(n)}async collectSymbolFields(e,t){const n=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),ai(e,t,this.valueExpression)];Ti(e,t,this.field),Ti(e,t,this.normalizationField),await Promise.all(n)}_getBreakIndexForExpression(e,t){const{viewingMode:n,scale:r,spatialReference:i,arcade:s,timeZone:o}=t??{},{valueExpression:a}=this;let h=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const f=s.arcadeUtils;if(!h){const w=f.createSyntaxTree(a);h=f.createFunction(w),this._compiledValueExpression.compiledFunction=h}this._compiledValueExpression.valueExpression=a;const _=f.executeFunction(h,f.createExecContext(e,f.getViewInfo({viewingMode:n,scale:r,spatialReference:i}),o));return this._getBreakIndexfromInfos(_)}_getBreakIndexForField(e){const t=this.field,n=e.attributes,r=this.normalizationType;let i=parseFloat(n[t]);if(r){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?n[this.normalizationField]:void 0);if(r===wq)i=Math.log(i)*Math.LOG10E;else if(r!==p2||s==null||isNaN(s)){if(r===f2&&!isNaN(o)){if(isNaN(i)||isNaN(o))return-1;i/=o}}else i=i/s*100}return this._getBreakIndexfromInfos(i)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let n=0;n<this.classBreakInfos.length;n++){const r=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return n}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let n=1;n<t;n++)if(e[n-1].maxValue!==e[n].minValue)return!1;return!0}};l([p(TR)],Wn.prototype,"backgroundFillSymbol",void 0),l([p({type:[NT]})],Wn.prototype,"classBreakInfos",void 0),l([de("classBreakInfos")],Wn.prototype,"readClassBreakInfos",null),l([ge("classBreakInfos")],Wn.prototype,"writeClassBreakInfos",null),l([p({type:String,json:{write:!0}})],Wn.prototype,"defaultLabel",void 0),l([p(aE)],Wn.prototype,"defaultSymbol",void 0),l([p({type:String,json:{write:!0}})],Wn.prototype,"field",void 0),l([kt("field")],Wn.prototype,"castField",null),l([p({type:Boolean})],Wn.prototype,"isMaxInclusive",void 0),l([p({type:xR,json:{write:!0}})],Wn.prototype,"legendOptions",void 0),l([p({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Wn.prototype,"minValue",null),l([p({type:String,json:{write:!0}})],Wn.prototype,"normalizationField",void 0),l([p({type:Number,json:{write:!0}})],Wn.prototype,"normalizationTotal",void 0),l([p({type:Lb.apiValues,value:null,json:{type:Lb.jsonValues,read:Lb.read,write:Lb.write}})],Wn.prototype,"normalizationType",null),l([ke({classBreaks:"class-breaks"})],Wn.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],Wn.prototype,"valueExpression",void 0),l([p({type:String,json:{write:!0}})],Wn.prototype,"valueExpressionTitle",void 0),Wn=LC=l([k("esri.renderers.ClassBreaksRenderer")],Wn);const vq=Wn,NC=-3,Dde=NC-1;var Su;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Su||(Su={}));let Fde=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Kp,this._users=new Kp}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,n){this._removeFuncs.push([t,n])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(n=>n[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,n){const r=this._db.get(t.id+n);return(r==null?void 0:r.size)??0}put(t,n,r,i,s){n=t.id+n;const o=this._db.get(n);if(o&&(this._size-=o.size,t.size-=o.size,this._db.delete(n),o.entry!==r&&this._notifyRemove(n,o.entry,o.size,Su.ALL)),i>this._maxSize)return void this._notifyRemove(n,r,i,Su.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return console.warn(`Refusing to cache entry with size ${i} for key ${n}`),void this._notifyRemove(n,r,0,Su.ALL);const a=1+Math.max(s,Dde)-NC;this._db.set(n,new jde(r,i,a)),this._size+=i,t.size+=i,this._checkSize()}updateSize(t,n,r,i){n=t.id+n;const s=this._db.get(n);if(s&&s.entry===r){for(this._size-=s.size,t.size-=s.size;i>this._maxSize;){const o=this._notifyRemove(n,r,i,Su.SOME);if(!(o!=null&&o>0))return void this._db.delete(n);i=o}s.size=i,this._size+=i,t.size+=i,this._checkSize()}}pop(t,n){n=t.id+n;const r=this._db.get(n);if(r)return this._size-=r.size,t.size-=r.size,this._db.delete(n),++this._hit,r.entry;++this._miss}get(t,n){n=t.id+n;const r=this._db.get(n);if(r!==void 0)return this._db.delete(n),r.lives=r.lifetime,this._db.set(n,r),++this._hit,r.entry;++this._miss}peek(t,n){const r=this._db.get(t.id+n);return r?++this._hit:++this._miss,r==null?void 0:r.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},n={},r=new Array;this._db.forEach((o,a)=>{const h=o.lifetime;r[h]=(r[h]||0)+o.size,this._users.forAll(f=>{const{id:_,name:w}=f;if(a.startsWith(_)){const b=n[w]||0;n[w]=b+o.size}})});const i={};this._users.forAll(o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const h=n[a]||0;n[a]=h,i[a]=Math.round(100*o.hitRate)+"%"}else i[a]="0%"});const s=Object.keys(n);s.sort((o,a)=>n[a]-n[o]),s.forEach(o=>t[o]=Math.round(n[o]/2**20)+"MB / "+i[o]);for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(t["Priority "+(o+NC-1)]=Math.round(a/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const n=t.id;this._db.forEach((r,i)=>{i.startsWith(n)&&(this._size-=r.size,this._db.delete(i),this._notifyRemove(i,r.entry,r.size,Su.ALL))}),t.size=0}clearAll(){this._db.forEach((t,n)=>this._notifyRemove(n,t.entry,t.size,Su.ALL)),this._users.forAll(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,n,r,i){let s;return this._removeFuncs.some(o=>{if(t.startsWith(o[0])){const a=o[1](n,i,r);return typeof a=="number"&&(s=a),!0}return!1}),s}_checkSize(){this._users.forAll(t=>this._checkSizeLimits(t)),this._checkSizeLimits()}_checkSizeLimits(t){const n=t??this;if(n.maxSize<0||n.size<=n.maxSize)return;const r=t==null?void 0:t.id;let i=!0;for(;i;){i=!1;for(const[s,o]of this._db)if(o.lifetime===0&&(!r||s.startsWith(r))){if(this._purgeItem(s,o,t),n.size<=.9*n.maxSize)return;i||(i=this._db.has(s))}}for(const[s,o]of this._db)if((!r||s.startsWith(r))&&(this._purgeItem(s,o,t),n.size<=.9*n.maxSize))return}_purgeItem(t,n,r=this._users.find(i=>t.startsWith(i.id))){if(this._db.delete(t),n.lives<=1){this._size-=n.size,r&&(r.size-=n.size);const i=this._notifyRemove(t,n.entry,n.size,Su.SOME);i!=null&&i>0&&(this._size+=i,r&&(r.size+=i),n.lives=n.lifetime,n.size=i,this._db.set(t,n))}else--n.lives,this._db.set(t,n)}},jde=class{constructor(t,n,r){this.entry=t,this.size=n,this.lifetime=r,this.lives=r}},zde=class{constructor(t,n){this._storage=new Fde,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),n&&this._storage.registerRemoveFunc("",n)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,n,r=1){this._storage.put(this,t,n,r,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}},lE=class{};function Vde(e){return e instanceof Dg?e===lE.instance:(e==null?void 0:e.toString().toLowerCase())==="unknown"}function nCe(e){return Vde(e)?lE.instance:e}lE.instance=new $s("Etc/UTC");function Ude(e){return"timeZone"in e}function Gde(e){return"timeZone"in e}function Bde(e){return"dateFieldsTimeZone"in e}const qde=new Map;let bq=class m2{static fromJSON(t){return new m2(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new m2(t.fields??[],H5(t))}static fromLayerJSON(t){return new m2(t.fields??[],H5(t))}constructor(t=[],n){var i;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=n?new Map(n):null;const r=[];for(const s of this.fields){const o=s==null?void 0:s.name,a=q5(o);if(o&&a){const h=Up(o);this._fieldsMap.set(o,s),this._fieldsMap.set(h,s),this._normalizedFieldsMap.set(a,s),r.push(`${h}:${s.type}:${(i=this._timeZoneByFieldName)==null?void 0:i.get(o)}`),Iue(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):mB(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),T5(s)||x5(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)T5(t)||x5(t)||t.nullable||yue(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===(t==null?void 0:t.uid)}has(t){return this.get(t)!=null}get(t){if(!t)return;let n=this._fieldsMap.get(t);return n||(n=this._fieldsMap.get(Up(t))??this._normalizedFieldsMap.get(q5(t)),n&&this._fieldsMap.set(t,n),n)}getTimeZone(t){const n=this.get(t&&typeof t!="string"?t.name:t);return n?this._timeZoneByFieldName?this._timeZoneByFieldName.get(n.name):n.type==="date"||n.type==="esriFieldTypeDate"?(fe.getLogger("esri.layers.support.FieldsIndex").error(new Y("getTimeZone:no-timezone-information",`no time zone information for field '${n.name}'`)),Vd):Sq.has(n.type)?mf:null:null}getLuxonTimeZone(t){const n=this.getTimeZone(t);return n?n===mf?lE.instance:n===Vd?Nr.utcInstance:vx(qde,n,()=>$s.create(n)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return Pue(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var n;return((n=this.get(t))==null?void 0:n.name)??void 0}toJSON(){return{fields:this.fields.map(t=>lT(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function Up(e){return e.trim().toLowerCase()}function q5(e){var t;return((t=eue(e))==null?void 0:t.toLowerCase())??""}const Sq=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function H5(e){const t=new Map;if(!e.fields)return t;const n=e.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:i}=e,s=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",a=Bde(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?DS(e.dateFieldsTimeReference):null,h=i?Ude(i)?i.timeZone??a:i.dateFieldsTimeReference?DS(i.dateFieldsTimeReference):a??Vd:null,f=r?Gde(r)?r.timeZone??a:r.timeReference?DS(r.timeReference):a:null,_=new Map([[Up((i==null?void 0:i.creationDateField)??""),h],[Up((i==null?void 0:i.editDateField)??""),h],[Up(s),f],[Up(o),f]]);for(const{name:w,type:b}of e.fields)if(Sq.has(b))t.set(w,mf);else if(b!=="date"&&b!=="esriFieldTypeDate")t.set(w,null);else if(n)t.set(w,mf);else{const T=_.get(Up(w??""))??a;t.set(w,T)}return t}function Hde(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Wde(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Zde(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function Jde(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function Tq(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function xq(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function Eq(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function Yde(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Kde(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Xde(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function Qde(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function ehe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function the(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function nhe(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}function $q(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+s*s)}function Mq(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return n*n+r*r+i*i+s*s}function Iq(e){const t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}function Pq(e){const t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function rhe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function ihe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function she(e,t){const n=t[0],r=t[1],i=t[2],s=t[3];let o=n*n+r*r+i*i+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=s*o),e}function ohe(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Cq(e,t,n,r){const i=t[0],s=t[1],o=t[2],a=t[3];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e[3]=a+r*(n[3]-a),e}function ahe(e,t=1){const n=Fx;let r,i,s,o,a,h;do r=2*n()-1,i=2*n()-1,a=r*r+i*i;while(a>=1);do s=2*n()-1,o=2*n()-1,h=s*s+o*o;while(h>=1);const f=Math.sqrt((1-a)/h);return e[0]=t*r,e[1]=t*i,e[2]=t*s*f,e[3]=t*o*f,e}function lhe(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,e}function uhe(e,t,n){const r=t[0],i=t[1],s=t[2],o=n[0],a=n[1],h=n[2],f=n[3],_=f*r+a*s-h*i,w=f*i+h*r-o*s,b=f*s+o*i-a*r,T=-o*r-a*i-h*s;return e[0]=_*f+T*-o+w*-h-b*-a,e[1]=w*f+T*-a+b*-o-_*-h,e[2]=b*f+T*-h+_*-a-w*-o,e[3]=t[3],e}function che(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function dhe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function hhe(e,t){const n=e[0],r=e[1],i=e[2],s=e[3],o=t[0],a=t[1],h=t[2],f=t[3],_=Si();return Math.abs(n-o)<=_*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=_*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-h)<=_*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-f)<=_*Math.max(1,Math.abs(s),Math.abs(f))}const phe=Tq,fhe=xq,mhe=Eq,yhe=$q,ghe=Mq,_he=Iq,whe=Pq;Object.freeze(Object.defineProperty({__proto__:null,add:Jde,ceil:Yde,copy:Hde,copyVec3:Wde,dist:yhe,distance:$q,div:mhe,divide:Eq,dot:ohe,equals:hhe,exactEquals:dhe,floor:Kde,inverse:ihe,len:_he,length:Iq,lerp:Cq,max:Qde,min:Xde,mul:fhe,multiply:xq,negate:rhe,normalize:she,random:ahe,round:ehe,scale:the,scaleAndAdd:nhe,set:Zde,sqrDist:ghe,sqrLen:whe,squaredDistance:Mq,squaredLength:Pq,str:che,sub:phe,subtract:Tq,transformMat4:lhe,transformQuat:uhe},Symbol.toStringTag,{value:"Module"}));function uE(){return[0,0,0,0]}function vhe(e){return[e[0],e[1],e[2],e[3]]}function Wg(e,t,n,r){return[e,t,n,r]}function bhe(e,t,n,r){return[e,t,n,r]}function She(e,t=uE()){const n=Math.min(4,e.length);for(let r=0;r<n;++r)t[r]=e[r];return t}function The(e,t){return new Float64Array(e,t,4)}function Oq(){return uE()}function Aq(){return Wg(1,1,1,1)}function kq(){return Wg(1,0,0,0)}function Rq(){return Wg(0,1,0,0)}function Lq(){return Wg(0,0,1,0)}function Nq(){return Wg(0,0,0,1)}const xhe=Oq(),Ehe=Aq(),$he=kq(),Mhe=Rq(),Ihe=Lq(),Phe=Nq();Object.freeze(Object.defineProperty({__proto__:null,ONES:Ehe,UNIT_W:Phe,UNIT_X:$he,UNIT_Y:Mhe,UNIT_Z:Ihe,ZEROS:xhe,clone:vhe,create:uE,createView:The,freeze:bhe,fromArray:She,fromValues:Wg,ones:Aq,unitW:Nq,unitX:kq,unitY:Rq,unitZ:Lq,zeros:Oq},Symbol.toStringTag,{value:"Module"}));function Dq(e){return"r"in e&&"g"in e&&"b"in e}function Fq(e){return"h"in e&&"s"in e&&"v"in e}function jq(e){return"l"in e&&"a"in e&&"b"in e}function zq(e){return"l"in e&&"c"in e&&"h"in e}function Che(e){return"x"in e&&"y"in e&&"z"in e}const Ohe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],Ahe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function Vq(e,t){const n=[];let r,i;if(e[0].length!==t.length)throw new Error("dimensions do not match");const s=e.length,o=e[0].length;let a=0;for(r=0;r<s;r++){for(a=0,i=0;i<o;i++)a+=e[r][i]*t[i];n.push(a)}return n}function Uq(e){const t=[e.r/255,e.g/255,e.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),n=Vq(Ohe,t);return{x:100*n[0],y:100*n[1],z:100*n[2]}}function ER(e){const t=Vq(Ahe,[e.x/100,e.y/100,e.z/100]).map(n=>{const r=n<=.0031308?12.92*n:1.055*n**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function Gq(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(n=>n>.008856451679035631?n**.3333333333333333:7.787037037037035*n+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function Bq(e){const t=e.l,n=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*n[0],y:100*n[1],z:108.883*n[2]}}function khe(e){const t=e.l,n=e.a,r=e.b,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s=s>0?s:s+2*Math.PI,{l:t,c:i,h:s}}function Rhe(e){const t=e.l,n=e.c,r=e.h;return{l:t,a:n*Math.cos(r),b:n*Math.sin(r)}}function Lhe(e){return Gq(Uq(e))}function Nhe(e){return ER(Bq(e))}function Dhe(e){return khe(Gq(Uq(e)))}function Fhe(e){return ER(Bq(Rhe(e)))}function jhe(e){const t=e.r,n=e.g,r=e.b,i=Math.max(t,n,r),s=i-Math.min(t,n,r);let o=i,a=s===0?0:i===t?(n-r)/s%6:i===n?(r-t)/s+2:(t-n)/s+4,h=s===0?0:s/o;return a<0&&(a+=6),a*=60,h*=100,o*=100/255,{h:a,s:h,v:o}}function zhe(e){const t=(e.h+360)%360/60,n=e.s/100,r=e.v/100*255,i=r*n,s=i*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:i,g:s,b:0};break;case 1:o={r:s,g:i,b:0};break;case 2:o={r:0,g:i,b:s};break;case 3:o={r:0,g:s,b:i};break;case 4:o={r:s,g:0,b:i};break;case 5:case 6:o={r:i,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-i),o.g=Math.round(o.g+r-i),o.b=Math.round(o.b+r-i),o}function $R(e){return Dq(e)?e:zq(e)?Fhe(e):jq(e)?Nhe(e):Che(e)?ER(e):Fq(e)?zhe(e):e}function rCe(e){return Fq(e)?e:jhe($R(e))}function iCe(e){return jq(e)?e:Lhe($R(e))}function sCe(e){return zq(e)?e:Dhe($R(e))}function Vhe(e,t){const{r:n,g:r,b:i}=e;return .2126*n+.7152*r+.0722*i}var DC;function oCe(e,t=DC.High){return Vhe(e)>t?new Ze([0,0,0,e.a]):new Ze([255,255,255,e.a])}function aCe(e,t,n={}){if(e.length===0||t<=0)return[];if((e=e.map(r=>typeof r=="string"?new Ze(r):r)).length===1||t===1){const r=[],i=e[0];for(let s=0;s<t;s++)r.push(i.clone());return r}if(n.shuffle&&(e=Qz(q(e),n.seed)),e.length>=t){const r=[],i=(e.length-1)/(t-1);for(let s=0;s<t;s++){const o=Math.round(s*i);r.push(e[o].clone())}return r}return Uhe(e,t,n)}function Uhe(e,t,n={}){const r=[],i=e.length-1,s=Math.ceil((t-e.length)/i);e:for(let o=0;o<i;o++){const a=e[o],h=e[o+1];for(let f=1;f<=s;f++){const _=f/(s+1);if(r.push(Ghe(a,h,_,n)),r.length+e.length===t)break e}}return[...e.map(o=>o.clone()),...Qz(r,n.seed??1)]}(function(e){e[e.Low=160]="Low",e[e.High=225]="High"})(DC||(DC={}));const VM=(e,t)=>{const n=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+n))};function Ghe(e,t,n,r={}){const i=e.r,s=e.g,o=e.b,a=t.r,h=t.g,f=t.b,_=Math.round(i+(a-i)*n),w=Math.round(s+(h-s)*n),b=Math.round(o+(f-o)*n);if(!r.offset)return new Ze([_,w,b]);const T=Xz(r.seed);return new Ze([VM(_,T),VM(w,T),VM(b,T)])}var W5,Z5,J5,Y5,K5,X5,Q5,e4,t4,n4,FC,jC,r4,i4,s4,o4,a4,l4,u4,c4,d4,h4,p4,f4,m4,y4,g4,_4,w4,v4,b4,S4,T4,x4,E4,$4,M4,I4,P4,C4,O4,A4,k4,R4,L4,N4,D4,F4,j4,z4,V4,U4,G4,B4,q4,H4,W4,Z4,J4,Y4,K4,X4;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(W5||(W5={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(Z5||(Z5={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(J5||(J5={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(Y5||(Y5={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(K5||(K5={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(X5||(X5={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(Q5||(Q5={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(e4||(e4={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(t4||(t4={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(n4||(n4={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(FC||(FC={})),function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"}(jC||(jC={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(r4||(r4={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(i4||(i4={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(s4||(s4={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(o4||(o4={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(a4||(a4={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(l4||(l4={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(u4||(u4={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(c4||(c4={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(d4||(d4={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(h4||(h4={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(p4||(p4={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(f4||(f4={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(m4||(m4={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(y4||(y4={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(g4||(g4={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(_4||(_4={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(w4||(w4={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(v4||(v4={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(b4||(b4={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(S4||(S4={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(T4||(T4={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(x4||(x4={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(E4||(E4={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}($4||($4={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(M4||(M4={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(I4||(I4={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(P4||(P4={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(C4||(C4={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(O4||(O4={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(A4||(A4={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(k4||(k4={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(R4||(R4={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(L4||(L4={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(N4||(N4={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(D4||(D4={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(F4||(F4={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(j4||(j4={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(z4||(z4={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(V4||(V4={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(U4||(U4={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(G4||(G4={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(B4||(B4={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(q4||(q4={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(H4||(H4={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(W4||(W4={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(Z4||(Z4={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(J4||(J4={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(Y4||(Y4={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(K4||(K4={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(X4||(X4={}));const Bhe={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},zC={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:FC.Loop,repeatdelay:0,easing:jC.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}};function lCe(e){return[e.r,e.g,e.b,e.a]}const qhe=` /-,
`;function Q4(e){let t=e.length;for(;t--;)if(!qhe.includes(e.charAt(t)))return!1;return!0}function Hhe(e,t){const n=[];let r=0,i=-1;do if(i=e.indexOf("[",r),i>=r){if(i>r){const s=e.slice(r,i);n.push([s,null,Q4(s)])}if(r=i+1,i=e.indexOf("]",r),i>=r){if(i>r){const s=t[e.slice(r,i)];s&&n.push([null,s,!1])}r=i+1}}while(i!==-1);if(r<e.length){const s=e.slice(r);n.push([s,null,Q4(s)])}return n}function Whe(e,t,n,r){let i="",s=null;for(const o of t){const[a,h,f]=o;if(a)f?s=a:(s&&(i+=s,s=null),i+=a);else{let _=h;n!=null&&(_=qq(h,n));const w=e.attributes[_];w&&(s&&(i+=s,s=null),i+=w)}}return Zhe(i,r)}function Zhe(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function uCe(e,t,n,r,i,s,o=!0){const a=t/i,h=n/s,f=Math.ceil(a/2),_=Math.ceil(h/2);for(let w=0;w<s;w++)for(let b=0;b<i;b++){const T=4*(b+(o?s-w-1:w)*i);let M=0,I=0,C=0,N=0,j=0,z=0,U=0;const K=(w+.5)*h;for(let J=Math.floor(w*h);J<(w+1)*h;J++){const le=Math.abs(K-(J+.5))/_,ue=(b+.5)*a,be=le*le;for(let xe=Math.floor(b*a);xe<(b+1)*a;xe++){let _e=Math.abs(ue-(xe+.5))/f;const $e=Math.sqrt(be+_e*_e);$e>=-1&&$e<=1&&(M=2*$e*$e*$e-3*$e*$e+1,M>0&&(_e=4*(xe+J*t),U+=M*e[_e+3],C+=M,e[_e+3]<255&&(M=M*e[_e+3]/250),N+=M*e[_e],j+=M*e[_e+1],z+=M*e[_e+2],I+=M))}}r[T]=N/I,r[T+1]=j/I,r[T+2]=z/I,r[T+3]=U/C}}function Jhe(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function cCe(e){var t;return((t=e.data)==null?void 0:t.symbol)??null}function dCe(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function hCe(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function pCe(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function Yhe(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const fCe=(e,t=0)=>e==null||isNaN(e)?t:e,mCe=(e,t)=>e??t,yCe=(e,t)=>e??t,gCe=e=>e.tintColor?Jhe(e.tintColor):[255,255,255,1],_Ce=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function wCe(){return pe(()=>import("./geometryEngineJSON-RNRrFqly.js").then(e=>e.g),__vite__mapDeps([33,14,3,34]))}function vCe(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function bCe(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function SCe(e){let t="normal",n="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?n="bold":r.includes("light")&&(n="lighter")}return{style:t,weight:n}}function TCe(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function ej(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const n=ej(t);if(n!=null)return n}break;case"CIMTextSymbol":return ej(e.symbol);case"CIMSolidFill":return e.color}return null}function tj(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const n of t){const r=tj(n);if(r!=null)return r}break}case"CIMTextSymbol":return tj(e.symbol);case"CIMSolidStroke":return e.color}}function nj(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const n=nj(t);if(n!==void 0)return n}break;case"CIMTextSymbol":return nj(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function xCe(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function ECe(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function Khe(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const $Ce=e=>e.includes("data:image/svg+xml");function cE(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function MCe(e,t,n,r,i,s,o=!0){const{infos:a}=s;let h=1,f=0,_=0,w=0,b=1;for(const{absoluteAnchorPoint:I,offsetX:C,offsetY:N,rotation:j,size:z,frameHeight:U,rotateClockWise:K,scaleSymbolsProportionally:J}of a)b=I?1:h,_=sj(C,N,f,b,_),w=ij(C,N,f,b,w),U&&(J||o)&&(h*=z/U),f=oj(j,K,f);const T=sj(r,i,f,b,_),M=ij(r,i,f,b,w);return{size:e*h,rotation:oj(t,n,f),offsetX:T,offsetY:M}}function Xhe(e){if(e==null)return!1;if(Array.isArray(e))return e.every(t=>Xhe(t));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function Qhe(e,t){if(t==="color"||t==="outlinecolor"||t==="backgroundcolor"||t==="borderlinecolor"||t==="tintcolor")return[...Bhe[t]];const n=zC[e];if(!n)throw new Error(`InternalError: default value for type ${e}.`);return n[t]}function epe(e){return e.split(" ").map(t=>Number(t))}function tpe(e){return typeof e=="string"?epe(e):e}function npe(e){return e!=null&&e.dashTemplate&&(e.dashTemplate=tpe(e.dashTemplate)),e}function VC(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const n of t)if(n.type==="CIMVectorMarker")return VC(n)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const n of t)if(n.symbol)return VC(n.symbol)}}return"Normal"}function ICe(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(const n of e.symbolLayers)if(n)switch(n.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=n.size??zC.CIMVectorMarker.size;r>t&&(t=r);break}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(const n of e.symbolLayers)if(n)switch(n.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=n.width;r!=null&&r>t&&(t=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(n.markerPlacement&&Yhe(n.markerPlacement)){const r=n.size??zC.CIMVectorMarker.size;r>t&&(t=r)}break;case"CIMPictureFill":{const r=n.height;r!=null&&r>t&&(t=r)}}}return t}}}function qq(e,t){if(t!==null){const n=t.get(e);return n?n.name:e}return e}function rpe(e){return e.map(t=>({...t,propertyName:cE(t.propertyName)}))}function rj(e){const t={};for(const n in e){const r=e[n];t[cE(n)]=r}return t}function ij(e,t,n,r,i){const s=n*Math.PI/180;if(s){const o=Math.cos(s);return(Math.sin(s)*e+o*t)*r+i}return t*r+i}function sj(e,t,n,r,i){const s=n*Math.PI/180;return s?(Math.cos(s)*e-Math.sin(s)*t)*r+i:e*r+i}function oj(e,t,n){return t?n-e:n+e}function PCe(e,t,n){const r=n==="Color"||n==="TintColor"||n==="ToColor",i=n==="Rotation"||n==="Angle"||n==="ToRotation";let s=t[cE(n)];if(s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:i&&(s*=Math.PI/180)),s==null&&(s=Qhe(t.type,n.toLowerCase()),s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]]:i&&(s*=Math.PI/180))),t.primitiveName!=null){const o=e[t.primitiveName];if(o!=null){const a=o[n];a==null||(typeof a=="string"||typeof a=="number"||Array.isArray(a)?(s=a,s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:i&&(s*=Math.PI/180))):(s={valueExpressionInfo:a,defaultValue:s},s!=null&&(r?s={type:"Process",op:"ArcadeColor",value:s}:i&&(s={type:"Process",op:"Divide",left:s,right:180/Math.PI}))))}}if(s==null)throw new Error(`Failed to derive a value or an expression for "${n}".`);return s}function CCe(e){return e?{originPosition:e.originPosition==="upper-left"?"upperLeft":e.originPosition==="lower-left"?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:e.extent!=null?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function ipe(e){return e.originPosition==="lowerLeft"&&e.scale.length===4&&e.translate.length===4}function H0(e){if(ipe(e))return e;const{originPosition:t,scale:n,translate:r}=e,i=n[0]??1,s=n[1]??1;return{originPosition:"lowerLeft",scale:[i,t==="lowerLeft"?s:-s,n[2]??1,n[3]??1],translate:[r[0]??0,r[1]??0,r[2]??0,r[3]??0]}}function spe({scale:e,translate:t},n){return Math.round((n-t[0])/e[0])}function ope({scale:e,translate:t},n){return Math.round((n-t[1])/e[1])}function ape({scale:e,translate:t},n){return Math.round(((n??0)-t[2])/e[2])}function lpe({scale:e,translate:t},n){return n?Math.round((n-t[3])/e[3]):0}function W0({scale:e,translate:t},n){return n*e[0]+t[0]}function Z0({scale:e,translate:t},n){return n*e[1]+t[1]}function u0({scale:e,translate:t},n){return(n??0)*e[2]+t[2]}function c0({scale:e,translate:t},n){return n?n*e[3]+t[3]:0}function MR(e,t){return e&&t?hpe:e&&!t?cpe:!e&&t?dpe:upe}const upe=(e,t)=>{const n=new Array(t.length);if(!t.length)return n;const r=t[0];let i=W0(e,r[0]),s=Z0(e,r[1]);n[0]=[i,s];const{scale:o,originPosition:a}=e,h=o[0],f=a==="lowerLeft"?o[1]:-o[1];for(let _=1;_<t.length;_++){const[w,b]=t[_];i+=h*w,s+=f*b,n[_]=[i,s]}return n},cpe=(e,t)=>{const n=new Array(t.length);if(!t.length)return n;const r=t[0];let i=W0(e,r[0]),s=Z0(e,r[1]);n[0]=[i,s,u0(e,r[2])];const{scale:o,originPosition:a}=e,h=o[0],f=a==="lowerLeft"?o[1]:-o[1];for(let _=1;_<t.length;_++){const[w,b,T]=t[_];i+=h*w,s+=f*b,n[_]=[i,s,u0(e,T)]}return n},dpe=(e,t)=>{const n=new Array(t.length);if(!t.length)return n;const r=t[0];let i=W0(e,r[0]),s=Z0(e,r[1]);n[0]=[i,s,c0(e,r[2])];const{scale:o,originPosition:a}=e,h=o[0],f=a==="lowerLeft"?o[1]:-o[1];for(let _=1;_<t.length;_++){const[w,b,T]=t[_];i+=h*w,s+=f*b,n[_]=[i,s,c0(e,T)]}return n},hpe=(e,t)=>{const n=new Array(t.length);if(!t.length)return n;const r=t[0];let i=W0(e,r[0]),s=Z0(e,r[1]);n[0]=[i,s,u0(e,r[2]),c0(e,r[3])];const{scale:o,originPosition:a}=e,h=o[0],f=a==="lowerLeft"?o[1]:-o[1];for(let _=1;_<t.length;_++){const[w,b,T,M]=t[_];i+=h*w,s+=f*b,n[_]=[i,s,u0(e,T),c0(e,M)]}return n};function Hq(e,t,n){const r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=t(e,n[i]);return r}function OCe(e,t,n){const r=H0(e);return t.x=spe(r,n.x),t.y=ope(r,n.y),n.z!=null&&(t.z=ape(r,n.z)),n.m!=null&&(t.m=lpe(r,n.m)),t}function ppe(e,t,n,r=(n==null?void 0:n.hasZ)??!1,i=(n==null?void 0:n.hasM)??!1){if(n!=null){const s=H0(e);t.points=MR(r,i)(s,n.points),t.hasZ=r,t.hasM=i}return t}function fpe(e,t,n,r=(n==null?void 0:n.z)!=null,i=(n==null?void 0:n.m)!=null){if(n==null)return t;const s=H0(e);return t.x=W0(s,n.x),t.y=Z0(s,n.y),r&&(t.z=u0(s,n.z)),i&&(t.m=c0(s,n.m)),t}function mpe(e,t,n,r=(n==null?void 0:n.hasZ)??!1,i=(n==null?void 0:n.hasM)??!1){if(n!=null){const s=H0(e);t.rings=Hq(s,MR(r,i),n.rings),t.hasZ=r,t.hasM=i}return t}function ype(e,t,n,r=(n==null?void 0:n.hasZ)??!1,i=(n==null?void 0:n.hasM)??!1){if(n!=null){const s=H0(e);t.paths=Hq(s,MR(r,i),n.paths),t.hasZ=r,t.hasM=i}return t}function gpe(e,t,n,r,i){if(e==null)return null;const s=e.referencesGeometry()&&i?_pe(t,r,i):t,o=e.repurposeFeature(s);try{return e.evaluate({...n,$feature:o},e.services)}catch(a){return fe.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",a),null}}const UM=new Map;function _pe(e,t,n){const{transform:r,hasZ:i,hasM:s}=n;UM.has(t)||UM.set(t,wpe(t));const o=UM.get(t)(e.geometry,r,i,s);return{...e,geometry:o}}function wpe(e){const t={};switch(e){case"esriGeometryPoint":return(n,r,i,s)=>fpe(r,t,n,i,s);case"esriGeometryPolygon":return(n,r,i,s)=>mpe(r,t,n,i,s);case"esriGeometryPolyline":return(n,r,i,s)=>ype(r,t,n,i,s);case"esriGeometryMultipoint":return(n,r,i,s)=>ppe(r,t,n,i,s);default:return fe.getLogger("esri.views.2d.support.arcadeOnDemand").error(new Y("mapview-arcade",`Unable to handle geometryType: ${e}`)),n=>n}}const vpe=e=>{if(!e)return[0,0,0,0];const{r:t,g:n,b:r,a:i}=e;return[t,n,r,255*i]};let Wq=class bn{static findApplicableOverrides(t,n,r){if(t&&n){if(t.primitiveName){let i=!1;for(const s of r)if(s.primitiveName===t.primitiveName){i=!0;break}if(!i)for(const s of n)s.primitiveName===t.primitiveName&&r.push(s)}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const i of t.effects)bn.findApplicableOverrides(i,n,r);if(t.symbolLayers)for(const i of t.symbolLayers)bn.findApplicableOverrides(i,n,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(t.effects)for(const i of t.effects)bn.findApplicableOverrides(i,n,r);if(t.markerPlacement&&bn.findApplicableOverrides(t.markerPlacement,n,r),t.type==="CIMVectorMarker"){if(t.markerGraphics)for(const i of t.markerGraphics)bn.findApplicableOverrides(i,n,r),bn.findApplicableOverrides(i.symbol,n,r)}else t.type==="CIMCharacterMarker"?bn.findApplicableOverrides(t.symbol,n,r):t.type==="CIMHatchFill"?bn.findApplicableOverrides(t.lineSymbol,n,r):t.type==="CIMPictureMarker"&&bn.findApplicableOverrides(t.animatedSymbolProperties,n,r)}}}static findEffectOverrides(t,n){if(!t)return null;if(t.type==="CIMGeometricEffectDashes"&&npe(t),!n||!t.primitiveName)return{type:"cim-effect-param",effect:t,overrides:[]};const r=rj(t),i=t.primitiveName,s=[];for(const o of n)o.primitiveName===i&&s.push(rj(o));return{type:"cim-effect-param",effect:r,overrides:rpe(s)}}static async resolveSymbolOverrides(t,n,r,i,s,o,a){if(!(t!=null&&t.symbol))return null;let{symbol:h,primitiveOverrides:f}=t;const _=!!f;if(!_&&!i)return h;h=q(h),f=q(f);let w=!0;if(n||(n={attributes:{}},w=!1),_){if(w||(f=f.filter(b=>{var T;return!((T=b.valueExpressionInfo)!=null&&T.expression.includes("$feature"))})),a||(f=f.filter(b=>{var T;return!((T=b.valueExpressionInfo)!=null&&T.expression.includes("$view"))})),f.length>0){const b={spatialReference:r,fields:Khe(n.attributes),geometryType:s};await bn.createRenderExpressions(f,b),bn.evaluateOverrides(f,n,s??"esriGeometryPoint",o,a)}bn.applyOverrides(h,f)}return i&&bn.applyDictionaryTextOverrides(h,n,i,null),h}static async createRenderExpressions(t,n){const r=[];for(const i of t){const s=i.valueExpressionInfo;if(!s||bn._expressionToRenderExpression.has(s.expression))continue;const o=Yle(s.expression,n.spatialReference,n.fields);r.push(o),o.then(a=>bn._expressionToRenderExpression.set(s.expression,a))}r.length>0&&await Promise.all(r)}static evaluateOverrides(t,n,r,i,s){const o={$view:{scale:s==null?void 0:s.scale}};for(const a of t){a.value&&typeof a.value=="object"&&Dq(a.value)&&(a.propertyName==="Color"||a.propertyName==="StrokeColor")&&(a.value=vpe(a.value));const h=a.valueExpressionInfo;if(!h)continue;const f=bn._expressionToRenderExpression.get(h.expression);f&&(a.value=gpe(f,n,o,r,i))}}static applyDictionaryTextOverrides(t,n,r,i,s="Normal"){if(t!=null&&t.type)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=t.symbolLayers;if(!o)return;for(const a of o)a&&a.type==="CIMVectorMarker"&&bn.applyDictionaryTextOverrides(a,n,r,i,t.type==="CIMTextSymbol"?t.textCase:s)}break;case"CIMVectorMarker":{const o=t.markerGraphics;if(!o)return;for(const a of o)a&&bn.applyDictionaryTextOverrides(a,n,r,i)}break;case"CIMMarkerGraphic":{const o=t.textString;if(o&&o.includes("[")){const a=Hhe(o,r);t.textString=Whe(n,a,i,s)}}}}static applyOverrides(t,n,r,i){if(t.primitiveName){for(const s of n)if(s.primitiveName===t.primitiveName){const o=cE(s.propertyName);if(i&&i.push({cim:t,nocapPropertyName:o,value:t[o]}),r){let a=!1;for(const h of r)h.primitiveName===t.primitiveName&&(a=!0);a||r.push(s)}s.value!=null&&(t[o]=s.value)}}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const s of t.effects)bn.applyOverrides(s,n,r,i);if(t.symbolLayers)for(const s of t.symbolLayers)bn.applyOverrides(s,n,r,i);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(t.effects)for(const s of t.effects)bn.applyOverrides(s,n,r,i);if(t.type==="CIMVectorMarker"&&t.markerGraphics)for(const s of t.markerGraphics)bn.applyOverrides(s,n,r,i),bn.applyOverrides(s.symbol,n,r,i)}}static restoreOverrides(t){for(const n of t)n.cim[n.nocapPropertyName]=n.value}static buildOverrideKey(t){let n="";for(const r of t)r.value!==void 0&&(n+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return n}static toValue(t,n){if(t==="DashTemplate")return n.split(" ").map(r=>Number(r));if(t==="Color"){const r=new Ze(n).toRgba();return r[3]*=255,r}return n}};Wq._expressionToRenderExpression=new Map;const aj="esri.renderers.support.DictionaryLoader",bpe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let Zq=class{constructor(t,n,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new zde(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=t,this.config=n,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,n){var w;let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(n));try{r=await this._dictionaryPromise}catch(b){if(li(b))return this._dictionaryPromise=null,null}const i=(w=this._dictionaryVersion)==null?void 0:w.greaterEqual(4,0),s={};if(this.fieldMap)for(const b of this._symbolFields){const T=qq(this.fieldMap[b],this._fieldIndex);if(T){const M=t.attributes[T];s[b]=i?M:M!=null?""+t.attributes[T]:""}else s[b]=""}let o=null;try{o=r==null?void 0:r(s,n)}catch{return null}if(!o||typeof o!="string"||o==="invalid")return null;const a=o.split(";"),h=[],f=[];for(let b=0;b<a.length;b++){const T=a[b];if(T){if(T.includes("po:")){const M=T.slice(3).split("|");if(M.length===3){const I=M[0],C=M[1];let N=M[2];const j="countrylabel";if(I===j&&C==="TextString"){if(this.fieldMap!=null){let z=this.fieldMap[j];z==null&&(z=j,this.fieldMap[z]=z),t.attributes[z]=N}continue}if(C==="DashTemplate")N=N.split(" ").map(z=>Number(z));else if(C==="Color"){const z=new Ze(N).toRgba();N=[z[0],z[1],z[2],255*z[3]]}else N=Number(N);f.push({primitiveName:I,propertyName:C,value:N,defaultValue:null})}}else if(T.includes("|")){for(const M of T.split("|"))if(this._itemNames.has(M)){h.push(M);break}}else if(this._itemNames.has(T))h.push(T);else if(b===0){h.length=0;let M="Invalid_P";t.geometry!=null&&(ef(t.geometry)?M="Invalid_A":Ak(t.geometry)&&(M="Invalid_L")),h.push(M);break}}}const _=t.geometry==null||!t.geometry.hasZ&&t.geometry.type==="point";return this._cimPartsToCIMSymbol(t,h,f,_,n)}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void fe.getLogger(aj).error("no valid URL!");const n=Lt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:t!=null?t.signal:null}),[{data:r}]=await Promise.all([n,yf()]);if(!r)throw this._dictionaryPromise=null,new Y("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:i,dictionary_version:s,expression:o,itemsNames:a}=r,h=o;let f=!1;s&&(this._dictionaryVersion=XG.parse(s),f=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(a),this._symbolFields=i.symbol;const _={};if(this.config){const T=this.config;for(const M in T)_[M]=T[M]}if(i.configuration)for(const T of i.configuration)_.hasOwnProperty(T.name)||(_[T.name]=T.value);const w=[];if(t!=null&&t.fields&&this.fieldMap)for(const T in this.fieldMap){const M=this.fieldMap[T],I=t.fields.filter(C=>C.name.toLowerCase()===(M==null?void 0:M.toLowerCase()));I.length>0&&w.push({...I[0],type:f?I[0].type:"esriFieldTypeString"})}w.length>0&&(this._fieldIndex=new bq(w));const b=Kle(h,t!=null?t.spatialReference:null,w,_).then(T=>{const M={scale:0};return(I,C)=>{if(T==null)return null;const N=T.repurposeFeature({geometry:null,attributes:I});return M.scale=C!=null?C.scale??void 0:void 0,T.evaluate({$feature:N,$view:M},T.services)}}).catch(T=>(fe.getLogger(aj).error("Creating dictionary expression failed:",T),null));return this._dictionaryPromise=b,b}async _cimPartsToCIMSymbol(t,n,r,i,s){const o=new Array(n.length);for(let f=0;f<n.length;f++)o[f]=this._getSymbolPart(n[f],s);let a=await Promise.all(o);const h=this.fieldMap;if(h){a=q(a);for(const f of a)Wq.applyDictionaryTextOverrides(f,t,h,this._fieldIndex,VC(f))}return new eh({data:Spe(a,r,i)})}async _getSymbolPart(t,n){const r=this._symbolCache.get(t);if(r)return r;if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(o=>o.data);const i=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,t),s=Lt(i,{responseType:"json",query:{f:"json"},...n});this._ongoingRequests.set(t,s),s.finally(()=>this._ongoingRequests.delete(t));try{const o=await s;return this._symbolCache.put(t,o.data),o.data}catch(o){throw o}}};function Spe(e,t,n){if(!e||e.length===0)return null;const r={...e[0]};if(e.length>1){r.effects=null,r.symbolLayers=[];for(const i of e){const s=i;if(s.effects!=null)for(const o of s.symbolLayers)o.effects==null?o.effects=s.effects:o.effects.unshift(...s.effects);r.symbolLayers.unshift(...s.symbolLayers)}}return n&&(r.callout=bpe),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:t}}var UC;let Go=UC=class extends Hg(Uu){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new Zq(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,n,r){r!=null&&r.origin||super.writeVisualVariables(e,t,n,r)}clone(){return new UC({config:q(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:q(this.fieldMap),url:q(this.url),visualVariables:q(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await ai(e,t,this.scaleExpression);for(const n in this.fieldMap){const r=this.fieldMap[n];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,n)=>t+n.getAttributeHash(),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};l([p({type:Zq})],Go.prototype,"_loader",null),l([p({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Go.prototype,"config",void 0),l([p({type:Object,json:{write:!0}})],Go.prototype,"fieldMap",void 0),l([p({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Go.prototype,"scaleExpression",void 0),l([ge("scaleExpression")],Go.prototype,"writeData",null),l([p({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Go.prototype,"scaleExpressionTitle",void 0),l([p({type:String,json:{write:!0}})],Go.prototype,"url",void 0),l([ge("visualVariables")],Go.prototype,"writeVisualVariables",null),Go=UC=l([k("esri.renderers.DictionaryRenderer")],Go);const Tpe=Go;var GC;let su=GC=class extends ne{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(fe.getLogger(this).error(".field: field must be a string value"),null):C0(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var e;return new GC({color:(e=this.color)==null?void 0:e.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([p({type:Ze,json:{type:[Number],write:!0}})],su.prototype,"color",void 0),l([p({type:String,json:{write:!0}})],su.prototype,"field",void 0),l([kt("field")],su.prototype,"castField",null),l([p({type:String,json:{write:!0}})],su.prototype,"label",void 0),l([p({type:String,json:{write:!0}})],su.prototype,"valueExpression",void 0),l([p({type:String,json:{write:!0}})],su.prototype,"valueExpressionTitle",void 0),su=GC=l([k("esri.renderers.support.AttributeColorInfo")],su);const Jq=su;var BC;let y2=BC=class extends ne{constructor(){super(...arguments),this.unit=null}clone(){return new BC({unit:this.unit})}};l([p({type:String,json:{write:!0}})],y2.prototype,"unit",void 0),y2=BC=l([k("esri.renderers.support.DotDensityLegendOptions")],y2);const xpe=y2;var qC;let Fi=qC=class extends Hg(Uu){constructor(e){super(e),this.attributes=null,this.backgroundColor=new Ze([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Ms,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new If({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var e;return((e=this.attributes)==null?void 0:e.reduce((t,n)=>t+n.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new qC({attributes:q(this.attributes),backgroundColor:q(this.backgroundColor),dotBlendingEnabled:q(this.dotBlendingEnabled),dotShape:q(this.dotShape),dotSize:q(this.dotSize),dotValue:q(this.dotValue),legendOptions:q(this.legendOptions),outline:q(this.outline),referenceScale:q(this.referenceScale),seed:q(this.seed),visualVariables:q(this.visualVariables),authoringInfo:q(this.authoringInfo)})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(n=>n.field||n.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const n of this.attributes??[])n.valueExpression&&await ai(e,t,n.valueExpression),n.field&&e.add(n.field)}};l([p({type:[Jq],json:{write:!0}})],Fi.prototype,"attributes",void 0),l([p({type:Ze,json:{write:!0}})],Fi.prototype,"backgroundColor",void 0),l([p({type:Boolean,json:{write:!0}})],Fi.prototype,"dotBlendingEnabled",void 0),l([p({type:String,json:{write:!1}})],Fi.prototype,"dotShape",void 0),l([p({type:Number,json:{write:!0}})],Fi.prototype,"dotSize",void 0),l([p({type:xpe,json:{write:!0}})],Fi.prototype,"legendOptions",void 0),l([p({type:Ms,json:{default:null,write:!0}})],Fi.prototype,"outline",void 0),l([p({type:Number,json:{write:!0}})],Fi.prototype,"dotValue",void 0),l([p({type:Number,json:{write:!0}})],Fi.prototype,"referenceScale",void 0),l([p({type:Number,json:{write:!0}})],Fi.prototype,"seed",void 0),l([ke({dotDensity:"dot-density"})],Fi.prototype,"type",void 0),Fi=qC=l([k("esri.renderers.DotDensityRenderer")],Fi);const Epe=Fi;var HC;let Bw=HC=class extends ne{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new HC({color:this.color&&this.color.clone(),ratio:this.ratio})}};l([p({type:Ze,json:{type:[Mt],default:null,write:!0}})],Bw.prototype,"color",void 0),l([p({type:Number,json:{write:!0}})],Bw.prototype,"ratio",void 0),Bw=HC=l([k("esri.renderers.support.HeatmapColorStop")],Bw);const g2=Bw;let ay=class extends vt(ne){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};l([p({type:String,json:{write:!0}})],ay.prototype,"minLabel",void 0),l([p({type:String,json:{write:!0}})],ay.prototype,"maxLabel",void 0),l([p({type:String,json:{write:!0}})],ay.prototype,"title",void 0),ay=l([k("esri.renderers.support.HeatmapLegendOptions")],ay);const IR=2.4;function $pe(e){return fo(e*IR)}function Mpe(e){return Hne(e)/IR}function Ipe(e,t,n,r){let{color:i,ratio:s}=t,{color:o,ratio:a}=n;a===s&&(a===1?s-=1e-6:a+=1e-6);const h=po((r-s)/(a-s),0,1);Cq(e,i.toArray(),o.toArray(),h)}function RCe(e){const n=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:a})=>a>=0&&a<=1).sort((a,h)=>a.ratio-h.ratio).map(({color:a,ratio:h})=>({color:a,ratio:Math.max(h,.001)})),e.length<1)return n;let r=e[0],i=e[0],s=1;const o=uE();for(let a=0;a<512;a++){const h=(a+.5)/512;for(;h>i.ratio&&s<e.length;)r=i,i=e[s++];Ipe(o,r,i,h),n.set(o,4*a)}return n}function LCe(e,t,n){const r=Math.sqrt(e**2+t**2)/n;return r>1?0:3/(Math.PI*n**2)*(1-r**2)**2}function NCe(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var WC;function lj(e){if(e!=null){const{maxDensity:t,minDensity:n,radius:r}=e;if(t!=null||n!=null||r!=null){const{blurRadius:i,maxPixelIntensity:s,minPixelIntensity:o,...a}=e;return a}}return e}let wr=WC=class extends Uu{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new g2({ratio:0,color:new Ze("rgba(255, 140, 0, 0)")}),new g2({ratio:.75,color:new Ze("rgba(255, 140, 0, 1)")}),new g2({ratio:.9,color:new Ze("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return lj(e)}get blurRadius(){return Mpe(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,n=this.minPixelIntensity;this._set("radius",$pe(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",n*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(IR**2*this.blurRadius**4)}read(e,t){e=lj(e),super.read(e,t)}getSymbol(){return new vl}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const n=this.field,r=this.valueExpression;n&&typeof n=="string"&&Ti(e,t,n),r&&typeof r=="string"&&await ai(e,t,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new WC({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:q(this.colorStops),field:this.field,legendOptions:q(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([p({type:gR,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],wr.prototype,"authoringInfo",void 0),l([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],wr.prototype,"blurRadius",null),l([p({type:[g2],json:{write:!0}})],wr.prototype,"colorStops",void 0),l([p({type:String,json:{write:!0}})],wr.prototype,"field",void 0),l([p({type:ay,json:{write:!0}})],wr.prototype,"legendOptions",void 0),l([p({type:Number,json:{write:!0}})],wr.prototype,"maxDensity",void 0),l([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],wr.prototype,"maxPixelIntensity",null),l([p({type:Number,json:{write:!0}})],wr.prototype,"minDensity",void 0),l([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],wr.prototype,"minPixelIntensity",null),l([p({type:Number,cast:At,json:{write:!0}})],wr.prototype,"radius",void 0),l([p({type:Number,range:{min:0},json:{default:0,write:!0}})],wr.prototype,"referenceScale",void 0),l([ke({heatmap:"heatmap"})],wr.prototype,"type",void 0),l([p({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],wr.prototype,"valueExpression",void 0),l([p({type:String})],wr.prototype,"valueExpressionTitle",void 0),l([p({readOnly:!0})],wr.prototype,"_pixelIntensityToDensity",null),wr=WC=l([k("esri.renderers.HeatmapRenderer")],wr);const Yq=wr;let Gp=class extends vt(ne){constructor(){super(...arguments),this.color=new Ze([0,0,0,0]),this.label=null,this.threshold=0}};l([p({type:Ze,json:{write:!0}})],Gp.prototype,"color",void 0),l([p({type:String,json:{write:!0}})],Gp.prototype,"label",void 0),l([p({type:Number,range:{min:0,max:1},json:{write:!0}})],Gp.prototype,"threshold",void 0),Gp=l([k("esri.renderers.support.OthersCategory")],Gp);const Ppe={base:qg,key:"type",typeMap:{size:oE,opacity:_R}};let ji=class extends Hg(vt(Uu)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Ze([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Gp,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var t;return new vl({size:this.size?this.size/2+(((t=this.outline)==null?void 0:t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Dd)}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((n,r)=>n+r.getAttributeHash(),""))??""}getMeshHash(){return this.getSymbols().reduce((t,n)=>t+JSON.stringify(n),"")}async collectRequiredFields(t,n){await this.collectVVRequiredFields(t,n);for(const r of this.attributes)r.valueExpression&&await ai(t,n,r.valueExpression),r.field&&t.add(r.field)}};l([p({type:[Jq],json:{write:!0}})],ji.prototype,"attributes",void 0),l([p(TR)],ji.prototype,"backgroundFillSymbol",void 0),l([p({type:Ze,json:{write:!0}})],ji.prototype,"defaultColor",void 0),l([p({type:String,json:{write:!0}})],ji.prototype,"defaultLabel",void 0),l([p({type:Number,range:{min:0,max:1},json:{write:!0}})],ji.prototype,"holePercentage",void 0),l([p({type:Gp,json:{write:!0}})],ji.prototype,"othersCategory",void 0),l([p({type:xR,json:{write:!0}})],ji.prototype,"legendOptions",void 0),l([p({type:Ms,json:{default:null,write:!0}})],ji.prototype,"outline",void 0),l([p({type:Number,cast:At,json:{write:!0}})],ji.prototype,"size",void 0),l([ke({pieChart:"pie-chart"})],ji.prototype,"type",void 0),l([p({types:[Ppe]})],ji.prototype,"visualVariables",void 0),ji=l([k("esri.renderers.PieChartRenderer")],ji);const Cpe=ji;var ZC;let Tp=ZC=class extends Hg(Uu){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(n=>n.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,n)=>t+n.getAttributeHash(),""))??""}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new ZC({description:this.description,label:this.label,symbol:q(this.symbol),visualVariables:q(this.visualVariables),authoringInfo:q(this.authoringInfo)})}};l([p({type:String,json:{write:!0}})],Tp.prototype,"description",void 0),l([p({type:String,json:{write:!0}})],Tp.prototype,"label",void 0),l([p(SR)],Tp.prototype,"symbol",void 0),l([ke({simple:"simple"})],Tp.prototype,"type",void 0),Tp=ZC=l([k("esri.renderers.SimpleRenderer")],Tp);const Zg=Tp,Ope=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function JC(e){return e instanceof Fe}function uj(e){return e instanceof Ae?Object.keys(e.items):JC(e)?Yi(e).keys():e?Object.keys(e):[]}function Nb(e,t){return e instanceof Ae?e.items[t]:e[t]}function Ape(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function Lv(e){return e?e.declaredClass:null}function Kq(e,t){var w;const n=e.diff;if(n&&typeof n=="function")return n(e,t);const r=uj(e),i=uj(t);if(r.length===0&&i.length===0)return;if(!r.length||!i.length||Ape(e,t))return{type:"complete",oldValue:e,newValue:t};const s=i.filter(b=>!r.includes(b)),o=r.filter(b=>!i.includes(b)),a=r.filter(b=>i.includes(b)&&Nb(e,b)!==Nb(t,b)).concat(s,o).sort(),h=Lv(e);if(h&&Ope.has(h)&&a.length)return{type:"complete",oldValue:e,newValue:t};let f;const _=JC(e)&&JC(t);for(const b of a){const T=Nb(e,b),M=Nb(t,b);let I;if((_||typeof T!="function"&&typeof M!="function")&&T!==M&&(T!=null||M!=null)){if(n&&n[b]&&typeof n[b]=="function")I=(w=n[b])==null?void 0:w.call(n,T,M);else if(T instanceof Date&&M instanceof Date){if(T.getTime()===M.getTime())continue;I={type:"complete",oldValue:T,newValue:M}}else I=typeof T=="object"&&typeof M=="object"&&Lv(T)===Lv(M)?Kq(T,M):{type:"complete",oldValue:T,newValue:M};I!=null&&(f!=null?f.diff[b]=I:f={type:"partial",diff:{[b]:I}})}}return f}function jCe(e,t){return kpe(e,t)}function kpe(e,t){if(e==null)return!1;const n=t.split(".");let r=e;for(const i of n){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const s=r.diff[i];if(!s)return!1;r=s}}return!0}function zCe(e,t){if(!e)return!1;if(e.type==="partial"){const n=Object.keys(e.diff);return n.length===1&&n[0]===t}return!1}function Rpe(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&Lv(e)!==Lv(t)?{type:"complete",oldValue:e,newValue:t}:Kq(e,t)}let ly=class extends vt(ne){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};l([p(h2)],ly.prototype,"value",void 0),l([p(h2)],ly.prototype,"value2",void 0),l([p(h2)],ly.prototype,"value3",void 0),ly=l([k("esri.renderers.support.UniqueValue")],ly);const lg=ly;let Xc=class extends vt(ne){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const n=typeof(t=Array.isArray(t)?t:[t])[0];return n==="string"||n==="number"?t.map(r=>new lg({value:r})):n==="object"?t[0]instanceof lg?t:t.map(r=>new lg(r)):null}};l([p({type:String,json:{write:!0}})],Xc.prototype,"description",void 0),l([p({type:String,json:{write:!0}})],Xc.prototype,"label",void 0),l([p(aE)],Xc.prototype,"symbol",void 0),l([p({type:[lg],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new lg({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const n=[];for(const r of e){const i=[r.value,r.value2,r.value3].filter(Dd).map(s=>s.toString());n.push(i)}t.values=n}}}})],Xc.prototype,"values",void 0),l([kt("values")],Xc.prototype,"castValues",null),Xc=l([k("esri.renderers.support.UniqueValueClass")],Xc);const Xq=Xc;let qw=class extends vt(ne){constructor(t){super(t),this.heading=null,this.classes=null}};l([p({type:String,json:{write:!0}})],qw.prototype,"heading",void 0),l([p({type:[Xq],json:{write:!0}})],qw.prototype,"classes",void 0),qw=l([k("esri.renderers.support.UniqueValueGroup")],qw);const YC=qw;var KC;let xp=KC=class extends ne{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new KC({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var t;const e=JSON.stringify((t=this.symbol)==null?void 0:t.toJSON());return`${this.value}.${e}`}};l([p({type:String,json:{write:!0}})],xp.prototype,"description",void 0),l([p({type:String,json:{write:!0}})],xp.prototype,"label",void 0),l([p(SR)],xp.prototype,"symbol",void 0),l([p(h2)],xp.prototype,"value",void 0),xp=KC=l([k("esri.renderers.support.UniqueValueInfo")],xp);const Nv=xp,cj=new Map;async function Lpe(e,t){try{return{data:(await jpe(e,t)).data,baseUrl:mee(e),styleUrl:e}}catch(n){return rl(n),null}}function Npe(e,t,n){var h;const r=t.portal!=null?t.portal:oi.getDefault();let i;const s=`${r.url} - ${(h=r.user)==null?void 0:h.username} - ${e}`,o=cj.get(s);if(o)return o;const a=Dpe(e,r,n).then(f=>(i=f,f.fetchData())).then(f=>({data:f,baseUrl:i.itemUrl??"",styleName:e}));return cj.set(s,a),a}function Dpe(e,t,n){return t.load(n).then(()=>{const r=new ta({disableExtraQuery:!0,query:`owner:${dj} AND type:${hj} AND typekeywords:"${e}"`});return t.queryItems(r,n)}).then(({results:r})=>{var o;let i=null;const s=e.toLowerCase();if(r&&Array.isArray(r)){for(const a of r)if(((o=a.typeKeywords)==null?void 0:o.some(f=>f.toLowerCase()===s))&&a.type===hj&&a.owner===dj){i=a;break}}if(!i)throw new Y("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return i.load(n)})}function Fpe(e,t,n){return(e==null?void 0:e.styleUrl)!=null?Lpe(e.styleUrl,n):(e==null?void 0:e.styleName)!=null?Npe(e.styleName,t,n):Promise.reject(new Y("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function BCe(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function qCe(e,t,n=["gltf"]){if(t==="cimRef")return encodeURI(e.cimRef);if(e.formatInfos&&!te("enable-feature:force-wosr"))for(const r of n){const i=e.formatInfos.find(s=>s.type===r);if(i)return i.href}return encodeURI(e.webRef)}function jpe(e,t){const n={responseType:"json",query:{f:"json"},...t};return Lt(sa(e),n)}const dj="esri_en",hj="Style",HCe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Hw;const Qq="esri.renderers.UniqueValueRenderer",Nc=()=>fe.getLogger(Qq),pj="uvInfos-watcher",fj="uvGroups-watcher",zpe=",",Vpe=jn(Nv);function Upe(e){const{field1:t,field2:n,field3:r,fieldDelimiter:i,uniqueValueInfos:s,valueExpression:o}=e,a=!(!t||!n);return[{classes:(s??[]).map(h=>{var N;const{symbol:f,label:_,value:w,description:b}=h,[T,M,I]=a?((N=w==null?void 0:w.toString())==null?void 0:N.split(i||""))||[]:[w],C=[];return(t||o)&&C.push(T),n&&C.push(M),r&&C.push(I),{symbol:f,label:_,values:[C],description:b}})}]}function km(e){return e!=null&&e!==""&&(typeof e!="string"||e.trim()!==""&&e.toLowerCase()!=="<null>")||(e=null),e+""}let yn=Hw=class extends Hg(Uu){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,n){if(!t&&!n)return;if(!t||!n)return{type:"complete",oldValue:t,newValue:n};let r=!1;const i={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<n.length;s++){const o=t.find(a=>a.value===n[s].value);o?Rpe(o,n[s])?(i.changed.push({type:"complete",oldValue:o,newValue:n[s]}),r=!0):i.unchanged.push({oldValue:o,newValue:n[s]}):(i.added.push(n[s]),r=!0)}for(let s=0;s<t.length;s++)n.find(o=>o.value===t[s].value)||(i.removed.push(t[s]),r=!0);return r?i:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:C0(e)}writeField(e,t,n,r){typeof e=="string"?t[n]=e:r!=null&&r.messages?r.messages.push(new Y("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Nc().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,n){return n.portal||oi.getDefault()}readStyleOrigin(e,t,n){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=Lg(t.styleUrl,n);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,n,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=L0(e.styleUrl,r))}set uniqueValueGroups(e){this.styleOrigin?Nc().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?Nc().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var r;if(this.styleOrigin)return void Nc().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let n;n=typeof e=="object"?Vpe(e):new Nv({value:e,symbol:nq(t)}),(r=this.uniqueValueInfos)==null||r.push(n),this._valueInfoMap[km(n.value)]=n,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void Nc().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let n=0;n<t.length;n++){const r=t[n];if(String(r.value)===String(e)){delete this._valueInfoMap[km(e)],t.splice(n,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let n=t;return this.valueExpression&&(t==null?void 0:t.arcade)==null&&(n={...n,arcade:await yf()}),this._getUniqueValueInfo(e,n)}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void Nc().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const n=this._getUniqueValueInfo(e,t);return(n==null?void 0:n.symbol)||this.defaultSymbol}async getSymbolAsync(e,t){let n=t;if(this.valueExpression&&(n==null?void 0:n.arcade)==null){const i=await yf(),{arcadeUtils:s}=i;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),n={...n,arcade:i}}const r=this._getUniqueValueInfo(e,n);return(r==null?void 0:r.symbol)||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,n)=>t+n.getAttributeHash(),""))??""}getMeshHash(){var r;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),n=(r=this.uniqueValueInfos)==null?void 0:r.reduce((i,s)=>i+s.getMeshHash(),"");return`${e}.${t}.${n}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new Hw({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:q(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:q(this.visualVariables),legendOptions:q(this.legendOptions),authoringInfo:q(this.authoringInfo),backgroundFillSymbol:q(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=q(this.uniqueValueInfos),n=q(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(q(this.styleOrigin))),Object.freeze(t),Object.freeze(n)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",n),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const n=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(n)}async collectSymbolFields(e,t){const n=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),ai(e,t,this.valueExpression)];Ti(e,t,this.field),Ti(e,t,this.field2),Ti(e,t,this.field3),await Promise.all(n)}populateFromStyle(){return Fpe(this.styleOrigin,{portal:this.portal}).then(e=>{var n;const t=[];return this._valueInfoMap={},e!=null&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const i=new Pf({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=i,this._isDefaultSymbolDerived=!0);const s=new Nv({value:r.name,symbol:i});t.push(s),this._valueInfoMap[km(r.name)]=s}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((n=this.uniqueValueInfos)!=null&&n.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",zpe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[km(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(pj);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const n of e)t.push(ct(()=>({symbol:n.symbol,value:n.value,label:n.label,description:n.description}),(r,i)=>{r!==i&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,pj)}}_watchUniqueValueGroups(){this.removeHandles(fj);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const n of e){t.push(ct(()=>({classes:n.classes}),(r,i)=>{r!==i&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of n.classes??[])t.push(ct(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(i,s)=>{i!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,fj)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:n,field3:r,fieldDelimiter:i,uniqueValueGroups:s,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!t||!n);for(const h of s)for(const f of h.classes??[]){const{symbol:_,label:w,values:b,description:T}=f;for(const M of b??[]){const{value:I,value2:C,value3:N}=M,j=[I];n&&j.push(C),r&&j.push(N);const z=a?j.join(i||""):j[0]??void 0;e.push(new Nv({symbol:_,label:w,value:z,description:T}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:n,valueExpression:r,fieldDelimiter:i,uniqueValueInfos:s}=this;if(!t&&!r||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!n),a=s.map(f=>{var N;const{symbol:_,label:w,value:b,description:T}=f,[M,I,C]=o?((N=b==null?void 0:b.toString())==null?void 0:N.split(i||""))||[]:[b];return new Xq({symbol:_,label:w,description:T,values:[new lg({value:M,value2:I,value3:C})]})}),h=[new YC({classes:a})];e&&Object.freeze(h),this._set("uniqueValueGroups",h),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:n,scale:r,spatialReference:i,arcade:s,timeZone:o}=t??{};let a=this._cache.compiledFunc;const h=s.arcadeUtils;if(!a){const _=h.createSyntaxTree(this.valueExpression);a=h.createFunction(_),this._cache.compiledFunc=a}const f=h.executeFunction(a,h.createExecContext(e,h.getViewInfo({viewingMode:n,scale:r,spatialReference:i}),o));return this._valueInfoMap[km(f)]}_getUnqiueValueInfoForFields(e){const t=this.field,n=e.attributes;let r;if(this.field2){const i=this.field2,s=this.field3,o=[];t&&o.push(n[t]),i&&o.push(n[i]),s&&o.push(n[s]),r=o.join(this.fieldDelimiter||"")}else t&&(r=n[t]);return this._valueInfoMap[km(r)]}static fromPortalStyle(e,t){const n=new Hw(t==null?void 0:t.properties);n._set("styleOrigin",Object.freeze({styleName:e})),n._set("portal",(t==null?void 0:t.portal)||oi.getDefault());const r=n.populateFromStyle();return r.catch(i=>{Nc().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",i)}),r}static fromStyleUrl(e,t){const n=new Hw(t==null?void 0:t.properties);n._set("styleOrigin",Object.freeze({styleUrl:e}));const r=n.populateFromStyle();return r.catch(i=>{Nc().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",i)}),r}};l([p({readOnly:!0})],yn.prototype,"_cache",null),l([ke({uniqueValue:"unique-value"})],yn.prototype,"type",void 0),l([p(TR)],yn.prototype,"backgroundFillSymbol",void 0),l([p({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],yn.prototype,"field",null),l([kt("field")],yn.prototype,"castField",null),l([ge("field")],yn.prototype,"writeField",null),l([p({type:String,value:null,json:{write:!0}})],yn.prototype,"field2",null),l([p({type:String,value:null,json:{write:!0}})],yn.prototype,"field3",null),l([p({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],yn.prototype,"orderByClassesEnabled",void 0),l([p({type:String,value:null,json:{write:!0}})],yn.prototype,"valueExpression",null),l([p({type:String,json:{write:!0}})],yn.prototype,"valueExpressionTitle",void 0),l([p({type:xR,json:{write:!0}})],yn.prototype,"legendOptions",void 0),l([p({type:String,json:{write:!0}})],yn.prototype,"defaultLabel",void 0),l([p(GA({...aE},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],yn.prototype,"defaultSymbol",null),l([p({type:String,value:null,json:{write:!0}})],yn.prototype,"fieldDelimiter",null),l([p({type:oi,readOnly:!0})],yn.prototype,"portal",void 0),l([de("portal",["styleName"])],yn.prototype,"readPortal",null),l([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],yn.prototype,"styleOrigin",void 0),l([de("styleOrigin",["styleName","styleUrl"])],yn.prototype,"readStyleOrigin",null),l([ge("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],yn.prototype,"writeStyleOrigin",null),l([p({type:[YC],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,n)=>(t.uniqueValueGroups||Upe(t)).map(r=>YC.fromJSON(r,n))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],yn.prototype,"uniqueValueGroups",null),l([p({type:[Nv],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],yn.prototype,"uniqueValueInfos",null),yn=Hw=l([k(Qq)],yn);const PR=yn,dE={key:"type",base:Uu,typeMap:{heatmap:Yq,simple:Zg,"unique-value":PR,"class-breaks":vq,"dot-density":Epe,dictionary:Tpe,"pie-chart":Cpe},errorContext:"renderer"},Gpe={key:"type",base:Uu,typeMap:{simple:Zg,"unique-value":PR,"class-breaks":vq,heatmap:Yq},errorContext:"renderer",validate:Bpe};function Bpe(e){switch(e.type){case"simple":return qpe(e);case"unique-value":return Hpe(e);case"class-breaks":return Wpe(e);case"heatmap":return e}}function qpe(e){if(e.symbol)return e;fe.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function Hpe(e){const t=e.uniqueValueInfos,n=t==null?void 0:t.filter(({symbol:r,label:i},s)=>(r||fe.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${i}) without a symbol from web scene.`),!!r));return(n==null?void 0:n.length)!==(t==null?void 0:t.length)&&(e.uniqueValueInfos=n),e}function Wpe(e){const t=e.classBreakInfos,n=t==null?void 0:t.filter(({symbol:r,label:i},s)=>(r||fe.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${i}) without a symbol from web scene.`),!!r));return(n==null?void 0:n.length)!==(t==null?void 0:t.length)&&(e.classBreakInfos=n),e}function WCe(e,t){return d0(e,null,t)}const Zpe=Ag({types:dE});function d0(e,t,n){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(n!=null&&n.messages&&n.messages.push(new Es("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:n})),null):Zpe(e,t,n):null}const Mr=(e=>e)(["operational-layers","basemap","ground"]);var XC;let Ep=XC=class extends ne{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new XC({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([p({type:String,json:{write:!0}})],Ep.prototype,"expression",void 0),l([p({type:String,json:{write:!0}})],Ep.prototype,"name",void 0),l([p({type:["boolean","date","number","string"],json:{write:!0}})],Ep.prototype,"returnType",void 0),l([p({type:String,json:{write:!0}})],Ep.prototype,"title",void 0),Ep=XC=l([k("esri.form.ExpressionInfo")],Ep);const Jpe=Ep;let $p=class extends ne{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};l([p({type:String,json:{write:!0}})],$p.prototype,"description",void 0),l([p({type:String,json:{write:!0}})],$p.prototype,"label",void 0),l([p()],$p.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],$p.prototype,"visibilityExpression",void 0),$p=l([k("esri.form.elements.Element")],$p);const _f=$p;let _2=class extends vt(ne){constructor(t){super(t),this.type=null}};l([p()],_2.prototype,"type",void 0),_2=l([k("esri.form.elements.inputs.attachments.Input")],_2);const Bd=_2,hE=["any","capture","upload"];let uy=class extends Bd{constructor(t){super(t),this.type="audio",this.inputMethod="any",this.maxDuration=null}};l([p({type:["audio"],readOnly:!0,json:{write:!0}})],uy.prototype,"type",void 0),l([p({type:hE,json:{write:!0}})],uy.prototype,"inputMethod",void 0),l([p({type:Number,json:{write:!0}})],uy.prototype,"maxDuration",void 0),uy=l([k("esri.form.elements.inputs.attachments.AudioInput")],uy);const mj=uy;let Ww=class extends Bd{constructor(t){super(t),this.type="document",this.maxFileSize=null}};l([p({type:["document"],readOnly:!0,json:{write:!0}})],Ww.prototype,"type",void 0),l([p({type:Number,json:{write:!0}})],Ww.prototype,"maxFileSize",void 0),Ww=l([k("esri.form.elements.inputs.attachments.DocumentInput")],Ww);const yj=Ww;let cy=class extends Bd{constructor(t){super(t),this.type="image",this.inputMethod="any",this.maxImageSize=null}};l([p({type:["image"],readOnly:!0,json:{write:!0}})],cy.prototype,"type",void 0),l([p({type:hE,json:{write:!0}})],cy.prototype,"inputMethod",void 0),l([p({type:Number,json:{write:!0}})],cy.prototype,"maxImageSize",void 0),cy=l([k("esri.form.elements.inputs.attachments.ImageInput")],cy);const gj=cy;let Zw=class extends Bd{constructor(t){super(t),this.type="signature",this.inputMethod="any"}};l([p({type:["signature"],readOnly:!0,json:{write:!0}})],Zw.prototype,"type",void 0),l([p({type:hE,json:{write:!0}})],Zw.prototype,"inputMethod",void 0),Zw=l([k("esri.form.elements.inputs.attachments.SignatureInput")],Zw);const _j=Zw;let dy=class extends Bd{constructor(t){super(t),this.type="video",this.inputMethod="any",this.maxDuration=null}};l([p({type:["video"],readOnly:!0,json:{write:!0}})],dy.prototype,"type",void 0),l([p({type:hE,json:{write:!0}})],dy.prototype,"inputMethod",void 0),l([p({type:Number,json:{write:!0}})],dy.prototype,"maxDuration",void 0),dy=l([k("esri.form.elements.inputs.attachments.VideoInput")],dy);const wj=dy;function eH(e){return{nestableTypes:{base:Bd,key:"type",typeMap:{audio:mj,document:yj,image:gj,signature:_j,video:wj}},allTypes:{base:Bd,key:"type",typeMap:{attachment:e,audio:mj,document:yj,image:gj,signature:_j,video:wj}}}}function Ype(e,t,n){return e?e.map(r=>co(t.nestableTypes,r)):null}function Kpe(e,t,n){if(!e)return null;const r=t.nestableTypes.typeMap;return e.filter(i=>r[i.type]).map(i=>r[i.type].fromJSON(i))}function Xpe(e,t,n){if(!e)return null;const r=t.nestableTypes.typeMap;return e.filter(i=>r[i.type]).map(i=>i.toJSON())}let Xa=class extends Bd{constructor(t){super(t),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(t){return Ype(t,GM)}readInputs(t,n){return Kpe(n.inputTypes,GM)}writeInputs(t,n){n.inputTypes=Xpe(t,GM)}};l([p({type:["attachment"],readOnly:!0,json:{write:!0}})],Xa.prototype,"type",void 0),l([p({type:["any","exact","exactOrNone"],json:{write:!0}})],Xa.prototype,"attachmentAssociationType",void 0),l([p({json:{write:{isRequired:!0}}})],Xa.prototype,"inputTypes",void 0),l([kt("inputTypes")],Xa.prototype,"castInputs",null),l([de("inputTypes")],Xa.prototype,"readInputs",null),l([ge("inputTypes")],Xa.prototype,"writeInputs",null),Xa=l([k("esri.form.elements.inputs.attachments.AttachmentInput")],Xa);const GM=eH(Xa),Qpe=Xa;var QC;const efe=eH(Qpe);let ps=QC=class extends _f{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var e;return new QC({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(e=this.input)==null?void 0:e.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};l([p({type:Boolean,json:{write:!0}})],ps.prototype,"allowUserRename",void 0),l([p({type:String,json:{write:{isRequired:!0}}})],ps.prototype,"attachmentKeyword",void 0),l([p({type:Boolean,json:{write:!0}})],ps.prototype,"displayFilename",void 0),l([p({type:String,json:{write:!0}})],ps.prototype,"editableExpression",void 0),l([p({type:String,json:{write:!0}})],ps.prototype,"filenameExpression",void 0),l([p({types:efe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],ps.prototype,"input",void 0),l([p({type:Number,json:{write:!0}})],ps.prototype,"maxAttachmentCount",void 0),l([p({type:Number,json:{write:!0}})],ps.prototype,"minAttachmentCount",void 0),l([p({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],ps.prototype,"type",void 0),l([p({type:Boolean,json:{write:!0}})],ps.prototype,"useOriginalFilename",void 0),ps=QC=l([k("esri.form.elements.AttachmentElement")],ps);const vj=ps;let w2=class extends ne{constructor(t){super(t),this.type=null}};l([p()],w2.prototype,"type",void 0),w2=l([k("esri.form.elements.inputs.Input")],w2);const Gu=w2;let Jw=class extends Gu{constructor(t){super(t),this.maxLength=null,this.minLength=0}};l([p({type:Number,json:{write:!0}})],Jw.prototype,"maxLength",void 0),l([p({type:Number,json:{write:!0}})],Jw.prototype,"minLength",void 0),Jw=l([k("esri.form.elements.inputs.TextInput")],Jw);const CR=Jw;var eO;let v2=eO=class extends CR{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new eO({maxLength:this.maxLength,minLength:this.minLength})}};l([p({type:["barcode-scanner"],json:{read:!1,write:!0}})],v2.prototype,"type",void 0),v2=eO=l([k("esri.form.elements.inputs.BarcodeScannerInput")],v2);const tfe=v2;var tO;let hy=tO=class extends Gu{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new tO({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};l([p({type:String,json:{write:!0}})],hy.prototype,"noValueOptionLabel",void 0),l([p({type:Boolean,json:{write:!0}})],hy.prototype,"showNoValueOption",void 0),l([p({type:["combo-box"],json:{read:!1,write:!0}})],hy.prototype,"type",void 0),hy=tO=l([k("esri.form.elements.inputs.ComboBoxInput")],hy);const nfe=hy;var nO;function bj(e){return e??null}function Sj(e){return e??null}let Ba=nO=class extends Gu{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return bj(t.max)}writeMax(e,t){t.max=Sj(e)}readMin(e,t){return bj(t.min)}writeMin(e,t){t.min=Sj(e)}clone(){return new nO({max:this.max,min:this.min})}};l([p({type:String,json:{type:String,write:!0}})],Ba.prototype,"max",void 0),l([de("max")],Ba.prototype,"readMax",null),l([ge("max")],Ba.prototype,"writeMax",null),l([p({type:String,json:{type:String,write:!0}})],Ba.prototype,"min",void 0),l([de("min")],Ba.prototype,"readMin",null),l([ge("min")],Ba.prototype,"writeMin",null),l([p({type:["date-picker"],json:{read:!1,write:!0}})],Ba.prototype,"type",void 0),Ba=nO=l([k("esri.form.elements.inputs.DatePickerInput")],Ba);const rfe=Ba;var rO;function BM(e){return e??null}function qM(e){return e??null}let zi=rO=class extends Gu{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return BM(t.max)}writeMax(e,t){t.max=qM(e)}readMin(e,t){return BM(t.min)}writeMin(e,t){t.min=qM(e)}readTimeResolution(e,t){return BM(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=qM(e)}clone(){return new rO({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};l([p({type:Boolean,json:{write:!0}})],zi.prototype,"includeTimeOffset",void 0),l([p({type:String,json:{type:String,write:!0}})],zi.prototype,"max",void 0),l([de("max")],zi.prototype,"readMax",null),l([ge("max")],zi.prototype,"writeMax",null),l([p({type:String,json:{type:String,write:!0}})],zi.prototype,"min",void 0),l([de("min")],zi.prototype,"readMin",null),l([ge("min")],zi.prototype,"writeMin",null),l([p({type:String,json:{type:String,write:!0}})],zi.prototype,"timeResolution",void 0),l([de("timeResolution")],zi.prototype,"readTimeResolution",null),l([ge("timeResolution")],zi.prototype,"writeTimeResolution",null),l([p({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],zi.prototype,"type",void 0),zi=rO=l([k("esri.form.elements.inputs.DateTimeOffsetPickerInput")],zi);const ife=zi;var iO;function Tj(e){return e!=null?new Date(e):null}function xj(e){return e?e.getTime():null}let Bo=iO=class extends Gu{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return Tj(t.max)}writeMax(e,t){t.max=xj(e)}readMin(e,t){return Tj(t.min)}writeMin(e,t){t.min=xj(e)}clone(){return new iO({includeTime:this.includeTime,max:this.max,min:this.min})}};l([p({type:Boolean,json:{write:!0}})],Bo.prototype,"includeTime",void 0),l([p({type:Date,json:{type:Number,write:!0}})],Bo.prototype,"max",void 0),l([de("max")],Bo.prototype,"readMax",null),l([ge("max")],Bo.prototype,"writeMax",null),l([p({type:Date,json:{type:Number,write:!0}})],Bo.prototype,"min",void 0),l([de("min")],Bo.prototype,"readMin",null),l([ge("min")],Bo.prototype,"writeMin",null),l([p({type:["datetime-picker"],json:{read:!1,write:!0}})],Bo.prototype,"type",void 0),Bo=iO=l([k("esri.form.elements.inputs.DateTimePickerInput")],Bo);const sfe=Bo;var sO;let py=sO=class extends Gu{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new sO({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};l([p({type:String,json:{write:!0}})],py.prototype,"noValueOptionLabel",void 0),l([p({type:Boolean,json:{write:!0}})],py.prototype,"showNoValueOption",void 0),l([p({type:["radio-buttons"],json:{read:!1,write:!0}})],py.prototype,"type",void 0),py=sO=l([k("esri.form.elements.inputs.RadioButtonsInput")],py);const ofe=py;var oO;let fy=oO=class extends Gu{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new oO({offValue:this.offValue,onValue:this.onValue})}};l([p({type:[String,Number],json:{write:!0}})],fy.prototype,"offValue",void 0),l([p({type:[String,Number],json:{write:!0}})],fy.prototype,"onValue",void 0),l([p({type:["switch"],json:{read:!1,write:!0}})],fy.prototype,"type",void 0),fy=oO=l([k("esri.form.elements.inputs.SwitchInput")],fy);const afe=fy;var aO;let b2=aO=class extends CR{constructor(e){super(e),this.type="text-area"}clone(){return new aO({maxLength:this.maxLength,minLength:this.minLength})}};l([p({type:["text-area"],json:{read:!1,write:!0}})],b2.prototype,"type",void 0),b2=aO=l([k("esri.form.elements.inputs.TextAreaInput")],b2);const lfe=b2;var lO;let S2=lO=class extends CR{constructor(e){super(e),this.type="text-box"}clone(){return new lO({maxLength:this.maxLength,minLength:this.minLength})}};l([p({type:["text-box"],json:{read:!1,write:!0}})],S2.prototype,"type",void 0),S2=lO=l([k("esri.form.elements.inputs.TextBoxInput")],S2);const ufe=S2;var uO;function HM(e){return e??null}function WM(e){return e??null}let fs=uO=class extends Gu{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return HM(t.max)}writeMax(e,t){t.max=WM(e)}readMin(e,t){return HM(t.min)}writeMin(e,t){t.min=WM(e)}readTimeResolution(e,t){return HM(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=WM(e)}clone(){return new uO({max:this.max,min:this.min,timeResolution:this.timeResolution})}};l([p({type:String,json:{type:String,write:!0}})],fs.prototype,"max",void 0),l([de("max")],fs.prototype,"readMax",null),l([ge("max")],fs.prototype,"writeMax",null),l([p({type:String,json:{type:String,write:!0}})],fs.prototype,"min",void 0),l([de("min")],fs.prototype,"readMin",null),l([ge("min")],fs.prototype,"writeMin",null),l([p({type:String,json:{type:String,write:!0}})],fs.prototype,"timeResolution",void 0),l([de("timeResolution")],fs.prototype,"readTimeResolution",null),l([ge("timeResolution")],fs.prototype,"writeTimeResolution",null),l([p({type:["time-picker"],json:{read:!1,write:!0}})],fs.prototype,"type",void 0),fs=uO=l([k("esri.form.elements.inputs.TimePickerInput")],fs);const cfe=fs,dfe={base:Gu,key:"type",typeMap:{"barcode-scanner":tfe,"combo-box":nfe,"date-picker":rfe,"datetime-picker":sfe,"datetimeoffset-picker":ife,"radio-buttons":ofe,switch:afe,"text-area":lfe,"text-box":ufe,"time-picker":cfe}};var cO;let Zp=cO=class extends ne{constructor(e){super(e),this.name=null,this.code=null}clone(){return new cO({name:this.name,code:this.code})}};l([p({type:String,json:{write:!0}})],Zp.prototype,"name",void 0),l([p({type:[String,Number],json:{write:!0}})],Zp.prototype,"code",void 0),Zp=cO=l([k("esri.layers.support.CodedValue")],Zp);const hfe=new pt({inherited:"inherited",codedValue:"coded-value",range:"range"});let Yw=class extends ne{constructor(t){super(t),this.name=null,this.type=null}};l([p({type:String,json:{write:!0}})],Yw.prototype,"name",void 0),l([ke(hfe)],Yw.prototype,"type",void 0),Yw=l([k("esri.layers.support.Domain")],Yw);const pE=Yw;var dO;let Kw=dO=class extends pE{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const n=String(e);this.codedValues.some(r=>(String(r.code)===n&&(t=r.name),!!t))}return t}clone(){return new dO({codedValues:q(this.codedValues),name:this.name})}};l([p({type:[Zp],json:{write:!0}})],Kw.prototype,"codedValues",void 0),l([ke({codedValue:"coded-value"})],Kw.prototype,"type",void 0),Kw=dO=l([k("esri.layers.support.CodedValueDomain")],Kw);const fE=Kw;var hO;let T2=hO=class extends pE{constructor(e){super(e),this.type="inherited"}clone(){return new hO}};l([ke({inherited:"inherited"})],T2.prototype,"type",void 0),T2=hO=l([k("esri.layers.support.InheritedDomain")],T2);const tH=T2;var pO;let my=pO=class extends pE{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new pO({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};l([p({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var n;return(n=t.range)==null?void 0:n[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,n){t[n]=[this.minValue||0,e]}}}})],my.prototype,"maxValue",void 0),l([p({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var n;return(n=t.range)==null?void 0:n[0]}},write:{target:"range",writer(e,t,n){t[n]=[e,this.maxValue||0]}}}})],my.prototype,"minValue",void 0),l([ke({range:"range"})],my.prototype,"type",void 0),my=pO=l([k("esri.layers.support.RangeDomain")],my);const nH=my,rH={key:"type",base:pE,typeMap:{range:nH,"coded-value":fE,inherited:tH}};function mE(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return nH.fromJSON(e);case"codedValue":return fE.fromJSON(e);case"inherited":return tH.fromJSON(e)}return null}var fO;let Ys=fO=class extends _f{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new fO({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};l([p({types:rH,json:{read:{reader:mE},write:!0}})],Ys.prototype,"domain",void 0),l([p({type:Boolean,json:{write:!0}})],Ys.prototype,"editable",void 0),l([p({type:String,json:{write:!0}})],Ys.prototype,"editableExpression",void 0),l([p({type:String,json:{write:!0}})],Ys.prototype,"fieldName",void 0),l([p({type:String,json:{write:!0}})],Ys.prototype,"hint",void 0),l([p({types:dfe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Ys.prototype,"input",void 0),l([p({type:String,json:{write:!0}})],Ys.prototype,"requiredExpression",void 0),l([p({type:String,json:{read:!1,write:!0}})],Ys.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],Ys.prototype,"valueExpression",void 0),Ys=fO=l([k("esri.form.elements.FieldElement")],Ys);const Ej=Ys;var mO;let ou=mO=class extends _f{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new mO({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:q(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};l([p({type:Number,json:{write:!0}})],ou.prototype,"displayCount",void 0),l([p({type:["list"],json:{write:!0}})],ou.prototype,"displayType",void 0),l([p({type:String,json:{write:!0}})],ou.prototype,"editableExpression",void 0),l([p({type:[eR],json:{write:!0}})],ou.prototype,"orderByFields",void 0),l([p({type:Number,json:{write:!0}})],ou.prototype,"relationshipId",void 0),l([p({type:["relationship"],json:{read:!1,write:!0}})],ou.prototype,"type",void 0),ou=mO=l([k("esri.form.elements.RelationshipElement")],ou);const $j=ou;var yO;let yy=yO=class extends _f{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new yO({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};l([p({type:String,json:{write:!0}})],yy.prototype,"text",void 0),l([p({type:String,json:{write:!0}})],yy.prototype,"textFormat",void 0),l([p({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],yy.prototype,"type",void 0),yy=yO=l([k("esri.form.elements.TextElement")],yy);const Mj=yy;function iH(e){return{typesWithGroup:{base:_f,key:"type",typeMap:{attachment:vj,field:Ej,group:e,relationship:$j,text:Mj}},typesWithoutGroup:{base:_f,key:"type",typeMap:{attachment:vj,field:Ej,relationship:$j,text:Mj}}}}function sH(e,t,n=!0){if(!e)return null;const r=n?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(i=>r[i.type]).map(i=>r[i.type].fromJSON(i))}function oH(e,t,n=!0){if(!e)return null;const r=n?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(i=>r[i.type]).map(i=>i.toJSON())}function aH(e,t,n=!0){return e?e.map(r=>co(n?t.typesWithGroup:t.typesWithoutGroup,r)):null}var gO;let Qa=gO=class extends _f{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return aH(e,ZM,!1)}readElements(e,t){return sH(t.formElements,ZM,!1)}writeElements(e,t){t.formElements=oH(e,ZM,!1)}clone(){return new gO({description:this.description,elements:q(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};l([p({json:{write:!0}})],Qa.prototype,"elements",void 0),l([kt("elements")],Qa.prototype,"castElements",null),l([de("elements",["formElements"])],Qa.prototype,"readElements",null),l([ge("elements")],Qa.prototype,"writeElements",null),l([p({type:["collapsed","expanded"],json:{write:!0}})],Qa.prototype,"initialState",void 0),l([p({type:String,json:{read:!1,write:!0}})],Qa.prototype,"type",void 0),Qa=gO=l([k("esri.form.elements.GroupElement")],Qa);const ZM=iH(Qa),pfe=Qa,ffe=e=>e.type==="field",mfe=e=>e.type==="group",yfe=e=>e.type==="text";var _O;const JM=iH(pfe);let qo=_O=class extends ne{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return aH(e,JM)}readElements(e,t){return sH(t.formElements,JM)}writeElements(e,t){t.formElements=oH(e,JM)}clone(){return new _O({description:this.description,expressionInfos:q(this.expressionInfos),elements:q(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const n=new Set,{description:r,elements:i,expressionInfos:s,title:o}=this;if(Dv(n,e,r),Dv(n,e,o),!i)return[];const a=gfe(i,s).map(h=>ai(n,e,h));await Promise.all(a);for(const h of i)lH(n,{fieldsIndex:e,relationships:t},h);return Array.from(n).sort()}};function lH(e,t,n){var i;const{fieldsIndex:r}=t;if(!r||r.fields.length!==e.size)switch(Dv(e,r,n.label),Dv(e,r,n.description),n.type){case"field":Ti(e,r,n.fieldName);break;case"group":n.elements.forEach(s=>lH(e,t,s));break;case"relationship":if(t.relationships){const s=t.relationships.find(o=>o.id===n.relationshipId);s&&Ti(e,r,s.keyField)}gf(e,r,(i=n.orderByFields)==null?void 0:i.map(s=>s.field));break;case"text":Dv(e,r,n.text)}}function gfe(e,t){if(!t||t.length===0)return[];const n=uH(e),r=[];for(const i of t)n.has(i.name)&&r.push(i.expression);return r}function uH(e){const t=new Set;for(const n of e)if(OD(t,n.visibilityExpression),!yfe(n)){if(mfe(n))eT(t,uH(n.elements));else if(OD(t,n.editableExpression),ffe(n)){const{requiredExpression:r,valueExpression:i}=n;eT(t,[r,i])}}return t}function Dv(e,t,n){gf(e,t,_B(n))}l([p({type:String,json:{write:!0}})],qo.prototype,"description",void 0),l([p({json:{write:!0}})],qo.prototype,"elements",void 0),l([kt("elements")],qo.prototype,"castElements",null),l([de("elements",["formElements"])],qo.prototype,"readElements",null),l([ge("elements")],qo.prototype,"writeElements",null),l([p({type:[Jpe],json:{write:!0}})],qo.prototype,"expressionInfos",void 0),l([p({type:Boolean,json:{default:!1,write:!0}})],qo.prototype,"preserveFieldValuesWhenHidden",void 0),l([p({type:String,json:{write:!0}})],qo.prototype,"title",void 0),qo=_O=l([k("esri.form.FormTemplate")],qo);const _fe=qo;let DT=class{constructor(t=n=>n.values().next().value){this._peeker=t,this._observable=new O0,this._items=new Set}get length(){return tt(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return tt(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const n=this.length;return this._items.forEach(r=>{t(r)||this._items.delete(r)}),n!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){tt(this._observable),yield*this._items}};const cH=new FinalizationRegistry(e=>{e.close()});function wfe(e,t){cH.register(e,t,t)}function vfe(e){cH.unregister(e)}function dH(e,t){return new Proxy({},{get:(n,r,i)=>(...s)=>{let o,a;const h=s[s.length-1];return bfe(h)&&(o=h.signal,a=h.transferList,s.pop()),e.apply(t?`${t}.${r.toString()}`:r.toString(),s,{transferList:a,signal:o})}})}function bfe(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const Sfe={statsWorker:()=>pe(()=>import("./statsWorker-v6_FZkqU.js"),__vite__mapDeps([35,36,37,38,39])),geometryEngineWorker:()=>pe(()=>import("./geometryEngineWorker-l4nCS5hh.js"),__vite__mapDeps([40,33,14,3,34])),CSVSourceWorker:()=>pe(()=>import("./CSVSourceWorker-rj6R6T3e.js"),__vite__mapDeps([41,42,34,29,43,28,30,44,45,46,47,48,49,21,22,50,36,37,38,39,27,51,52])),EdgeProcessingWorker:()=>pe(()=>import("./EdgeProcessingWorker-BVzSgkLF.js"),__vite__mapDeps([53,54,55,56,57,58,59,60,61,62,63])),ElevationSamplerWorker:()=>pe(()=>import("./ElevationSamplerWorker-BHXost3o.js"),__vite__mapDeps([64,45,65,66,67,68,69,70,71,72,73,55,74])),FeatureServiceSnappingSourceWorker:()=>pe(()=>import("./FeatureServiceSnappingSourceWorker-Dc9NXDoq.js"),__vite__mapDeps([75,43,28,29,30,44,45,46,47,34,48,49,21,22,50,36,37,38,39,76,77,78,8])),GeoJSONSourceWorker:()=>pe(()=>import("./GeoJSONSourceWorker-xxmH0ouc.js"),__vite__mapDeps([79,28,29,30,43,44,45,46,47,34,48,49,21,22,50,36,37,38,39,80,42,51,52,81])),LercWorker:()=>pe(()=>import("./LercWorker-B0vp3QSD.js"),[]),MemorySourceWorker:()=>pe(()=>import("./MemorySourceWorker-B9gnt1pl.js"),__vite__mapDeps([82,28,29,30,83,43,44,45,46,47,34,48,49,21,22,50,36,37,38,39,51,52,81,42])),PBFDecoderWorker:()=>pe(()=>import("./PBFDecoderWorker-CLXNQrci.js"),__vite__mapDeps([84,28,29,30,76,77])),FeaturePipelineWorker:()=>pe(()=>import("./FeaturePipelineWorker-C-0g1rk-.js"),__vite__mapDeps([85,86,87,88,89,63,22,90,91,29,92,93,94,57,46,28,30,47,34,95,96,97,98,99,100,48,49,21,50,36,37,38,39,78,76,77,101,80,42,51,52,81,102,103])),PointCloudWorker:()=>pe(()=>import("./PointCloudWorker-Dqb6x0xO.js"),__vite__mapDeps([104,105,67,106,107,108,109,61,110,68,69,70,111])),RasterWorker:()=>pe(()=>import("./RasterWorker-Bgr1h8kB.js"),__vite__mapDeps([112,113,114,3,115,116])),SceneLayerSnappingSourceWorker:()=>pe(()=>import("./SceneLayerSnappingSourceWorker-CAAv4RHo.js"),__vite__mapDeps([117,118,119,67,111,68,106,120,57,58,59,60,54,55,56,61,62,63])),SceneLayerWorker:()=>pe(()=>import("./SceneLayerWorker-DwjMKcHy.js"),__vite__mapDeps([121,65,73,119,67,111,68,106,122,123,71,109,61,124,125,126,94,110,105,69,70])),WFSSourceWorker:()=>pe(()=>import("./WFSSourceWorker-DJmKgH5Z.js"),__vite__mapDeps([127,28,29,30,43,44,45,46,47,34,48,49,21,22,50,36,37,38,39,80,42,81,128,129])),WorkerTileHandler:()=>pe(()=>import("./WorkerTileHandler-uU_j_pkA.js"),__vite__mapDeps([130,131,92,93,132,133,77,97,134,135,63,98,91])),Lyr3DWorker:()=>pe(()=>import("./Lyr3DWorker-B_1_y_Gn.js"),[]),Feature3DPipelineWorker:()=>pe(()=>import("./HUDMaterial.glsl-ET0QFoXQ.js").then(e=>e.F),__vite__mapDeps([136,49,28,29,30,21,22,46,47,34,50,36,37,38,39,45,78,76,77,60,137,138,139,57,54,55,56,125,126,61,94,140,119,67,111,68,106,118,141,110,105,69,70,142,62,63,143,120,144,89,145,124,123,71,65,107,146]))},hH="worker:port-closed";var xr;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(xr||(xr={}));let Tfe=0;function pH(){return Tfe++}function xfe(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function h0(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function OR(e,t,n,r){if(t.type===xr.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==xr.INVOKE&&t.type!==xr.RESPONSE)return void e.postMessage(t);let i;if(xfe(n)?(i=Ij(n.transferList),t.data=n.result):(i=Ij(r),t.data=n),i){if(te("ff")){for(const s of i)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case xr.INVOKE:throw o;case xr.RESPONSE:return void OR(e,{type:xr.RESPONSE,jobId:t.jobId,error:h0(o)})}}}e.postMessage(t,i)}else e.postMessage(t)}function p0(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function Ij(e){if(!(e!=null&&e.length))return null;if(te("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(n=>!Efe(n));return t.length?t:null}function Efe(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}async function oOe(e){try{return await e}catch(t){const n=(t==null?void 0:t.name)===hH;if(!(li(t)||n))throw t;return}}const{CLOSE:Pj,ABORT:Cj,INVOKE:Oj,RESPONSE:W_,OPEN_PORT:Aj,ON:$fe}=xr,Mfe=2;let Ife=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===xr.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},qd=class gy{static connect(t,n){const r=new MessageChannel;let i;i=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const s=new gy(r.port1,{channel:r,client:i,schedule:n});return typeof i=="object"&&"remoteClient"in i&&(i.remoteClient=s),gy.clients.set(s,i),r.port2}static loadWorker(t){const n=Sfe[t];return n?n():Promise.resolve(null)}constructor(t,n,r){this._port=t,this._jobQueue=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new Ife(i=>this._onInvokeMessage(i)),this._client=n.client,this._onMessage=this._onMessage.bind(this),this._channel=n.channel,this._schedule=n.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:Pj}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,n,r){return this.apply(t,[n],r)}apply(t,n,r){const i=r==null?void 0:r.signal,s=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new Y(hH,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:n}));const o=pH();return new Promise((a,h)=>{if(la(i))return this._processWork(),void h(rn());const f=lo(i,()=>{const w=this._outJobs.get(o);w&&(this._outJobs.delete(o),this._processWork(),wn(w.abortHandle),this._post({type:Cj,jobId:o}),h(rn()))}),_={resolve:a,reject:h,abortHandle:f,debugInfo:t};this._outJobs.set(o,_),this._post({type:Oj,jobId:o,methodName:t,abortable:i!=null},n,s)})}createInvokeProxy(t){return dH(this,t)}on(t,n){const r=new MessageChannel;function i(s){n(s.data)}return this._port.postMessage({type:xr.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",i),r.port1.start(),Ft(()=>{r.port1.postMessage({type:xr.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",i)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:Aj,port:t.port2}),t.port1}_processWork(){var o;if(this._outJobs.size>=Mfe)return;const t=(o=this._jobQueue)==null?void 0:o.pop();if(!t)return;const{methodName:n,data:r,invokeOptions:i,resolver:s}=t;this.apply(n,r,i).then(a=>s.resolve(a)).catch(a=>s.reject(a))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{wn(t.abortHandle),t.reject(rn(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,n){const r=p0(t);if(r)switch(r.type){case W_:this._onResponseMessage(r);break;case Oj:n?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case Cj:this._onAbortMessage(r);break;case Pj:this._onCloseMessage();break;case Aj:this._onOpenPortMessage(r);break;case $fe:this._onOnMessage(r)}}_onAbortMessage(t){const n=this._inJobs,r=t.jobId,i=n.get(r);this._invokeQueue.push(t),i&&(i.controller&&i.controller.abort(),n.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&gy.clients.get(this)===t&&t.destroy(),gy.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:n,jobId:r,data:i=[],abortable:s}=t,o=s?new AbortController:null,a=this._inJobs;let h,f=this._client,_=f[n];try{if(!_&&n&&n.includes(".")){const w=n.split(".");for(let b=0;b<w.length-1;b++)f=f[w[b]],_=f[w[b+1]]}if(typeof _!="function")throw new TypeError(`${n} is not a function`);i.push({client:this,signal:o?o.signal:null}),h=_.apply(f,i)}catch(w){return void this._post({type:W_,jobId:r,error:h0(w)})}_l(h)?(a.set(r,{controller:o,promise:h}),h.then(w=>{a.has(r)&&(a.delete(r),this._post({type:W_,jobId:r},w))},w=>{a.has(r)&&(a.delete(r),li(w)||this._post({type:W_,jobId:r,error:h0(w||{message:`Error encountered at method ${n}`})}))})):this._post({type:W_,jobId:r},h)}_onOpenPortMessage(t){new gy(t.port,{client:this._client})}_onOnMessage(t){const{port:n}=t,r=this._client.on(t.eventType,s=>{n.postMessage(s)}),i=M0(t.port,"message",s=>{const o=p0(s);(o==null?void 0:o.type)===xr.CLOSE&&(i.remove(),r.remove(),n.close())})}_onResponseMessage(t){const{jobId:n,error:r,data:i}=t,s=this._outJobs;if(!s.has(n))return;const o=s.get(n);s.delete(n),this._processWork(),wn(o.abortHandle),r?o.reject(Y.fromJSON(JSON.parse(r))):o.resolve(i)}_post(t,n,r){return OR(this._port,t,n,r)}};qd.kernelInfo={buildDate:PU,fullVersion:ak,revision:CU},qd.clients=new Map;let Pfe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new DT}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,n){return new Promise((r,i)=>{let s=!0;const o=a=>{xn(n.signal),s&&(s=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const h=t[a];_l(h)?this._clientPromises[a]=h.then(f=>(this._clients[a]=new qd(f,n,this._ongoingJobsQueue),o(r),this._clients[a]),()=>(o(i),null)):(this._clients[a]=new qd(h,n,this._ongoingJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(t,n,r){const i=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];i[s]=o.then(a=>a==null?void 0:a.invoke(t,n,r))}return i}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(rn(`Worker closing, aborting job calling '${t.methodName}'`));for(const n of this._clientPromises)n.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,vfe(this)}invoke(t,n,r){return this.apply(t,[n],r)}apply(t,n,r){const i=xs();this._ongoingJobsQueue.push({methodName:t,data:n,invokeOptions:r,resolver:i});for(let s=0;s<this._clientPromises.length;s++){const o=this._clients[s];o?o.jobAdded():this._clientPromises[s].then(a=>a==null?void 0:a.jobAdded())}return i.promise}createInvokeProxy(t){return dH(this,t)}on(t,n){return Promise.all(this._clientPromises).then(()=>x0(this._clients.map(r=>r.on(t,n))))}openPorts(){return new Promise(t=>{const n=new Array(this._clientPromises.length);let r=n.length;for(let i=0;i<this._clientPromises.length;++i)this._clientPromises[i].then(s=>{s&&(n[i]=s.openPort()),--r==0&&t(n)})})}get test(){}};const Cfe={async request(e,t){var o,a;const n=e.options,r=n.responseType;n.signal=t==null?void 0:t.signal,n.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&((o=n3(e.url))!=null&&o.after)?r:"array-buffer";const i=await Lt(e.url,n),s={data:i.data,httpStatus:i.httpStatus,ssl:i.ssl};switch((a=i.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}},kj={};function Ofe(e){var n;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((n=e.packages)==null?void 0:n.slice())||[],paths:{...kj.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=kj.baseUrl),t}let Afe=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(n=>{this[n]=(...r)=>t[n](...r)})}},x2=class{constructor(){this._dispatcher=new Afe,this._workerPostMessage({type:xr.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){X2(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,n,r){this._dispatcher.addEventListener(t,n,r)}removeEventListener(t,n,r){this._dispatcher.removeEventListener(t,n,r)}_workerPostMessage(t){X2(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const n=p0(t);if(n&&n.type===xr.OPEN){const{modulePath:r,jobId:i}=n;let s=await qd.loadWorker(r);s||(s=await import(r));const o=qd.connect(s);this._workerPostMessage({type:xr.OPENED,jobId:i,data:o})}}};const wO=()=>fe.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:kfe}=xr,Rfe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Db,Fb;const Rj="Failed to create Worker. Fallback to execute module in main thread";async function Lfe(){if(!te("esri-workers"))return Lj(new x2);if(!Db&&!Fb)try{const t=Rfe.split("{CONFIGURATION}").join(Nfe());Db=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){Fb=t||{}}let e;if(Db)try{e=new Worker(Db,{name:"esri-worker-"+Dfe++})}catch{wO().warn(Rj,Fb),e=new x2}else wO().warn(Rj,Fb),e=new x2;return Lj(e)}async function Lj(e){return new Promise(t=>{function n(i){const s=p0(i);s&&s.type===kfe&&(e.removeEventListener("message",n),e.removeEventListener("error",r),t(e))}function r(i){i.preventDefault(),e.removeEventListener("message",n),e.removeEventListener("error",r),wO().warn("Failed to create Worker. Fallback to execute module in main thread",i),(e=new x2).addEventListener("message",n),e.addEventListener("error",r)}e.addEventListener("message",n),e.addEventListener("error",r)})}function Nfe(){let e;if(Bt.default!=null){const i={...Bt};delete i.default,e=JSON.parse(JSON.stringify(i))}else e=JSON.parse(JSON.stringify(Bt));e.assetsPath=qi(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?qi(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Zi(),e.has={"esri-csp-restrictions":te("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":te("esri-2d-update-debug"),"esri-2d-log-updating":te("esri-2d-log-updating"),"featurelayer-pbf":te("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":te("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":te("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":te("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":te("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":te("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":te("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":te("featurelayer-snapshot-enabled"),"esri-atomics":te("esri-atomics"),"esri-shared-array-buffer":te("esri-shared-array-buffer"),"esri-tiles-debug":te("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":te("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":te("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=qi(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=qi(e.workers.workerPath):e.workers.workerPath=qi(Gt("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Bt.workers.loaderConfig,n=Ofe({baseUrl:t==null?void 0:t.baseUrl,locale:Zi(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:n,kernelInfo:{buildDate:PU,fullVersion:ak,revision:CU}})}let Dfe=0;const{ABORT:Nj,INVOKE:Ffe,OPEN:jfe,OPENED:zfe,RESPONSE:Z_}=xr;let Vfe=class fH{static async create(t){const n=await Lfe();return new fH(n,t)}constructor(t,n){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=n,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),fe.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(t,n={}){const{signal:r}=n,i=pH();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:HA(r,()=>{this._outJobs.delete(i),this._post({type:Nj,jobId:i})})};this._outJobs.set(i,a),this._post({type:jfe,jobId:i,modulePath:t})})}_onMessage(t){const n=p0(t);if(n)switch(n.type){case zfe:this._onOpenedMessage(n);break;case Z_:this._onResponseMessage(n);break;case Nj:this._onAbortMessage(n);break;case Ffe:this._onInvokeMessage(n)}}_onAbortMessage(t){const n=this._inJobs,r=t.jobId,i=n.get(r);i&&(i.controller&&i.controller.abort(),n.delete(r))}_onInvokeMessage(t){const{methodName:n,jobId:r,data:i,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs,h=Cfe[n];let f;try{if(typeof h!="function")throw new TypeError(`${n} is not a function`);f=h.call(null,i,{signal:o?o.signal:null})}catch(_){return void this._post({type:Z_,jobId:r,error:h0(_)})}_l(f)?(a.set(r,{controller:o,promise:f}),f.then(_=>{a.has(r)&&(a.delete(r),this._post({type:Z_,jobId:r},_))},_=>{a.has(r)&&(a.delete(r),_||(_={message:"Error encountered at method"+n}),li(_)||this._post({type:Z_,jobId:r,error:h0(_||{message:`Error encountered at method ${n}`})}))})):this._post({type:Z_,jobId:r},f)}_onOpenedMessage(t){const{jobId:n,data:r}=t,i=this._outJobs.get(n);i&&(this._outJobs.delete(n),wn(i.abortHandle),i.resolve(r))}_onResponseMessage(t){const{jobId:n,error:r,data:i}=t,s=this._outJobs.get(n);s&&(this._outJobs.delete(n),wn(s.abortHandle),r?s.reject(Y.fromJSON(JSON.parse(r))):s.resolve(i))}_post(t,n,r){return OR(this.worker,t,n,r)}};const Dj=te("host-browser")?Math.min(navigator.hardwareConcurrency-1,te("workers-pool-size")??8):0;let Jp=te("esri-mobile")?Math.min(Dj,3):Dj;Jp||(Jp=te("safari")&&te("mac")?7:2);let Fj=0;const E2=[];function Ufe(){mH()}async function jb(e,t){const n=new Pfe,{registryTarget:r,...i}=t;return await n.open(e,i),r&&wfe(r,n),n}async function Gfe(e,t={}){if(typeof e!="string")throw new Y("workers:undefined-module","modulePath is missing");let n=t.strategy||"distributed";if(te("host-webworker")&&!te("esri-workers")&&(n="local"),n==="local"){let r=await qd.loadWorker(e);r||(r=await import(e)),xn(t.signal);const i=t.client||r;return jb([qd.connect(r,t.schedule)],{...t,client:i})}if(await mH(),xn(t.signal),n==="dedicated"){const r=Fj++%Jp;return jb([await E2[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,Jp);if(r<Jp){const i=new Array(r);for(let s=0;s<r;++s){const o=Fj++%Jp;i[s]=E2[o].open(e,t)}return jb(i,t)}}return jb(E2.map(r=>r.open(e,t)),t)}let zb=null;async function mH(){if(zb)return zb;new AbortController;const e=[];for(let t=0;t<Jp;t++){const n=Vfe.create(t).then(r=>(E2[t]=r,r));e.push(n)}return zb=Promise.all(e),zb}function jj(e,t,n){if(e.hasM==null||e.hasZ)for(const r of t)for(const i of r)i.length>2&&(i[2]*=n)}function Bfe(e,t,n){if(!e&&!t||!n)return;const r=vT(n);zj(e,n,r),zj(t,n,r)}function zj(e,t,n){if(e)for(const r of e)qfe(r.geometry,t,n)}function qfe(e,t,n){if(!(e!=null&&e.spatialReference)||dr(e.spatialReference,t))return;const r=vT(e.spatialReference)/n;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)jj(e,e.rings,r);else if("paths"in e)jj(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const i of e.points)i.length>2&&(i[2]*=r)}}function Vj(e,t,n){if(!(n!=null&&n.features)||!n.hasZ)return;const r=AG(n.geometryType,t,e.outSpatialReference);if(r!=null)for(const i of n.features)r(i.geometry)}var vO;const Hfe=new pt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Yr=vO=class extends ne{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let n=null;try{n=t?JSON.parse(t):null}catch{}return(n==null?void 0:n.value)??null}readValueType(e,{description:t}){let n=null;try{n=t?JSON.parse(t):null}catch{}return n?Hfe.fromJSON(n.fieldValueType):null}clone(){var e;return new vO({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};l([p({type:String,json:{write:!0}})],Yr.prototype,"alias",void 0),l([p({type:[String,Number],json:{write:{allowNull:!0}}})],Yr.prototype,"defaultValue",void 0),l([p()],Yr.prototype,"description",void 0),l([de("description")],Yr.prototype,"readDescription",null),l([p({types:rH,json:{read:{reader:mE},write:!0}})],Yr.prototype,"domain",void 0),l([p({type:Boolean,json:{write:!0}})],Yr.prototype,"editable",void 0),l([p({type:Mt,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],Yr.prototype,"length",void 0),l([p({type:String,json:{write:!0}})],Yr.prototype,"name",void 0),l([p({type:Boolean,json:{write:!0}})],Yr.prototype,"nullable",void 0),l([ke(Yk)],Yr.prototype,"type",void 0),l([p()],Yr.prototype,"valueType",void 0),l([de("valueType",["description"])],Yr.prototype,"readValueType",null),l([p({type:Boolean,json:{read:!1}})],Yr.prototype,"visible",void 0),Yr=vO=l([k("esri.layers.support.Field")],Yr);const AR=Yr;var bO;const SO=new pt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let vr=bO=class extends ne{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var i;const n=dt.fromJSON(t.spatialReference),r=[];for(let s=0;s<e.length;s++){const o=e[s],a=yl.fromJSON(o),h=(i=o.geometry)==null?void 0:i.spatialReference;a.geometry==null||h||(a.geometry.spatialReference=n);const f=o.aggregateGeometries,_=a.aggregateGeometries;if(f&&_!=null)for(const w in _){const b=_[w],T=f[w],M=T==null?void 0:T.spatialReference;b==null||M||(b.spatialReference=n)}r.push(a)}return r}writeGeometryType(e,t,n,r){if(e)return void SO.write(e,t,n,r);const{features:i}=this;if(i){for(const s of i)if((s==null?void 0:s.geometry)!=null)return void SO.write(s.geometry.type,t,n,r)}}readQueryGeometry(e,t){if(!e)return null;const n=!!e.spatialReference,r=Du(e);return r&&!n&&t.spatialReference&&(r.spatialReference=dt.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:n}=this;if(n){for(const r of n)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new bO(this.cloneProperties())}cloneProperties(){return q({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let n=0;n<t.features.length;n++){const r=t.features[n];if(r.geometry){const i=e==null?void 0:e[n];r.geometry=(i==null?void 0:i.toJSON())||r.geometry}}return t}quantize(e){const{scale:[t,n],translate:[r,i]}=e,s=f=>Math.round((f-r)/t),o=f=>Math.round((i-f)/n),a=this.features,h=this._getQuantizationFunction(this.geometryType,s,o);for(let f=0,_=a.length;f<_;f++)h!=null&&h(a[f].geometry)||(a.splice(f,1),f--,_--);return this.transform=e,this}unquantize(){var b,T;const{geometryType:e,features:t,transform:n}=this;if(!n)return this;const{translate:[r,i],scale:[s,o]}=n,a=M=>M*s+r,h=M=>i-M*o;let f=null,_=null;if(this.hasZ&&((b=n==null?void 0:n.scale)==null?void 0:b[2])!=null){const{translate:[,,M],scale:[,,I]}=n;f=C=>C*I+M}if(this.hasM&&((T=n==null?void 0:n.scale)==null?void 0:T[3])!=null){const{translate:[,,,M],scale:[,,,I]}=n;_=C=>C==null?C:C*I+M}const w=this._getHydrationFunction(e,a,h,f,_);for(const{geometry:M}of t)M!=null&&w&&w(M);return this.transform=null,this}_quantizePoints(e,t,n){let r,i;const s=[];for(let o=0,a=e.length;o<a;o++){const h=e[o];if(o>0){const f=t(h[0]),_=n(h[1]);f===r&&_===i||(s.push([f-r,_-i]),r=f,i=_)}else r=t(h[0]),i=n(h[1]),s.push([r,i])}return s.length>0?s:null}_getQuantizationFunction(e,t,n){return e==="point"?r=>(r.x=t(r.x),r.y=n(r.y),r):e==="polyline"||e==="polygon"?r=>{const i=ef(r)?r.rings:r.paths,s=[];for(let o=0,a=i.length;o<a;o++){const h=i[o],f=this._quantizePoints(h,t,n);f&&s.push(f)}return s.length>0?(ef(r)?r.rings=s:r.paths=s,r):null}:e==="multipoint"?r=>{const i=this._quantizePoints(r.points,t,n);return i&&i.length>0?(r.points=i,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,n,r,i){return e==="point"?s=>{s.x=t(s.x),s.y=n(s.y),r&&(s.z=r(s.z))}:e==="polyline"||e==="polygon"?s=>{const o=ef(s)?s.rings:s.paths;let a,h;for(let f=0,_=o.length;f<_;f++){const w=o[f];for(let b=0,T=w.length;b<T;b++){const M=w[b];b>0?(a+=M[0],h+=M[1]):(a=M[0],h=M[1]),M[0]=t(a),M[1]=n(h)}}if(r&&i)for(let f=0,_=o.length;f<_;f++){const w=o[f];for(let b=0,T=w.length;b<T;b++){const M=w[b];M[2]=r(M[2]),M[3]=i(M[3])}}else if(r)for(let f=0,_=o.length;f<_;f++){const w=o[f];for(let b=0,T=w.length;b<T;b++){const M=w[b];M[2]=r(M[2])}}else if(i)for(let f=0,_=o.length;f<_;f++){const w=o[f];for(let b=0,T=w.length;b<T;b++){const M=w[b];M[2]=i(M[2])}}}:e==="extent"?s=>{s.xmin=t(s.xmin),s.ymin=n(s.ymin),s.xmax=t(s.xmax),s.ymax=n(s.ymax),r&&s.zmax!=null&&s.zmin!=null&&(s.zmax=r(s.zmax),s.zmin=r(s.zmin)),i&&s.mmax!=null&&s.mmin!=null&&(s.mmax=i(s.mmax),s.mmin=i(s.mmin))}:e==="multipoint"?s=>{const o=s.points;let a,h;for(let f=0,_=o.length;f<_;f++){const w=o[f];f>0?(a+=w[0],h+=w[1]):(a=w[0],h=w[1]),w[0]=t(a),w[1]=n(h)}if(r&&i)for(let f=0,_=o.length;f<_;f++){const w=o[f];w[2]=r(w[2]),w[3]=i(w[3])}else if(r)for(let f=0,_=o.length;f<_;f++){const w=o[f];w[2]=r(w[2])}else if(i)for(let f=0,_=o.length;f<_;f++){const w=o[f];w[2]=i(w[2])}}:null}};l([p({type:String,json:{write:!0}})],vr.prototype,"displayFieldName",void 0),l([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],vr.prototype,"exceededTransferLimit",void 0),l([p({type:[yl],json:{write:!0}})],vr.prototype,"features",void 0),l([de("features")],vr.prototype,"readFeatures",null),l([p({type:[AR],json:{write:!0}})],vr.prototype,"fields",void 0),l([p({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:SO.read}}})],vr.prototype,"geometryType",void 0),l([ge("geometryType")],vr.prototype,"writeGeometryType",null),l([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],vr.prototype,"hasM",void 0),l([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],vr.prototype,"hasZ",void 0),l([p({types:Tf,json:{write:!0}})],vr.prototype,"queryGeometry",void 0),l([de("queryGeometry")],vr.prototype,"readQueryGeometry",null),l([p({type:dt,json:{write:!0}})],vr.prototype,"spatialReference",void 0),l([ge("spatialReference")],vr.prototype,"writeSpatialReference",null),l([p({json:{write:!0}})],vr.prototype,"transform",void 0),vr=bO=l([k("esri.rest.support.FeatureSet")],vr),vr.prototype.toJSON.isDefaultToJSON=!0;const yH=vr;let Wfe=0,Tu=class extends ho.LoadableMixin(A0(Ae)){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){const n=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(n)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}get _workerGeometryType(){var n;const t=(n=this.layer)==null?void 0:n.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,n={}){await this.load(n);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,n);Vj(t,this.layer.spatialReference,r);const i=yH.fromJSON(r);if(!this._requiresClientGraphicMapping())return i;const s=this.layer.objectIdField;for(const o of i.features){const a=o.attributes[s],h=this._idToClientGraphic.get(a);h&&(o.geometry=h.geometry)}return i.geometryType=this.layer.geometryType,i}async queryFeaturesJSON(t,n={}){if(this._requiresClientGraphicMapping())throw new Y("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(n);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,n);return Vj(t,this.layer.spatialReference,r),r}queryFeatureCount(t,n={}){return this.load(n).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,n))}queryObjectIds(t,n={}){return this.load(n).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,n))}queryExtent(t,n={}){return this.load(n).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,n)).then(r=>({count:r.count,extent:Xt.fromJSON(r.extent)}))}querySnapping(t,n={}){return this.load(n).then(()=>this._connection.invoke("querySnapping",t,n))}async _applyEdits(t){if(!this._connection)throw new Y("feature-layer-source:edit-failure","Memory source not loaded");const n=this.layer.objectIdField;let r=null;const i=[],s=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const o=_=>"objectId"in _&&_.objectId!=null?_.objectId:"attributes"in _&&_.attributes[n]!=null?_.attributes[n]:null;if(t.addFeatures&&(r=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const _ of t.deleteFeatures){const w=o(_);w!=null&&i.push(w)}const a=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(const _ of t.updateFeatures)if(s.push(this._serializeFeature(_)),a){const w=o(_);w!=null&&a.set(w,_)}}Bfe(r?r.features:null,s,this.layer.spatialReference);const{fullExtent:h,featureEditResults:f}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:s,deletes:i});return this.fullExtent=h,r&&r.finish(f.uidToObjectId),this._updateClientGraphicIds(a,f),this._createEditsResult(f)}async _prepareClientMapping(t,n){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const r=[];for(const{geometry:i}of t)i==null||i.type!=="mesh"||i.hasExtent||i.loaded||r.push(i.load({signal:n}));r.length&&await Promise.all(r)}_updateClientGraphicIds(t,n){if(this._idToClientGraphic){if(t)for(const r of n.updateResults){if(!r.success)continue;const i=t.get(r.objectId);i!=null&&this._addIdToClientGraphic(i)}for(const r of n.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const n=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:n?new Y("feature-layer-source:edit-failure",n.description,{code:n.code}):null}}_prepareAddFeatures(t){const n=new Map,r=new Array(t.length);let i=null;for(let o=0;o<t.length;o++){const a=t[o],h=this._serializeFeature(a);i||a.geometry==null||(i=a.geometry.type),r[o]=h,n.set(`${h.uid}`,a)}const s=this;return{features:r,inferredGeometryType:i,finish(o){const a=s.sourceJSON.objectIdField;for(const h in o){const f=o[h],_=n.get(h);_&&(_.attributes||(_.attributes={}),f===-1?delete _.attributes[a]:_.attributes[a]=f,s._addIdToClientGraphic(_))}}}}_addIdToClientGraphic(t){var i;if(!this._idToClientGraphic)return;const n=this.sourceJSON.objectIdField,r=(i=t.attributes)==null?void 0:i[n];r!=null&&this._idToClientGraphic.set(r,t)}get _layerOrSourceGeometryType(){var t,n;return((t=this.layer)==null?void 0:t.geometryType)??((n=this.sourceJSON)==null?void 0:n.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:n}=t,r=this._geometryForSerialization(t),i=(Wfe++).toString();return r?{uid:i,geometry:r.toJSON(),attributes:n}:{uid:i,attributes:n}}_geometryForSerialization(t){const{geometry:n}=t;return n==null?null:this._geometryRequiresClientGraphicMapping(n)?n.extent?mo.fromExtent(n.extent):null:n}async _startWorker(t){this._connection=await Gfe("MemorySourceWorker",{strategy:te("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:n,spatialReference:r,objectIdField:i,hasM:s,hasZ:o,timeInfo:a,dateFieldsTimeZone:h}=this.layer,f=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const _=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",M=>{fe.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),M.preventDefault()}));const w={features:_.features,fields:n==null?void 0:n.map(M=>M.toJSON()),geometryType:SF.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:i,spatialReference:f?null:r&&r.toJSON(),timeInfo:(a==null?void 0:a.toJSON())??null,dateFieldsTimeZone:h},b=await this._connection.invoke("load",w,{signal:t});for(const M of b.warnings)fe.getLogger(this.layer).warn("#load()",`${M.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:M});b.featureErrors.length&&fe.getLogger(this.layer).warn("#load()",`Encountered ${b.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:b.featureErrors});const T=b.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(_.inferredGeometryType)&&(T.geometryType=SF.toJSON(_.inferredGeometryType)),this.sourceJSON=T,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),_.finish(b.assignedObjectIds)}};l([lk({Type:yl,ensureType:jn(yl)})],Tu.prototype,"itemType",void 0),l([p()],Tu.prototype,"type",void 0),l([p({constructOnly:!0})],Tu.prototype,"layer",void 0),l([p({readOnly:!0})],Tu.prototype,"_workerGeometryType",null),l([p()],Tu.prototype,"sourceJSON",void 0),Tu=l([k("esri.layers.graphics.sources.MemorySource")],Tu);function Zfe(e){return"portalItem"in e}const Jfe=e=>{let t=class extends e{get apiKey(){var n;return this._isOverridden("apiKey")?this._get("apiKey"):Zfe(this)?(n=this.portalItem)==null?void 0:n.apiKey:null}set apiKey(n){n!=null?this._override("apiKey",n):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return l([p({type:String})],t.prototype,"apiKey",null),t=l([k("esri.layers.mixins.APIKeyMixin")],t),t},gH={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},_H=Object.values(gH),wH=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${_H.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Yfe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${_H.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Kfe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function hOe(e){return wH.test(e)}function Hd(e){if(e==null)return null;const t=cr(e),n=(t==null?void 0:t.path.match(wH))||(t==null?void 0:t.path.match(Yfe));if(!n)return null;const[,r,i,s,o]=n,a=i.indexOf("/");return{title:kR(a!==-1?i.slice(a+1):i),serverType:gH[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function Xfe(e){const t=cr(e).path.match(Kfe);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function kR(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function Qfe(e,t){const n=[];if(e){const r=Hd(e);r!=null&&r.title&&n.push(r.title)}if(t){const r=kR(t);n.push(r)}if(n.length===2){if(n[0].toLowerCase().includes(n[1].toLowerCase()))return n[0];if(n[1].toLowerCase().includes(n[0].toLowerCase()))return n[1]}return n.join(" - ")}function vH(e){let t=uo(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function eme(e,t){return e&&EU($U(e,t))}function tme(e){let{url:t}=e;if(!t)return{url:t};t=$U(t,e.logger);const n=cr(t),r=Hd(n.path);let i;if(r!=null)r.sublayer!=null&&e.layer.layerId==null&&(i=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const s=Xfe(n.path);s!=null&&(t=s.serviceUrl,i=s.sublayerId)}return{url:EU(t),layerId:i}}function nme(e,t,n,r,i){pf(t,r,"url",i),r.url&&e.layerId!=null&&(r.url=mg(r.url,n,e.layerId.toString()))}function pOe(e){if(!e)return!1;const t=e.toLowerCase(),n=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),i=t.includes("/imageserver/wmsserver"),s=t.includes("/wmsserver");return n&&(r||i||s)}function fOe(e){var r;if(!e)return!1;const t=new Od(qi(e)),n=(r=t.authority)==null?void 0:r.toLowerCase();return n==="server.arcgisonline.com"||n==="services.arcgisonline.com"}const rme=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const n=Hd(this.url);if(n!=null&&n.title)return n.title}return this._get("title")||""}set title(n){this._set("title",n)}set url(n){this._set("url",eme(n,fe.getLogger(this)))}};return l([p()],t.prototype,"title",null),l([p({type:String})],t.prototype,"url",null),t=l([k("esri.layers.mixins.ArcGISService")],t),t};function ime(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function ug(e,t,n,r){var i=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(i,ug.prototype),i.expected=t,i.found=n,i.location=r,i.name="SyntaxError",i}function YM(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}function sme(e,t){var n,r={},i=(t=t!==void 0?t:{}).grammarSource,s={start:Uf},o=Uf,a="none",h=")",f=",",_="(",w="%",b="px",T="cm",M="mm",I="in",C="pt",N="pc",j="deg",z="rad",U="grad",K="turn",J="#",le=".",ue="e",be=/^[ \t\n\r]/,xe=/^[a-z\-]/,_e=/^[0-9a-fA-F]/,$e=/^[+\-]/,je=/^[0-9]/,Me=$i("none"),Et=sn("none",!1),wt=sn(")",!1),Je=sn(",",!1),re=$i("whitespace"),Ne=Cs([" ","	",`
`,"\r"],!1,!1),he=$i("function"),H=sn("(",!1),ce=$i("identifier"),nt=Cs([["a","z"],"-"],!1,!1),Xe=$i("percentage"),We=sn("%",!1),Le=$i("length"),Pt=sn("px",!1),$t=sn("cm",!1),Kt=sn("mm",!1),Kn=sn("in",!1),da=sn("pt",!1),ha=sn("pc",!1),pa=$i("angle"),ih=sn("deg",!1),sh=sn("rad",!1),oh=sn("grad",!1),bl=sn("turn",!1),Sl=$i("number"),ah=$i("color"),fa=sn("#",!1),Ki=Cs([["0","9"],["a","f"],["A","F"]],!1,!1),Tl=Cs(["+","-"],!1,!1),Ei=Cs([["0","9"]],!1,!1),Af=sn(".",!1),kf=sn("e",!1),Bu=function(){return[]},qu=function(D,se){return{type:"function",name:D,parameters:se||[]}},xl=function(D,se){return se.length>0?El(D,se,3):[D]},Rf=function(D){return{type:"quantity",value:D.value,unit:D.unit}},ma=function(D){return{type:"color",colorType:D.type,value:D.value}},ya=function(D){return D},Kg=function(){return ze()},lh=function(D){return{value:D,unit:"%"}},Hu=function(D){return{value:D,unit:"px"}},Lf=function(D){return{value:D,unit:"cm"}},uh=function(D){return{value:D,unit:"mm"}},yo=function(D){return{value:D,unit:"in"}},ch=function(D){return{value:D,unit:"pt"}},dh=function(D){return{value:D,unit:"pc"}},Wu=function(D){return{value:D,unit:"deg"}},go=function(D){return{value:D,unit:"rad"}},_o=function(D){return{value:D,unit:"grad"}},Nf=function(D){return{value:D,unit:"turn"}},Df=function(D){return{value:D,unit:null}},Ff=function(){return{type:"hex",value:ze()}},jf=function(D){return{type:"function",value:D}},zf=function(){return{type:"named",value:ze()}},hh=function(){return parseFloat(ze())},ie=0|t.peg$currPos,jt=ie,Ps=[{line:1,column:1}],Xn=ie,Zu=t.peg$maxFailExpected||[],Ie=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');o=s[t.startRule]}function ze(){return e.substring(jt,ie)}function sn(D,se){return{type:"literal",text:D,ignoreCase:se}}function Cs(D,se,we){return{type:"class",parts:D,inverted:se,ignoreCase:we}}function Vf(){return{type:"end"}}function $i(D){return{type:"other",description:D}}function Ju(D){var se,we=Ps[D];if(we)return we;if(D>=Ps.length)se=Ps.length-1;else for(se=D;!Ps[--se];);for(we={line:(we=Ps[se]).line,column:we.column};se<D;)e.charCodeAt(se)===10?(we.line++,we.column=1):we.column++,se++;return Ps[D]=we,we}function Xi(D,se,we){var et=Ju(D),It=Ju(se);return{source:i,start:{offset:D,line:et.line,column:et.column},end:{offset:se,line:It.line,column:It.column}}}function it(D){ie<Xn||(ie>Xn&&(Xn=ie,Zu=[]),Zu.push(D))}function ph(D,se,we){return new ug(ug.buildMessage(D,se),D,se,we)}function Uf(){var D;return(D=Gf())===r&&(D=Bf()),D}function Gf(){var D,se;return Ie++,D=ie,dn(),e.substr(ie,4)===a?(se=a,ie+=4):(se=r,Ie===0&&it(Et)),se!==r?(dn(),jt=D,D=Bu()):(ie=D,D=r),Ie--,D===r&&Ie===0&&it(Me),D}function Bf(){var D,se;if(D=[],(se=Yu())!==r)for(;se!==r;)D.push(se),se=Yu();else D=r;return D}function Yu(){var D,se,we,et;return D=ie,dn(),(se=hn())!==r?(dn(),(we=fh())===r&&(we=null),dn(),e.charCodeAt(ie)===41?(et=h,ie++):(et=r,Ie===0&&it(wt)),et!==r?(dn(),jt=D,D=qu(se,we)):(ie=D,D=r)):(ie=D,D=r),D}function fh(){var D,se,we,et,It,qt,Ve,Tt;if(D=ie,(se=mh())!==r){for(we=[],et=ie,It=dn(),e.charCodeAt(ie)===44?(qt=f,ie++):(qt=r,Ie===0&&it(Je)),qt===r&&(qt=null),Ve=dn(),(Tt=mh())!==r?et=It=[It,qt,Ve,Tt]:(ie=et,et=r);et!==r;)we.push(et),et=ie,It=dn(),e.charCodeAt(ie)===44?(qt=f,ie++):(qt=r,Ie===0&&it(Je)),qt===r&&(qt=null),Ve=dn(),(Tt=mh())!==r?et=It=[It,qt,Ve,Tt]:(ie=et,et=r);jt=D,D=xl(se,we)}else ie=D,D=r;return D}function mh(){var D,se;return D=ie,(se=yh())===r&&(se=Hf())===r&&(se=Ku())===r&&(se=gh()),se!==r&&(jt=D,se=Rf(se)),(D=se)===r&&(D=ie,(se=ga())!==r&&(jt=D,se=ma(se)),D=se),D}function dn(){var D,se;for(Ie++,D=[],se=e.charAt(ie),be.test(se)?ie++:(se=r,Ie===0&&it(Ne));se!==r;)D.push(se),se=e.charAt(ie),be.test(se)?ie++:(se=r,Ie===0&&it(Ne));return Ie--,se=r,Ie===0&&it(re),D}function hn(){var D,se,we;return Ie++,D=ie,(se=qf())!==r?(e.charCodeAt(ie)===40?(we=_,ie++):(we=r,Ie===0&&it(H)),we!==r?(jt=D,D=ya(se)):(ie=D,D=r)):(ie=D,D=r),Ie--,D===r&&(se=r,Ie===0&&it(he)),D}function qf(){var D,se,we;if(Ie++,D=ie,se=[],we=e.charAt(ie),xe.test(we)?ie++:(we=r,Ie===0&&it(nt)),we!==r)for(;we!==r;)se.push(we),we=e.charAt(ie),xe.test(we)?ie++:(we=r,Ie===0&&it(nt));else se=r;return se!==r&&(jt=D,se=Kg()),Ie--,(D=se)===r&&(se=r,Ie===0&&it(ce)),D}function yh(){var D,se,we;return Ie++,D=ie,dn(),(se=Un())!==r?(e.charCodeAt(ie)===37?(we=w,ie++):(we=r,Ie===0&&it(We)),we!==r?(jt=D,D=lh(se)):(ie=D,D=r)):(ie=D,D=r),Ie--,D===r&&Ie===0&&it(Xe),D}function Hf(){var D,se,we;return Ie++,D=ie,dn(),(se=Un())!==r?(e.substr(ie,2)===b?(we=b,ie+=2):(we=r,Ie===0&&it(Pt)),we!==r?(jt=D,D=Hu(se)):(ie=D,D=r)):(ie=D,D=r),D===r&&(D=ie,dn(),(se=Un())!==r?(e.substr(ie,2)===T?(we=T,ie+=2):(we=r,Ie===0&&it($t)),we!==r?(jt=D,D=Lf(se)):(ie=D,D=r)):(ie=D,D=r),D===r&&(D=ie,dn(),(se=Un())!==r?(e.substr(ie,2)===M?(we=M,ie+=2):(we=r,Ie===0&&it(Kt)),we!==r?(jt=D,D=uh(se)):(ie=D,D=r)):(ie=D,D=r),D===r&&(D=ie,dn(),(se=Un())!==r?(e.substr(ie,2)===I?(we=I,ie+=2):(we=r,Ie===0&&it(Kn)),we!==r?(jt=D,D=yo(se)):(ie=D,D=r)):(ie=D,D=r),D===r&&(D=ie,dn(),(se=Un())!==r?(e.substr(ie,2)===C?(we=C,ie+=2):(we=r,Ie===0&&it(da)),we!==r?(jt=D,D=ch(se)):(ie=D,D=r)):(ie=D,D=r),D===r&&(D=ie,dn(),(se=Un())!==r?(e.substr(ie,2)===N?(we=N,ie+=2):(we=r,Ie===0&&it(ha)),we!==r?(jt=D,D=dh(se)):(ie=D,D=r)):(ie=D,D=r)))))),Ie--,D===r&&Ie===0&&it(Le),D}function Ku(){var D,se,we;return Ie++,D=ie,(se=Un())!==r?(e.substr(ie,3)===j?(we=j,ie+=3):(we=r,Ie===0&&it(ih)),we!==r?(jt=D,D=Wu(se)):(ie=D,D=r)):(ie=D,D=r),D===r&&(D=ie,(se=Un())!==r?(e.substr(ie,3)===z?(we=z,ie+=3):(we=r,Ie===0&&it(sh)),we!==r?(jt=D,D=go(se)):(ie=D,D=r)):(ie=D,D=r),D===r&&(D=ie,(se=Un())!==r?(e.substr(ie,4)===U?(we=U,ie+=4):(we=r,Ie===0&&it(oh)),we!==r?(jt=D,D=_o(se)):(ie=D,D=r)):(ie=D,D=r),D===r&&(D=ie,(se=Un())!==r?(e.substr(ie,4)===K?(we=K,ie+=4):(we=r,Ie===0&&it(bl)),we!==r?(jt=D,D=Nf(se)):(ie=D,D=r)):(ie=D,D=r)))),Ie--,D===r&&(se=r,Ie===0&&it(pa)),D}function gh(){var D,se;return Ie++,D=ie,dn(),(se=Un())!==r?(jt=D,D=Df(se)):(ie=D,D=r),Ie--,D===r&&Ie===0&&it(Sl),D}function ga(){var D,se,we,et;if(Ie++,D=ie,e.charCodeAt(ie)===35?(se=J,ie++):(se=r,Ie===0&&it(fa)),se!==r){if(we=[],et=e.charAt(ie),_e.test(et)?ie++:(et=r,Ie===0&&it(Ki)),et!==r)for(;et!==r;)we.push(et),et=e.charAt(ie),_e.test(et)?ie++:(et=r,Ie===0&&it(Ki));else we=r;we!==r?(jt=D,D=Ff()):(ie=D,D=r)}else ie=D,D=r;return D===r&&(D=ie,(se=Yu())!==r&&(jt=D,se=jf(se)),(D=se)===r&&(D=ie,(se=qf())!==r&&(jt=D,se=zf()),D=se)),Ie--,D===r&&(se=r,Ie===0&&it(ah)),D}function Un(){var D,se,we,et,It,qt,Ve,Tt;for(D=ie,se=e.charAt(ie),$e.test(se)?ie++:(se=r,Ie===0&&it(Tl)),se===r&&(se=null),we=ie,et=[],It=e.charAt(ie),je.test(It)?ie++:(It=r,Ie===0&&it(Ei));It!==r;)et.push(It),It=e.charAt(ie),je.test(It)?ie++:(It=r,Ie===0&&it(Ei));if(e.charCodeAt(ie)===46?(It=le,ie++):(It=r,Ie===0&&it(Af)),It!==r){if(qt=[],Ve=e.charAt(ie),je.test(Ve)?ie++:(Ve=r,Ie===0&&it(Ei)),Ve!==r)for(;Ve!==r;)qt.push(Ve),Ve=e.charAt(ie),je.test(Ve)?ie++:(Ve=r,Ie===0&&it(Ei));else qt=r;qt!==r?we=et=[et,It,qt]:(ie=we,we=r)}else ie=we,we=r;if(we===r)if(we=[],et=e.charAt(ie),je.test(et)?ie++:(et=r,Ie===0&&it(Ei)),et!==r)for(;et!==r;)we.push(et),et=e.charAt(ie),je.test(et)?ie++:(et=r,Ie===0&&it(Ei));else we=r;if(we!==r){if(et=ie,e.charCodeAt(ie)===101?(It=ue,ie++):(It=r,Ie===0&&it(kf)),It!==r){if(qt=e.charAt(ie),$e.test(qt)?ie++:(qt=r,Ie===0&&it(Tl)),qt===r&&(qt=null),Ve=[],Tt=e.charAt(ie),je.test(Tt)?ie++:(Tt=r,Ie===0&&it(Ei)),Tt!==r)for(;Tt!==r;)Ve.push(Tt),Tt=e.charAt(ie),je.test(Tt)?ie++:(Tt=r,Ie===0&&it(Ei));else Ve=r;Ve!==r?et=It=[It,qt,Ve]:(ie=et,et=r)}else ie=et,et=r;et===r&&(et=null),jt=D,D=hh()}else ie=D,D=r;return D}function ui(D,se){return D.map(function(we){return we[se]})}function El(D,se,we){return[D].concat(ui(se,we))}if(n=o(),t.peg$library)return{peg$result:n,peg$currPos:ie,peg$FAILED:r,peg$maxFailExpected:Zu,peg$maxFailPos:Xn};if(n!==r&&ie===e.length)return n;throw n!==r&&ie<e.length&&it(Vf()),ph(Zu,Xn<e.length?e.charAt(Xn):null,Xn<e.length?Xi(Xn,Xn+1):Xi(Xn,Xn))}function bH(e){if(!e||e.length===0)return null;if(typeof e=="string"){const n=Uj(e);return n&&n.length!==0?n:null}const t=e.map(n=>{if(!Number.isFinite(n.scale)||n.scale<=0)throw new Y("effect:invalid-scale","scale must be finite and greater than 0",{stop:n});return{scale:n.scale,effects:Uj(n.value)}});t.sort((n,r)=>r.effects.length-n.effects.length);for(let n=0;n<t.length-1;n++){if(!iie(t[n].effects,t[n+1].effects))throw new Y("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[n].effects,b:t[n+1].effects});sie(t[n].effects,t[n+1].effects)}return t.sort((n,r)=>r.scale-n.scale),t}function Uj(e){let t;if(!e)return[];try{t=sme(e)}catch(n){throw new Y("effect:invalid-syntax","Invalid effect syntax",{value:e,error:n})}return t.map(n=>ome(n))}function ome(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return ame(e);case"opacity":return lme(e);case"hue-rotate":return ume(e);case"blur":return cme(e);case"drop-shadow":return dme(e);case"bloom":return hme(e)}}catch(t){throw t.details.filter=e,t}throw new Y("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function ame(e){let t=1;return Jg(e.parameters,1),e.parameters.length===1&&(t=Qo(e.parameters[0])),new O3(e.name,t)}function lme(e){let t=1;return Jg(e.parameters,1),e.parameters.length===1&&(t=Qo(e.parameters[0])),new q9(t)}function ume(e){let t=0;return Jg(e.parameters,1),e.parameters.length===1&&(t=_me(e.parameters[0])),new G9(t)}function cme(e){let t=0;return Jg(e.parameters,1),e.parameters.length===1&&(t=NR(e.parameters[0]),J0(t,e.parameters[0])),new F9(t)}function dme(e){const t=[];let n=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),n)throw new Y("effect:type-error","Accepts only one color",{});n=wme(r)}else{const i=NR(r);if(Object.isFrozen(t))throw new Y("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(i),t.length===3&&J0(i,r)}if(t.length<2||t.length>3)throw new Y("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new V9(t[0],t[1],t[2]||0,n||SH("black"))}function hme(e){let t=1,n=0,r=0;return Jg(e.parameters,3),e.parameters[0]&&(t=Qo(e.parameters[0])),e.parameters[1]&&(n=NR(e.parameters[1]),J0(n,e.parameters[1])),e.parameters[2]&&(r=Qo(e.parameters[2])),new N9(t,n,r)}function Jg(e,t){if(e.length>t)throw new Y("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function yE(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in LR)return"<length>";if(e.unit in RR)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function J0(e,t){if(e<0)throw new Y("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function pme(e){if(e.type!=="quantity"||e.unit!==null)throw new Y("effect:type-error",`Expected <double>, Actual: ${yE(e)}`,{term:e})}function fme(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new Y("effect:type-error",`Expected <double> or <percentage>, Actual: ${yE(e)}`,{term:e})}ime(ug,Error),ug.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n,r=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){r=e[n].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,s=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(i):i,o=this.location.source+":"+s.line+":"+s.column;if(r){var a=this.location.end,h=YM("",s.line.toString().length," "),f=r[i.line-1],_=(i.line===a.line?a.column:f.length+1)-i.column||1;t+=`
 --> `+o+`
`+h+` |
`+s.line+" | "+f+`
`+h+" | "+YM("",i.column-1," ")+YM("",_,"^")}else t+=`
 at `+o}return t},ug.buildMessage=function(e,t){var n={literal:function(f){return'"'+i(f.text)+'"'},class:function(f){var _=f.parts.map(function(w){return Array.isArray(w)?s(w[0])+"-"+s(w[1]):s(w)});return"["+(f.inverted?"^":"")+_.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(f){return f.description}};function r(f){return f.charCodeAt(0).toString(16).toUpperCase()}function i(f){return f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+r(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+r(_)})}function s(f){return f.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+r(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+r(_)})}function o(f){return n[f.type](f)}function a(f){var _,w,b=f.map(o);if(b.sort(),b.length>0){for(_=1,w=1;_<b.length;_++)b[_-1]!==b[_]&&(b[w]=b[_],w++);b.length=w}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}function h(f){return f?'"'+i(f)+'"':"end of input"}return"Expected "+a(e)+" but "+h(t)+" found."};const RR={deg:1,grad:.9,rad:180/Math.PI,turn:360};function mme(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&RR[e.unit]!=null))throw new Y("effect:type-error",`Expected <angle>, Actual: ${yE(e)}`,{term:e})}const LR={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function yme(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&LR[e.unit]!=null))throw new Y("effect:type-error",`Expected <length>, Actual: ${yE(e)}`,{term:e})}function Qo(e){fme(e);const t=e.value;return J0(t,e),e.unit==="%"?.01*t:t}function gme(e){return pme(e),J0(e.value,e),e.value}function _me(e){return mme(e),e.value*RR[e.unit]||0}function NR(e){return yme(e),e.value*LR[e.unit]||0}function wme(e){switch(e.colorType){case"hex":return Lne(e.value);case"named":return SH(e.value);case"function":return Sme(e.value)}}function SH(e){if(!g9(e))throw new Y("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Rne(e)}const vme=/^rgba?/i,bme=/^hsla?/i;function Sme(e){if(Jg(e.parameters,4),vme.test(e.name))return[Qo(e.parameters[0]),Qo(e.parameters[1]),Qo(e.parameters[2]),e.parameters[3]?Qo(e.parameters[3]):1];if(bme.test(e.name))return _9(gme(e.parameters[0]),Qo(e.parameters[1]),Qo(e.parameters[2]),e.parameters[3]?Qo(e.parameters[3]):1);throw new Y("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function f0(e,t,n){var r;try{return xme(e)}catch(i){(r=n==null?void 0:n.messages)==null||r.push(i)}return null}function m0(e,t,n,r){try{const i=Tme(e);lr(n,i,t)}catch(i){r.messages&&r.messages.push(i)}}function Tme(e){const t=bH(e);return t?oie(t)?t.map(n=>n.toJSON()):t.map(({scale:n,effects:r})=>({scale:n,value:r.map(i=>i.toJSON())})):null}function xme(e){if(!e||e.length===0)return null;if(Eme(e)){const t=[];for(const n of e)t.push({scale:n.scale,value:Gj(n.value)});return t}return Gj(e)}function Eme(e){const t=e[0];return!!t&&"scale"in t}function Gj(e){if(!(e!=null&&e.length))return"";const t=[];for(const n of e){let r=[];switch(n.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[ql(n,"amount")];break;case"blur":r=[ql(n,"radius","pt")];break;case"hue-rotate":r=[ql(n,"angle","deg")];break;case"drop-shadow":r=[ql(n,"xoffset","pt"),ql(n,"yoffset","pt"),ql(n,"blurRadius","pt"),$me(n,"color")];break;case"bloom":r=[ql(n,"strength"),ql(n,"radius","pt"),ql(n,"threshold")]}const i=`${n.type}(${r.filter(Boolean).join(" ")})`;bH(i),t.push(i)}return t.join(" ")}function ql(e,t,n){if(e[t]==null)throw new Y("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return n?e[t]+n:""+e[t]}function $me(e,t){if(e[t]==null)throw new Y("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const n=e[t];return`rgba(${n[0]||0}, ${n[1]||0}, ${n[2]||0}, ${n[3]/255||0})`}const Mme={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},Bj={read:{reader:f0},write:{allowNull:!0,writer:m0}},Ime={json:{read:!1,write:!1,origins:{"web-map":Bj,"portal-item":Bj}}},Pme=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return l([p(Mme)],t.prototype,"blendMode",void 0),l([p(Ime)],t.prototype,"effect",void 0),t=l([k("esri.layers.mixins.BlendLayer")],t),t},Cme=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return l([p({type:Object,json:{write:{overridePolicy:n=>({enabled:!!(n&&Object.keys(n).length>0)})}}})],t.prototype,"customParameters",void 0),t=l([k("esri.layers.mixins.CustomParametersMixin")],t),t},Ome="randomUUID"in crypto;function DR(){if(Ome)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=n=>e[n].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function mOe(){return`{${DR().toUpperCase()}}`}function Ame(){return`{${DR()}}`}function kme(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const TO=Ame(),TH=new Map,xH=new Map;async function yOe(e,t,n){if(!e||!n)return!1;if(!t)return!0;const r=new URL(e).host;let i=TH.get(r);if(!i){const s=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");i=(await Lt(s,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return i===t}async function qj(e,t,n=!1){var s,o,a;if(!e||!t)return!0;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),i=(s=xH.get(r))==null?void 0:s.entries();if(i){for(const[h,f]of i)if(f.name===t){const _=!((o=f.stack)!=null&&o.hasForwardEdits());if(!_&&n){const[{deleteForwardEdits:w},{default:b}]=await Promise.all([pe(()=>import("./deleteForwardEdits-BDiKdZs_.js"),[]),pe(()=>import("./DeleteForwardEditsParameters-BxD6u-er.js"),[])]),T=await w(r,h,new b({sessionId:TO,moment:f.moment}));return T.success&&((a=f.stack)==null||a.clearForwardEdits()),T.success}return _}}return!0}function $2(e,t){var i;if(!e)return!1;const n=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=(i=xH.get(n))==null?void 0:i.entries();if(r){for(const[s,o]of r)if(o.name===t)return o.lockType==="edit"}return!1}const FR=new ju.EventEmitter;function EH(e){return FR.on("apply-edits",new WeakRef(e))}function $H(e){return FR.on("update-moment",new WeakRef(e))}function Hj(e,t,n=null,r=!1){const i=xs();return r=t==null||r,FR.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:n,mayReceiveServiceEdits:r,result:i.promise}),i}const MH=Symbol();function gOe(e){return e!=null&&typeof e=="object"&&MH in e}function J_(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function Fv(e,t,n){const r=new URL(e).host,i=TH.get(r),s=o=>!o||o===i;return s(t)&&s(n)||t===n}const Rme=e=>{var t;let n=class extends e{constructor(...r){super(...r),this[t]=!0,this._applyEditsHandler=i=>{const{serviceUrl:s,layerId:o,gdbVersion:a,mayReceiveServiceEdits:h,result:f}=i,_=s===this.url,w=o!=null&&this.layerId!=null&&o===this.layerId,b=J_(this),T=J_(this)&&Fv(s,a,this.gdbVersion);if(!_||b&&!T||!w&&!h)return;const M=f.then(I=>{var j;if(this.lastEditsEventDate=new Date,w&&(I.addedFeatures.length||I.updatedFeatures.length||I.deletedFeatures.length||I.addedAttachments.length||I.updatedAttachments.length||I.deletedAttachments.length))return this.emit("edits",q(I)),I;const C=(j=I.editedFeatures)==null?void 0:j.find(({layerId:z})=>z===this.layerId);if(C){const{adds:z,updates:U,deletes:K}=C.editedFeatures,J={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:z?z.map(({attributes:le})=>({objectId:this.objectIdField&&le[this.objectIdField],globalId:this.globalIdField&&le[this.globalIdField]})):[],deletedFeatures:K?K.map(({attributes:le})=>({objectId:this.objectIdField&&le[this.objectIdField],globalId:this.globalIdField&&le[this.globalIdField]})):[],updatedFeatures:U?U.map(({current:{attributes:le}})=>({objectId:this.objectIdField&&le[this.objectIdField],globalId:this.globalIdField&&le[this.globalIdField]})):[],editedFeatures:q(I.editedFeatures),exceededTransferLimit:!1,historicMoment:q(I.historicMoment)};return this.emit("edits",J),J}const N={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:q(I.editedFeatures),exceededTransferLimit:!1,historicMoment:q(I.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(s,a,N.historicMoment)&&this.emit("edits",N),N}).then(I=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(s,a,I.historicMoment)&&(this.historicMoment=I.historicMoment),I));this.emit("apply-edits",{result:M})},this._updateMomentHandler=i=>{const{serviceUrl:s,gdbVersion:o,moment:a}=i,h=s===this.url,f=J_(this),_=J_(this)&&Fv(s,o,this.gdbVersion),w=J_(this)&&!Fv(s,this.gdbVersion,null);h&&f&&_&&w&&"historicMoment"in this&&this.historicMoment!==a&&(this.historicMoment=a)},this.when().then(()=>{this.addHandles(EH(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles($H(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(r,i,s){return"historicMoment"in this&&this.historicMoment!==s&&$2(r,i)}};return t=MH,l([p()],n.prototype,"lastEditsEventDate",void 0),n=l([k("esri.layers.mixins.EditBusLayer")],n),n};var xO;let _y=xO=class extends ne{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new xO({mapLayerId:e,gdbVersion:t})}};l([ke({mapLayer:"map-layer"})],_y.prototype,"type",void 0),l([p({type:Mt,json:{write:!0}})],_y.prototype,"mapLayerId",void 0),l([p({type:String,json:{write:!0}})],_y.prototype,"gdbVersion",void 0),_y=xO=l([k("esri.layers.support.source.MapLayerSource")],_y);var EO;let au=EO=class extends ne{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:n,spatialReference:r,geometryType:i}=this,s={workspaceId:e,query:t,oidFields:n,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:i};return new EO(s)}};l([ke({queryTable:"query-table"})],au.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],au.prototype,"workspaceId",void 0),l([p({type:String,json:{write:!0}})],au.prototype,"query",void 0),l([p({type:String,json:{write:!0}})],au.prototype,"oidFields",void 0),l([p({type:dt,json:{write:!0}})],au.prototype,"spatialReference",void 0),l([ke(Hie)],au.prototype,"geometryType",void 0),au=EO=l([k("esri.layers.support.source.QueryTableDataSource")],au);var $O;let wy=$O=class extends ne{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new $O({workspaceId:e,dataSourceName:t})}};l([ke({raster:"raster"})],wy.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],wy.prototype,"dataSourceName",void 0),l([p({type:String,json:{write:!0}})],wy.prototype,"workspaceId",void 0),wy=$O=l([k("esri.layers.support.source.RasterDataSource")],wy);var MO;let Mp=MO=class extends ne{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:n}=this;return new MO({workspaceId:e,gdbVersion:t,dataSourceName:n})}};l([ke({table:"table"})],Mp.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],Mp.prototype,"workspaceId",void 0),l([p({type:String,json:{write:!0}})],Mp.prototype,"gdbVersion",void 0),l([p({type:String,json:{write:!0}})],Mp.prototype,"dataSourceName",void 0),Mp=MO=l([k("esri.layers.support.source.TableDataSource")],Mp);var IO,PO;const Lme=hr()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let ms=IO=class extends ne{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,n){return Wj()(e,t,n)}castLeftTableSource(e){return co(CO(),e)}readRightTableSource(e,t,n){return Wj()(e,t,n)}castRightTableSource(e){return co(CO(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:n,rightTableSource:r,joinType:i}=this,s={leftTableKey:e,rightTableKey:t,leftTableSource:(n==null?void 0:n.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:i};return new IO(s)}};l([ke({joinTable:"join-table"})],ms.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],ms.prototype,"leftTableKey",void 0),l([p({type:String,json:{write:!0}})],ms.prototype,"rightTableKey",void 0),l([p({json:{write:!0}})],ms.prototype,"leftTableSource",void 0),l([de("leftTableSource")],ms.prototype,"readLeftTableSource",null),l([kt("leftTableSource")],ms.prototype,"castLeftTableSource",null),l([p({json:{write:!0}})],ms.prototype,"rightTableSource",void 0),l([de("rightTableSource")],ms.prototype,"readRightTableSource",null),l([kt("rightTableSource")],ms.prototype,"castRightTableSource",null),l([ke(Lme)],ms.prototype,"joinType",void 0),ms=IO=l([k("esri.layers.support.source.JoinTableDataSource")],ms);let KM=null;function Wj(){return KM||(KM=Ag({types:CO()})),KM}let XM=null;function CO(){return XM||(XM={key:"type",base:null,typeMap:{"data-layer":ea,"map-layer":_y}}),XM}const Nme={key:"type",base:null,typeMap:{"join-table":ms,"query-table":au,raster:wy,table:Mp}};let ea=PO=class extends ne{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new PO({fields:e,dataSource:t})}};l([ke({dataLayer:"data-layer"})],ea.prototype,"type",void 0),l([p({type:[AR],json:{write:!0}})],ea.prototype,"fields",void 0),l([p({types:Nme,json:{write:!0}})],ea.prototype,"dataSource",void 0),ea=PO=l([k("esri.layers.support.source.DataLayerSource")],ea),ea.from=jn(ea);let Ip=class extends vt(ne){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};l([p({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Ip.prototype,"onFields",void 0),l([p({type:String,json:{write:!0}})],Ip.prototype,"operator",void 0),l([p({type:String,json:{write:!0}})],Ip.prototype,"searchTerm",void 0),l([p({type:String,json:{write:!0}})],Ip.prototype,"searchType",void 0),Ip=l([k("esri.rest.support.FullTextSearch")],Ip);const Dme=Ip;var OO;const Zj=new pt({upperLeft:"upper-left",lowerLeft:"lower-left"});let Pp=OO=class extends ne{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new OO(q({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};l([p({type:Xt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Pp.prototype,"extent",void 0),l([p({type:["view","edit"],json:{write:!0}})],Pp.prototype,"mode",void 0),l([p({type:String,json:{read:Zj.read,write:Zj.write}})],Pp.prototype,"originPosition",void 0),l([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Pp.prototype,"tolerance",void 0),Pp=OO=l([k("esri.rest.support.QuantizationParameters")],Pp);const IH=Pp,Fme=new pt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var AO;const Jj=new pt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Ho=AO=class extends ne{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=q(e))}clone(){return new AO({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:q(this.statisticParameters)})}};l([p({type:Number,json:{write:!0}})],Ho.prototype,"maxPointCount",void 0),l([p({type:Number,json:{write:!0}})],Ho.prototype,"maxRecordCount",void 0),l([p({type:Number,json:{write:!0}})],Ho.prototype,"maxVertexCount",void 0),l([p({type:String,json:{write:!0}})],Ho.prototype,"onStatisticField",void 0),l([p({type:String,json:{write:!0}})],Ho.prototype,"outStatisticFieldName",void 0),l([p({type:String,json:{read:{source:"statisticType",reader:Jj.read},write:{target:"statisticType",writer:Jj.write}}})],Ho.prototype,"statisticType",void 0),l([p({type:Object})],Ho.prototype,"statisticParameters",void 0),l([ge("statisticParameters")],Ho.prototype,"writeStatisticParameters",null),Ho=AO=l([k("esri.rest.support.StatisticDefinition")],Ho);const jme=Ho;var M2;const zme=new pt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let rt=M2=class extends ne{static from(e){return bx(M2,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const n={};for(const r in e){const i=e[r];Array.isArray(i)?n[r]=i.map(s=>s instanceof Date?s.getTime():s):i instanceof Date?n[r]=i.getTime():n[r]=i}t.parameterValues=n}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new M2(q({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};rt.MAX_MAX_RECORD_COUNT_FACTOR=5,l([p({json:{write:!0}})],rt.prototype,"aggregateIds",void 0),l([p({type:Boolean,json:{write:!0}})],rt.prototype,"cacheHint",void 0),l([p({type:Boolean,json:{default:!1,write:!0}})],rt.prototype,"compactGeometryEnabled",void 0),l([p({json:{write:!0}})],rt.prototype,"datumTransformation",void 0),l([kt("datumTransformation")],rt.prototype,"castDatumTransformation",null),l([p({type:Boolean,json:{default:!1,write:!0}})],rt.prototype,"defaultSpatialReferenceEnabled",void 0),l([p({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],rt.prototype,"distance",void 0),l([p({type:ea,json:{write:!0}})],rt.prototype,"dynamicDataSource",void 0),l([p({type:String,json:{write:!0}})],rt.prototype,"formatOf3DObjects",void 0),l([p({type:[Dme],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],rt.prototype,"fullText",void 0),l([p({type:String,json:{write:!0}})],rt.prototype,"gdbVersion",void 0),l([p({types:Tf,json:{read:Du,write:!0}})],rt.prototype,"geometry",void 0),l([p({type:Number,json:{write:!0}})],rt.prototype,"geometryPrecision",void 0),l([p({type:[String],json:{write:!0}})],rt.prototype,"groupByFieldsForStatistics",void 0),l([p({type:String,json:{write:!0}})],rt.prototype,"having",void 0),l([p({type:Date})],rt.prototype,"historicMoment",void 0),l([ge("historicMoment")],rt.prototype,"writeHistoricMoment",null),l([p({type:Number,json:{write:!0}})],rt.prototype,"maxAllowableOffset",void 0),l([p({type:Number,cast:e=>e<1?1:e>rt.MAX_MAX_RECORD_COUNT_FACTOR?rt.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],rt.prototype,"maxRecordCountFactor",void 0),l([p({type:["xyFootprint"],json:{write:!0}})],rt.prototype,"multipatchOption",void 0),l([p({type:Number,json:{read:{source:"resultRecordCount"}}})],rt.prototype,"num",void 0),l([p({json:{write:!0}})],rt.prototype,"objectIds",void 0),l([p({type:[String],json:{write:!0}})],rt.prototype,"orderByFields",void 0),l([p({type:[String],json:{write:!0}})],rt.prototype,"outFields",void 0),l([p({type:dt,json:{name:"outSR",write:!0}})],rt.prototype,"outSpatialReference",void 0),l([p({type:[jme],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],rt.prototype,"outStatistics",void 0),l([p({json:{write:!0}})],rt.prototype,"parameterValues",void 0),l([ge("parameterValues")],rt.prototype,"writeParameterValues",null),l([p({type:gt,json:{write:!0}})],rt.prototype,"pixelSize",void 0),l([p({type:IH,json:{write:!0}})],rt.prototype,"quantizationParameters",void 0),l([p({type:[Object],json:{write:!0}})],rt.prototype,"rangeValues",void 0),l([p({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],rt.prototype,"relationParameter",void 0),l([p({type:String,json:{write:!0}})],rt.prototype,"resultType",void 0),l([p({type:Boolean,json:{default:!1,write:!0}})],rt.prototype,"returnCentroid",void 0),l([p({type:Boolean,json:{default:!1,write:!0}})],rt.prototype,"returnDistinctValues",void 0),l([p({type:Boolean,json:{default:!0,write:!0}})],rt.prototype,"returnExceededLimitFeatures",void 0),l([p({type:Boolean,json:{write:!0}})],rt.prototype,"returnGeometry",void 0),l([p({type:Boolean,json:{default:!1,write:!0}})],rt.prototype,"returnQueryGeometry",void 0),l([p({type:Boolean,json:{default:!1,write:!0}})],rt.prototype,"returnM",void 0),l([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],rt.prototype,"returnZ",void 0),l([p({type:dt,json:{write:!0}})],rt.prototype,"sourceSpatialReference",void 0),l([ke(Fme,{ignoreUnknown:!1,name:"spatialRel"})],rt.prototype,"spatialRelationship",void 0),l([p({type:Number,json:{read:{source:"resultOffset"}}})],rt.prototype,"start",void 0),l([ge("start"),ge("num")],rt.prototype,"writeStart",null),l([p({type:String,json:{write:!0}})],rt.prototype,"sqlFormat",void 0),l([p({type:String,json:{write:!0}})],rt.prototype,"text",void 0),l([p({type:ur,json:{write:!0}})],rt.prototype,"timeExtent",void 0),l([p({type:Boolean,json:{default:!1,write:!0}})],rt.prototype,"timeReferenceUnknownClient",void 0),l([ke(zme,{ignoreUnknown:!1}),p({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],rt.prototype,"units",void 0),l([p({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],rt.prototype,"where",void 0),l([ge("where")],rt.prototype,"writeWhere",null),rt=M2=l([k("esri.rest.support.Query")],rt);const gl=rt;var kO;const QM=new pt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),eI=new pt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let qa=kO=class extends ne{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:n,spatialRelationship:r,timeExtent:i,objectIds:s,units:o,distance:a}=this;return new gl({geometry:q(n),objectIds:q(s),spatialRelationship:r,timeExtent:q(i),where:t,units:o,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:n,timeExtent:r,objectIds:i,units:s,distance:o}=this;return new kO({geometry:q(t),objectIds:q(i),spatialRelationship:n,timeExtent:q(r),where:e,units:s,distance:o})}};l([p({type:String,json:{write:!0}})],qa.prototype,"where",void 0),l([p({types:Tf,json:{write:!0}})],qa.prototype,"geometry",void 0),l([p({type:QM.apiValues,json:{name:"spatialRel",read:{reader:QM.read},write:{allowNull:!1,writer:QM.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],qa.prototype,"spatialRelationship",void 0),l([p({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],qa.prototype,"distance",void 0),l([p({type:[Number],json:{write:!0}})],qa.prototype,"objectIds",void 0),l([p({type:eI.apiValues,json:{read:eI.read,write:{writer:eI.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],qa.prototype,"units",void 0),l([p({type:ur,json:{write:!0}})],qa.prototype,"timeExtent",void 0),qa=kO=l([k("esri.layers.support.FeatureFilter")],qa);const Vme=qa;var RO;const Yj={read:{reader:f0},write:{writer:m0,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},Kj={read:{reader:f0},write:{writer:m0,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},Xj={name:"showExcludedLabels",default:!0};let Cp=RO=class extends ne{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var r,i;const n=super.write(e,t);if(t!=null&&t.origin){if(n.filter){const s=Object.keys(n.filter);if(s.length>1||s[0]!=="where")return(r=t.messages)==null||r.push(new Y("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in n)return(i=t.messages)==null||i.push(new Y("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return n}clone(){return new RO({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};l([p({type:Vme,json:{write:{allowNull:!0,writer(e,t,n,r){const i=e==null?void 0:e.write({},r);i&&Object.keys(i).length!==0?lr(n,i,t):lr(n,null,t)}}}})],Cp.prototype,"filter",void 0),l([p({json:{read:f0,write:{writer:m0,allowNull:!0},origins:{"web-map":Yj,"portal-item":Yj}}})],Cp.prototype,"includedEffect",void 0),l([p({json:{read:f0,write:{writer:m0,allowNull:!0},origins:{"web-map":Kj,"portal-item":Kj}}})],Cp.prototype,"excludedEffect",void 0),l([p({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":Xj,"portal-item":Xj}}})],Cp.prototype,"excludedLabelsVisible",void 0),Cp=RO=l([k("esri.layers.support.FeatureEffect")],Cp);const Ume=Cp,Qj={write:{allowNull:!0}},Gme={type:Ume,json:{origins:{"web-map":Qj,"portal-item":Qj}}},Bme=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return l([p(Gme)],t.prototype,"featureEffect",void 0),t=l([k("esri.layers.mixins.FeatureEffectLayer")],t),t};var Xw;const FT=hr()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),PH=FT.jsonValues.slice();kK(PH,"orthometric");const jv=hr()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Wo=Xw=class extends ne{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,n){return FT.write(e,t,n)}readHeightModel(e,t,n){return FT.read(e)||(n!=null&&n.messages&&n.messages.push(qme(e,{context:n})),null)}readHeightUnit(e,t,n){return jv.read(e)||(n!=null&&n.messages&&n.messages.push(e6(e,{context:n})),null)}readHeightUnitService(e,t,n){return QU(e)||jv.read(e)||(n!=null&&n.messages&&n.messages.push(e6(e,{context:n})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new Xw({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const n=e9(t);return new Xw({heightModel:e.heightModel,heightUnit:n??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new Xw;return t.read(e,{origin:"web-scene"}),t}};function e6(e,t){return new Es("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function qme(e,t){return new Es("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}l([p({type:FT.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:PH,default:"ellipsoidal"}}}})],Wo.prototype,"heightModel",void 0),l([ge("web-scene","heightModel")],Wo.prototype,"writeHeightModel",null),l([de(["web-scene","service"],"heightModel")],Wo.prototype,"readHeightModel",null),l([p({type:jv.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:jv.jsonValues,write:jv.write}}}})],Wo.prototype,"heightUnit",void 0),l([de("web-scene","heightUnit")],Wo.prototype,"readHeightUnit",null),l([de("service","heightUnit")],Wo.prototype,"readHeightUnitService",null),l([p({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Wo.prototype,"vertCRS",void 0),l([de("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Wo.prototype,"readVertCRS",null),Wo=Xw=l([k("esri.geometry.HeightModelInfo")],Wo);const gE=Wo;var LO;let Qw=LO=class extends ne{constructor(e){super(e)}async collectRequiredFields(e,t){return ai(e,t,this.expression)}clone(){return new LO({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};l([p({type:String,json:{write:!0}})],Qw.prototype,"expression",void 0),l([p({type:String,json:{write:!0}})],Qw.prototype,"title",void 0),Qw=LO=l([k("esri.symbols.support.FeatureExpressionInfo")],Qw);const t6=Qw;function wOe(e){return 1/(wR[e]||1)}function Hme(){const e=Object.keys(wR);return eV(e,"decimal-degrees"),e.sort(),e}const Wme=Hme();var NO;const Vb=hr()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),n6=new pt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let lu=NO=class extends ne{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,n,r){t[n]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new NO({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&YK(this.featureExpressionInfo,e.featureExpressionInfo)}};l([p({type:t6,json:{write:!0}})],lu.prototype,"featureExpressionInfo",void 0),l([de("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],lu.prototype,"readFeatureExpressionInfo",null),l([ge("featureExpressionInfo",{featureExpressionInfo:{type:t6},"featureExpression.value":{type:[0]}})],lu.prototype,"writeFeatureExpressionInfo",null),l([p({type:Vb.apiValues,nonNullable:!0,json:{type:Vb.jsonValues,read:Vb.read,write:{writer:Vb.write,isRequired:!0}}})],lu.prototype,"mode",null),l([p({type:Number,json:{write:!0}})],lu.prototype,"offset",void 0),l([p({type:Wme,json:{type:String,read:n6.read,write:n6.write}})],lu.prototype,"unit",null),lu=NO=l([k("esri.symbols.support.ElevationInfo")],lu);const Zme=lu;let vy=class extends ne{constructor(t){super(t),this.description=null,this.label=null,this.type=null}};l([p({type:String,json:{write:!0}})],vy.prototype,"description",void 0),l([p({type:String,json:{write:!0}})],vy.prototype,"label",void 0),l([p()],vy.prototype,"type",void 0),vy=l([k("esri.tables.elements.AttributeTableElement")],vy);const Mg=vy;var DO;let ev=DO=class extends Mg{constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return new DO({description:this.description,displayType:this.displayType,label:this.label})}};l([p({type:["auto"],json:{write:!0}})],ev.prototype,"displayType",void 0),l([p({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],ev.prototype,"type",void 0),ev=DO=l([k("esri.tables.elements.AttributeTableAttachmentElement")],ev);const r6=ev;var FO;let tv=FO=class extends Mg{constructor(e){super(e),this.fieldName=null,this.type="field"}clone(){return new FO({description:this.description,fieldName:this.fieldName,label:this.label})}};l([p({type:String,json:{write:!0}})],tv.prototype,"fieldName",void 0),l([p({type:String,json:{read:!1,write:!0}})],tv.prototype,"type",void 0),tv=FO=l([k("esri.tables.elements.AttributeTableFieldElement")],tv);const i6=tv;var jO;let nv=jO=class extends Mg{constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return new jO({description:this.description,label:this.label,relationshipId:this.relationshipId})}};l([p({type:Number,json:{write:!0}})],nv.prototype,"relationshipId",void 0),l([p({type:["relationship"],json:{read:!1,write:!0}})],nv.prototype,"type",void 0),nv=jO=l([k("esri.tables.elements.AttributeTableRelationshipElement")],nv);const s6=nv;function CH(e){return{typesWithGroup:{base:Mg,key:"type",typeMap:{attachment:r6,field:i6,group:e,relationship:s6}},typesWithoutGroup:{base:Mg,key:"type",typeMap:{attachment:r6,field:i6,relationship:s6}}}}function OH(e,t,n=!0){if(!e)return null;const r=n?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(i=>r[i.type]).map(i=>r[i.type].fromJSON(i))}function AH(e,t,n=!0){if(!e)return null;const r=n?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(i=>r[i.type]).map(i=>i.toJSON())}function kH(e,t,n=!0){return e?e.map(r=>co(n?t.typesWithGroup:t.typesWithoutGroup,r)):null}var zO;let xu=zO=class extends Mg{constructor(e){super(e),this.elements=null,this.type="group"}castElements(e){return kH(e,tI,!1)}readElements(e,t){return OH(t.attributeTableElements,tI,!1)}writeElements(e,t){t.attributeTableElements=AH(e,tI,!1)}clone(){return new zO({description:this.description,elements:q(this.elements),label:this.label})}};l([p({json:{write:!0}})],xu.prototype,"elements",void 0),l([kt("elements")],xu.prototype,"castElements",null),l([de("elements",["attributeTableElements"])],xu.prototype,"readElements",null),l([ge("elements")],xu.prototype,"writeElements",null),l([p({type:String,json:{read:!1,write:!0}})],xu.prototype,"type",void 0),xu=zO=l([k("esri.tables.elements.AttributeTableGroupElement")],xu);const tI=CH(xu),Jme=xu;var VO;const nI=CH(Jme);let Qc=VO=class extends ne{constructor(e){super(e),this.elements=null,this.orderByFields=null}castElements(e){return kH(e,nI)}readElements(e,t){return OH(t.attributeTableElements,nI)}writeElements(e,t){t.attributeTableElements=AH(e,nI)}clone(){return new VO({elements:q(this.elements),orderByFields:this.orderByFields})}};l([p({json:{write:!0}})],Qc.prototype,"elements",void 0),l([kt("elements")],Qc.prototype,"castElements",null),l([de("elements",["attributeTableElements"])],Qc.prototype,"readElements",null),l([ge("elements")],Qc.prototype,"writeElements",null),l([p({type:[Object],json:{write:!0}})],Qc.prototype,"orderByFields",void 0),Qc=VO=l([k("esri.tables.AttributeTableTemplate")],Qc);const Yme=Qc,Kme={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Mr}}},jR={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,n){t[n]=!e}}}},zR={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Mr}}},Xme={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:pf}}},Qme={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Mr}}},eye={value:null,type:Zme,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Mr}}};function bOe(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const RH={write:{enabled:!0,layerContainerTypes:Mr},read:!0},UO={type:Number,json:{origins:{"web-document":RH,"portal-item":{write:!0}}}},tye={...UO,json:{...UO.json,origins:{"web-document":{...RH,write:{enabled:!0,layerContainerTypes:Mr,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,n)=>{var r;return n&&n.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?(r=t.layerDefinition)!=null&&r.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?t0(t.layerDefinition.drawingInfo.transparency):void 0:t0(t.drawingInfo.transparency)}}}},SOe={type:Xt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const n=Xt.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(n.spatialReference=dt.fromJSON(t.spatialReference)),n}}}},read:!1}},nye={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},rye={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:Mr}}},name:"layerDefinition.minScale",write:!0}},iye={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:Mr}}},name:"layerDefinition.maxScale",write:!0}},LH={json:{write:{ignoreOrigin:!0,layerContainerTypes:Mr},origins:{"web-map":{read:!1,write:!1}}}},sye={type:Yme,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}};let uu=class extends vt(ne){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};l([p()],uu.prototype,"creatorField",void 0),l([p()],uu.prototype,"creationDateField",void 0),l([p()],uu.prototype,"editorField",void 0),l([p()],uu.prototype,"editDateField",void 0),l([p()],uu.prototype,"realm",void 0),l([p(CT("dateFieldsTimeReference",!0))],uu.prototype,"timeZone",void 0),uu=l([k("esri.layers.support.EditFieldsInfo")],uu);const oye=uu;let el=class extends vt(ne){constructor(t){super(t)}};l([p({constructOnly:!0,json:{write:!0}})],el.prototype,"name",void 0),l([p({constructOnly:!0,json:{write:!0}})],el.prototype,"fields",void 0),l([p({constructOnly:!0,json:{write:!0}})],el.prototype,"isAscending",void 0),l([p({constructOnly:!0,json:{write:!0}})],el.prototype,"indexType",void 0),l([p({constructOnly:!0,json:{write:!0}})],el.prototype,"isUnique",void 0),l([p({constructOnly:!0,json:{write:!0}})],el.prototype,"description",void 0),el=l([k("esri.layers.support.FeatureIndex")],el);async function NH(e,t,n){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=DH(e));const r=aye(e),i=e.capabilities.query.supportsPagination;t.start=0,t.num=r;let s=null;for(;;){const o=await e.source.queryFeaturesJSON(t,n);if(s==null?s=o:s.features=s.features.concat(o.features),s.exceededTransferLimit=o.exceededTransferLimit,!i||!o.exceededTransferLimit)break;t.start+=r}return s}function aye(e){return DH(e)*lye(e)}function lye(e){return e.capabilities.query.maxRecordCount||2e3}function DH(e){return e.capabilities.query.supportsMaxRecordCountFactor?gl.MAX_MAX_RECORD_COUNT_FACTOR:1}var GO;let br=GO=class extends ne{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new GO(q({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};l([p({type:[String],json:{write:!0}})],br.prototype,"attachmentTypes",void 0),l([p({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],br.prototype,"attachmentsWhere",void 0),l([p({type:Boolean,json:{write:!0}})],br.prototype,"cacheHint",void 0),l([p({type:[String],json:{write:!0}})],br.prototype,"keywords",void 0),l([p({type:[String],json:{write:!0}})],br.prototype,"globalIds",void 0),l([p({json:{write:!0}})],br.prototype,"name",void 0),l([p({type:Number,json:{read:{source:"resultRecordCount"}}})],br.prototype,"num",void 0),l([p({type:[Number],json:{write:!0}})],br.prototype,"objectIds",void 0),l([p({type:Boolean,json:{default:!1,write:!0}})],br.prototype,"returnMetadata",void 0),l([p({type:[Number],json:{write:!0}})],br.prototype,"size",void 0),l([p({type:Number,json:{read:{source:"resultOffset"}}})],br.prototype,"start",void 0),l([ge("start"),ge("num")],br.prototype,"writeStart",null),l([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],br.prototype,"where",void 0),br=GO=l([k("esri.rest.support.AttachmentQuery")],br),br.from=jn(br);const uye=br;var BO;let Sn=BO=class extends ne{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new BO(q({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};l([p({type:Boolean,json:{write:!0}})],Sn.prototype,"cacheHint",void 0),l([p({type:ea,json:{write:!0}})],Sn.prototype,"dynamicDataSource",void 0),l([p({type:String,json:{write:!0}})],Sn.prototype,"gdbVersion",void 0),l([p({type:Number,json:{write:!0}})],Sn.prototype,"geometryPrecision",void 0),l([p({type:Date})],Sn.prototype,"historicMoment",void 0),l([ge("historicMoment")],Sn.prototype,"_writeHistoricMoment",null),l([p({type:Number,json:{write:!0}})],Sn.prototype,"maxAllowableOffset",void 0),l([p({json:{write:!0}})],Sn.prototype,"objectIds",void 0),l([p({type:[String],json:{write:!0}})],Sn.prototype,"orderByFields",void 0),l([p({type:[String],json:{write:!0}})],Sn.prototype,"outFields",void 0),l([p({type:dt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Sn.prototype,"outSpatialReference",void 0),l([p({json:{write:!0}})],Sn.prototype,"relationshipId",void 0),l([p({type:Number,json:{read:{source:"resultOffset"}}})],Sn.prototype,"start",void 0),l([ge("start"),ge("num")],Sn.prototype,"writeStart",null),l([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Sn.prototype,"num",void 0),l([p({json:{write:!0}})],Sn.prototype,"returnGeometry",void 0),l([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Sn.prototype,"returnM",void 0),l([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Sn.prototype,"returnZ",void 0),l([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Sn.prototype,"where",void 0),Sn=BO=l([k("esri.rest.support.RelationshipQuery")],Sn),Sn.from=jn(Sn);const VR=Sn,EOe=Object.freeze(Object.defineProperty({__proto__:null,default:VR},Symbol.toStringTag,{value:"Module"})),qO=new pt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function cye(e,t,n,r){const i=await rh(e);if(await UR(e,t,r),!i.addAttachment)throw new Y(r,"Layer source does not support addAttachment capability");return i.addAttachment(t,n)}function UR(e,t,n){var s,o;const{attributes:r}=t,{objectIdField:i}=e;return(o=(s=e.capabilities)==null?void 0:s.data)!=null&&o.supportsAttachment?t?r?i&&r[i]?Promise.resolve():Promise.reject(new Y(n,`feature is missing the identifying attribute ${i}`)):Promise.reject(new Y(n,"'attributes' are required on a feature to query attachments")):Promise.reject(new Y(n,"A feature is required to add/delete/update attachments")):Promise.reject(new Y(n,"this layer doesn't support attachments"))}async function dye(e,t,n,r,i){const s=await rh(e);if(await UR(e,t,i),!s.updateAttachment)throw new Y(i,"Layer source does not support updateAttachment capability");return s.updateAttachment(t,n,r)}async function hye(e,t,n){const{applyEdits:r}=await pe(()=>import("./editingSupport-C5jn2YP9.js"),__vite__mapDeps([147,148])),i=await e.load();let s=n;return i.type==="feature"&&i.infoFor3D&&t.deleteFeatures!=null&&i.globalIdField!=null&&(s={...s,globalIdToObjectId:await Aye(i,t.deleteFeatures,i.globalIdField)}),r(i,i.source,t,n)}async function pye(e,t,n){const{uploadAssets:r}=await pe(()=>import("./editingSupport-C5jn2YP9.js"),__vite__mapDeps([147,148])),i=await e.load();return r(i,i.source,t,n)}async function fye(e,t,n,r){const i=await rh(e);if(await UR(e,t,r),!i.deleteAttachments)throw new Y(r,"Layer source does not support deleteAttachments capability");return i.deleteAttachments(t,n)}async function mye(e,t,n){const r=(await e.load({signal:t==null?void 0:t.signal})).source;if(!r.fetchRecomputedExtents)throw new Y(n,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(t)}async function yye(e,t,n,r){var T,M;t=uye.from(t),await e.load();const i=e.source,s=e.capabilities;if(!((T=s==null?void 0:s.data)!=null&&T.supportsAttachment))throw new Y(r,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:h,num:f,size:_,start:w,where:b}=t;if(!((M=s==null?void 0:s.operations)!=null&&M.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(h==null?void 0:h.length)>0||(_==null?void 0:_.length)>0||f||w||b))throw new Y(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(a!=null&&a.length||h!=null&&h.length||b))throw new Y(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!i.queryAttachments)throw new Y(r,"Layer source does not support queryAttachments capability",t);return i.queryAttachments(t)}async function gye(e,t,n,r){const i=await rh(e);if(!i.queryObjectIds)throw new Y(r,"Layer source does not support queryObjectIds capability");return i.queryObjectIds(gl.from(t)??e.createQuery(),n)}async function _ye(e,t,n,r){const i=await rh(e);if(!i.queryFeatureCount)throw new Y(r,"Layer source does not support queryFeatureCount capability");return i.queryFeatureCount(gl.from(t)??e.createQuery(),n)}async function wye(e,t,n,r){const i=await rh(e);if(!i.queryExtent)throw new Y(r,"Layer source does not support queryExtent capability");return i.queryExtent(gl.from(t)??e.createQuery(),n)}async function vye(e,t,n,r){const i=await rh(e);if(!i.queryRelatedFeatures)throw new Y(r,"Layer source does not support queryRelatedFeatures capability");return i.queryRelatedFeatures(VR.from(t),n)}async function bye(e,t,n,r){const i=await rh(e);if(!i.queryRelatedFeaturesCount)throw new Y(r,"Layer source does not support queryRelatedFeaturesCount capability");return i.queryRelatedFeaturesCount(VR.from(t),n)}async function Sye(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:n,updates:r}=await t.refresh();if(r!=null&&(e.sourceJSON={...e.sourceJSON,...r},e.read(r,{origin:"service",url:e.parsedUrl})),n)return!0}catch{}if(e.definitionExpression)try{return(await eB(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function Tye(e){var o,a;const t=new gl,n=(o=e.capabilities)==null?void 0:o.data,r=(a=e.capabilities)==null?void 0:a.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),n&&(n.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),n.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:i,timeExtent:s}=e;return t.timeExtent=i!=null&&s!=null?s.offset(-i.value,i.unit):s||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function FH(e){const{globalIdField:t,fields:n}=e;if(t)return t;if(n){for(const r of n)if(r.type==="esriFieldTypeGlobalID")return r.name}}function jH(e){const{objectIdField:t,fields:n}=e;if(t)return t;if(n){for(const r of n)if(r.type==="esriFieldTypeOID")return r.name}}function xye(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function Eye(e,t){const{subtypes:n,subtypeField:r}=e;if(!(t!=null&&t.attributes)||!(n!=null&&n.length)||!r)return null;const i=t.attributes[r];return i==null?null:n.find(s=>s.code===i)}function $ye(e,t){var o,a;const{fieldsIndex:n,subtypeField:r}=e,{name:i,type:s}=n.get(t)??{};if(!i)return null;if((r&&((o=n.get(r))==null?void 0:o.name))===i&&((a=e.subtypes)!=null&&a.length)){const h=e.subtypes.map(f=>new Zp({code:zH(f.code,s),name:f.name}));if(h!=null&&h.length)return new fE({codedValues:h})}return null}function Mye(e,t){var s,o;const{fieldsIndex:n}=e,{name:r,type:i}=n.get(t)??{};if(!r)return null;if(("typeIdField"in e?(s=n.get(e.typeIdField))==null?void 0:s.name:null)===r&&"types"in e&&((o=e.types)!=null&&o.length)){const a=e.types.map(h=>new Zp({code:zH(h.id,i),name:h.name}));return new fE({codedValues:a})}return null}function zH(e,t){return t?yB({type:t})&&typeof e=="number"?`${e}`:Mue({type:t})&&typeof e=="string"?Number.parseInt(e,10):e:e}async function rh(e){return(await e.load()).source}async function Iye(e,t){if(!St||St.findCredential(e))return;let n;try{const r=await y9(e,t);r&&(n=await St.checkSignInStatus(`${r}/sharing`))}catch{}if(n)try{const r=t!=null?t.signal:null;await St.getCredential(e,{signal:r})}catch{}}async function Pye(e,t,n){var i;const r=(i=e.parsedUrl)==null?void 0:i.path;r&&e.authenticationTriggerEvent===t&&await Iye(r,n)}function Cye(e){return!I2(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const rI=Ag({types:tq});function GR(e,t){var n;if(e.defaultSymbol)return(n=e.types)!=null&&n.length?new PR({defaultSymbol:rI(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(r=>({id:r.id,symbol:rI(r.symbol,r,t)}))}):new Zg({symbol:rI(e.defaultSymbol,e,t)})}function Oye(e){var r,i,s;let t=(r=e.sourceJSON)==null?void 0:r.cacheMaxAge;if(!t)return!1;const n=(s=(i=e.editingInfo)==null?void 0:i.lastEditDate)==null?void 0:s.getTime();return n==null||(t*=1e3,Date.now()-n<t)}async function Aye(e,t,n){if(t==null)return null;const r=[],{objectIdField:i}=e;if(t.forEach(f=>{let _=null;if("attributes"in f){const{attributes:w}=f;_={globalId:w[n],objectId:w[i]!=null&&w[i]!==-1?w[i]:null}}else _={globalId:f.globalId,objectId:f.objectId!=null&&f.objectId!==-1?f.objectId:null};_.globalId!=null&&(_.objectId!=null&&_.objectId!==-1||r.push(_.globalId))}),r.length===0)return null;const s=e.createQuery();s.where=r.map(f=>`${n}='${f}'`).join(" OR "),s.returnGeometry=!1,s.outFields=[i,n],s.cacheHint=!1;const o=await Yee(NH(e,s));if(!o.ok)return null;const a=new Map,h=o.value.features;for(const f of h){const _=f.attributes[n],w=f.attributes[i];_!=null&&w!=null&&w!==-1&&a.set(kme(_),w)}return a}function kye(e,t,n){if(!t||!n||!e)return null;const r=n.getAttribute(t);return r==null?null:e.find(i=>{const{id:s}=i;return s!=null&&s.toString()===r.toString()})??null}function I2(e){var t;return((t=e.sourceJSON)==null?void 0:t.isMultiServicesView)||Rye(e)}function Rye(e){var t,n;return!!((n=(t=e.sourceJSON)==null?void 0:t.capabilities)!=null&&n.toLowerCase().split(",").map(r=>r.trim()).includes("map"))}function Lye(e,t,n){const r=t==null?void 0:t.queryBins;if(!r)throw new Y(n,"Layer source does not support binning");switch(e.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new Y(n,"Layer source does not support auto-interval binning");break;case"date":if(!r.supportsDate)throw new Y(n,"Layer source does not support date binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new Y(n,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new Y(n,"Layer source does not support fixed-interval binning")}const i=r==null?void 0:r.supportedStatistics;if(e.outStatistics&&i){const s=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of e.outStatistics){const a=s.get(o);if(a&&!i[a])throw new Y(n,`Layer source does not support ${o} statistic type`)}}}let by=class extends vt(ne){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};l([p({type:String,json:{read:{source:"shapeAreaFieldName"}}})],by.prototype,"shapeAreaField",void 0),l([p({type:String,json:{read:{source:"shapeLengthFieldName"}}})],by.prototype,"shapeLengthField",void 0),l([p({type:String,json:{read:e=>Ite.read(e)||Pte.read(e)}})],by.prototype,"units",void 0),by=l([k("esri.layers.support.GeometryFieldsInfo")],by);const Nye=by;var HO;let Sy=HO=class extends ne{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Ae}clone(){return new HO({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};l([p({type:String,json:{write:!0}})],Sy.prototype,"floorField",void 0),l([p({json:{read:!1,write:!1}})],Sy.prototype,"viewAllMode",void 0),l([p({json:{read:!1,write:!1}})],Sy.prototype,"viewAllLevelIds",void 0),Sy=HO=l([k("esri.layers.support.LayerFloorInfo")],Sy);const Dye=Sy,o6=new pt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),a6=new pt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Ks=class extends vt(ne){constructor(t){super(t),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};l([p({json:{read:o6.read,write:o6.write}})],Ks.prototype,"cardinality",void 0),l([p({json:{read:!0,write:!0}})],Ks.prototype,"composite",void 0),l([p({json:{read:!0,write:!0}})],Ks.prototype,"id",void 0),l([p({json:{read:!0,write:!0}})],Ks.prototype,"keyField",void 0),l([p({json:{read:!0,write:!0}})],Ks.prototype,"keyFieldInRelationshipTable",void 0),l([p({json:{read:!0,write:!0}})],Ks.prototype,"name",void 0),l([p({json:{read:!0,write:!0}})],Ks.prototype,"relatedTableId",void 0),l([p({json:{read:!0,write:!0}})],Ks.prototype,"relationshipTableId",void 0),l([p({json:{read:a6.read,write:a6.write}})],Ks.prototype,"role",void 0),Ks=l([k("esri.layers.support.Relationship")],Ks);const Fye=Ks;function Be(e,t,n){return!!VH(e,t,n)}function rv(e,t,n){return VH(e,t,n)}function VH(e,t,n){return e&&e.hasOwnProperty(t)?e[t]:n}const jye={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function zye(e){var n;const t=(n=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:n.map(r=>r.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function Y0(e,t){var r;const n=(r=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:r.map(i=>i.toLowerCase());return!!(n!=null&&n.includes(t.toLowerCase()))}function Vye(e){var n;const t=(n=e==null?void 0:e.supportedStatisticTypes)==null?void 0:n.map(r=>r.toLowerCase());return{count:!!(t!=null&&t.includes("count")),sum:!!(t!=null&&t.includes("sum")),min:!!(t!=null&&t.includes("min")),max:!!(t!=null&&t.includes("max")),avg:!!(t!=null&&t.includes("avg")),var:!!(t!=null&&t.includes("var")),stddev:!!(t!=null&&t.includes("stddev")),percentileContinuous:!!(t!=null&&t.includes("percentile_continuous")),percentileDiscrete:!!(t!=null&&t.includes("percentile_discrete")),envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function UH(e,t){return{analytics:Uye(e),attachment:Gye(e),data:Bye(e),metadata:qye(e),operations:Hye(e.capabilities,e,t),query:Wye(e,t),queryBins:Yye(e),queryRelated:Zye(e),queryTopFeatures:Jye(e),editing:Kye(e)}}function Uye(e){return{supportsCacheHint:Y0(e.advancedQueryCapabilities,"queryAnalytics")}}function Gye(e){const t=e.attachmentProperties,n={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Y0(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:Be(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(r=>{const i=jye[r.name];i&&(n[i]=!!r.isEnabled)}),n}function Bye(e){return{isVersioned:Be(e,"isDataVersioned",!1),isBranchVersioned:Be(e,"isDataBranchVersioned",!1),supportsAttachment:Be(e,"hasAttachments",!1),supportsM:Be(e,"hasM",!1),supportsZ:Be(e,"hasZ",!1)}}function qye(e){return{supportsAdvancedFieldProperties:Be(e,"supportsFieldDescriptionProperty",!1)}}function Hye(e,t,n){const r=e?e.toLowerCase().split(",").map(b=>b.trim()):[],i=n?Hd(n):null,s=r.includes(i!=null&&i.serverType==="MapServer"?"data":"query"),o=r.includes("editing")&&!t.datesInUnknownTimezone;let a=o&&r.includes("create"),h=o&&r.includes("delete"),f=o&&r.includes("update");const _=r.includes("changetracking"),w=t.advancedQueryCapabilities;return o&&!(a||h||f)&&(a=h=f=!0),{supportsCalculate:Be(t,"supportsCalculate",!1),supportsTruncate:Be(t,"supportsTruncate",!1),supportsValidateSql:Be(t,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:h,supportsEditing:o,supportsChangeTracking:_,supportsQuery:s,supportsQueryAnalytics:Be(w,"supportsQueryAnalytic",!1),supportsQueryAttachments:Be(w,"supportsQueryAttachments",!1),supportsQueryBins:Be(w,"supportsQueryBins",!1),supportsQueryTopFeatures:Be(w,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Be(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:f,supportsExceedsLimitStatistics:Be(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:Be(t,"supportsAsyncConvert3D",!1)}}function Wye(e,t){const n=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,i=e.archivingInfo,s=e.currentVersion,o=t==null?void 0:t.includes("MapServer"),a=!o||s>=te("mapserver-pbf-version-support"),h=vH(t),f=new Set((e.supportedQueryFormats??"").split(",").map(_=>_.toLowerCase().trim()));return{maxRecordCount:rv(e,"maxRecordCount",void 0),maxRecordCountFactor:rv(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:rv(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:zye(n),supportsCacheHint:Be(n,"supportsQueryWithCacheHint",!1)||Y0(n,"query"),supportsCentroid:Be(n,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:h,supportsDefaultSpatialReference:Be(n,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:Be(n,"supportsDisjointSpatialRel",!1),supportsDistance:Be(n,"supportsQueryWithDistance",!1),supportsDistinct:Be(n,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Be(n,"supportsReturningQueryExtent",!1),supportsFormatPBF:a&&f.has("pbf"),supportsFullTextSearch:Be(n,"supportsFullTextSearch",!1),supportsGeometryProperties:Be(n,"supportsReturningGeometryProperties",!1),supportsHavingClause:Be(n,"supportsHavingClause",!1),supportsHistoricMoment:Be(i,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:Be(n,"supportsMaxRecordCountFactor",!1),supportsOrderBy:Be(n,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Be(n,"supportsPagination",!1),supportsPercentileStatistics:Be(n,"supportsPercentileStatistics",!1),supportsQuantization:Be(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Be(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:Be(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:Be(r,"allowOthersToQuery",!0),supportsQueryGeometry:Be(e,"supportsReturningQueryGeometry",!1),supportsResultType:Be(n,"supportsQueryWithResultType",!1),supportsSpatialAggregationStatistics:Be(n,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:Be(n,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Be(e,"useStandardizedQueries",!1),supportsStatistics:Be(n,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:Be(n,"supportsTopFeaturesQuery",!1),tileMaxRecordCount:rv(e,"tileMaxRecordCount",void 0)}}function Zye(e){const t=e.advancedQueryCapabilities,n=Be(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Be(t,"supportsQueryRelatedPagination",!1),supportsCount:n,supportsOrderBy:n,supportsCacheHint:Y0(t,"queryRelated")}}function Jye(e){return{supportsCacheHint:Y0(e.advancedQueryCapabilities,"queryTopFilter")}}function Yye(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:Be(t,"supportsDateBin",!1),supportsFixedInterval:Be(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:Be(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:Be(t,"supportsFixedBoundariesBin",!1),supportedStatistics:Vye(t)}}function Kye(e){const t=e.ownershipBasedAccessControlForFeatures,n=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Be(e,"allowGeometryUpdates",!0),supportsGlobalId:Be(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Be(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Be(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Be(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Be(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Be(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Be(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Be(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Be(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Be(n,"supportsAsyncApplyEdits",!1),zDefault:rv(e,"zDefault",void 0)}}function IOe(e){var t;return{operations:{supportsAppend:Be(e,"supportsAppend",!1),supportsCoverageQuery:((t=e==null?void 0:e.playbackInfo)==null?void 0:t.klv["0601"])??!1,supportsExportClip:Be(e,"supportsExportClip",!1),supportsExportFrameset:Be(e,"supportsExportFrameset",!1),supportsMensuration:Be(e,"supportsMensuration",!1),supportsUpdate:Be(e,"supportsUpdate",!1)}}}let cu=class extends vt(ne){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const n={};for(const r of Object.keys(t))n[r]=mE(t[r]);return n}writeDomains(t,n){var i;if(!t)return;const r={};for(const s of Object.keys(t))t[s]&&(r[s]=(i=t[s])==null?void 0:i.toJSON());n.domains=r}};l([p({type:Number,json:{write:!0}})],cu.prototype,"code",void 0),l([p({type:Object,json:{write:!0}})],cu.prototype,"defaultValues",void 0),l([p({json:{write:!0}})],cu.prototype,"domains",void 0),l([de("domains")],cu.prototype,"readDomains",null),l([ge("domains")],cu.prototype,"writeDomains",null),l([p({type:String,json:{write:!0}})],cu.prototype,"name",void 0),cu=l([k("esri.layers.support.Subtype")],cu);const Xye=cu,Qye=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(Ae.ofType(el)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=dt.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){var i;if(!this.url)return null;const{capabilities:n}=this;if(n){const{query:s,operations:o,editing:a}=n;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||o.supportsEditing&&!(a.supportsUpdateByOthers&&a.supportsUpdateByAnonymous&&a.supportsDeleteByOthers&&a.supportsDeleteByAnonymous))return"load"}if((i=this.serviceDefinitionExpression)!=null&&i.toLowerCase().includes("current_user"))return"load";if(this.userHasUpdateItemPrivileges){if(Oye(this))return"load";if(this.hasUpdateItemRestrictions)return n.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const r=this.editFieldsInfo;return(r!=null&&r.creatorField||r!=null&&r.editorField)&&(n!=null&&n.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(n,r){return UH(r,this.url)}readEditingInfo(n,r){const{editingInfo:i}=r;return i?{lastEditDate:i.lastEditDate!=null?new Date(i.lastEditDate):null}:null}get effectiveCapabilities(){const n=this.capabilities;if(!n)return null;const r=q(n),{operations:i,editing:s}=r;return I2(this)?(this.userHasUpdateItemPrivileges&&(i.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(i.supportsAdd=i.supportsDelete=i.supportsEditing=i.supportsQuery=i.supportsUpdate=s.supportsDeleteByOthers=s.supportsGeometryUpdate=s.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&i.supportsEditing&&(i.supportsAdd=i.supportsDelete=i.supportsUpdate=s.supportsGeometryUpdate=!0),r)}readGlobalIdFieldFromService(n,r){return FH(r)}get hasFullEditingRestrictions(){const n=this.capabilities;if(!n||I2(this))return!1;const{operations:r,editing:i}=n;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&i.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const n=this.capabilities;if(!n)return!1;const{operations:r,editing:i}=n;return I2(this)?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&i.supportsDeleteByOthers&&i.supportsGeometryUpdate&&i.supportsUpdateByOthers)}readIsTableFromService(n,r){return r.type==="Table"}readMaxScale(n,r){return r.effectiveMaxScale||n||0}readMinScale(n,r){return r.effectiveMinScale||n||0}readObjectIdFieldFromService(n,r){return jH(r)}readServiceDefinitionExpression(n,r){return r.definitionQuery||r.definitionExpression}set url(n){if(n==null)return void this._set("url",n);const r=tme({layer:this,url:n,nonStandardUrlAllowed:!0,logger:fe.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(n,r,i,s){nme(this,n,null,r,s)}readVersion(n,r){return xye(r)}};return l([p({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),l([p({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),l([p({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),l([de("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),l([p(CT("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),l([p({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),l([p({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),l([p({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),l([p({readOnly:!0,type:oye})],t.prototype,"editFieldsInfo",void 0),l([p({readOnly:!0})],t.prototype,"editingInfo",void 0),l([de("editingInfo")],t.prototype,"readEditingInfo",null),l([p({readOnly:!0})],t.prototype,"effectiveCapabilities",null),l([p((()=>{const n=q(eye),r=n.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},n})())],t.prototype,"elevationInfo",void 0),l([p({type:Dye,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:Mr}}}}})],t.prototype,"floorInfo",void 0),l([p({type:Xt,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),l([p()],t.prototype,"gdbVersion",void 0),l([p({readOnly:!0,type:Nye,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),l([p({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:qO.read}}}})],t.prototype,"geometryType",void 0),l([p({type:String})],t.prototype,"globalIdField",void 0),l([de("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),l([p({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),l([p({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),l([p({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),l([p({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),l([p({readOnly:!0,type:gE})],t.prototype,"heightModelInfo",void 0),l([p({type:Date})],t.prototype,"historicMoment",void 0),l([p({type:Ae.ofType(el),readOnly:!0})],t.prototype,"indexes",void 0),l([p({readOnly:!0})],t.prototype,"isTable",void 0),l([de("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),l([p({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),l([p(iye)],t.prototype,"maxScale",void 0),l([de("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),l([p(rye)],t.prototype,"minScale",void 0),l([de("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),l([p({type:String})],t.prototype,"objectIdField",void 0),l([de("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),l([p(CT("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),l([p({type:[Fye],readOnly:!0})],t.prototype,"relationships",void 0),l([p({type:Boolean})],t.prototype,"returnM",void 0),l([p({type:Boolean})],t.prototype,"returnZ",void 0),l([p({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),l([p({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),l([de("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),l([p({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),l([p()],t.prototype,"sourceJSON",void 0),l([p({type:dt,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),l([p({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),l([p({type:[Xye],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),l([p({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),l([p(Xme)],t.prototype,"url",null),l([ge("url")],t.prototype,"writeUrl",null),l([p({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),l([de("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=l([k("esri.layers.mixins.FeatureLayerBase")],t),t};let Ty=class extends vt(ne){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};l([p({type:String,json:{write:!0}})],Ty.prototype,"expression",void 0),l([p({type:String,json:{write:!0}})],Ty.prototype,"title",void 0),l([p({type:String,json:{write:!0}})],Ty.prototype,"returnType",void 0),Ty=l([k("esri.layers.support.ExpressionInfo")],Ty);const BR=Ty;var WO;let du=WO=class extends ne{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new WO({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:q(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};l([p({type:Boolean,json:{write:!0}})],du.prototype,"isAutoGenerated",void 0),l([p({type:String,json:{write:!0}})],du.prototype,"name",void 0),l([p({type:String,json:{write:!0}})],du.prototype,"alias",void 0),l([p({type:String,json:{write:!0}})],du.prototype,"onStatisticField",void 0),l([p({type:BR,json:{write:!0}})],du.prototype,"onStatisticExpression",void 0),l([p({type:String,json:{write:!0}})],du.prototype,"statisticType",void 0),du=WO=l([k("esri.layers.support.AggregateField")],du);const wf=du;let Rd=class extends ne{constructor(){super(...arguments),this.type=null}};l([p({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Rd.prototype,"type",void 0),Rd=l([k("esri.layers.support.FeatureReduction")],Rd);const qR="__begin__",HR="__end__",ege=new RegExp(qR,"ig"),tge=new RegExp(HR,"ig"),l6=new RegExp("^"+qR,"i"),u6=new RegExp(HR+"$","i"),jT='"',nge=jT+" + ",rge=" + "+jT;function ige(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function sge(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function WR(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=ige(e.labelExpression),t.type="conventional"),t}function oge(e){const t=WR(e);if(!t)return null;switch(t.type){case"conventional":return ZO(t.expression);case"arcade":return t.expression}return null}function age(e){const t=WR(e);if(!t)return null;switch(t.type){case"conventional":return uge(t.expression);case"arcade":return GH(t.expression)}return null}function ZO(e){let t;return e?(t=BA(e,n=>qR+'$feature["'+n+'"]'+HR),t=l6.test(t)?t.replace(l6,""):jT+t,t=u6.test(t)?t.replace(u6,""):t+jT,t=t.replaceAll(ege,nge).replaceAll(tge,rge)):t='""',t}const lge=/^\s*\{([^}]+)\}\s*$/i;function uge(e){const t=e==null?void 0:e.match(lge);return(t==null?void 0:t[1].trim())||null}const cge=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,dge=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,hge=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function GH(e){if(!e)return null;let t=cge.exec(e)||dge.exec(e);return t?t[1]||t[3]:(t=hge.exec(e),t?t[2]:null)}var JO;let ed=JO=class extends ne{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?ZO(t.value):e}writeExpression(e,t,n){this.value!=null&&(e=ZO(this.value)),e!=null&&(t[n]=e)}clone(){return new JO({expression:this.expression,title:this.title,value:this.value})}};l([p({type:String,json:{write:{writerEnsuresNonNull:!0}}})],ed.prototype,"expression",void 0),l([de("expression",["expression","value"])],ed.prototype,"readExpression",null),l([ge("expression")],ed.prototype,"writeExpression",null),l([p({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ed.prototype,"title",void 0),l([p({json:{read:!1,write:!1}})],ed.prototype,"value",void 0),ed=JO=l([k("esri.layers.support.LabelExpressionInfo")],ed);const BH=ed;var YO;const Ub=new pt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function Gb(e,t,n){return{enabled:!$3(n==null?void 0:n.layer)}}function qH(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function pge(e){return(e==null?void 0:e.type)==="map-image"}function HH(e){var t,n;return!!pge(e)&&!!((n=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&n.supportsArcadeExpressionForLabeling)}function fge(e){return qH(e)||HH(e==null?void 0:e.layer)}let Ln=YO=class extends ne{static evaluateWhere(e,t){const n=(r,i,s)=>{switch(i){case"=":return r==s;case"<>":return r!=s;case">":return r>s;case">=":return r>=s;case"<":return r<s;case"<=":return r<=s}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return n(t[r[0]],r[1],r[2]);if(r.length===7){const i=n(t[r[0]],r[1],r[2]),s=r[3],o=n(t[r[4]],r[5],r[6]);switch(s){case"AND":return i&&o;case"OR":return i||o}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Cde,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const n=t.labelExpressionInfo;if(!n||!n.value&&!n.expression)return e}writeLabelExpression(e,t,n){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=sge(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=GH(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[n]=e)}writeLabelExpressionInfo(e,t,n,r){if(e==null&&this.labelExpression!=null&&qH(r))e=new BH({expression:this.getLabelExpressionArcade()});else if(!e)return;const i=e.toJSON(r);i.expression&&(t[n]=i)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return WR(this)}getLabelExpressionArcade(){return oge(this)}getLabelExpressionSingleField(){return age(this)}hash(){return JSON.stringify(this)}clone(){return new YO({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:q(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:q(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};l([p({type:String,json:{write:!0}})],Ln.prototype,"name",void 0),l([p({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:Gb}}}}})],Ln.prototype,"allowOverrun",void 0),l([p({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:Gb}}}}})],Ln.prototype,"deconflictionStrategy",void 0),l([p({type:String,json:{write:{overridePolicy(e,t,n){return this.labelExpressionInfo&&(n==null?void 0:n.origin)==="service"&&HH(n.layer)?{enabled:!1}:{allowNull:!0}}}}})],Ln.prototype,"labelExpression",void 0),l([de("labelExpression")],Ln.prototype,"readLabelExpression",null),l([ge("labelExpression")],Ln.prototype,"writeLabelExpression",null),l([p({type:BH,json:{write:{overridePolicy:(e,t,n)=>fge(n)?{allowNull:!0}:{enabled:!1}}}})],Ln.prototype,"labelExpressionInfo",void 0),l([ge("labelExpressionInfo")],Ln.prototype,"writeLabelExpressionInfo",null),l([p({type:Ub.apiValues,json:{type:Ub.jsonValues,read:Ub.read,write:Ub.write}})],Ln.prototype,"labelPlacement",void 0),l([p({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Ln.prototype,"labelPosition",void 0),l([p({type:Number})],Ln.prototype,"maxScale",void 0),l([ge("maxScale")],Ln.prototype,"writeMaxScale",null),l([p({type:Number})],Ln.prototype,"minScale",void 0),l([ge("minScale")],Ln.prototype,"writeMinScale",null),l([p({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Gb}}}}})],Ln.prototype,"repeatLabel",void 0),l([p({type:Number,cast:At,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Gb}}}}})],Ln.prototype,"repeatLabelDistance",void 0),l([p({types:zce,json:{origins:{"web-scene":{types:Vce,write:G5,default:null}},write:G5,default:null}})],Ln.prototype,"symbol",void 0),l([p({type:Boolean,json:{write:!0}})],Ln.prototype,"useCodedValues",void 0),l([p({type:String,json:{write:!0}})],Ln.prototype,"where",void 0),Ln=YO=l([k("esri.layers.support.LabelClass")],Ln);const _E=Ln;var KO;let Kr=KO=class extends Rd{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=At("12px"),this.fields=[],this.renderer=null}writeFields(e,t,n){const r=e.filter(i=>i.statisticType!=="avg_angle").map(i=>i.toJSON());lr(n,r,t)}readRenderer(e,t,n){var i;const r=(i=t.drawingInfo)==null?void 0:i.renderer;return r?d0(r,t,n)??void 0:GR(t,n)}clone(){return new KO({fields:q(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:q(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:q(this.popupTemplate),renderer:q(this.renderer),binType:q(this.binType),size:this.size})}};l([ke({binning:"binning"})],Kr.prototype,"type",void 0),l([ke({geohash:"geohash",square:"square"}),p({type:["geohash","square"]})],Kr.prototype,"binType",void 0),l([p({type:Number,json:{write:!0}})],Kr.prototype,"fixedBinLevel",void 0),l([p({type:[_E],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Kr.prototype,"labelingInfo",void 0),l([p(zR)],Kr.prototype,"labelsVisible",void 0),l([p({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Kr.prototype,"maxScale",void 0),l([p(jR)],Kr.prototype,"popupEnabled",void 0),l([p({type:U0,json:{name:"popupInfo",write:!0}})],Kr.prototype,"popupTemplate",void 0),l([p({cast:e=>e==="auto"?e:vi(At(e))})],Kr.prototype,"size",void 0),l([p({type:[wf],json:{write:!0}})],Kr.prototype,"fields",void 0),l([ge("fields")],Kr.prototype,"writeFields",null),l([p({types:dE,json:{write:{target:"drawingInfo.renderer"}}})],Kr.prototype,"renderer",void 0),l([de("renderer",["drawingInfo.renderer"])],Kr.prototype,"readRenderer",null),Kr=KO=l([k("esri.layers.support.FeatureReductionBinning")],Kr);const WH=Kr;var XO;function c6(e){var t;return e.type==="simple"&&!((t=e.visualVariables)!=null&&t.length)}let Zn=XO=class extends ne{constructor(e){super(e),this.type="cluster",this.clusterRadius=At("80px"),this.clusterMinSize=At("12px"),this.clusterMaxSize=At("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,n){var i,s;const r=(i=t.drawingInfo)==null?void 0:i.renderer;return(s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated?null:r?c6(r)?null:d0(r,t,n)??void 0:GR(t,n)}readSymbol(e,t,n){var i,s;const r=(i=t.drawingInfo)==null?void 0:i.renderer;if((s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated)return null;if(r&&c6(r)){const o=d0(r,t,n);return o==null?void 0:o.symbol}return null}writeSymbol(e,t,n,r){var s,o;const i=(o=(s=this.renderer)==null?void 0:s.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||i){const a=new Zg({symbol:e});t.drawingInfo={renderer:a.write({},r)}}}writeFields(e,t,n){const r=e.filter(i=>i.statisticType!=="avg_angle").map(i=>i.toJSON());lr(n,r,t)}readFields(e,t,n){return e.filter(r=>!r.isAutoGenerated).map(r=>wf.fromJSON(r))}clone(){return new XO({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:q(this.labelingInfo),labelsVisible:this.labelsVisible,fields:q(this.fields),maxScale:this.maxScale,renderer:q(this.renderer),symbol:q(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:q(this.popupTemplate)})}};l([p({type:["cluster"],readOnly:!0,json:{write:!0}})],Zn.prototype,"type",void 0),l([p({cast:e=>e==="auto"?e:vi(At(e)),json:{write:!0}})],Zn.prototype,"clusterRadius",void 0),l([p({type:Number,cast:At,json:{write:!0}})],Zn.prototype,"clusterMinSize",void 0),l([p({type:Number,cast:At,json:{write:!0}})],Zn.prototype,"clusterMaxSize",void 0),l([p({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Zn.prototype,"maxScale",void 0),l([p(jR)],Zn.prototype,"popupEnabled",void 0),l([p({type:U0,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Zn.prototype,"popupTemplate",void 0),l([p({types:dE,json:{write:{target:"drawingInfo.renderer"}}})],Zn.prototype,"renderer",void 0),l([de("renderer",["drawingInfo.renderer"])],Zn.prototype,"readRenderer",null),l([p({types:Fce})],Zn.prototype,"symbol",void 0),l([de("symbol",["drawingInfo.renderer"])],Zn.prototype,"readSymbol",null),l([ge("symbol")],Zn.prototype,"writeSymbol",null),l([p({type:[_E],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Zn.prototype,"labelingInfo",void 0),l([p(zR)],Zn.prototype,"labelsVisible",void 0),l([p({type:[wf],json:{write:!0}})],Zn.prototype,"fields",void 0),l([ge("fields")],Zn.prototype,"writeFields",null),l([de("fields")],Zn.prototype,"readFields",null),Zn=XO=l([k("esri.layers.support.FeatureReductionCluster")],Zn);const ZH=Zn;var QO;let P2=QO=class extends Rd{constructor(e){super(e),this.type="selection"}clone(){return new QO}};l([p({type:["selection"]})],P2.prototype,"type",void 0),P2=QO=l([k("esri.layers.support.FeatureReductionSelection")],P2);const d6=P2,h6={key:"type",base:Rd,typeMap:{cluster:ZH,binning:WH}},mge={types:{key:"type",base:Rd,typeMap:{selection:d6,cluster:ZH,binning:WH}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:h6},"portal-item":{types:h6},"web-scene":{types:{key:"type",base:Rd,typeMap:{selection:d6}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:Mr}}}}},Rm={Base64:0,Hex:1,String:2,Raw:3},cg=8,JH=(1<<cg)-1;function Md(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function yge(e){const t=[];for(let n=0,r=e.length*cg;n<r;n+=cg)t[n>>5]|=(e.charCodeAt(n/cg)&JH)<<n%32;return t}function gge(e){const t=[];for(let n=0,r=32*e.length;n<r;n+=cg)t.push(String.fromCharCode(e[n>>5]>>>n%32&JH));return t.join("")}function _ge(e){const t="0123456789abcdef",n=[];for(let r=0,i=4*e.length;r<i;r++)n.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return n.join("")}function wge(e){const t="=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let i=0,s=4*e.length;i<s;i+=3){const o=(e[i>>2]>>i%4*8&255)<<16|(e[i+1>>2]>>(i+1)%4*8&255)<<8|e[i+2>>2]>>(i+2)%4*8&255;for(let a=0;a<4;a++)8*i+6*a>32*e.length?r.push(t):r.push(n.charAt(o>>6*(3-a)&63))}return r.join("")}function vge(e,t){return e<<t|e>>>32-t}function wE(e,t,n,r,i,s){return Md(vge(Md(Md(t,e),Md(r,s)),i),n)}function qr(e,t,n,r,i,s,o){return wE(t&n|~t&r,e,t,i,s,o)}function Hr(e,t,n,r,i,s,o){return wE(t&r|n&~r,e,t,i,s,o)}function Wr(e,t,n,r,i,s,o){return wE(t^n^r,e,t,i,s,o)}function Zr(e,t,n,r,i,s,o){return wE(n^(t|~r),e,t,i,s,o)}function bge(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let n=1732584193,r=-271733879,i=-1732584194,s=271733878;for(let o=0;o<e.length;o+=16){const a=n,h=r,f=i,_=s;n=qr(n,r,i,s,e[o],7,-680876936),s=qr(s,n,r,i,e[o+1],12,-389564586),i=qr(i,s,n,r,e[o+2],17,606105819),r=qr(r,i,s,n,e[o+3],22,-1044525330),n=qr(n,r,i,s,e[o+4],7,-176418897),s=qr(s,n,r,i,e[o+5],12,1200080426),i=qr(i,s,n,r,e[o+6],17,-1473231341),r=qr(r,i,s,n,e[o+7],22,-45705983),n=qr(n,r,i,s,e[o+8],7,1770035416),s=qr(s,n,r,i,e[o+9],12,-1958414417),i=qr(i,s,n,r,e[o+10],17,-42063),r=qr(r,i,s,n,e[o+11],22,-1990404162),n=qr(n,r,i,s,e[o+12],7,1804603682),s=qr(s,n,r,i,e[o+13],12,-40341101),i=qr(i,s,n,r,e[o+14],17,-1502002290),r=qr(r,i,s,n,e[o+15],22,1236535329),n=Hr(n,r,i,s,e[o+1],5,-165796510),s=Hr(s,n,r,i,e[o+6],9,-1069501632),i=Hr(i,s,n,r,e[o+11],14,643717713),r=Hr(r,i,s,n,e[o],20,-373897302),n=Hr(n,r,i,s,e[o+5],5,-701558691),s=Hr(s,n,r,i,e[o+10],9,38016083),i=Hr(i,s,n,r,e[o+15],14,-660478335),r=Hr(r,i,s,n,e[o+4],20,-405537848),n=Hr(n,r,i,s,e[o+9],5,568446438),s=Hr(s,n,r,i,e[o+14],9,-1019803690),i=Hr(i,s,n,r,e[o+3],14,-187363961),r=Hr(r,i,s,n,e[o+8],20,1163531501),n=Hr(n,r,i,s,e[o+13],5,-1444681467),s=Hr(s,n,r,i,e[o+2],9,-51403784),i=Hr(i,s,n,r,e[o+7],14,1735328473),r=Hr(r,i,s,n,e[o+12],20,-1926607734),n=Wr(n,r,i,s,e[o+5],4,-378558),s=Wr(s,n,r,i,e[o+8],11,-2022574463),i=Wr(i,s,n,r,e[o+11],16,1839030562),r=Wr(r,i,s,n,e[o+14],23,-35309556),n=Wr(n,r,i,s,e[o+1],4,-1530992060),s=Wr(s,n,r,i,e[o+4],11,1272893353),i=Wr(i,s,n,r,e[o+7],16,-155497632),r=Wr(r,i,s,n,e[o+10],23,-1094730640),n=Wr(n,r,i,s,e[o+13],4,681279174),s=Wr(s,n,r,i,e[o],11,-358537222),i=Wr(i,s,n,r,e[o+3],16,-722521979),r=Wr(r,i,s,n,e[o+6],23,76029189),n=Wr(n,r,i,s,e[o+9],4,-640364487),s=Wr(s,n,r,i,e[o+12],11,-421815835),i=Wr(i,s,n,r,e[o+15],16,530742520),r=Wr(r,i,s,n,e[o+2],23,-995338651),n=Zr(n,r,i,s,e[o],6,-198630844),s=Zr(s,n,r,i,e[o+7],10,1126891415),i=Zr(i,s,n,r,e[o+14],15,-1416354905),r=Zr(r,i,s,n,e[o+5],21,-57434055),n=Zr(n,r,i,s,e[o+12],6,1700485571),s=Zr(s,n,r,i,e[o+3],10,-1894986606),i=Zr(i,s,n,r,e[o+10],15,-1051523),r=Zr(r,i,s,n,e[o+1],21,-2054922799),n=Zr(n,r,i,s,e[o+8],6,1873313359),s=Zr(s,n,r,i,e[o+15],10,-30611744),i=Zr(i,s,n,r,e[o+6],15,-1560198380),r=Zr(r,i,s,n,e[o+13],21,1309151649),n=Zr(n,r,i,s,e[o+4],6,-145523070),s=Zr(s,n,r,i,e[o+11],10,-1120210379),i=Zr(i,s,n,r,e[o+2],15,718787259),r=Zr(r,i,s,n,e[o+9],21,-343485551),n=Md(n,a),r=Md(r,h),i=Md(i,f),s=Md(s,_)}return[n,r,i,s]}function YH(e,t=Rm.Hex){const n=t||Rm.Base64,r=bge(yge(e),e.length*cg);switch(n){case Rm.Raw:return r;case Rm.Hex:return _ge(r);case Rm.String:return gge(r);case Rm.Base64:return wge(r)}}const Sge=()=>fe.getLogger("esri.views.2d.layers.support.clusterUtils");te.add("esri-cluster-arcade-enabled",!0);const Tge=te("esri-cluster-arcade-enabled"),xge=new Set(["simple-line","simple-fill","picture-fill"]);function p6(e,t){let n=t.clone();if(!Ege(n))return n;if(t.getSymbols().some(r=>xge.has(r.type))&&(n=new Zg({symbol:new vl})),n.authoringInfo||(n.authoringInfo=new gR),n.authoringInfo.isAutoGenerated=!0,"visualVariables"in n){const r=(n.visualVariables||[]).filter(i=>i.valueExpression!=="$view.scale");r.forEach(i=>{i.type==="rotation"?i.field?i.field=Bh(e,i.field,"avg_angle","number"):i.valueExpression&&(i.field=Y_(e,i.valueExpression,"avg_angle","number"),i.valueExpression=null):i.normalizationField?(i.field=Bh(e,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=Bh(e,i.field,"avg","number"):i.valueExpression&&(i.field=Y_(e,i.valueExpression,"avg","number"),i.valueExpression=null)}),n.visualVariables=r}switch(n.type){case"simple":break;case"pie-chart":for(const r of n.attributes)r.field?r.field=Bh(e,r.field,"sum","number"):r.valueExpression&&(r.field=Y_(e,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":n.field?n.field=Bh(e,n.field,"mode","string"):n.valueExpression&&(n.field=Y_(e,n.valueExpression,"mode","string"),n.valueExpression=null);break;case"class-breaks":n.normalizationField?(n.field=Bh(e,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=Bh(e,n.field,"avg","number"):n.valueExpression&&(n.field=Y_(e,n.valueExpression,"avg","number"),n.valueExpression=null)}return n}const Ege=e=>{const t=n=>Sge().error(new Y("Unsupported-renderer",n,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const n=e.normalizationType;if(n!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${n}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!Tge){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(n=>!(!("valueExpression"in n)||!n.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function $ge(e,t,n){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const r=n,i="field",s=t.toLowerCase()+",norm:"+i+","+r.toLowerCase();return"cluster_avg_"+YH(s)}}}function Y_(e,t,n,r){const i=YH(t),s=n==="mode"?`cluster_type_${i}`:n==="sum"?`cluster_sum_${i}`:`cluster_avg_${i}`;return e.some(o=>o.name===s)||e.push(new wf({name:s,isAutoGenerated:!0,onStatisticExpression:new BR({expression:t,returnType:r}),statisticType:n})),s}function Bh(e,t,n,r,i){if(t==="cluster_count"||e.some(o=>o.name===t))return t;const s=$ge(n,t,i);return e.some(o=>o.name===s)||(n==="avg_norm"?e.push(new wf({name:s,isAutoGenerated:!0,onStatisticExpression:new BR({expression:`$feature.${t} / $feature.${i}`,returnType:r}),statisticType:"avg"})):e.push(new wf({name:s,isAutoGenerated:!0,onStatisticField:t,statisticType:n}))),s}const Mge=e=>{let t=class extends e{constructor(...n){super(...n),this.addHandles(ct(()=>this.renderer,()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},pl))}set featureReduction(n){const r=this._normalizeFeatureReduction(n);this._set("featureReduction",r)}set renderer(n){}_withClusterVariable(n,r,i){const s=n.clone();return"visualVariables"in s&&(s.visualVariables||(s.visualVariables=[]),s.visualVariables.some(o=>o.type==="size")||s.visualVariables.push(new oE({field:"cluster_count",stops:[new l2({value:1}),new l2({useMinValue:!0,size:r}),new l2({useMaxValue:!0,size:i})]}))),s}_normalizeFeatureReduction(n){var w;if((n==null?void 0:n.type)!=="cluster")return n;const r=n.clone(),i=[new wf({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],s=(r.fields??[]).filter(b=>!b.isAutoGenerated),o=n.renderer&&!((w=n.renderer.authoringInfo)!=null&&w.isAutoGenerated),{clusterMinSize:a,clusterMaxSize:h}=r;if(o){r.fields=[...i,...s];const b=this._withClusterVariable(r.renderer,a,h);return r.effectiveFeatureRenderer=b,r.effectiveClusterRenderer=b,r}if(n.symbol){if(r.fields=[...i,...s],r.renderer=null,!this.renderer)return r.effectiveFeatureRenderer=null,r.effectiveClusterRenderer=null,r;const b=p6(i,this.renderer),T=this._withClusterVariable(b,a,h),M="visualVariables"in T&&T.visualVariables?T.visualVariables:[],I=new Zg({symbol:n.symbol,visualVariables:M});return r.fields=[...i,...s],r.effectiveFeatureRenderer=T,r.effectiveClusterRenderer=I,r}if(!this.renderer)return n;const f=p6(i,this.renderer);r.fields=[...i,...s],r.renderer=f;const _=this._withClusterVariable(f,a,h);return r.effectiveFeatureRenderer=_,r.effectiveClusterRenderer=_,r}};return l([p(mge)],t.prototype,"featureReduction",null),t=l([k("esri.layers.mixins.FeatureReductionLayer")],t),t},f6={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},m6={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},y6={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},Ige={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":f6,"web-map/basemap":m6,"web-map/tables":y6,"link-chart/operational-layers":{...f6,LinkChartLayer:!0},"link-chart/basemap":m6,"link-chart/tables":y6,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}},Pge=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(n,r,i){var s;return((s=i==null?void 0:i.portalItem)==null?void 0:s.type)==="Group Layer"?void 0:n}writeListMode(n,r,i,s){(s&&s.layerContainerType==="ground"||n&&BQ(this,i,{},s))&&(r[i]=n)}writeOperationalLayerType(n,r,i,s){n&&(s==null?void 0:s.layerContainerType)!=="tables"&&(r.layerType=n)}writeTitle(n,r){r.title=n??"Layer"}readTimeExtent(n){return n?ur.fromArray(n):null}writeTimeExtent(n,r,i,s){n&&s.layerContainerType!=="tables"&&(n.isEmpty?s!=null&&s.messages&&s.messages.push(new Y("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):r[i]=n.toArray())}read(n,r){r&&(r.layer=this),pU(this,n,i=>super.read(n,i),r)}write(n,r){var o,a;if(!this.persistenceEnabled&&!(r!=null&&r.ignorePersistenceEnabled))return null;if(r!=null&&r.origin){const h=`${r.origin}/${r.layerContainerType||"operational-layers"}`,f=Ige[h];let _=!!(f!=null&&f[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&h==="web-scene/operational-layers"&&(_=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&h==="web-map/operational-layers"&&(_=!1),!_)return(o=r.messages)==null||o.push(new Y("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${h}'`,{layer:this})),null}const i=super.write(n,{...r,layer:this}),s=!!r&&!!r.messages&&!!r.messages.filter(h=>h instanceof Y&&h.name==="web-document-write:property-required").length;return xx(i==null?void 0:i.url)?((a=r==null?void 0:r.messages)==null||a.push(new Y("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:i}beforeSave(){}};return l([p({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),l([de("id",["id"])],t.prototype,"readId",null),l([p(LH)],t.prototype,"listMode",void 0),l([ge("listMode")],t.prototype,"writeListMode",null),l([p({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Mr}}}}})],t.prototype,"operationalLayerType",void 0),l([ge("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),l([p(UO)],t.prototype,"opacity",void 0),l([p({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),l([p({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),l([ge("title"),ge(["web-scene"],"title")],t.prototype,"writeTitle",null),l([p({type:ur,json:{origins:{"web-scene":{write:{layerContainerTypes:Mr}}}}})],t.prototype,"visibilityTimeExtent",void 0),l([de("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),l([ge(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[Mt,Og]]}})],t.prototype,"writeTimeExtent",null),l([p({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:Mr}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=l([k("esri.layers.mixins.OperationalLayer")],t),t};var eA;const Bb=new pt({asc:"ascending",desc:"descending"});let xy=eA=class extends ne{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new eA({field:this.field,valueExpression:this.valueExpression,order:this.order})}};l([p({type:String,json:{write:!0}})],xy.prototype,"field",void 0),l([p({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],xy.prototype,"valueExpression",void 0),l([p({type:Bb.apiValues,json:{type:Bb.jsonValues,read:Bb.read,write:Bb.write}})],xy.prototype,"order",void 0),xy=eA=l([k("esri.layers.support.OrderByInfo")],xy);const KH=xy;function Cge(e,t,n){if(!e)return null;const r=e.find(s=>!!s.field);if(!r)return null;const i=new KH;return i.read(r,n),[i]}function Oge(e,t,n,r){const i=e.find(s=>!!s.field);i&&lr(n,[i.toJSON()],t)}const Age={type:[KH],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:Cge},write:{writer:Oge}}},kge=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return l([p(Age)],t.prototype,"orderBy",void 0),t=l([k("esri.layers.mixins.OrderedLayer")],t),t},Rge=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=cn(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(n){n!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",n))}readPortalItem(n,r,i){if(r.itemId)return new ll({id:r.itemId,portal:i==null?void 0:i.portal})}writePortalItem(n,r){n!=null&&n.id&&(r.itemId=n.id)}async loadFromPortal(n,r){var i;if((i=this.portalItem)!=null&&i.id)try{const{load:s}=await pe(()=>import("./layersLoader-BKrNBhFe.js"),__vite__mapDeps([149,12,10,11,9]));return xn(r),await s({instance:this,supportedTypes:n.supportedTypes,validateItem:n.validateItem,supportsData:n.supportsData,layerModuleTypeMap:n.layerModuleTypeMap},r)}catch(s){throw li(s)||fe.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(n){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(n).catch(r=>(rl(r),!0)))}async setUserPrivileges(n,r){if(!Bt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:i,fullEdit:s},content:{updateItem:o}}=await this._fetchUserPrivileges(n,r);this._set("userHasEditingPrivileges",i),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",o)}catch(i){rl(i)}}async _fetchUserPrivileges(n,r){let i=this.portalItem;if(!n||!i||!i.loaded||i.sourceUrl)return this._fetchFallbackUserPrivileges(r);const s=n===i.id;if(s&&i.portal.user)return p5(i);let o,a;if(s)o=i.portal.url;else try{o=await y9(this.url,r)}catch(w){rl(w)}if(!o||!aee(o,i.portal.url))return this._fetchFallbackUserPrivileges(r);try{const w=r!=null?r.signal:null;a=await(St==null?void 0:St.getCredential(`${o}/sharing`,{prompt:!1,signal:w}))}catch(w){rl(w)}const h=!0,f=!1,_=!1;if(!a)return{features:{edit:h,fullEdit:f},content:{updateItem:_}};try{if(s?await i.reload():(i=new ll({id:n,portal:{url:o}}),await i.load(r)),i.portal.user)return p5(i)}catch(w){rl(w)}return{features:{edit:h,fullEdit:f},content:{updateItem:_}}}async _fetchFallbackUserPrivileges(n){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(n)}catch(i){rl(i)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(n){const r=this.url?St==null?void 0:St.findCredential(this.url):null;if(!r)return!0;const i=qb.credential===r?qb.user:await this._fetchEditingUser(n);return qb.credential=r,qb.user=i,(i==null?void 0:i.privileges)==null||i.privileges.includes("features:user:edit")}async _fetchEditingUser(n){var _,w;const r=(w=(_=this.portalItem)==null?void 0:_.portal)==null?void 0:w.user;if(r)return r;const i=St==null?void 0:St.findServerInfo(this.url??"");if(!(i!=null&&i.owningSystemUrl))return null;const s=`${i.owningSystemUrl}/sharing/rest`,o=oi.getDefault();if(o&&o.loaded&&sa(o.restUrl)===sa(s))return o.user;const a=`${s}/community/self`,h=n!=null?n.signal:null,f=await Ex(Lt(a,{authMode:"no-prompt",query:{f:"json"},signal:h}));return f.ok?vk.fromJSON(f.value.data):null}read(n,r){r&&(r.layer=this),super.read(n,r)}write(n,r){var o;const i=r==null?void 0:r.portal,s=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||oi.getDefault());return i&&s&&!SU(s.restUrl,i.restUrl)?(r.messages&&r.messages.push(new Y("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(n,{...r,layer:this})}};return l([p({type:ll})],t.prototype,"portalItem",null),l([de("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),l([ge("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),l([p({clonable:!1})],t.prototype,"resourceReferences",void 0),l([p({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),l([p({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),l([p({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=l([k("esri.layers.mixins.PortalLayer")],t),t},qb={credential:null,user:null};let iv=class extends Fe{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};l([p()],iv.prototype,"updating",void 0),l([p()],iv.prototype,"status",void 0),iv=l([k("esri.layers.support.PublishingInfo")],iv);const Lge=iv,Nge=Symbol(),Dge=e=>{var t;let n=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const i=new Lge;return this._checkPublishingStatus(i),i}_checkPublishingStatus(r){let o=0;const a=async f=>{let _;r.updating=!0;try{_=await this.fetchPublishingStatus()}catch{_="unavailable"}_!=="published"&&_!=="unavailable"||(r.status==="publishing"&&this.refresh(),h.remove()),r.status=_,r.updating=!1,h.removed||(o=setTimeout(a,f,f+125))},h={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>h.remove()),a(250),this.addHandles(h)}};return t=Nge,l([p({readOnly:!0,clonable:!1})],n.prototype,"publishingInfo",null),n=l([k("esri.layers.mixins.PublishableLayer")],n),n},Id=new Ae,zv=new WeakMap;function Fge(e){zge(e)&&Id.push(new WeakRef(e))}function jge(e){const t=Id.find(n=>n.deref()===e);t&&Id.remove(t)}function zge(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function XH(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:XH(t,e%t):0}let iI=0,Hb=0;function Vge(){const e=Date.now();let t=!1;for(const n of Id){const r=n.deref();r?r.refreshInterval&&e-(zv.get(r)??0)+5>=6e4*r.refreshInterval&&(zv.set(r,e),r.refresh(e)):t=!0}if(t)for(let n=Id.length-1;n>=0;n--)Id.at(n).deref()||Id.removeAt(n)}BV(()=>{const e=Date.now();let t=0;for(const n of Id){const r=n.deref();r&&(t=XH(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?zv.get(r)||zv.set(r,e):zv.delete(r))}if(t!==Hb){if(Hb=t,clearInterval(iI),Hb===0)return void(iI=0);iI=setInterval(Vge,Hb)}},pl);const g6=.1,Uge=e=>{let t=class extends e{constructor(...n){super(...n),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=_x(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||Fge(this)},()=>{})}destroy(){jge(this)}castRefreshInterval(n){return n>=g6?n:n<=0?0:g6}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(n=Date.now()){UI(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",n),this.emit("refresh",{dataChanged:r})},r=>{fe.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}get test(){}};return l([p({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Mr}}}}})],t.prototype,"refreshInterval",void 0),l([kt("refreshInterval")],t.prototype,"castRefreshInterval",null),l([p({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),l([p({readOnly:!0})],t.prototype,"refreshParameters",null),t=l([k("esri.layers.mixins.RefreshableLayer")],t),t},Gge=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const n={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&Bge(n,r.effectiveScaleRange);const i=this._get("effectiveScaleRange");return i&&i.minScale===n.minScale&&i.maxScale===n.maxScale?i:n}};return l([p({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),l([p({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),l([p({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=l([k("esri.layers.mixins.ScaleRangeLayer")],t),t};function Bge(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}function _6(e,t){return Tg.fromJSON({value:e,unit:t})}let Ar=class extends vt(ne){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(t,n){return n.timeExtent&&Array.isArray(n.timeExtent)&&n.timeExtent.length===2?ur.fromArray(n.timeExtent):null}writeFullTimeExtent(t,n){(t==null?void 0:t.start)!=null&&t.end!=null?n.timeExtent=t.toArray():n.timeExtent=null}readInterval(t,n){return n.timeInterval&&n.timeIntervalUnits?_6(n.timeInterval,n.timeIntervalUnits):n.defaultTimeInterval&&n.defaultTimeIntervalUnits?_6(n.defaultTimeInterval,n.defaultTimeIntervalUnits):null}writeInterval(t,n){n.timeInterval=(t==null?void 0:t.toJSON().value)??null,n.timeIntervalUnits=(t==null?void 0:t.toJSON().unit)??null}};l([p({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Ar.prototype,"cumulative",void 0),l([p({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Ar.prototype,"endField",void 0),l([p({type:ur,json:{write:{enabled:!0,allowNull:!0}}})],Ar.prototype,"fullTimeExtent",void 0),l([de("fullTimeExtent",["timeExtent"])],Ar.prototype,"readFullTimeExtent",null),l([ge("fullTimeExtent")],Ar.prototype,"writeFullTimeExtent",null),l([p({type:Boolean,json:{write:!0}})],Ar.prototype,"hasLiveData",void 0),l([p({type:Tg,json:{write:{enabled:!0,allowNull:!0}}})],Ar.prototype,"interval",void 0),l([de("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Ar.prototype,"readInterval",null),l([ge("interval")],Ar.prototype,"writeInterval",null),l([p({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Ar.prototype,"startField",void 0),l([p(CT("timeReference",!0))],Ar.prototype,"timeZone",void 0),l([p({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Ar.prototype,"trackIdField",void 0),l([p({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Ar.prototype,"useTime",void 0),l([p({type:[Date],json:{read:!1}})],Ar.prototype,"stops",void 0),Ar=l([k("esri.layers.support.TimeInfo")],Ar);const QH=Ar,qge={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:Mr}}},Hge=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(n,r){const i=r.timeInfo.exportOptions;if(!i)return null;const s=i.timeOffset,o=Jk.fromJSON(i.timeOffsetUnits);return s&&o?new Tg({value:s,unit:o}):null}set timeInfo(n){aB(n,this.fieldsIndex),this._set("timeInfo",n)}};return l([p({type:ur,json:{write:!1}})],t.prototype,"timeExtent",void 0),l([p({type:Tg})],t.prototype,"timeOffset",void 0),l([de("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),l([p({value:null,type:QH,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),l([p(qge)],t.prototype,"useViewTime",void 0),t=l([k("esri.layers.mixins.TemporalLayer")],t),t},w6=new pt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let td=class extends vt(ne){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};l([p({json:{write:!0}})],td.prototype,"name",void 0),l([p({json:{write:!0}})],td.prototype,"description",void 0),l([p({json:{read:w6.read,write:w6.write}})],td.prototype,"drawingTool",void 0),l([p({json:{write:!0}})],td.prototype,"prototype",void 0),l([p({json:{write:!0}})],td.prototype,"thumbnail",void 0),td=l([k("esri.layers.support.FeatureTemplate")],td);const ZR=td;let hu=class extends vt(ne){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const n={};for(const r of Object.keys(t))n[r]=mE(t[r]);return n}writeDomains(t,n){var i;const r={};for(const s of Object.keys(t))t[s]&&(r[s]=(i=t[s])==null?void 0:i.toJSON());n.domains=r}};l([p({json:{write:!0}})],hu.prototype,"id",void 0),l([p({json:{write:!0}})],hu.prototype,"name",void 0),l([p({json:{write:!0}})],hu.prototype,"domains",void 0),l([de("domains")],hu.prototype,"readDomains",null),l([ge("domains")],hu.prototype,"writeDomains",null),l([p({type:[ZR],json:{write:!0}})],hu.prototype,"templates",void 0),hu=l([k("esri.layers.support.FeatureType")],hu);const eW=hu;function Wge(){return{fields:{type:[AR],value:null,set:function(e){if(e&&te("big-integer-warning-enabled")){const t=e.filter(n=>n.type==="big-integer"||n.type==="oid"&&(n.length||0)>=8);if(t.length){const n=t.map(r=>`'${r.name}'`).join(", ");fe.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${n}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return bq.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!(e!=null&&e.length))return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const n of e)((t=this.fieldsIndex)==null?void 0:t.has(n))||fe.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${n} found in outFields`,{layer:this,outFields:e});return Kx(this.fieldsIndex,e)}}}}const sI=()=>fe.getLogger("esri.layers.support.labelingInfo"),Zge=/\[([^[\]]+)\]/gi;function oI(e,t,n){return e?e.map(r=>{var s;const i=new _E;if(i.read(r,n),i.labelExpression){const o=t.fields||((s=t.layerDefinition)==null?void 0:s.fields)||this.fields;i.labelExpression=i.labelExpression.replaceAll(Zge,(a,h)=>`[${Jge(h,o)}]`)}return i}):null}function Jge(e,t){if(!t)return e;const n=e.toLowerCase();for(let r=0;r<t.length;r++){const i=t[r].name;if(i.toLowerCase()===n)return i}return e}const Yge={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function NOe(e,t){const n=[];for(const r of e){const i=r.labelPlacement,s=Yge[t];if(!r.symbol)return sI().warn("No ILabelClass symbol specified."),[];if(!s)return sI().error(new Y("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(s.includes(i))n.push(r);else{const o=s[0];i&&sI().warn(`Found invalid label placement type ${i} for ${t}. Defaulting to ${o}`);const a=r.clone();a.labelPlacement=o,n.push(a)}}return n}const Ey=[];function Kge(e,t){if(vH(e.url??""))return!0;const{wkid:n}=t;for(const r of Ey){if((e.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(n))return!1}return!0}Ey.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),Ey.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),Ey.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),Ey.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),Ey.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function Xge(e,t,n){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const i=await Ex(r.populateFromStyle());if(xn(n),i.ok===!1){const s=i.error;t!=null&&t.messages&&t.messages.push(new Es("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}function Qge({displayField:e,editFieldsInfo:t,fields:n,objectIdField:r,title:i},s){if(!n)return null;const o=r_e({editFieldsInfo:t,fields:n,objectIdField:r},s);if(!o.length)return null;const a=o_e({titleBase:i,fields:n,displayField:e}),h=s_e();return new U0({title:a,content:h,fieldInfos:o})}function DOe(e){var h;const{title:t,graphic:n}=e??{},{attributes:r,sourceLayer:i}=n??{},s=i&&"displayField"in i?i.displayField:null,o=s?r==null?void 0:r[s]:null,a=(h=n==null?void 0:n.getObjectId())==null?void 0:h.toString();return t||o||a||""}const e_e=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):fue(e,t);function t_e({fields:e,ignoreFieldTypes:t,sortDisabled:n}){const r=e;return t&&(e=e.filter(i=>!t.includes(i.type))),e===r&&(e=e.slice()),n!==!0&&e.sort(n_e),e}function n_e(e,t){return e.type==="oid"?-1:t.type==="oid"?1:v6(e)?-1:v6(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function r_e(e,t){const n=t==null?void 0:t.visibleFieldNames;return t_e({fields:e.fields??[],ignoreFieldTypes:(t==null?void 0:t.ignoreFieldTypes)||a_e,sortDisabled:t==null?void 0:t.sortDisabled}).map(r=>new Xk({fieldName:r.name,isEditable:pue(r,e),label:r.alias,format:i_e(r),visible:e_e(r,{...e,visibleFieldNames:n})}))}function i_e(e){switch(e.type){case"small-integer":case"integer":case"single":return new BS({digitSeparator:!0,places:0});case"double":return new BS({digitSeparator:!0,places:2});case"string":return Fue(e.name)?new BS({digitSeparator:!0,places:0}):void 0;default:return}}function s_e(){return[new $g,new Eg]}function o_e(e){const t=rue(e),{titleBase:n}=e;return t?`${n}: {${t.trim()}}`:n??""}function v6(e){var n;return(e.name&&e.name.toLowerCase())==="name"?!0:((n=e.alias)==null?void 0:n.toLowerCase())==="name"}const a_e=["geometry","blob","raster","guid","xml"],l_e=1/255.5,Or="FeatureLayer";function Wb(e,t){return new Y("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function b6(e){return e&&e instanceof Ae}const aI=Wge();function lI(e,t,n){const r=!!(n!=null&&n.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let De=class extends Qye(Mge(Bme(Dge(Rme(Pme(kge(Hge(Gge(Uge(rme(Pge(Rge(Wx(Cme(Jfe(vt(TG))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=dt.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=_x(async(t,n,r)=>{const{save:i,saveAs:s}=await pe(()=>import("./featureLayerUtils-Dq5iOT52.js"),__vite__mapDeps([150,16,17,151,20,12]));switch(t){case sl.SAVE:return i(this,n);case sl.SAVE_AS:return s(this,r,n)}})}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){var r;const t=e!=null?e.signal:null;if((r=this.portalItem)!=null&&r.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(i=>this.initLayerProperties(i))),Promise.resolve(this);const n=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(rl).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const i=await this._fetchFirstValidLayerId(t);i!=null&&(this.layerId=i)}if(!this.url&&!this._hasMemorySource())throw new Y("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>Pye(this,"load",e));return this.addResolvingPromise(n),Promise.resolve(this)}warnInvisibleDrapedSymbols(){var e,t,n;((e=this.elevationInfo)==null?void 0:e.mode)==="on-the-ground"&&((t=this.renderer)==null?void 0:t.type)==="simple"&&((n=this.renderer.symbol)==null?void 0:n.type)==="polygon-3d"&&this.renderer.symbol.symbolLayers.some(r=>r.type==="fill"&&r.material!=null&&(!r.material.color||r.material.color.a*this.opacity<l_e)&&(this.loadWarnings.push(new Es("feature-layer:invisible-draped-symbols","FeatureLayer has fully transparent symbols which will no longer render or highlight",{layer:this})),!0))}readCapabilities(e,t){return t=t.layerDefinition||t,UH(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,n){return this._readEditingEnabled(t,!0,n)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,n,r){this._writeEditingEnabled(e,t,!0,r)}get effectiveEditingEnabled(){return Cye(this)}readIsTable(e,t){return(t=(t==null?void 0:t.layerDefinition)??t).type==="Table"||!t.geometryType}writeIsTable(e,t,n,r){r!=null&&r.writeLayerSchema&&lr(n,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return FH(t.layerDefinition||t)}readObjectIdField(e,t){return jH(t.layerDefinition||t)}get parsedUrl(){const e=cr(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=mg(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=mg(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){b5(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,n){var i;t=t.layerDefinition||t;const r=(i=t.drawingInfo)==null?void 0:i.renderer;if(r){const s=d0(r,t,n)??void 0;return s||fe.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:n}),s}return GR(t,n)}set source(e){const t=this._get("source");t!==e&&(b6(t)&&this._resetMemorySource(t),b6(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Ae?new Tu({layer:this,items:e}):e:null}readSource(e,t){const n=yH.fromJSON(t.featureSet);return new Tu({layer:this,items:(n==null?void 0:n.features)??[]})}readTemplates(e,t){const n=t.editFieldsInfo,r=n==null?void 0:n.creatorField,i=n==null?void 0:n.editorField;return e=e==null?void 0:e.map(s=>ZR.fromJSON(s)),this._fixTemplates(e,r),this._fixTemplates(e,i),e}readTitle(e,t){var i,s,o;const n=((i=t.layerDefinition)==null?void 0:i.name)??t.name,r=t.title||((s=t.layerDefinition)==null?void 0:s.title);if(n){const a=(o=this.portalItem)==null?void 0:o.title;if(this.sublayerTitleMode==="item-title")return this.url?Qfe(this.url,n):n;let h=n;if(!h&&this.url){const f=Hd(this.url);f!=null&&(h=f.title)}return h?(this.sublayerTitleMode==="item-title-and-service-name"&&a&&a!==h&&(h=a+" - "+h),kR(h)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(e,t){var n;return t.title||((n=t.layerDefinition)==null?void 0:n.name)}readTypeIdField(e,t){let n=(t=t.layerDefinition||t).typeIdField;if(n&&t.fields){n=n.toLowerCase();const r=t.fields.find(i=>i.name.toLowerCase()===n);r&&(n=r.name)}return n}readTypes(e,t){e=(t=t.layerDefinition||t).types;const n=t.editFieldsInfo,r=n==null?void 0:n.creatorField,i=n==null?void 0:n.editorField;return e==null?void 0:e.map(s=>(s=eW.fromJSON(s),this._fixTemplates(s.templates,r),this._fixTemplates(s.templates,i),s))}readVisible(e,t){var n;return((n=t.layerDefinition)==null?void 0:n.defaultVisibility)!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){const n=await cye(this,e,t,Or);return this.lastEditsEventDate=new Date,n}async updateAttachment(e,t,n){const r=await dye(this,e,t,n,Or);return this.lastEditsEventDate=new Date,r}async applyEdits(e,t){return hye(this,e,t)}async uploadAssets(e,t){return pye(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return Qge(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await NV(pe(()=>import("./FeatureLayerSource-CWFd_ene.js"),__vite__mapDeps([152,65,72,153,148,154,68,105,67,106,147,51,50,52,155,156,78,76,77,29,30,157,28])),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=Tye(this);e.dynamicDataSource=this.dynamicDataSource;const t=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,n=Dle(this.definitionExpression,t);return e.where=n||"1=1",e}async deleteAttachments(e,t){const n=await fye(this,e,t,Or);return this.lastEditsEventDate=new Date,n}async fetchRecomputedExtents(e){return mye(this,e,Or)}getFeatureType(e){return kye(this.types,this.typeIdField,e)}getFieldDomain(e,t){var a,h;const n=t==null?void 0:t.feature,r=!!((a=this.subtypes)!=null&&a.length);if(r&&!(t!=null&&t.excludeImpliedDomains)){const f=$ye(this,e);if(f)return f}const i=r&&Eye(this,n);if(i){const f=(h=i==null?void 0:i.domains)==null?void 0:h[e];return(f==null?void 0:f.type)==="inherited"?this._getLayerDomain(e):f}const s=this.getFeatureType(n),o=this._getLayerDomain(e);if(s){const f=s.domains&&s.domains[e];if(f&&(f==null?void 0:f.type)!=="inherited")return f}if(o)return o;if(!(t!=null&&t.excludeImpliedDomains)){const f=Mye(this,e);if(f)return f}return null}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,t){return yye(this,e,t,Or)}async queryFeatures(e,t){const n=await this.load(),r=await n.source.queryFeatures(gl.from(e)??n.createQuery(),t);if(r!=null&&r.features)for(const i of r.features)i.layer=i.sourceLayer=n;return r}async queryObjectIds(e,t){return gye(this,e,t,Or)}async queryFeatureCount(e,t){return _ye(this,e,t,Or)}async queryExtent(e,t){return wye(this,e,t,Or)}async queryRelatedFeatures(e,t){return vye(this,e,t,Or)}async queryRelatedFeaturesCount(e,t){return bye(this,e,t,Or)}async queryTopFeatures(e,t){var o;const{source:n,capabilities:r}=await this.load();if(!n.queryTopFeatures||!((o=r==null?void 0:r.query)!=null&&o.supportsTopFeaturesQuery))throw new Y(Or,"Layer source does not support queryTopFeatures capability");const i=await pe(()=>import("./TopFeaturesQuery-9AVetbFH.js"),[]),s=await n.queryTopFeatures(i.default.from(e),t);if(s!=null&&s.features)for(const a of s.features)a.layer=a.sourceLayer=this;return s}async queryBins(e,t){var o;const{source:n,capabilities:r}=await this.load();if(!n.queryBins||!((o=r==null?void 0:r.operations)!=null&&o.supportsQueryBins))throw new Y(Or,"Layer source does not support queryBins capability");Lye(e,r,Or);const i=await pe(()=>import("./BinsQuery-qJkUAZxr.js"),__vite__mapDeps([158,47,34])),s=await n.queryBins(i.default.from(e),t);if(s.features)for(const a of s.features)a.layer=a.sourceLayer=this;return s}async queryTopObjectIds(e,t){const{source:n,capabilities:r}=await this.load();if(!n.queryTopObjectIds||!(r!=null&&r.query.supportsTopFeaturesQuery))throw new Y(Or,"Layer source does not support queryTopObjectIds capability");const i=await pe(()=>import("./TopFeaturesQuery-9AVetbFH.js"),[]);return n.queryTopObjectIds(i.default.from(e),t)}async queryTopFeaturesExtent(e,t){var s;const{source:n,capabilities:r}=await this.load();if(!n.queryTopExtents||!((s=r==null?void 0:r.query)!=null&&s.supportsTopFeaturesQuery))throw new Y(Or,"Layer source does not support queryTopExtents capability");const i=await pe(()=>import("./TopFeaturesQuery-9AVetbFH.js"),[]);return n.queryTopExtents(i.default.from(e),t)}async queryTopFeatureCount(e,t){var s;const{source:n,capabilities:r}=await this.load();if(!n.queryTopCount||!((s=r==null?void 0:r.query)!=null&&s.supportsTopFeaturesQuery))throw new Y(Or,"Layer source does not support queryFeatureCount capability");const i=await pe(()=>import("./TopFeaturesQuery-9AVetbFH.js"),[]);return n.queryTopCount(i.default.from(e),t)}read(e,t){const n=e.featureCollection;if((n||e.type==="Feature Collection")&&(this.resourceInfo=e),n){const r=n.layers;r&&r.length===1&&(super.read(r[0],t),n.showLegend!=null&&super.read({showLegend:n.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:(t==null?void 0:t.origin)??void 0,writeLayerSchema:(t==null?void 0:t.writeLayerSchema)??this._hasMemorySource()};const{origin:n,layerContainerType:r,messages:i}=t;if(this.dynamicDataSource)return i==null||i.push(Wb(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((n==="web-map"||n==="web-scene")&&r!=="tables")return i==null||i.push(Wb(this,`a table source can only be written to tables, not ${r}`)),null;if(this._hasMemorySource())return i==null||i.push(Wb(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(n==="web-map"||n==="web-scene")&&r==="tables")return i==null||i.push(Wb(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new Y(Or,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var t;return!!this.loaded&&(((t=this.source)==null?void 0:t.type)==="memory"||Kge(this,e))}async save(e){return this._debouncedSaveOperations(sl.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(sl.SAVE_AS,t,e)}_readEditingEnabled(e,t,n){var i;let r=(i=e.layerDefinition)==null?void 0:i.capabilities;return r?this._hasEditingCapability(r):(r=e.capabilities,t&&(n==null?void 0:n.origin)==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,n,r){var i,s;if(!e){const o=(s=(i=this.capabilities)==null?void 0:i.operations)!=null&&s.supportsSync?"Query,Sync":"Query";lr("layerDefinition.capabilities",o,t),n&&!(r!=null&&r.writeLayerSchema)&&(t.capabilities=o)}}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstValidLayerId(e){return Lt(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const n=t.data;if(n)return this.findFirstValidLayerId(n)})}async initLayerProperties(e){var t;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(t=this.portalItem)==null?void 0:t.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),b5(this.renderer,this.fieldsIndex),aB(this.timeInfo,this.fieldsIndex),Xge(this,{origin:"service"})}async hasDataChanged(){return Sye(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var t,n;const e=((t=this.parsedUrl)==null?void 0:t.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(n=this.fields)!=null&&n.some(r=>r.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(n=>{var i;const r=(i=n.prototype)==null?void 0:i.attributes;r&&t&&delete r[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new Y("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new Y("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this.addHandles([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};l([p(sye)],De.prototype,"attributeTableTemplate",void 0),l([de("service","capabilities")],De.prototype,"readCapabilities",null),l([p({json:{origins:{"web-scene":{write:!1}},write:!0}})],De.prototype,"charts",void 0),l([p({readOnly:!0})],De.prototype,"createQueryVersion",null),l([p({json:{read:{source:"layerDefinition.copyrightText"}}})],De.prototype,"copyright",void 0),l([p({json:{read:{source:"layerDefinition.displayField"}}})],De.prototype,"displayField",void 0),l([p({types:$d,readOnly:!0})],De.prototype,"defaultSymbol",void 0),l([p({type:ea})],De.prototype,"dynamicDataSource",void 0),l([p({type:Boolean})],De.prototype,"editingEnabled",null),l([de(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],De.prototype,"readEditingEnabled",null),l([de("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],De.prototype,"readEditingEnabledFromWebMap",null),l([ge(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],De.prototype,"writeEditingEnabled",null),l([ge("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],De.prototype,"writeEditingEnabledToWebMap",null),l([p({readOnly:!0})],De.prototype,"effectiveEditingEnabled",null),l([p({...aI.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:lI}}}}})],De.prototype,"fields",void 0),l([p(aI.fieldsIndex)],De.prototype,"fieldsIndex",void 0),l([p({type:_fe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],De.prototype,"formTemplate",void 0),l([p({json:{read:{source:"layerDefinition.extent"}}})],De.prototype,"fullExtent",void 0),l([p({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:lI,writer(e,t,n){const r=e?qO.toJSON(e):null;r&&lr(n,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:qO.read}}})],De.prototype,"geometryType",void 0),l([p({json:{read:{source:"layerDefinition.hasM"}}})],De.prototype,"hasM",void 0),l([p({json:{read:{source:"layerDefinition.hasZ"}}})],De.prototype,"hasZ",void 0),l([p(nye)],De.prototype,"id",void 0),l([p({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],De.prototype,"infoFor3D",void 0),l([p({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],De.prototype,"isTable",void 0),l([de("service","isTable",["type","geometryType"]),de("isTable",["layerDefinition.type","layerDefinition.geometryType"])],De.prototype,"readIsTable",null),l([ge("web-map","isTable")],De.prototype,"writeIsTable",null),l([p(zR)],De.prototype,"labelsVisible",void 0),l([p({type:[_E],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:oI,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:oI,write:{enabled:!0,layerContainerTypes:Mr}}},name:"layerDefinition.drawingInfo.labelingInfo",read:oI,write:!0}})],De.prototype,"labelingInfo",void 0),l([p((()=>{const e=q(tye);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,n,r){lr(r,Lx(t),n)}}},e})())],De.prototype,"opacity",void 0),l([p(Qme)],De.prototype,"legendEnabled",void 0),l([p({type:["show","hide"],json:(()=>{const e=q(LH.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],De.prototype,"listMode",void 0),l([de("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],De.prototype,"readGlobalIdField",null),l([p({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:lI}}}}})],De.prototype,"objectIdField",void 0),l([de("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],De.prototype,"readObjectIdField",null),l([p({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],De.prototype,"operationalLayerType",void 0),l([p(aI.outFields)],De.prototype,"outFields",void 0),l([p({readOnly:!0})],De.prototype,"parsedUrl",null),l([p({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],De.prototype,"path",void 0),l([p(jR)],De.prototype,"popupEnabled",void 0),l([p({type:U0,json:{name:"popupInfo",write:!0}})],De.prototype,"popupTemplate",void 0),l([p({readOnly:!0})],De.prototype,"defaultPopupTemplate",null),l([p({types:dE,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:Gpe,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Mr,overridePolicy:(e,t,n)=>({ignoreOrigin:n==null?void 0:n.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,n)=>({ignoreOrigin:n==null?void 0:n.writeLayerSchema})}}})],De.prototype,"renderer",null),l([de("service","renderer",["drawingInfo.renderer","defaultSymbol"]),de("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],De.prototype,"readRenderer",null),l([p()],De.prototype,"resourceInfo",void 0),l([p((()=>{const e=q(Kme);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],De.prototype,"screenSizePerspectiveEnabled",void 0),l([p({clonable:!1})],De.prototype,"source",null),l([kt("source")],De.prototype,"castSource",null),l([de("portal-item","source",["featureSet"]),de("web-map","source",["featureSet"])],De.prototype,"readSource",null),l([p({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],De.prototype,"spatialReference",void 0),l([p({type:Number})],De.prototype,"subtypeCode",void 0),l([p({type:[ZR]})],De.prototype,"templates",void 0),l([de("templates",["editFieldsInfo","creatorField","editorField","templates"])],De.prototype,"readTemplates",null),l([p({type:QH})],De.prototype,"timeInfo",void 0),l([p()],De.prototype,"title",void 0),l([de("service","title",["name"]),de("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],De.prototype,"readTitle",null),l([de("web-map","title",["layerDefinition.name","title"])],De.prototype,"readTitleFromWebMap",null),l([p({type:String})],De.prototype,"sublayerTitleMode",void 0),l([p({json:{read:!1}})],De.prototype,"type",void 0),l([p({type:String})],De.prototype,"typeIdField",void 0),l([de("service","typeIdField"),de("typeIdField",["layerDefinition.typeIdField"])],De.prototype,"readTypeIdField",null),l([p({type:[eW]})],De.prototype,"types",void 0),l([de("service","types",["types"]),de("types",["layerDefinition.types"])],De.prototype,"readTypes",null),l([p({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],De.prototype,"visible",void 0),l([de("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],De.prototype,"readVisible",null),De=l([k("esri.layers.FeatureLayer")],De);const tW=De,FOe=Object.freeze(Object.defineProperty({__proto__:null,default:tW},Symbol.toStringTag,{value:"Module"}));let Ha=class extends ne{constructor(t){super(t),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.dirtyAreaCount=null,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};l([p({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.moment=e?e.getTime():null}}}})],Ha.prototype,"moment",void 0),l([p({type:Boolean,json:{write:!0}})],Ha.prototype,"fullUpdate",void 0),l([p({type:Boolean,json:{write:!0}})],Ha.prototype,"validateErrorsCreated",void 0),l([p({type:Number,json:{write:!0}})],Ha.prototype,"dirtyAreaCount",void 0),l([p({type:Boolean,json:{write:!0}})],Ha.prototype,"exceededTransferLimit",void 0),l([p({type:[Object],json:{write:!0}})],Ha.prototype,"serviceEdits",void 0),l([p({type:[Object],json:{write:!0}})],Ha.prototype,"discoveredSubnetworks",void 0),Ha=l([k("esri.rest.networks.support.ValidateNetworkTopologyResult")],Ha);const u_e=Ha,c_e=hr()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let nd=class extends u_e{constructor(t){super(t),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(t){const n={...t,query:{f:"json"}},{data:r}=await Lt(this.statusUrl,n);return this.read(r),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(t={}){const{interval:n=1e3,statusCallback:r}=t;return new Promise((i,s)=>{this._clearTimer();const o=setInterval(()=>{this._timer||s(rn()),this.checkJobStatus().then(a=>{const{status:h}=a;switch(this.status=h,h){case"job-succeeded":this._clearTimer(),i(this);break;case"job-waiting":case"job-executing":r&&r(this)}},a=>{this._clearTimer(),s(a)})},n);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};l([p()],nd.prototype,"editsResolver",void 0),l([p({type:String,json:{write:!0}})],nd.prototype,"statusUrl",void 0),l([ke(c_e)],nd.prototype,"status",void 0),l([p({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],nd.prototype,"submissionTime",void 0),l([p({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],nd.prototype,"lastUpdatedTime",void 0),nd=l([k("esri.networks.support.TopologyValidationJobInfo")],nd);const d_e=nd;async function S6(e,t){if(e==="Utility Network Layer"){const{default:n}=await pe(()=>Promise.resolve().then(()=>M_e),void 0);return new n({layerUrl:t})}return null}async function h_e(e){var o;let t="portalItem"in e?e:{portalItem:e};!t.portalItem||t.portalItem instanceof ll||(t={...t,portalItem:new ll(t.portalItem)});const n=t.portalItem;if(await n.load(),n.type!=="Feature Service")throw new Y("portal:unknown-item-type","Unknown item type '${type}'",{type:n.type});const r=n.url,i=await Lt(r,{responseType:"json",query:{f:"json"}}),s="Network Layer";if((o=i.data.type)!=null&&o.includes(s))return S6(i.data.type,r);if(i.data.layers){const a=i.data.layers.find(h=>h.type.includes(s));if(a){const h=`${r}/${a.id}`;return S6(a.type,h)}}return null}let Vn=class extends Wx(ho){static fromPortalItem(t){return h_e(t)}constructor(t){super(t),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this.gdbVersion=null,this.historicMoment=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=n=>{const{serviceUrl:r,gdbVersion:i,result:s}=n,o=r===this.featureServiceUrl,a=Fv(r,i,this.gdbVersion);o&&a&&s.then(h=>{$2(r,i)&&(this.historicMoment=h.historicMoment)})},this._updateMomentHandler=n=>{const{serviceUrl:r,gdbVersion:i,moment:s}=n,o=r===this.featureServiceUrl,a=Fv(r,i,this.gdbVersion);o&&a&&(this.historicMoment=s)},this.when().then(()=>{this.addHandles([EH(this._applyEditsHandler),$H(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(t=>{li(t)||fe.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}get datasetName(){var t;return((t=this.dataElement)==null?void 0:t.name)??null}get owner(){var t;return((t=this.dataElement)==null?void 0:t.userIdentity)??null}get schemaGeneration(){var t;return((t=this.dataElement)==null?void 0:t.schemaGeneration)??null}get parsedUrl(){return cr(this.layerUrl)}get featureServiceUrl(){return Hd(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return Hd(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(t){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),t)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,t)),this}getLayerIdBySourceId(t){if(!this.dataElement)return null;const n=this._layerIdBySourceId.get(t);if(n!=null)return n;const r=this.dataElement.domainNetworks,i=this._traverseNetworkSources(r,this._layerIdBySourceId,"sourceId","layerId",t);return i>=0?i:null}getSourceIdByLayerId(t){if(!this.dataElement)return null;const n=this._sourceIdByLayerId.get(t);if(n!=null)return n;const r=this.dataElement.domainNetworks,i=this._traverseNetworkSources(r,this._sourceIdByLayerId,"layerId","sourceId",t);return i>=0?i:null}getObjectIdsFromElements(t){const n=[],r=new Map;for(const s of t){const o=this.getLayerIdBySourceId(s.networkSourceId);if(o==null)continue;let a=r.get(o);a===void 0&&(a=[]),a.push(s.objectId),r.set(o,a)}const i=this.featureServiceUrl;return r.forEach((s,o)=>n.push({layerUrl:`${i}/${o}`,objectIds:s})),n}async queryNamedTraceConfigurations(t,n){var a;const[{queryNamedTraceConfigurations:r},{default:i}]=await Promise.all([pe(()=>import("./queryNamedTraceConfigurations-Dbh3NRw3.js"),[]),pe(()=>import("./QueryNamedTraceConfigurationsParameters-BWgPd8qu.js"),[])]),s=this.networkServiceUrl,o=i.from(t);return(a=await r(s,o,{...n}))==null?void 0:a.namedTraceConfigurations}async validateTopology(t,n){var _,w,b;if(!t.validateArea)throw new Y("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:i}]=await Promise.all([pe(()=>import("./validateNetworkTopology-kcjhqNjP.js"),[]),pe(()=>import("./ValidateNetworkTopologyParameters-ZcF2XtuZ.js"),[])]),s=i.from(t);$2(this.featureServiceUrl,this.gdbVersion||null)?(s.sessionID=TO,await qj(this.featureServiceUrl,this.gdbVersion,!0)):s.sessionID=null,s.gdbVersion=this.gdbVersion;const o=this.networkServiceUrl,a=this.featureServiceUrl,h=Hj(a,null,this.gdbVersion,!0),f=await r(o,s,{...n});if(f!=null&&f.serviceEdits){const T=[];for(const M of f.serviceEdits){const{editedFeatures:I}=M,C=I!=null&&I.spatialReference?new dt(I.spatialReference):null;T.push({layerId:M.layerId,editedFeatures:{adds:((_=I==null?void 0:I.adds)==null?void 0:_.map(N=>Zb(N,C)))||[],updates:((w=I==null?void 0:I.updates)==null?void 0:w.map(N=>({original:Zb(N[0],C),current:Zb(N[1],C)})))||[],deletes:((b=I==null?void 0:I.deletes)==null?void 0:b.map(N=>Zb(N,C)))||[],spatialReference:C}})}h.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:T,exceededTransferLimit:!1,historicMoment:f.moment})}return f}async submitTopologyValidationJob(t,n){let r=null;if(!t.validateArea)throw new Y("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const _=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");r=(await Lt(_,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:i},{default:s}]=await Promise.all([pe(()=>import("./validateNetworkTopology-kcjhqNjP.js"),[]),pe(()=>import("./ValidateNetworkTopologyParameters-ZcF2XtuZ.js"),[])]),o=s.from(t);$2(this.featureServiceUrl,this.gdbVersion||null)?(o.sessionID=TO,await qj(this.featureServiceUrl,this.gdbVersion,!0)):o.sessionID=null,o.gdbVersion=this.gdbVersion||r;const a=this.networkServiceUrl,h=this.featureServiceUrl?Hj(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,f=await i(a,o,{...n});return new d_e({statusUrl:f,editsResolver:h})}_traverseNetworkSources(t,n,r,i,s){for(const o of t)for(const a of[o.edgeSources??[],o.junctionSources??[]])for(const h of a)if(h[r]===s)return n.set(s,h[i]),h[i];return-1}async _fetchLayerMetaData(t,n){const r=await Lt(t,{responseType:"json",query:{f:"json"},...n});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(t,n,r){if(this.dataElement)return;const i=await Lt(`${t}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([n]),f:"json"},...r}).then(s=>{var o;return(o=s.data.layerDataElements)==null?void 0:o[0]});i&&this.read(i,{origin:"service"})}};function Zb(e,t){return new yl({attributes:e.attributes,geometry:Du({...e.geometry,spatialReference:t})})}l([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],Vn.prototype,"id",void 0),l([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],Vn.prototype,"title",void 0),l([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],Vn.prototype,"layerUrl",void 0),l([p({type:Object,json:{origins:{service:{read:!0}},read:!1}})],Vn.prototype,"dataElement",void 0),l([p({type:Xt,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],Vn.prototype,"fullExtent",void 0),l([p({type:dt,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],Vn.prototype,"spatialReference",void 0),l([p({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],Vn.prototype,"type",void 0),l([p({readOnly:!0})],Vn.prototype,"datasetName",null),l([p({readOnly:!0})],Vn.prototype,"owner",null),l([p({readOnly:!0})],Vn.prototype,"schemaGeneration",null),l([p({readOnly:!0})],Vn.prototype,"parsedUrl",null),l([p({readOnly:!0})],Vn.prototype,"featureServiceUrl",null),l([p({readOnly:!0})],Vn.prototype,"networkServiceUrl",null),l([p({readOnly:!0})],Vn.prototype,"layerId",null),l([p()],Vn.prototype,"sourceJSON",void 0),l([p({readOnly:!0})],Vn.prototype,"networkSystemLayers",null),l([p()],Vn.prototype,"gdbVersion",void 0),l([p({type:Date})],Vn.prototype,"historicMoment",void 0),Vn=l([k("esri.networks.Network")],Vn);const p_e=Vn;var Mu;(function(e){e[e.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",e[e.RTAttachment=2]="RTAttachment",e[e.RTContainment=3]="RTContainment",e[e.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",e[e.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(Mu||(Mu={}));const Jb=new pt({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"}),UOe=new pt({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),f_e={connectivity:1,"junction-junction-connectivity":1,attachment:2,containment:3,"junction-edge-from-connectivity":4,"junction-midspan-connectivity":5,"junction-edge-to-connectivity":6},GOe=Array.from({length:33},(e,t)=>2*t),BOe=new Map([[1,"connectivity"],[2,"containment"],[3,"attachment"],[4,"junction-edge-from-connectivity"],[5,"junction-midspan-connectivity"],[6,"junction-edge-to-connectivity"]]),qOe=new pt({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});let rd=class extends kg(ho){constructor(t){super(t),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=Lt}initialize(){}async load(t){const n=this.layer.load(t).then(()=>this._initializeRulesTable());return this.addResolvingPromise(n),this}getFeatureSQL(t,n){var f,_;const r=t.layerId.toString(),i=(f=t.fieldsIndex)==null?void 0:f.normalizeFieldName("assetGroup"),s=(_=t.fieldsIndex)==null?void 0:_.normalizeFieldName("assetType"),o=i?n.attributes[i]:null,a=s?n.attributes[s]:null,h=this.rulesHash[r];if(h){const w=h.assetGroupHash[o];if(w)return w.assetTypeHash[a]||null}return null}async _initializeRulesTable(){var i,s,o,a,h,f,_,w,b,T,M;const t={};let n;(function(I){I[I.from=0]="from",I[I.to=1]="to",I[I.via=2]="via"})(n||(n={}));const r=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const I of this.rules){if(I.ruleType===Mu.RTAttachment){this.rulesCategorized.attachment.push(I);continue}if(I.ruleType===Mu.RTContainment){this.rulesCategorized.containment.push(I);continue}if(I.ruleType===Mu.RTJunctionJunctionConnectivity){this.rulesCategorized.connectivity.push(I);continue}this.rulesCategorized.connectivity.push(I);let C=[[n.from,n.to],[n.to,n.from]];I.ruleType===Mu.RTEdgeJunctionEdgeConnectivity&&(C=[[n.from,n.via],[n.via,n.from],[n.to,n.via],[n.via,n.to]]);for(const N of C){const j=N.shift(),z=N.shift();let U=!1;switch(I.ruleType){case Mu.RTEdgeJunctionEdgeConnectivity:U=j===n.from||j===n.to;break;case Mu.RTJunctionEdgeConnectivity:U=j===n.to}const K=r[j],J=((i=I[K.networkSourceId])==null?void 0:i.layerId.toString())??"",le=(o=(s=I[K.assetGroupId])==null?void 0:s.assetGroupCode)==null?void 0:o.toString(),ue=I[K.assetTypeId],be=(a=ue==null?void 0:ue.assetTypeCode)==null?void 0:a.toString(),xe=r[z],_e=((h=I[xe.networkSourceId])==null?void 0:h.layerId.toString())??"",$e=(_=(f=I[xe.assetGroupId])==null?void 0:f.assetGroupCode)==null?void 0:_.toString(),je=I[xe.assetTypeId],Me=(w=je==null?void 0:je.assetTypeCode)==null?void 0:w.toString(),Et=t[J]??{assetGroupHash:{}};if(!(le&&be&&$e&&Me))continue;const wt=Et.assetGroupHash[le]??{assetTypeHash:{}},Je=wt.assetTypeHash[be]??{};if(Je[_e]=Je[_e]??{},U){Je[J]=Je[J]??{};const Ne=`(assetgroup = ${le} AND assettype = ${be})`;(je==null?void 0:je.connectivityPolicy)==="esriNECPEndVertex"?Je[J].endVertex=(b=Je[J])!=null&&b.endVertex?`${Je[J].endVertex}`:`${Ne}`:Je[J].anyVertex=Je[J].anyVertex?`${Je[J].anyVertex}`:`${Ne}`}const re=`(assetgroup = ${$e} AND assettype = ${Me})`;(je==null?void 0:je.connectivityPolicy)==="esriNECPEndVertex"?Je[_e].endVertex=(T=Je[_e])!=null&&T.endVertex?`${Je[_e].endVertex} OR ${re}`:`${re}`:Je[_e].anyVertex=(M=Je[_e])!=null&&M.anyVertex?`${Je[_e].anyVertex} OR ${re}`:`${re}`,wt.assetTypeHash[be]=Je,Et.assetGroupHash[le]=wt,t[J]=Et}}this.rulesHash=t}};l([p({constructOnly:!0})],rd.prototype,"layer",void 0),l([p({constructOnly:!0})],rd.prototype,"rules",void 0),l([p()],rd.prototype,"rulesHash",void 0),l([p()],rd.prototype,"rulesCategorized",void 0),l([p({constructOnly:!0})],rd.prototype,"request",void 0),rd=l([k("esri.networks.RulesTable")],rd);const m_e=rd;let Xs=class extends ne{constructor(t){super(t),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};l([p({type:[Object],json:{write:!0}})],Xs.prototype,"conditionBarriers",void 0),l([p({type:[Object],json:{write:!0}})],Xs.prototype,"outputConditions",void 0),l([p({type:[Object],json:{write:!0}})],Xs.prototype,"functions",void 0),l([p({type:[Object],json:{write:!0}})],Xs.prototype,"functionBarriers",void 0),l([p({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Xs.prototype,"traversabilityScope",void 0),l([p({type:String,json:{write:!0}})],Xs.prototype,"shortestPathNetworkAttributeName",void 0),l([p({type:Boolean,json:{write:!0}})],Xs.prototype,"includeBarriers",void 0),l([p({type:Boolean,json:{write:!0}})],Xs.prototype,"validateConsistency",void 0),l([p({type:Boolean,json:{write:!0}})],Xs.prototype,"ignoreBarriersAtStartingPoints",void 0),Xs=l([k("esri.networks.support.TraceConfiguration")],Xs);const JR=Xs;let Tn=class extends JR{constructor(t){super(t),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};l([p({type:[Object],json:{write:!0}})],Tn.prototype,"filterBarriers",void 0),l([p({type:String,json:{write:!0}})],Tn.prototype,"arcadeExpressionBarrier",void 0),l([p({type:String,json:{write:!0}})],Tn.prototype,"domainNetworkName",void 0),l([p({type:String,json:{write:!0}})],Tn.prototype,"filterBitsetNetworkAttributeName",void 0),l([p({type:[Object],json:{write:!0}})],Tn.prototype,"filterFunctionBarriers",void 0),l([p({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Tn.prototype,"filterScope",void 0),l([p({type:Boolean,json:{write:!0}})],Tn.prototype,"includeContainers",void 0),l([p({type:Boolean,json:{write:!0}})],Tn.prototype,"includeContent",void 0),l([p({type:Boolean,json:{write:!0}})],Tn.prototype,"includeIsolated",void 0),l([p({type:Boolean,json:{write:!0}})],Tn.prototype,"includeStructures",void 0),l([p({type:Boolean,json:{write:!0}})],Tn.prototype,"allowIndeterminateFlow",void 0),l([p({type:Boolean,json:{write:!0}})],Tn.prototype,"includeUpToFirstSpatialContainer",void 0),l([p({type:Object,json:{write:!0}})],Tn.prototype,"nearestNeighbor",void 0),l([p({type:[Object],json:{write:!0}})],Tn.prototype,"outputFilterCategories",void 0),l([p({type:[Object],json:{write:!0}})],Tn.prototype,"outputFilters",void 0),l([p({type:[Object],json:{write:!0}})],Tn.prototype,"propagators",void 0),l([p({type:String,json:{write:!0}})],Tn.prototype,"subnetworkName",void 0),l([p({type:String,json:{write:!0}})],Tn.prototype,"targetTierName",void 0),l([p({type:String,json:{write:!0}})],Tn.prototype,"diagramTemplateName",void 0),l([p({type:String,json:{write:!0}})],Tn.prototype,"tierName",void 0),l([p({type:Boolean,json:{write:!0}})],Tn.prototype,"validateLocatability",void 0),Tn=l([k("esri.networks.support.UNTraceConfiguration")],Tn);const y_e=Tn;let Vi=class extends W3{constructor(t){super(t),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(t,n){return t.tierName!==void 0?y_e.fromJSON(t):JR.fromJSON(t)}};l([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],Vi.prototype,"globalId",void 0),l([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],Vi.prototype,"title",void 0),l([p({type:JR,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Vi.prototype,"traceConfiguration",void 0),l([de("service","traceConfiguration")],Vi.prototype,"readTraceConfiguration",null),l([p({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Vi.prototype,"creationDate",void 0),l([p({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Vi.prototype,"creator",void 0),l([p({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Vi.prototype,"description",void 0),l([p({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],Vi.prototype,"minStartingPoints",void 0),l([p({json:{origins:{service:{read:!0,write:!0}},read:!1}})],Vi.prototype,"resultTypes",void 0),l([p({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],Vi.prototype,"tags",void 0),l([p({type:Jb.apiValues,json:{type:Jb.jsonValues,origins:{service:{read:Jb.read,write:Jb.write}},read:!1}})],Vi.prototype,"traceType",void 0),Vi=l([k("esri.networks.support.NamedTraceConfiguration")],Vi);const g_e=Vi;let Zo=class extends Fe{constructor(t){super(t),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTableId=null,this.associationsTableUrl=null}};l([p({constructOnly:!0})],Zo.prototype,"rulesTableId",void 0),l([p({constructOnly:!0})],Zo.prototype,"rulesTableUrl",void 0),l([p({constructOnly:!0})],Zo.prototype,"subnetworksTableId",void 0),l([p({constructOnly:!0})],Zo.prototype,"subnetworksTableUrl",void 0),l([p({constructOnly:!0})],Zo.prototype,"dirtyAreasLayerId",void 0),l([p({constructOnly:!0})],Zo.prototype,"dirtyAreasLayerUrl",void 0),l([p({constructOnly:!0})],Zo.prototype,"associationsTableId",void 0),l([p({constructOnly:!0})],Zo.prototype,"associationsTableUrl",void 0),Zo=l([k("esri.networks.support.NetworkSystemLayers")],Zo);const __e=Zo;let $y=class extends ne{constructor(t){super(t),this.id=null,this.name=null}};l([p({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],$y.prototype,"id",void 0),l([p({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],$y.prototype,"name",void 0),l([p({type:Boolean,json:{write:!0}})],$y.prototype,"isUpstreamTerminal",void 0),$y=l([k("esri.networks.support.Terminal")],$y);const w_e=$y,Yb=new pt({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let id=class extends ne{constructor(t){super(t),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};l([p({type:String,json:{write:!0}})],id.prototype,"defaultConfiguration",void 0),l([p({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],id.prototype,"id",void 0),l([p({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],id.prototype,"name",void 0),l([p({type:[w_e],json:{write:!0}})],id.prototype,"terminals",void 0),l([p({type:Yb.apiValues,json:{type:Yb.jsonValues,read:Yb.read,write:Yb.write}})],id.prototype,"traversabilityModel",void 0),id=l([k("esri.networks.support.TerminalConfiguration")],id);const T6=id;let My=class extends ne{constructor(t){super(t),this.line=null,this.multipoint=null,this.polygon=null}};l([p({type:so,json:{write:!0},readOnly:!0})],My.prototype,"line",void 0),l([p({type:N0,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],My.prototype,"multipoint",void 0),l([p({type:mo,json:{write:!0},readOnly:!0})],My.prototype,"polygon",void 0),My=l([k("esri.rest.networks.support.AggregatedGeometry")],My);const v_e=My;let Iy=class extends ne{constructor(t){super(t),this.functionType=null,this.networkAttributeName=null,this.result=null}};l([p({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],Iy.prototype,"functionType",void 0),l([p({type:String,json:{write:!0},readOnly:!0})],Iy.prototype,"networkAttributeName",void 0),l([p({type:Number,json:{write:!0},readOnly:!0})],Iy.prototype,"result",void 0),Iy=l([k("esri.rest.networks.support.FunctionResult")],Iy);const b_e=Iy;let Jo=class extends ne{constructor(t){super(t),this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};l([p({type:Number,json:{write:!0}})],Jo.prototype,"assetGroupCode",void 0),l([p({type:Number,json:{write:!0}})],Jo.prototype,"assetTypeCode",void 0),l([p({type:String,json:{write:!0}})],Jo.prototype,"globalId",void 0),l([p({type:Number,json:{write:!0}})],Jo.prototype,"networkSourceId",void 0),l([p({type:Number,json:{write:!0}})],Jo.prototype,"objectId",void 0),l([p({type:Number,json:{write:!0}})],Jo.prototype,"positionFrom",void 0),l([p({type:Number,json:{write:!0}})],Jo.prototype,"positionTo",void 0),l([p({type:Number,json:{write:!0}})],Jo.prototype,"terminalId",void 0),Jo=l([k("esri.rest.networks.support.NetworkElement")],Jo);const S_e=Jo;let pu=class extends ne{constructor(t){super(t),this.aggregatedGeometry=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.startingPointsIgnored=!1,this.warnings=null}};l([p({type:v_e,json:{write:!0},readOnly:!0})],pu.prototype,"aggregatedGeometry",void 0),l([p({type:[S_e],json:{write:!0},readOnly:!0})],pu.prototype,"elements",void 0),l([p({type:[b_e],json:{write:!0},readOnly:!0})],pu.prototype,"globalFunctionResults",void 0),l([p({type:Boolean,json:{write:!0},readOnly:!0})],pu.prototype,"kFeaturesForKNNFound",void 0),l([p({type:Boolean,json:{write:!0},readOnly:!0})],pu.prototype,"startingPointsIgnored",void 0),l([p({type:[String],json:{write:!0},readOnly:!0})],pu.prototype,"warnings",void 0),pu=l([k("esri.rest.networks.support.TraceResult")],pu);const T_e=pu,x_e=hr()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let Op=class extends T_e{constructor(t){super(t),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(t){const n={...t,query:{f:"json"}},{data:r}=await Lt(this.statusUrl,n),i=r.traceResults?{...r.traceResults,...r}:r;return this.read(i),this}async waitForJobCompletion(t={}){const{interval:n=1e3,statusCallback:r}=t;return new Promise((i,s)=>{this._clearTimer();const o=setInterval(()=>{this._timer||s(rn()),this.checkJobStatus().then(a=>{const{status:h}=a;switch(this.status=h,h){case"job-succeeded":this._clearTimer(),i(this);break;case"job-waiting":case"job-executing":r&&r(this)}},a=>{this._clearTimer(),s(a)})},n);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};l([p({type:String,json:{write:!0}})],Op.prototype,"statusUrl",void 0),l([ke(x_e)],Op.prototype,"status",void 0),l([p({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],Op.prototype,"submissionTime",void 0),l([p({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],Op.prototype,"lastUpdatedTime",void 0),Op=l([k("esri.networks.support.TraceJobInfo")],Op);const E_e=Op;let fu=class extends p_e{constructor(t){super(t),this.sharedNamedTraceConfigurations=[],this.type="utility",this._terminalById=new Map}get serviceTerritoryFeatureLayerId(){var t;return((t=this.dataElement)==null?void 0:t.serviceTerritoryFeatureLayerId)??null}get networkSystemLayers(){var t,n,r,i,s,o,a,h;return new __e({rulesTableId:(t=this.sourceJSON)==null?void 0:t.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(n=this.sourceJSON)==null?void 0:n.systemLayers.rulesTableId}`:null,subnetworksTableId:(r=this.sourceJSON)==null?void 0:r.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(i=this.sourceJSON)==null?void 0:i.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:(s=this.sourceJSON)==null?void 0:s.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${(o=this.sourceJSON)==null?void 0:o.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:(a=this.sourceJSON)==null?void 0:a.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(h=this.sourceJSON)==null?void 0:h.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){var t;return((t=this.dataElement)==null?void 0:t.terminalConfigurations.map(n=>T6.fromJSON(n)))||[]}get domainNetworkNames(){var t;return((t=this.dataElement)==null?void 0:t.domainNetworks.map(n=>n.domainNetworkName))||[]}get _utilityLayerList(){var n,r;const t=new Set;return(r=(n=this.dataElement)==null?void 0:n.domainNetworks)==null||r.map(i=>{i.edgeSources.map(s=>{t.add(s.layerId)}),i.junctionSources.map(s=>{t.add(s.layerId)})}),t}async load(t){return this.addResolvingPromise(super.load(t)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(t)),this}getTerminalConfiguration(t){var f,_,w,b;let n=null,r=null;const i=t.layer;let s=null;if((i==null?void 0:i.type)==="feature"){if(s=i.layerId,s===null)return null}else if((i==null?void 0:i.type)!=="subtype-sublayer"||(s=((f=i==null?void 0:i.parent)==null?void 0:f.layerId)??null,s===null))return null;const o=t.attributes;if(o==null)return null;for(const T of Object.keys(o))T.toUpperCase()==="ASSETGROUP"&&(n=t.getAttribute(T)),T.toUpperCase()==="ASSETTYPE"&&(r=t.getAttribute(T));if(!this.dataElement)return null;let a=null;const h=this.dataElement.domainNetworks;for(const T of h){const M=(_=T.junctionSources)==null?void 0:_.find(I=>I.layerId===s);if(M){const I=(w=M.assetGroups)==null?void 0:w.find(C=>C.assetGroupCode===n);if(I){const C=(b=I.assetTypes)==null?void 0:b.find(N=>N.assetTypeCode===r);if(C){a=C.terminalConfigurationId;break}}}}if(a!=null){const T=this.dataElement.terminalConfigurations,M=T==null?void 0:T.find(I=>I.terminalConfigurationId===a);return M?T6.fromJSON(M):null}return null}getTierNames(t){var r;const n=(r=this.dataElement)==null?void 0:r.domainNetworks.find(i=>i.domainNetworkName===t);return(n==null?void 0:n.tiers.map(i=>i.name))||[]}async getRulesTable(){return this._sharedRulesTable||(this._sharedRulesTable=this._createRulesTable()),await this._sharedRulesTable}getTerminalById(t){if(!this.dataElement||t==null)return null;const n=this._terminalById.get(t);return n??(this.terminalConfigurations.forEach(r=>{r.terminals.forEach(i=>{this._terminalById.set(i.id,i)})}),this._terminalById.get(t))}isUtilityLayer(t){var n;return"layerId"in t&&this._utilityLayerList.has(t.layerId)&&(((n=t.url)==null?void 0:n.startsWith(this.featureServiceUrl))??!1)}async queryAssociations(t){const[{queryAssociations:n},{default:r}]=await Promise.all([pe(()=>import("./queryAssociations-C1F-oN7L.js"),__vite__mapDeps([159,160])),pe(()=>import("./QueryAssociationsParameters-CzOgvb8c.js"),[])]),i=r.from(t);return i.gdbVersion=this.gdbVersion,i.moment=this.historicMoment,(await n(this.networkServiceUrl,i)).associations}async synthesizeAssociationGeometries(t){const[{synthesizeAssociationGeometries:n},{default:r}]=await Promise.all([pe(()=>import("./synthesizeAssociationGeometries-BoDW6CCR.js"),__vite__mapDeps([161,160])),pe(()=>import("./SynthesizeAssociationGeometriesParameters-BmM-mOIy.js"),[])]),i=r.from(t);return i.gdbVersion=this.gdbVersion,i.moment=this.historicMoment,n(this.networkServiceUrl,i)}async trace(t){const[{trace:n},{default:r}]=await Promise.all([pe(()=>import("./trace-DrejWrof.js"),[]),pe(()=>import("./TraceParameters-CesGVGu1.js"),[])]),i=r.from(t);return i.gdbVersion=this.gdbVersion,i.moment=this.historicMoment,n(this.networkServiceUrl,i)}async submitTraceJob(t){const[{submitTraceJob:n},{default:r}]=await Promise.all([pe(()=>import("./trace-DrejWrof.js"),[]),pe(()=>import("./TraceParameters-CesGVGu1.js"),[])]),i=r.from(t);i.gdbVersion=this.gdbVersion,i.moment=this.historicMoment;const s=await n(this.networkServiceUrl,i);return new E_e({statusUrl:s})}async canAddAssociation(t){const n=await this.getRulesTable();if(!n)return!1;await n.load();const r=(s,o)=>s?s.terminalId===1?!(o!=null&&o.terminalId)||(o==null?void 0:o.terminalId)===s.terminalId:s.terminalId===(o==null?void 0:o.terminalId):!(o!=null&&o.terminalId),i=(s,o)=>{var a,h,f,_,w,b,T,M,I,C,N,j;return((a=s.fromNetworkSource)==null?void 0:a.sourceId)===((h=o.fromNetworkElement)==null?void 0:h.networkSourceId)&&((f=s.toNetworkSource)==null?void 0:f.sourceId)===((_=o.toNetworkElement)==null?void 0:_.networkSourceId)&&((w=s.fromAssetGroup)==null?void 0:w.assetGroupCode)===((b=o.fromNetworkElement)==null?void 0:b.assetGroupCode)&&((T=s.fromAssetType)==null?void 0:T.assetTypeCode)===((M=o.fromNetworkElement)==null?void 0:M.assetTypeCode)&&((I=s.toAssetGroup)==null?void 0:I.assetGroupCode)===((C=o.toNetworkElement)==null?void 0:C.assetGroupCode)&&((N=s.toAssetType)==null?void 0:N.assetTypeCode)===((j=o.toNetworkElement)==null?void 0:j.assetTypeCode)&&r(s.fromTerminal,o.fromNetworkElement)&&r(s.toTerminal,o.toNetworkElement)};return t.associationType==="containment"?n.rulesCategorized.containment.some(s=>i(s,t)):t.associationType==="attachment"?n.rulesCategorized.attachment.some(s=>i(s,t)):n.rulesCategorized.connectivity.some(s=>{var o,a,h,f,_,w,b,T,M,I,C,N,j,z,U,K,J,le,ue,be,xe,_e,$e,je;return s.viaNetworkSource?((o=s.fromNetworkSource)==null?void 0:o.sourceId)===((a=t.fromNetworkElement)==null?void 0:a.networkSourceId)&&((h=s.viaNetworkSource)==null?void 0:h.sourceId)===((f=t.toNetworkElement)==null?void 0:f.networkSourceId)&&((_=s.fromAssetGroup)==null?void 0:_.assetGroupCode)===((w=t.fromNetworkElement)==null?void 0:w.assetGroupCode)&&((b=s.fromAssetType)==null?void 0:b.assetTypeCode)===((T=t.fromNetworkElement)==null?void 0:T.assetTypeCode)&&((M=s.viaAssetGroup)==null?void 0:M.assetGroupCode)===((I=t.toNetworkElement)==null?void 0:I.assetGroupCode)&&((C=s.viaAssetType)==null?void 0:C.assetTypeCode)===((N=t.toNetworkElement)==null?void 0:N.assetTypeCode)&&r(s.fromTerminal,t.fromNetworkElement)&&r(s.viaTerminal,t.toNetworkElement)||((j=s.viaNetworkSource)==null?void 0:j.sourceId)===((z=t.fromNetworkElement)==null?void 0:z.networkSourceId)&&((U=s.toNetworkSource)==null?void 0:U.sourceId)===((K=t.toNetworkElement)==null?void 0:K.networkSourceId)&&((J=s.viaAssetGroup)==null?void 0:J.assetGroupCode)===((le=t.fromNetworkElement)==null?void 0:le.assetGroupCode)&&((ue=s.viaAssetType)==null?void 0:ue.assetTypeCode)===((be=t.fromNetworkElement)==null?void 0:be.assetTypeCode)&&((xe=s.toAssetGroup)==null?void 0:xe.assetGroupCode)===((_e=t.toNetworkElement)==null?void 0:_e.assetGroupCode)&&(($e=s.toAssetType)==null?void 0:$e.assetTypeCode)===((je=t.toNetworkElement)==null?void 0:je.assetTypeCode)&&r(s.viaTerminal,t.fromNetworkElement)&&r(s.toTerminal,t.toNetworkElement):i(s,t)})}generateAddAssociations(t){return{addFeatures:t.map(n=>{var r,i,s,o,a,h;return new yl({attributes:{fromnetworksourceid:(r=n.fromNetworkElement)==null?void 0:r.networkSourceId,fromglobalid:(i=n.fromNetworkElement)==null?void 0:i.globalId,fromterminalid:(s=n.fromNetworkElement)==null?void 0:s.terminalId,tonetworksourceid:(o=n.toNetworkElement)==null?void 0:o.networkSourceId,toglobalid:(a=n.toNetworkElement)==null?void 0:a.globalId,toterminalid:(h=n.toNetworkElement)==null?void 0:h.terminalId,associationtype:f_e[n.associationType],iscontentvisible:n.isContentVisible?1:0,percentalong:n.percentAlong,globalid:n.globalId}})}),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:"globalid",objectIdField:"objectid"}}}generateDeleteAssociations(t){return{deleteFeatures:t.map(n=>({globalId:n.globalId})),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:"globalid",objectIdField:"objectid"}}}async _loadNamedTraceConfigurationsFromNetwork(t){var i;if(((i=this.sharedNamedTraceConfigurations)==null?void 0:i.length)===0)return;const n=this.sharedNamedTraceConfigurations.map(s=>s.globalId),r=await this.queryNamedTraceConfigurations({globalIds:n},t);for(const s of this.sharedNamedTraceConfigurations){const o=r==null?void 0:r.find(a=>a.globalId===s.globalId);if(o){const a=o.write({},{origin:"service"});s.read(a,{origin:"service"})}}}async _createRulesTable(){var o;const t=this.networkSystemLayers.rulesTableUrl,n=new tW({url:t});await n.load();const r=(o=this.dataElement)==null?void 0:o.domainNetworks;if(!r)return null;const i=r.flatMap(a=>[...a.edgeSources||[],...a.junctionSources||[]]),s=(await $_e(n)).map(a=>this._hydrateRuleInfo(n,i,a));return new m_e({layer:n,rules:s})}_hydrateRuleInfo(t,n,r){const i=t.fieldsIndex,s=i.get("RULETYPE"),o=i.get("CREATIONDATE"),a=i.get("FROMNETWORKSOURCEID"),h=i.get("FROMASSETGROUP"),f=i.get("FROMASSETTYPE"),_=i.get("FROMTERMINALID"),w=i.get("TONETWORKSOURCEID"),b=i.get("TOASSETGROUP"),T=i.get("TOASSETTYPE"),M=i.get("TOTERMINALID"),I=i.get("VIANETWORKSOURCEID"),C=i.get("VIAASSETGROUP"),N=i.get("VIAASSETTYPE"),j=i.get("VIATERMINALID"),z=r.attributes[s.name],U=new Date(r.attributes[o.name]),K=[{networkSourceId:r.attributes[a.name],assetGroupId:r.attributes[h.name],assetTypeId:r.attributes[f.name],terminalId:r.attributes[_.name]},{networkSourceId:r.attributes[w.name],assetGroupId:r.attributes[b.name],assetTypeId:r.attributes[T.name],terminalId:r.attributes[M.name]},{networkSourceId:r.attributes[I.name],assetGroupId:r.attributes[C.name],assetTypeId:r.attributes[N.name],terminalId:r.attributes[j.name]}];let J;(function(ue){ue[ue.from=0]="from",ue[ue.to=1]="to",ue[ue.via=2]="via"})(J||(J={}));const le={ruleType:z,creationDate:U};for(const ue of[J.from,J.to,J.via]){if(z!==Mu.RTEdgeJunctionEdgeConnectivity&&ue===J.via)continue;const be=K[ue],xe=n.find(Et=>Et.sourceId===be.networkSourceId),_e=xe==null?void 0:xe.assetGroups.find(Et=>Et.assetGroupCode===be.assetGroupId),$e=_e==null?void 0:_e.assetTypes.find(Et=>Et.assetTypeCode===be.assetTypeId),je=this._getTerminal($e,be);let Me="";switch(ue){case J.from:Me="from";break;case J.to:Me="to";break;case J.via:Me="via"}le[`${Me}NetworkSource`]=xe,le[`${Me}AssetGroup`]=_e,le[`${Me}AssetType`]=$e,le[`${Me}Terminal`]=je==null?void 0:je.toJSON()}return le}_getTerminal(t,n){var s,o;const r=t==null?void 0:t.terminalConfigurationId,i=(s=this.terminalConfigurations)==null?void 0:s.find(a=>a.id===r);return((o=i==null?void 0:i.terminals)==null?void 0:o.find(a=>a.id===n.terminalId))??null}};async function $_e(e){const t=new gl({where:"1=1",outFields:["*"]});return(await NH(e,t)).features}l([p({type:[g_e],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],fu.prototype,"sharedNamedTraceConfigurations",void 0),l([p({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],fu.prototype,"type",void 0),l([p({readOnly:!0})],fu.prototype,"serviceTerritoryFeatureLayerId",null),l([p({readOnly:!0})],fu.prototype,"networkSystemLayers",null),l([p({readOnly:!0})],fu.prototype,"terminalConfigurations",null),l([p({readOnly:!0})],fu.prototype,"domainNetworkNames",null),fu=l([k("esri.networks.UtilityNetwork")],fu);const nW=fu,M_e=Object.freeze(Object.defineProperty({__proto__:null,default:nW},Symbol.toStringTag,{value:"Module"}));let Py=class extends vt(ne){constructor(t){super(t),this.expression=null,this.returnType="string",this.title=null}};l([p({type:String,json:{write:{isRequired:!0}}})],Py.prototype,"expression",void 0),l([p({type:["number","string"],json:{write:!0}})],Py.prototype,"returnType",void 0),l([p({type:String,json:{write:!0}})],Py.prototype,"title",void 0),Py=l([k("esri.webdoc.geotriggersInfo.ExpressionInfo")],Py);const rW=Py,Kb=new pt({deviceLocation:"device-location"});let sv=class extends vt(ne){constructor(t){super(t),this.filterExpression=null,this.type="device-location"}};l([p({type:rW,json:{write:!0}})],sv.prototype,"filterExpression",void 0),l([p({type:Kb.apiValues,readOnly:!0,json:{type:Kb.jsonValues,read:Kb.read,write:Kb.write}})],sv.prototype,"type",void 0),sv=l([k("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],sv);const I_e=sv;let ov=class extends vt(ne){constructor(t){super(t),this.geometry=null,this.where=null}};l([p({types:Tf,json:{read:Du,write:!0}})],ov.prototype,"geometry",void 0),l([p({type:String,json:{write:!0}})],ov.prototype,"where",void 0),ov=l([k("esri.webdoc.geotriggersInfo.FeatureFilter")],ov);const P_e=ov;let Cy=class extends vt(ne){constructor(t){super(t),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};l([p({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],Cy.prototype,"layerId",void 0),l([p({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],Cy.prototype,"layerUrl",void 0),l([ke({featureLayer:"feature-layer"},{readOnly:!0})],Cy.prototype,"type",void 0),Cy=l([k("esri.webdoc.geotriggersInfo.FeatureLayerSource")],Cy);const C_e=Cy;let Ap=class extends vt(ne){constructor(t){super(t),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};l([p({type:C_e,json:{write:{isRequired:!0}}})],Ap.prototype,"fenceSource",void 0),l([p({type:P_e,json:{write:!0}})],Ap.prototype,"filter",void 0),l([p({type:Number,json:{write:!0}})],Ap.prototype,"bufferDistance",void 0),l([ke({features:"features"},{readOnly:!0})],Ap.prototype,"type",void 0),Ap=l([k("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],Ap);const O_e=Ap;let C2=class extends vt(ne){constructor(t){super(t),this.type="fence"}};l([ke({fence:"fence"},{readOnly:!0})],C2.prototype,"type",void 0),C2=l([k("esri.webdoc.geotriggersInfo.Geotrigger")],C2);const iW=C2;let av=class extends vt(ne){constructor(t){super(t),this.expressionInfo=null,this.requestedActions=null}};l([p({type:rW,json:{write:!0}})],av.prototype,"expressionInfo",void 0),l([p({type:[String],json:{write:!0}})],av.prototype,"requestedActions",void 0),av=l([k("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],av);const A_e=av,k_e=new pt({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),R_e=new pt({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),Xb=new pt({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let Yo=class extends iW{constructor(t){super(t),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};l([ke(k_e)],Yo.prototype,"enterExitRule",void 0),l([p({type:I_e,json:{write:{isRequired:!0}}})],Yo.prototype,"feed",void 0),l([ke(R_e)],Yo.prototype,"feedAccuracyMode",void 0),l([p({type:Xb.apiValues,json:{type:Xb.jsonValues,read:Xb.read,write:{writer:Xb.write,isRequired:!0}}})],Yo.prototype,"fenceNotificationRule",void 0),l([p({type:O_e,json:{write:{isRequired:!0}}})],Yo.prototype,"fenceParameters",void 0),l([p({type:String,json:{write:!0}})],Yo.prototype,"name",void 0),l([p({type:A_e,json:{write:!0}})],Yo.prototype,"notificationOptions",void 0),l([ke({fence:"fence"},{readOnly:!0})],Yo.prototype,"type",void 0),Yo=l([k("esri.webdoc.geotriggersInfo.FenceGeotrigger")],Yo);const L_e=Yo,N_e={base:iW,key:"type",typeMap:{fence:L_e}};let O2=class extends vt(ne){constructor(t){super(t),this.geotriggers=null}};l([p({types:[N_e],json:{write:{isRequired:!0}}})],O2.prototype,"geotriggers",void 0),O2=l([k("esri.webdoc.GeotriggersInfo")],O2);const D_e=O2;let Oy=class extends vt(ne){constructor(t){super(t),this.portalItem=null}readPortalItem(t,n,r){const{itemId:i}=n;if(i)return new ll({id:i,portal:r==null?void 0:r.portal})}writePortalItem(t,n){t!=null&&t.id&&(n.itemId=t.id)}};l([p({type:ll,json:{write:{isRequired:!0}}})],Oy.prototype,"portalItem",void 0),l([de("portalItem",["itemId"])],Oy.prototype,"readPortalItem",null),l([ge("portalItem",{itemId:{type:String}})],Oy.prototype,"writePortalItem",null),Oy=l([k("esri.webdoc.ips.PositioningService")],Oy);const F_e=Oy;let A2=class extends vt(ne){constructor(t){super(t),this.positioningService=null}};l([p({type:F_e,json:{write:{isRequired:!0}}})],A2.prototype,"positioningService",void 0),A2=l([k("esri.webdoc.IPSInfo")],A2);const j_e=A2;function uI(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}const sW=new og(2,32),z_e={currentVersion:sW,createInitialViewProperties:()=>new AT,parseVersion:og.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},V_e=Ae.ofType(nW);let sd=class extends Nle{constructor(t){super(t),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const t=this.utilityNetworks.removeAll();for(const n of t)n.destroy();this.utilityNetworks.destroy()}}get context(){return z_e}loadAll(){return $x(this,t=>{var n,r;t(this.ground,this.basemap,this.layers,this.tables,(r=(n=this.ipsInfo)==null?void 0:n.positioningService)==null?void 0:r.portalItem)})}static fromJSON(t){if(t)return new this({resourceInfo:t});throw new Y("webmap:empty-resource","Expected a JSON resource but got nothing")}};sd.VERSION=sW,l([p({type:D_e,json:{write:!0}})],sd.prototype,"geotriggersInfo",void 0),l([p({type:j_e,json:{write:!0,name:"mapIPSInfo"}})],sd.prototype,"ipsInfo",void 0),l([p({json:{write:!0}})],sd.prototype,"presentation",void 0),l([p({type:V_e,json:{read:!0,write:!0}})],sd.prototype,"utilityNetworks",void 0),sd=l([k("esri.WebMap")],sd);const U_e=sd;var tA;let Wa=tA=class extends ne{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new tA({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};l([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Wa.prototype,"cols",void 0),l([p({type:Mt,json:{write:!0}})],Wa.prototype,"level",void 0),l([p({type:String,json:{write:!0}})],Wa.prototype,"levelValue",void 0),l([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Wa.prototype,"origin",void 0),l([p({type:Number,json:{write:!0}})],Wa.prototype,"resolution",void 0),l([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Wa.prototype,"rows",void 0),l([p({type:Number,json:{write:!0}})],Wa.prototype,"scale",void 0),Wa=tA=l([k("esri.layers.support.LOD")],Wa);const gd=Wa;let G_e=class{constructor(t,n,r,i,s=void 0){this.id=t,this.level=n,this.row=r,this.col=i,this.extent=s}};var od;const x6=new pt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let kr=od=class extends ne{static create(e={}){const{resolutionFactor:t=1,scales:n,size:r=256,spatialReference:i=dt.WebMercator,numLODs:s=24}=e;if(!vs(i)){const w=[];if(n)for(let b=0;b<n.length;b++){const T=n[b];w.push(new gd({level:b,scale:T,resolution:T}))}else{let b=5e-4;for(let T=s-1;T>=0;T--)w.unshift(new gd({level:T,scale:b,resolution:b})),b*=2}return new od({dpi:96,lods:w,origin:new gt(0,0,i),size:[r,r],spatialReference:i})}const o=bi(i),a=e.origin?new gt({x:e.origin.x,y:e.origin.y,spatialReference:i}):new gt(o?{x:o.origin[0],y:o.origin[1],spatialReference:i}:{x:0,y:0,spatialReference:i}),h=96,f=1/(Zd(i)*39.37*h),_=[];if(n)for(let w=0;w<n.length;w++){const b=n[w],T=b*f;_.push(new gd({level:w,scale:b,resolution:T}))}else{let w=Mx(i)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const b=Math.ceil(s/t);_.push(new gd({level:0,scale:w,resolution:w*f}));for(let T=1;T<b;T++){const M=w/2**t,I=M*f;_.push(new gd({level:T,scale:M,resolution:I})),w=M}}return new od({dpi:h,lods:_,origin:a,size:[r,r],spatialReference:i})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const n=bi(e);return e.isWrappable&&!!n&&Math.abs(n.origin[0]-t.x)<=n.dx}return!1}readOrigin(e,t){return gt.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,n=0;const r=[],i=this._levelToLOD={};e&&(t=-1/0,n=1/0,e.forEach(s=>{r.push(s.scale),t=s.scale>t?s.scale:t,n=s.scale<n?s.scale:n,i[s.level]=s})),this._set("scales",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const n=Math.floor(e),r=n+1;return t[n]/(t[n]/t[r])**(e-n)}scaleToZoom(e){const t=this.scales,n=t.length-1;let r=0;for(;r<n;r++){const i=t[r],s=t[r+1];if(i<=e)return r;if(s===e)return r+1;if(i>e&&s<e)return r+Math.log(i/e)/Math.log(i/s)}return r}tileAt(e,t,n,r){const i=this.lodAt(e);if(!i)return null;let s,o;if(typeof t=="number")s=t,o=n;else if(dr(t.spatialReference,this.spatialReference))s=t.x,o=t.y,r=n;else{const f=Cx(t,this.spatialReference);if(f==null)return null;s=f.x,o=f.y,r=n}const a=i.resolution*this.size[0],h=i.resolution*this.size[1];return r||(r=new G_e(null,0,0,0,Hi())),r.level=e,r.row=Math.floor((this.origin.y-o)/h+.001),r.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=od.ExtrapolateOptions.NONE){let n=this.lodAt(e.level);if(!n&&t===od.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(n=o)}if(!n)return;const r=e.level-n.level,i=n.resolution*this.size[0]/2**r,s=n.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Hi()),e.extent[0]=this.origin.x+e.col*i,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+i,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const n=this.lodAt(t.level);if(n==null)return null;const{resolution:r}=n,i=r*this.size[0],s=r*this.size[1];return e[0]=this.origin.x+t.col*i,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+i,e[3]=e[1]+s,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return od.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const n=[],r=this.lods.length-t;for(let i=0;i<r;i++){const s=i+t,{scale:o,resolution:a}=s>=0?this.lods[s]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};n.push(new gd({level:i,scale:o,resolution:a}))}return new od({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:n})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let n=0;n<e.length;n++){const r=e[n];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};l([p({type:Number,json:{write:!0}})],kr.prototype,"compressionQuality",void 0),l([p({type:Number,json:{write:!0}})],kr.prototype,"dpi",void 0),l([p({type:String,json:{read:x6.read,write:x6.write,origins:{"web-scene":{read:!1,write:!1}}}})],kr.prototype,"format",void 0),l([p({readOnly:!0})],kr.prototype,"isWrappable",null),l([p({type:gt,json:{write:!0}})],kr.prototype,"origin",void 0),l([de("origin")],kr.prototype,"readOrigin",null),l([p({type:[gd],value:null,json:{write:!0}})],kr.prototype,"lods",null),l([p({readOnly:!0})],kr.prototype,"scales",void 0),l([p({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],kr.prototype,"size",void 0),l([de("size",["rows","cols"])],kr.prototype,"readSize",null),l([ge("size",{cols:{type:Mt},rows:{type:Mt}})],kr.prototype,"writeSize",null),l([p({type:dt,json:{write:!0}})],kr.prototype,"spatialReference",void 0),kr=od=l([k("esri.layers.support.TileInfo")],kr),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(kr||(kr={}));const B_e=kr,k2={widthBreakpoint:{getValue(e){const t=e.viewSize[0],n=e.breakpoints,r=this.values;return t<=n.xsmall?r.xsmall:t<=n.small?r.small:t<=n.medium?r.medium:t<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],n=e.breakpoints,r=this.values;return t<=n.xsmall?r.xsmall:t<=n.small?r.small:t<=n.medium?r.medium:t<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,n=t[0],r=t[1],i=this.values;return r>=n?i.portrait:i.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},cI={xsmall:544,small:768,medium:992,large:1200};function q_e(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function dI(e,t){return t?k2[e].valueToClassName[t].split(" "):[]}const H_e=e=>{let t=class extends e{constructor(...n){super(...n),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=cI}initialize(){this.addHandles(ct(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),si))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(n){if(n!==this._get("breakpoints")){if(!q_e(n)){const r=JSON.stringify(cI,null,2);console.warn("provided breakpoints are not valid, using defaults:"+r),n=cI}this._set("breakpoints",{...n})}}_updateClassNames(){if(!this.container)return;const n=wi.acquire(),r=wi.acquire();let i,s=!1;for(i in k2){const o=this[i],a=k2[i].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[i]=a,dI(i,o).forEach(h=>r.push(h)),dI(i,a).forEach(h=>n.push(h)))}s&&(this._applyClassNameChanges(n,r),wi.release(n),wi.release(r))}_applyClassNameChanges(n,r){const i=this.container;i&&(r.forEach(s=>i.classList.remove(s)),n.forEach(s=>i.classList.add(s)))}_removeActiveClassNames(){const n=this.container;if(!n)return;let r;for(r in k2)dI(r,this[r]).forEach(i=>n.classList.remove(i))}};return l([p()],t.prototype,"breakpoints",null),l([p()],t.prototype,"orientation",void 0),l([p()],t.prototype,"widthBreakpoint",void 0),l([p()],t.prototype,"heightBreakpoint",void 0),t=l([k("esri.views.BreakpointsOwner")],t),t};function YR(e){return typeof e=="string"?document.getElementById(e):e??null}function E6(e,t){for(;;){const n=e.firstChild;if(!n)break;t.appendChild(n)}}let nf=class extends Fe{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,n,r={}){return this._installWatch(t,n,r,ct)}addWhen(t,n,r={}){return this._installWatch(t,n,r,hl)}addOnCollectionChange(t,n,{initial:r=!1,final:i=!1}={}){const s=++this._handleId;return this.addHandles([ff(t,"after-changes",this._createSyncUpdatingCallback(),pl),ff(t,"change",n,{onListenerAdd:r?o=>n({added:o.toArray(),removed:[]}):void 0,onListenerRemove:i?o=>n({added:[],removed:o.toArray()}):void 0})],s),Ft(()=>this.removeHandles(s))}addPromise(t){if(t==null)return t;const n=++this._handleId;this.addHandles(Ft(()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(Qb)||this._set("updating",!1))}),n),this._pendingPromises.add(t),this._set("updating",!0);const r=()=>this.removeHandles(n);return t.then(r,r),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,n,r={},i){const s=++this._handleId;r.sync||this._installSyncUpdatingWatch(t,s);const o=i(t,n,r);return this.addHandles(o,s),Ft(()=>this.removeHandles(s))}_installSyncUpdatingWatch(t,n){const r=this._createSyncUpdatingCallback(),i=ct(t,r,{sync:!0,equals:()=>!1});return this.addHandles(i,n),i}_createSyncUpdatingCallback(){return()=>{this.removeHandles(Qb),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(P0(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(Qb))}),Qb)}}};l([p({readOnly:!0})],nf.prototype,"updating",void 0),nf=l([k("esri.core.support.UpdatingHandles")],nf);const Qb=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zT=function(){return zT=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},zT.apply(this,arguments)},nA={exports:{}},On={},rA={exports:{}},Cf={};function oW(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function W_e(e,t,n){}function Z_e(e,t,n){}var J_e=/javascript\s*\:/img;function Y_e(e,t){return J_e.test(t)?"":t}Cf.whiteList=oW();Cf.getDefaultWhiteList=oW;Cf.onAttr=W_e;Cf.onIgnoreAttr=Z_e;Cf.safeAttrValue=Y_e;var K_e={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,i;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},K_=K_e;function X_e(e,t){e=K_.trimRight(e),e[e.length-1]!==";"&&(e+=";");var n=e.length,r=!1,i=0,s=0,o="";function a(){if(!r){var _=K_.trim(e.slice(i,s)),w=_.indexOf(":");if(w!==-1){var b=K_.trim(_.slice(0,w)),T=K_.trim(_.slice(w+1));if(b){var M=t(i,o.length,b,T,_);M&&(o+=M+"; ")}}}i=s+1}for(;s<n;s++){var h=e[s];if(h==="/"&&e[s+1]==="*"){var f=e.indexOf("*/",s+2);if(f===-1)break;s=f+1,i=s+1,r=!1}else h==="("?r=!0:h===")"?r=!1:h===";"?r||a():h===`
`&&a()}return K_.trim(o)}var Q_e=X_e,eS=Cf,ewe=Q_e;function $6(e){return e==null}function twe(e){var t={};for(var n in e)t[n]=e[n];return t}function aW(e){e=twe(e||{}),e.whiteList=e.whiteList||eS.whiteList,e.onAttr=e.onAttr||eS.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||eS.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||eS.safeAttrValue,this.options=e}aW.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,i=n.onAttr,s=n.onIgnoreAttr,o=n.safeAttrValue,a=ewe(e,function(h,f,_,w,b){var T=r[_],M=!1;if(T===!0?M=T:typeof T=="function"?M=T(w):T instanceof RegExp&&(M=T.test(w)),M!==!0&&(M=!1),w=o(_,w),!!w){var I={position:f,sourcePosition:h,source:b,isWhite:M};if(M){var C=i(_,w,I);return $6(C)?_+":"+w:C}else{var C=s(_,w,I);if(!$6(C))return C}}});return a};var nwe=aW;(function(e,t){var n=Cf,r=nwe;function i(o,a){var h=new r(a);return h.process(o)}t=e.exports=i,t.FilterCSS=r;for(var s in n)t[s]=n[s]})(rA,rA.exports);var KR=rA.exports,XR={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,i;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,n=t.exec(e);return n?n.index:-1}},rwe=KR.FilterCSS,iwe=KR.getDefaultWhiteList,VT=XR;function lW(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var uW=new rwe;function swe(e,t,n){}function owe(e,t,n){}function awe(e,t,n){}function lwe(e,t,n){}function cW(e){return e.replace(cwe,"&lt;").replace(dwe,"&gt;")}function uwe(e,t,n,r){if(n=yW(n),t==="href"||t==="src"){if(n=VT.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(t==="background"){if(tS.lastIndex=0,tS.test(n))return""}else if(t==="style"){if(M6.lastIndex=0,M6.test(n)||(I6.lastIndex=0,I6.test(n)&&(tS.lastIndex=0,tS.test(n))))return"";r!==!1&&(r=r||uW,n=r.process(n))}return n=gW(n),n}var cwe=/</g,dwe=/>/g,hwe=/"/g,pwe=/&quot;/g,fwe=/&#([a-zA-Z0-9]*);?/gim,mwe=/&colon;?/gim,ywe=/&newline;?/gim,tS=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,M6=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,I6=/u\s*r\s*l\s*\(.*/gi;function dW(e){return e.replace(hwe,"&quot;")}function hW(e){return e.replace(pwe,'"')}function pW(e){return e.replace(fwe,function(n,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function fW(e){return e.replace(mwe,":").replace(ywe," ")}function mW(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return VT.trim(t)}function yW(e){return e=hW(e),e=pW(e),e=fW(e),e=mW(e),e}function gW(e){return e=dW(e),e=cW(e),e}function gwe(){return""}function _we(e,t){typeof t!="function"&&(t=function(){});var n=!Array.isArray(e);function r(o){return n?!0:VT.indexOf(e,o)!==-1}var i=[],s=!1;return{onIgnoreTag:function(o,a,h){if(r(o))if(h.isClosing){var f="[/removed]",_=h.position+f.length;return i.push([s!==!1?s:h.position,_]),s=!1,f}else return s||(s=h.position),"[removed]";else return t(o,a,h)},remove:function(o){var a="",h=0;return VT.forEach(i,function(f){a+=o.slice(h,f[0]),h=f[1]}),a+=o.slice(h),a}}}function wwe(e){for(var t="",n=0;n<e.length;){var r=e.indexOf("<!--",n);if(r===-1){t+=e.slice(n);break}t+=e.slice(n,r);var i=e.indexOf("-->",r);if(i===-1)break;n=i+3}return t}function vwe(e){var t=e.split("");return t=t.filter(function(n){var r=n.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}On.whiteList=lW();On.getDefaultWhiteList=lW;On.onTag=swe;On.onIgnoreTag=owe;On.onTagAttr=awe;On.onIgnoreTagAttr=lwe;On.safeAttrValue=uwe;On.escapeHtml=cW;On.escapeQuote=dW;On.unescapeQuote=hW;On.escapeHtmlEntities=pW;On.escapeDangerHtml5Entities=fW;On.clearNonPrintableCharacter=mW;On.friendlyAttrValue=yW;On.escapeAttrValue=gW;On.onIgnoreTagStripAll=gwe;On.StripTagBody=_we;On.stripCommentTag=wwe;On.stripBlankChar=vwe;On.cssFilter=uW;On.getDefaultCSSWhiteList=iwe;var vE={},_d=XR;function bwe(e){var t=_d.spaceIndex(e),n;return t===-1?n=e.slice(1,-1):n=e.slice(1,t+1),n=_d.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function Swe(e){return e.slice(0,2)==="</"}function Twe(e,t,n){var r="",i=0,s=!1,o=!1,a=0,h=e.length,f="",_="";e:for(a=0;a<h;a++){var w=e.charAt(a);if(s===!1){if(w==="<"){s=a;continue}}else if(o===!1){if(w==="<"){r+=n(e.slice(i,a)),s=a,i=a;continue}if(w===">"){r+=n(e.slice(i,s)),_=e.slice(s,a+1),f=bwe(_),r+=t(s,r.length,f,_,Swe(_)),i=a+1,s=!1;continue}if(w==='"'||w==="'")for(var b=1,T=e.charAt(a-b);T.trim()===""||T==="=";){if(T==="="){o=w;continue e}T=e.charAt(a-++b)}}else if(w===o){o=!1;continue}}return i<e.length&&(r+=n(e.substr(i))),r}var xwe=/[^a-zA-Z0-9\\_:.-]/gim;function Ewe(e,t){var n=0,r=0,i=[],s=!1,o=e.length;function a(b,T){if(b=_d.trim(b),b=b.replace(xwe,"").toLowerCase(),!(b.length<1)){var M=t(b,T||"");M&&i.push(M)}}for(var h=0;h<o;h++){var f=e.charAt(h),_,w;if(s===!1&&f==="="){s=e.slice(n,h),n=h+1,r=e.charAt(n)==='"'||e.charAt(n)==="'"?n:Mwe(e,h+1);continue}if(s!==!1&&h===r){if(w=e.indexOf(f,h+1),w===-1)break;_=_d.trim(e.slice(r+1,w)),a(s,_),s=!1,h=w,n=h+1;continue}if(/\s|\n|\t/.test(f))if(e=e.replace(/\s|\n|\t/g," "),s===!1)if(w=$we(e,h),w===-1){_=_d.trim(e.slice(n,h)),a(_),s=!1,n=h+1;continue}else{h=w-1;continue}else if(w=Iwe(e,h-1),w===-1){_=_d.trim(e.slice(n,h)),_=P6(_),a(s,_),s=!1,n=h+1;continue}else continue}return n<e.length&&(s===!1?a(e.slice(n)):a(s,P6(_d.trim(e.slice(n))))),_d.trim(i.join(" "))}function $we(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="="?t:-1}}function Mwe(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="'"||n==='"'?t:-1}}function Iwe(e,t){for(;t>0;t--){var n=e[t];if(n!==" ")return n==="="?t:-1}}function Pwe(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function P6(e){return Pwe(e)?e.substr(1,e.length-2):e}vE.parseTag=Twe;vE.parseAttr=Ewe;var Cwe=KR.FilterCSS,Xo=On,_W=vE,Owe=_W.parseTag,Awe=_W.parseAttr,R2=XR;function nS(e){return e==null}function kwe(e){var t=R2.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=R2.trim(e.slice(t+1,-1));var n=e[e.length-1]==="/";return n&&(e=R2.trim(e.slice(0,-1))),{html:e,closing:n}}function Rwe(e){var t={};for(var n in e)t[n]=e[n];return t}function Lwe(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map(function(r){return r.toLowerCase()}):t[n.toLowerCase()]=e[n];return t}function wW(e){e=Rwe(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Xo.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=Lwe(e.whiteList||e.allowList):e.whiteList=Xo.whiteList,e.onTag=e.onTag||Xo.onTag,e.onTagAttr=e.onTagAttr||Xo.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Xo.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Xo.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Xo.safeAttrValue,e.escapeHtml=e.escapeHtml||Xo.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Cwe(e.css))}wW.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,i=n.onTag,s=n.onIgnoreTag,o=n.onTagAttr,a=n.onIgnoreTagAttr,h=n.safeAttrValue,f=n.escapeHtml,_=t.cssFilter;n.stripBlankChar&&(e=Xo.stripBlankChar(e)),n.allowCommentTag||(e=Xo.stripCommentTag(e));var w=!1;n.stripIgnoreTagBody&&(w=Xo.StripTagBody(n.stripIgnoreTagBody,s),s=w.onIgnoreTag);var b=Owe(e,function(T,M,I,C,N){var j={sourcePosition:T,position:M,isClosing:N,isWhite:Object.prototype.hasOwnProperty.call(r,I)},z=i(I,C,j);if(!nS(z))return z;if(j.isWhite){if(j.isClosing)return"</"+I+">";var U=kwe(C),K=r[I],J=Awe(U.html,function(le,ue){var be=R2.indexOf(K,le)!==-1,xe=o(I,le,ue,be);return nS(xe)?be?(ue=h(I,le,ue,_),ue?le+'="'+ue+'"':le):(xe=a(I,le,ue,be),nS(xe)?void 0:xe):xe});return C="<"+I,J&&(C+=" "+J),U.closing&&(C+=" /"),C+=">",C}else return z=s(I,C,j),nS(z)?f(C):z},f);return w&&(b=w.remove(b)),b};var Nwe=wW;(function(e,t){var n=On,r=vE,i=Nwe;function s(a,h){var f=new i(h);return f.process(a)}t=e.exports=s,t.filterXSS=s,t.FilterXSS=i,function(){for(var a in n)t[a]=n[a];for(var h in r)t[h]=r[h]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(nA,nA.exports);var Lm=nA.exports,Dwe=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},Fwe=function(){function e(t,n){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=zT(zT({},Lm.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,h){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?r.sanitizeUrl(a):Lm.safeAttrValue(s,o,a,h)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var i;t&&!n?i=t:t&&n?(i=Object.create(this.arcgisFilterOptions),i.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(s){if(s==="whiteList")i.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]);else if(s==="css"){var o=t.css.whiteList;o!=null&&t.css instanceof Object&&Object.keys(o).forEach(function(a){return i.css.whiteList[a]=o[a]})}else i[s]=t[s]})):(i=Object.create(this.arcgisFilterOptions),i.whiteList=this.arcgisWhiteList,i.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=i,this._xssFilter=new Lm.FilterXSS(i)}return e.prototype.sanitize=function(t,n){switch(n===void 0&&(n={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,n);default:return n.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,n){var r=(n??{}).isProtocolRequired,i=r===void 0?!0:r,s=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),h=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||h?Lm.escapeAttrValue(t):!s&&!i?Lm.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,n,r,i){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,n,r,i):Lm.safeAttrValue(t,n,r,i)},e.prototype.validate=function(t,n){n===void 0&&(n={});var r=this.sanitize(t,n);return{isValid:t===r,sanitized:r}},e.prototype.encodeHTML=function(t){var n=this;return String(t).replace(/[&<>"'\/]/g,function(r){return n._entityMap[r]})},e.prototype.encodeAttrValue=function(t){var n=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(r,i){return n.test(r)?r:"&#x".concat(Number(t.charCodeAt(i)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var n={};return t.forEach(function(r){Object.keys(r).forEach(function(i){Array.isArray(r[i])&&Array.isArray(n[i])?n[i]=n[i].concat(r[i]):n[i]=r[i]})}),n},e.prototype._iterateOverObject=function(t,n){var r=this;n===void 0&&(n={});try{var i=!1,s=void 0;if(Array.isArray(t))s=t.reduce(function(a,h){var f=r.validate(h,n);return f.isValid?a.concat([h]):(i=!0,a.concat([f.sanitized]))},[]);else if(Dwe(t)){var o=Object.keys(t);s=o.reduce(function(a,h){var f=t[h],_=r.validate(f,n);return _.isValid?a[h]=f:(i=!0,a[h]=_.sanitized),a},{})}else return n.allowUndefined&&typeof t>"u"?void 0:null;return i?s:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const bE=new Map;function vW(){bE.clear()}function jwe(e){return bE.get(e)}function zwe(e,t){bE.set(e,t)}function hI(e){bE.delete(e)}function Vwe(...e){const t=wi.acquire();for(let r=0;r<e.length;r++){const i=e[r],s=typeof i;if(s==="string")t.push(i);else if(Array.isArray(i))t.push.apply(t,i);else if(s==="object")for(const o in i)i[o]&&t.push(o)}const n=t.join(" ");return wi.release(t),n}(()=>{const e=new Map,t=new ResizeObserver(r=>{var i;vW();for(const s of r)(i=e.get(s.target))==null||i(s)}),n=(r,i,s)=>(e.set(r,i),t.observe(r,s),Ft(()=>{t.unobserve(r),e.delete(r)}));return(r,i,s)=>{let o=null;return x0([ct(()=>typeof r=="function"?r():r,a=>{o==null||o.remove(),a&&(o=n(a,i,s))},ws),Ft(()=>o==null?void 0:o.remove())])}})();function Uwe(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function wAe(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function vAe(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const Gwe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],Bwe=Gwe.reduce((e,t)=>(e[t]=[],e),{}),qwe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],bW=new Fwe({whiteList:Bwe,onTagAttr:(e,t,n)=>{const r=`${t}="${n}"`;if(qwe.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Hwe(e){return e==="Enter"||e===" "}async function Wwe(e,t){await DX(I0(t));const n=typeof e=="function"?e():e;n&&("setFocus"in n&&typeof n.setFocus=="function"?await n.setFocus():n instanceof HTMLElement&&n.focus())}const SW="http://www.w3.org/",SE=`${SW}2000/svg`,TW=`${SW}1999/xlink`;let C6=[],QR=(e,t)=>{let n={};return Object.keys(e).forEach(r=>{n[r]=e[r]}),t&&Object.keys(t).forEach(r=>{n[r]=t[r]}),n},eL=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),xW=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},Zwe=(e,t,n)=>{if(t.vnodeSelector!==""){for(let r=n;r<e.length;r++)if(eL(e[r],t))return r}return-1},pI=(e,t,n,r)=>{let i=e[t];if(i.vnodeSelector==="")return;let s=i.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(eL(a,i))throw new Error(`${n.vnodeSelector} had a ${i.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Jwe=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},iA=[],sA=!1,EW=e=>{(e.children||[]).forEach(EW),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},O6=()=>{sA=!1,iA.forEach(EW),iA.length=0},A6=e=>{iA.push(e),sA||(sA=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(O6,{timeout:16}):setTimeout(O6,16))},k6=e=>{let t=e.domNode;if(e.properties){let n=e.properties.exitAnimation;if(n)return t.style.pointerEvents="none",void n(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),A6(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),A6(e))},Ywe=(e,t,n)=>{if(!t)return;let r=n.eventHandlerInterceptor,i=Object.keys(t),s=i.length;for(let o=0;o<s;o++){let a=i[o],h=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")aA(e,h,!0);else if(a==="classes"){let f=Object.keys(h),_=f.length;for(let w=0;w<_;w++){let b=f[w];h[b]&&e.classList.add(b)}}else if(a==="styles"){let f=Object.keys(h),_=f.length;for(let w=0;w<_;w++){let b=f[w],T=h[b];T&&(xW(T),n.styleApplyer(e,b,T))}}else if(a!=="key"&&h!=null){let f=typeof h;f==="function"?(a.lastIndexOf("on",0)===0&&(r&&(h=r(a,h,e,t)),a==="oninput"&&function(){let _=h;h=function(w){_.apply(this,[w]),w.target["oninput-value"]=w.target.value}}()),e[a]=h):n.namespace===SE?a==="href"?e.setAttributeNS(TW,a,h):e.setAttribute(a,h):f==="string"&&a!=="value"?a==="innerHTML"?e[a]=bW.sanitize(h):oA(e)&&a in e?e[a]=h:e.setAttribute(a,h):e[a]=h}}};function oA(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let UT,Kwe=(e,t,n)=>{if(t)for(let r of t)Vv(r,e,void 0,n)},$W=(e,t,n)=>{Kwe(e,t.children,n),t.text&&(e.textContent=t.text),Ywe(e,t.properties,n),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,n,t.vnodeSelector,t.properties,t.children])},Vv=(e,t,n,r)=>{let i,s=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")i=e.domNode=a.createTextNode(e.text),n!==void 0?t.insertBefore(i,n):t.appendChild(i);else{for(let h=0;h<=o.length;++h){let f=o.charAt(h);if(h===o.length||f==="."||f==="#"){let _=o.charAt(s-1),w=o.slice(s,h);_==="."?i.classList.add(w):_==="#"?i.id=w:(w==="svg"&&(r=QR(r,{namespace:SE})),r.namespace!==void 0?i=e.domNode=a.createElementNS(r.namespace,w):(i=e.domNode=e.domNode||a.createElement(w),w==="input"&&e.properties&&e.properties.type!==void 0&&i.setAttribute("type",e.properties.type)),n!==void 0?t.insertBefore(i,n):i.parentNode!==t&&t.appendChild(i)),s=h+1}}$W(i,e,r)}},aA=(e,t,n)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,n)})},Xwe=(e,t,n,r)=>{if(!n)return;let i=!1,s=Object.keys(n),o=s.length;for(let a=0;a<o;a++){let h=s[a],f=n[h],_=t[h];if(h==="class")_!==f&&(aA(e,_,!1),aA(e,f,!0));else if(h==="classes"){let w=e.classList,b=Object.keys(f),T=b.length;for(let M=0;M<T;M++){let I=b[M],C=!!f[I];C!==!!_[I]&&(i=!0,C?w.add(I):w.remove(I))}}else if(h==="styles"){let w=Object.keys(f),b=w.length;for(let T=0;T<b;T++){let M=w[T],I=f[M];I!==_[M]&&(i=!0,I?(xW(I),r.styleApplyer(e,M,I)):r.styleApplyer(e,M,""))}}else if(f||typeof _!="string"||(f=""),h!=="value"||oA(e)){if(f!==_){let w=typeof f;w==="function"&&r.eventHandlerInterceptor||(r.namespace===SE?h==="href"?e.setAttributeNS(TW,h,f):e.setAttribute(h,f):w==="string"?h==="innerHTML"?e[h]=bW.sanitize(f):h==="role"&&f===""?e.removeAttribute(h):oA(e)&&h in e?e[h]=f:e.setAttribute(h,f):e[h]!==f&&(e[h]=f),i=!0)}}else{let w=e[h];w!==f&&(e["oninput-value"]?w===e["oninput-value"]:f!==_)&&(e[h]=f,e["oninput-value"]=void 0),f!==_&&(i=!0)}}return i},Qwe=(e,t,n,r,i)=>{if(n===r)return!1;r=r||C6;let s,o=(n=n||C6).length,a=r.length,h=0,f=0,_=!1;for(;f<a;){let w=h<o?n[h]:void 0,b=r[f];if(w!==void 0&&eL(w,b))_=UT(w,b,i)||_,h++;else{let T=Zwe(n,b,h+1);if(T>=0){for(s=h;s<T;s++)k6(n[s]),pI(n,s,e,"removed");_=UT(n[T],b,i)||_,h=T+1}else Vv(b,t,h<o?n[h].domNode:void 0,i),Jwe(b),pI(r,f,e,"added")}f++}if(o>h)for(s=h;s<o;s++)k6(n[s]),pI(n,s,e,"removed");return _};UT=(e,t,n)=>{let r=e.domNode,i=!1;if(e===t)return!1;let s=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(o,r),t.domNode=o,i=!0,i}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(n=QR(n,{namespace:SE})),e.text!==t.text&&(s=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,s=Qwe(t,r,e.children,t.children,n)||s,s=Xwe(r,e.properties,t.properties,n)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,n,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),i};let rS=(e,t)=>({getLastRender:()=>e,update:n=>{if(e.vnodeSelector!==n.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=n,UT(r,n,t)},domNode:e.domNode});const eve={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,n)=>{t.charAt(0)==="-"?e.style.setProperty(t,n):e.style[t]=n}};let lv=e=>QR(eve,e),Pd={append:(e,t,n)=>(n=lv(n),Vv(t,e,void 0,n),rS(t,n)),insertBefore:(e,t,n)=>(n=lv(n),Vv(t,e.parentNode,e,n),rS(t,n)),merge:(e,t,n)=>(n=lv(n),t.domNode=e,$W(e,t,n),rS(t,n)),replace:(e,t,n)=>(n=lv(n),Vv(t,e.parentNode,e,n),e.parentNode.removeChild(e),rS(t,n))},MW,tve=(e,t)=>{let n=[];for(;e&&e!==t;)n.push(e),e=e.parentNode;return n};MW=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let nve=(e,t)=>{let n=e;return t.forEach(r=>{n=n&&n.children?MW(n.children,i=>i.domNode===r):void 0}),n},rve=(e,t,n)=>{let r=function(i){n("domEvent",i);let s=t(),o=tve(i.currentTarget,s.domNode);o.reverse();let a,h=nve(s.getLastRender(),o);return e.scheduleRender(),h&&(a=h.properties[`on${i.type}`].apply(h.properties.bind||this,arguments)),n("domEventProcessed",i),a};return(i,s,o,a)=>r},R6=e=>{let t,n,r=lv(e),i=r.performanceLogger,s=!0,o=!1,a=[],h=[],f=(w,b,T)=>{let M,I=()=>M;r.eventHandlerInterceptor=rve(t,I,i),M=w(b,T(),r),a.push(M),h.push(T)},_=()=>{if(n=void 0,s){s=!1,i("renderStart",void 0);for(let w=0;w<a.length;w++){let b=h[w]();i("rendered",void 0),a[w].update(b),i("patched",void 0)}i("renderDone",void 0),s=!0}};return t={renderNow:_,scheduleRender:()=>{n||o||(n=requestAnimationFrame(_))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),o=!0},resume:()=>{o=!1,s=!0,t.scheduleRender()},append:(w,b)=>{f(Pd.append,w,b)},insertBefore:(w,b)=>{f(Pd.insertBefore,w,b)},merge:(w,b)=>{f(Pd.merge,w,b)},replace:(w,b)=>{f(Pd.replace,w,b)},detach:w=>{for(let b=0;b<h.length;b++)if(h[b]===w)return h.splice(b,1),a.splice(b,1)[0];throw new Error("renderFunction was not found")}},t},ad=class extends Fe{constructor(){super(...arguments),this.items=new Ae,this._watchUpdatingTracking=new nf,this._callbacks=new Map,this._projector=R6(),this._hiddenProjector=R6()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,n=>{for(const r of n.added){const i=()=>r.render();this._callbacks.set(r,i),this._projector.append(this.surface,i)}for(const r of n.removed){const i=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(i.domNode),this._callbacks.delete(r)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const n=this._hiddenSurface,r=this._hiddenProjector;let i;const s=()=>(i=t.render(),i);r.append(n,s),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(i!=null&&i.domNode){const a=i.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(s);n.firstChild;)n.removeChild(n.firstChild);return o}overlaps(t,n){const r=this.computeBoundingRect(t),i=this.computeBoundingRect(n);return Math.max(r.left,i.left)<=Math.min(r.right,i.right)&&Math.max(r.top,i.top)<=Math.min(r.bottom,i.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,n){const r=!!(n!=null&&n.disableDecorations);if(!this.items.some(s=>s.visible&&!(r&&s.isDecoration)))return;const i=t.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(s=>{r&&s.isDecoration||(i.save(),s.renderCanvas(i),i.restore())}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};l([p({readOnly:!0})],ad.prototype,"surface",void 0),l([p({readOnly:!0})],ad.prototype,"items",void 0),l([p({readOnly:!0})],ad.prototype,"needsRender",null),l([p({readOnly:!0})],ad.prototype,"_watchUpdatingTracking",void 0),l([p({readOnly:!0})],ad.prototype,"updating",null),ad=l([k("esri.views.overlay.ViewOverlay")],ad);const L6=ad,fI=[0,0];function ive(e){const t=(e.ownerDocument||window.document).defaultView,n=e.getBoundingClientRect();return fI[0]=n.left+((t==null?void 0:t.pageXOffset)??0),fI[1]=n.top+((t==null?void 0:t.pageYOffset)??0),fI}function N6(e){e&&(e.textContent="",e.parentNode&&e.parentNode.removeChild(e))}function sve(e){const t=document.createElement("div");return e.appendChild(t),t}const X_=16,iS=750,ove=512,ave=2,lve=e=>{let t=class extends e{constructor(...n){super(...n),this._freqInfo={freq:X_,time:iS},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([ct(()=>this.cursor,r=>{const{surface:i}=this;i&&i.setAttribute("data-cursor",r)}),ct(()=>this.navigating,r=>{const{surface:i}=this;i&&i.setAttribute("data-navigating",r.toString())})])}initialize(){this.addHandles([ct(()=>this.ui,(n,r)=>this._handleUIChange(n,r),si),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=cn(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(n){const r=this._get("container"),i=YR(n);if(i||typeof n!="string"||fe.getLogger(this).error("#container",`element with id '${n}' not found`),r===i)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(N6(this.root),this._set("root",null)),this.userContent&&(E6(this.userContent,r),N6(this.userContent),this._set("userContent",null))),!i)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);i.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",E6(i,s),i.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",i.insertBefore(o,i.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const h=new L6;o.appendChild(h.surface),this._set("overlay",h),this.addHandles(ct(()=>h.needsRender,f=>{f&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=pg({render:()=>{var _;return(_=this.overlay)==null?void 0:_.render()}}):this._overlayRenderTaskHandle=wn(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",i),this._startMeasuring()}get focused(){const n=document.activeElement===this.surface;return document.hasFocus()&&n}get size(){return[this.width,this.height]}blur(){var n;(n=this.surface)==null||n.blur()}focus(){var n;(n=this.surface)==null||n.focus()}pageToContainer(n,r,i){const s=this.position;return n-=s?s[0]:0,r-=s?s[1]:0,i?(i[0]=n,i[1]=r):i=[n,r],i}containerToPage(n,r,i){const s=this.position;return n+=s?s[0]:0,r+=s?s[1]:0,i?(i[0]=n,i[1]=r):i=[n,r],i}_handleUIChange(n,r){this.removeHandles("ui"),r&&r!==n&&r.destroy(),n&&(n.view=this,this.addHandles(ct(()=>this.root,i=>{n.container=i?sve(i):null},si),"ui")),this._set("ui",n)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const n=this._freqInfo;n.freq=X_,n.time=iS,this.addHandles([M0(window,"resize",()=>{n.freq=X_,n.time=iS}),pg({prepare:r=>{const i=this._measure(),s=this._freqInfo;if(s.time+=r.deltaTime,i&&(s.freq=X_,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const o=this._position();s.freq=o||i?X_:Math.min(iS,s.freq*ave),!i&&s.freq>=ove&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const n=this.container,r=n?n.clientWidth:0,i=n?n.clientHeight:0;if(r===0||i===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return r===s&&i===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",i),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:r,height:i}),!0)}_position(){const n=this.container,r=this.position,i=n&&ive(n);return!!i&&(!r||i[0]!==r[0]||i[1]!==r[1])&&(this._set("position",[i[0],i[1]]),!0)}forceDOMReadyCycle(){}};return l([p()],t.prototype,"container",null),l([p({readOnly:!0})],t.prototype,"focused",null),l([p({readOnly:!0})],t.prototype,"height",void 0),l([p()],t.prototype,"messagesCommon",void 0),l([p({type:L6})],t.prototype,"overlay",void 0),l([p({readOnly:!0})],t.prototype,"position",void 0),l([p({readOnly:!0})],t.prototype,"resizing",void 0),l([p({readOnly:!0})],t.prototype,"root",void 0),l([p({value:null,readOnly:!0})],t.prototype,"size",null),l([p({readOnly:!0})],t.prototype,"surface",void 0),l([p({readOnly:!0})],t.prototype,"suspended",void 0),l([p()],t.prototype,"ui",void 0),l([p({readOnly:!0})],t.prototype,"userContent",void 0),l([p({readOnly:!0})],t.prototype,"width",void 0),l([p()],t.prototype,"widthBreakpoint",void 0),t=l([k("esri.views.DOMContainer")],t),t},uve=te("mac")?"Meta":"Control",cve=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),dve=e=>cve.has(e);let hve=class{constructor(t,n=[]){this.eventType=t,this.keyModifiers=n}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const n=t.modifiers;for(const r of this.keyModifiers)if(!n.has(r))return!1;return!0}},pr=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const n=this._incoming[t];for(const r of n)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback(n=>this._handleEvent(n)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,n,r){let i;typeof n=="function"?(r=n,i=[]):i=n||[];const s=typeof t=="string"?new hve(t,i):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=_=>{const w=this._incoming[_.match.eventType];if(w){const b=w.indexOf(_);w.splice(b,1),o(),this._manager&&this._manager.updateDependencies()}},h=new pve(s,r,{onPause:a,onRemove:a,onResume:_=>{const w=this._incoming[_.match.eventType];w&&!w.includes(_)&&(w.push(_),o(),this._manager&&this._manager.updateDependencies())}});let f=this._incoming[s.eventType];return f||(f=[],this._incoming[s.eventType]=f),f.push(h),o(),this._manager&&this._manager.updateDependencies(),h}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const n=new fve(t,{onEmit:(r,i,s,o)=>{var a;(a=this._manager)==null||a.emit(r.eventType,i,s,o)},onRemove:r=>{var i;delete this._outgoing[r.eventType],(i=this._manager)==null||i.updateDependencies()}});return this._outgoing[t]=n,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),n}startCapturingPointer(t){var n;(n=this._manager)==null||n.setPointerCapture(t,!0)}stopCapturingPointer(t){var n;(n=this._manager)==null||n.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){var r;const n=this._incoming[t.type];if(n){for(const i of n)if(i.match.matches(t)&&((r=i.callback)==null||r.call(i,t),t.shouldStopPropagation()))break}}},pve=class{constructor(t,n,r){this.match=t,this._callback=n,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},fve=class{constructor(t,n){this.eventType=t,this._removed=!1,this._handler=n}emit(t,n,r){this._removed||this._handler.onEmit(this,t,n,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},mve=class extends pr{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",n=>this._update(n.data))}_update(t){const n=t.native.pointerType==="touch"?"touch":"mouse",{x:r,y:i}=t;n===this._value&&this._x===r&&this._y===i||(this._value=n,this._x=r,this._y=i,this._onChange(n,r,i))}},yve=class{constructor(t,n){this._observable=new O0,this._value=t,this._equalityFunction=n}get value(){return tt(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function y0(e,t=fV){return new yve(e,t)}let gve=class extends pr{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=y0(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},_ve=class{constructor(t,n){this._owner=n,this._properties={},this._afterDispatchHandle=null;for(const r in t){const i=t[r],s=new kV(i,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=YX(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const n=this._properties[t];for(const r of n.acquired)kD(r)||n.pool.release(r);n.pool.destroy(),n.pool=null,n.acquired=null}this._properties=null,this._owner=null}get(t){const n=this._owner._get(t),r=this._properties[t];let i=r.pool.acquire();for(r.acquired.push(i);i===n;)r.acquired.push(i),i=r.pool.acquire();return i}_release(){for(const t in this._properties){const n=this._properties[t];let r=0;for(const i of n.acquired)kD(i)?n.acquired[r++]=i:n.pool.release(i);n.acquired.length=r}}},Qs=class extends Fe{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=uve,this._latestPointerType="mouse",this._propertiesPool=new _ve({latestPointerLocation:bve},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const n of t)this.uninstallHandlers(n);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,n,r=Ld.INTERNAL){if(this._nameToGroup[t]||n.length===0)return;const i={name:t,handlers:n.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=i;for(let s=i.handlers.length-1;s>=0;s--){const o=i.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,h,f,_,w)=>{this._emitInputEvent(o.priorityIndex+1,a,h,f,w,_)},setPointerCapture:(a,h)=>{this._setPointerCapture(i,o,a,h)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const n=this._nameToGroup[t];n?(n.handlers.forEach(r=>{var i;r.removed=!0,(i=r.uninstallCallback)==null||i.call(r)}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):fe.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,n=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const i=this._handlers[r];i.priorityIndex=r,this._handlersPriority.push(i)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const i=this._handlersPriority[r];i.priorityIndex=r;let s=i.handler.hasSideEffects;if(!s){for(const o of i.handler.outgoingEventTypes)if(t.has(o)){s=!0;break}}if(s)for(const o of i.handler.incomingEventMatches){t.add(o.eventType);for(const a of o.keyModifiers)dve(a)||n.add(a)}i.active=s}this._sourceEvents=t,this._keyModifiers=n,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,n,r){this._latestPointerType=t;const i=this._get("latestPointerLocation");if(i==null||i.x!==n||i.y!==r){const s=this._propertiesPool.get("latestPointerLocation");s.x=n,s.y=r,this._set("latestPointerLocation",s)}}_onEventReceived(t,n){if(t==="pointer-capture-lost"){const s=n;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(t,n);const r=this.test.timestamp!=null?this.test.timestamp:n.native?n.native.timestamp:void 0,i=n.native?n.native.cancelable:void 0;this._emitInputEventFromSource(t,n,r,i)}_updateKeyModifiers(t,n){if(!n)return;let r=!1;const i=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},s=(a,h)=>{h&&!this._activeKeyModifiers.has(a)?(i(),this._activeKeyModifiers.add(a)):!h&&this._activeKeyModifiers.has(a)&&(i(),this._activeKeyModifiers.delete(a))};if(t==="key-down"||t==="key-up"){const a=n.key;this._keyModifiers.has(a)&&s(a,t==="key-down")}const o=n.native;s("Alt",!!(o!=null&&o.altKey)),s("Control",!!(o!=null&&o.ctrlKey)),s("Ctrl",!!(o!=null&&o.ctrlKey)),s("Shift",!!(o!=null&&o.shiftKey)),s("Meta",!!(o!=null&&o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new mve((t,n,r)=>this._setLatestPointer(t,n,r)),this._multiTouchHandler=new gve,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Ld.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Ld.INTERNAL)}_setPointerCapture(t,n,r,i){const s=t.name+"-"+n.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),i?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,n,r,i){this._emitInputEvent(0,t,n,r,i)}_emitInputEvent(t,n,r,i,s,o){const a=i!==void 0?i:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),h=s!==void 0&&s,f={event:new wve(n,r,a,o||this._activeKeyModifiers,h),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(f):this._doNewPropagation(f)}_doNewPropagation(t){this._currentPropagation={events:new DT,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var n,r,i;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:s,priorityIndex:o}=t.events.pop(),a=(n=s.data)==null?void 0:n.eventId;if(!(a!=null&&this._stoppedPropagationEventIds.has(a)))for(t.currentHandler=this._handlersPriority[o];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!s.shouldStopPropagation()&&((i=(r=t.currentHandler).eventCallback)==null||i.call(r,s)),s.shouldStopPropagation()){a!=null&&this._stoppedPropagationEventIds.add(a);break}if(s.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:s,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const n=new DT;n.push(t);const r=this._currentPropagation;if(r){for(;r.events.length;)n.push(r.events.pop());r.events=n,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,n){if(t.handler.hasSideEffects!==n.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==n.groupPriority)return t.groupPriority>n.groupPriority?-1:1;for(const r of t.handler.incomingEventMatches)for(const i of n.handler.incomingEventMatches){if(r.eventType!==i.eventType)continue;const s=r.keyModifiers.filter(o=>i.keyModifiers.includes(o));if(s.length===r.keyModifiers.length!=(s.length===i.keyModifiers.length))return r.keyModifiers.length>i.keyModifiers.length?-1:1}return t.priorityIndex>n.priorityIndex?-1:1}_sortHandlersPriority(t){const n=[];for(const r of t){let i=0;for(;i<n.length&&this._compareHandlerPriority(r,n[i])>=0;)i++;n.splice(i,0,r)}return n}get debug(){const t=n=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},n(),this._setPointerCapture=r};return{injectEvent:(n,r)=>{t(()=>this._onEventReceived(n,r))},disablePointerCapture:t}}};l([p({readOnly:!0})],Qs.prototype,"hasPendingInputs",null),l([p({constructOnly:!0})],Qs.prototype,"eventSource",void 0),l([p({constructOnly:!0})],Qs.prototype,"recognizers",void 0),l([p()],Qs.prototype,"_latestPointerType",void 0),l([p()],Qs.prototype,"latestPointerType",null),l([p()],Qs.prototype,"multiTouchActive",null),l([p({readOnly:!0})],Qs.prototype,"latestPointerLocation",void 0),l([p()],Qs.prototype,"_paused",void 0),l([p({readOnly:!0})],Qs.prototype,"updating",null),Qs=l([k("esri.views.input.InputManager")],Qs);let wve=class{constructor(t,n,r,i,s){this.type=t,this.data=n,this.timestamp=r,this.modifiers=i,this.cancelable=s,this._propagationState=wd.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=wd.STOPPED}shouldStopPropagation(){return!!(this._propagationState&wd.STOPPED)}async(t){this._propagationState|=wd.PAUSED;const n=(r,i)=>{this._propagationState&=~wd.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),i)throw r;return r};return(typeof t=="function"?t():t).then(r=>n(r,!1),r=>n(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&wd.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var wd;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(wd||(wd={}));const Ld={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let vve=class{};const bve=vve;function Dc(e){return e!=null&&"open"in e&&"declaredClass"in e}function D6(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const Sve=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([ct(()=>[this.ui,this.popup],([n,r],i)=>{const s="popup",o="manual";if(i){const[a,h]=i;a&&Dc(h)&&(h.view=null,D6(h)&&a.remove(h,s))}n&&Dc(r)&&(r.view=this,D6(r)&&n.add(r,{key:s,position:o,internal:!0}))},si),this.on("click",n=>{this.popup&&this.popupEnabled&&(n.pointerType!=="mouse"||n.button===0)&&(Dc(this.popup)?this.popup.viewModel.handleViewClick(n):n.async(async()=>{await this.setupPopup(),Dc(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(n)}))},Ld.WIDGET)]),Nx(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{pe(()=>import("./Popup-RCPl2OTZ.js"),__vite__mapDeps([162,1,163,8,164,37,165,166,157,78,76,77,29,30,26,22,160,167]))})}destroy(){this.destroyed||this.closePopup()}async openPopup(n){if(Dc(this.popup))return this.popup.open(n);try{if(await this.setupPopup(),!this.popup)return void fe.getLogger(this).error(new Y("view:null-popup","Popup is null and can't be opened"));this.popup.open(n)}catch{}}closePopup(){var n;(n=this._popupSetupTask)==null||n.abort(),Dc(this.popup)&&this.popup.close()}async fetchPopupFeatures(n,r){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(n,r),r)}async setupPopup(){var n;if((n=this._popupSetupTask)==null||n.abort(),this.popup&&!Dc(this.popup))return this._popupSetupTask=dk(async r=>{const{default:i}=await pe(()=>import("./Popup-RCPl2OTZ.js"),__vite__mapDeps([162,1,163,8,164,37,165,166,157,78,76,77,29,30,26,22,160,167]));if(xn(r),!this.popup||Dc(this.popup))return;const s=this.popup;delete s.open,delete s.close,this.popup=new i(s)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:n,hits:r},i){const s=[],o=[];let a=!1;const h=MX(i,te("popup-view-fetch-timeout")??xve),f=b=>{const T=new Tve(b);return o.push(T),s.push(T.promise),T},_=b=>{const T=o.at(-1);return T&&T.layerView===b&&!a?T:f(b)};for(const b of r)"graphic"in b?(_(b.layerView).graphics.push(b.graphic),a=!1):(s.push(b.layerView.fetchPopupFeaturesAtLocation(b.mapPoint,h)),a=!0);o.map(b=>b.resolve(h));const w=$X(s).then(b=>b.filter(T=>!!T).flat());return{pendingFeatures:s,allGraphicsPromise:w,location:n}}async _getPopupHits(n,r){const{hits:i,location:s}=await this.popupHitTest(n);xn(r);const o=[];for(const a of i)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,r)){const h=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:h})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:s}}_isValidPopupGraphic(n,r){return n&&!!n.getEffectivePopupTemplate(r==null?void 0:r.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(n){return!n||(!("layer"in n)||!n.suspended)&&"fetchPopupFeaturesFromGraphics"in n}_isValidPopupLocationLayerView(n){return(!("layer"in n)||!n.suspended)&&"fetchPopupFeaturesAtLocation"in n}};return l([p()],t.prototype,"popup",void 0),l([p()],t.prototype,"popupEnabled",void 0),t=l([k("esri.views.PopupView")],t),t};let Tve=class{constructor(t){this.layerView=t,this._resolver=xs(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:n,graphics:r,_resolver:i}=this;if(!n)return i.resolve(r),i.promise;let s;return n.fetchPopupFeaturesFromGraphics(r,t).catch(o=>(s=o,null)).then(o=>{o?i.resolve(o):i.reject(s)}),i.promise}};const xve=5e3;let Uv=class extends Ae{constructor(t){super(t),this.addHandles([this.on("before-add",n=>{n.item==null&&n.preventDefault()}),this.on("after-add",n=>this._own(n.item)),this.on("after-remove",n=>this._release(n.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(Ae.ofType(this.itemType.Type))(t):new Ae(t)}};function F6(e,t){return{type:e,cast:FU,set(n){const r=Fd(n,this._get(t),e);r.owner=this,this._set(t,r)}}}l([p()],Uv.prototype,"owner",null),Uv=l([k("esri.core.support.OwningCollection")],Uv);let GT=class extends Uv{constructor(t){super(t),this.addHandles(this.on("before-add",n=>{n.item!=null&&n.item.parent===this.owner&&(fe.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),n.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};GT=l([k("esri.support.AnalysesCollection")],GT);let Gv=class extends Uv{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};l([lk({Type:yl,ensureType:jn(yl)})],Gv.prototype,"itemType",void 0),Gv=l([k("esri.support.GraphicsCollection")],Gv);let ld=class extends Fe{constructor(t){super(t),this.view=null,this.baseLayerViews=new Ae,this.referenceLayerViews=new Ae,this._loadingHandle=ct(()=>{var n,r;return(r=(n=this.view)==null?void 0:n.map)==null?void 0:r.basemap},n=>{n&&n.load().catch(()=>{})},si)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var n,r,i;if((n=this.view)!=null&&n.suspended)return!1;const t=(i=(r=this.view)==null?void 0:r.map)==null?void 0:i.basemap;return!!t&&!!t.loaded&&(this.baseLayerViews.some(s=>s.updating)||this.referenceLayerViews.some(s=>s.updating))}};l([p({constructOnly:!0})],ld.prototype,"view",void 0),l([p({readOnly:!0})],ld.prototype,"baseLayerViews",void 0),l([p({readOnly:!0})],ld.prototype,"referenceLayerViews",void 0),l([p({readOnly:!0})],ld.prototype,"suspended",null),l([p({type:Boolean,readOnly:!0})],ld.prototype,"updating",null),ld=l([k("esri.views.BasemapView")],ld);const Eve=ld;function $ve(e){return"tryRecycleWith"in e}function Mve(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let Ive=class{constructor(t,n,r){this.layer=t,this.view=n,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=xs(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,lo(this._controller.signal,()=>{const i=new Y("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(i)})}tryRecycle(t){if(!this.done||!this.layerView||!$ve(this.layerView))return null;const n=this.layer.type,r=this._controller.signal;for(let i=0;i<t.length;i++){const s=t[i];if(s.type!==n)continue;const o=this.layerView.tryRecycleWith(s,{signal:r});if(o){t.splice(i,1),this.layer=s;const a=this.layerView,h=a.view;return this.promise=Promise.race([o.then(()=>(xn(this._controller.signal),s.emit("layerview-destroy",{view:h,layerView:a}),h.emit("layerview-destroy",{view:h,layerView:a}),s.emit("layerview-create",{view:h,layerView:a}),h.emit("layerview-create",{view:h,layerView:a}),a)),new Promise((f,_)=>lo(this._controller.signal,()=>_(rn())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:n,view:r}=this;n.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:n,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var i,s;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:n,view:r}=this;this._map=r.map;try{let o,a;if(await n.load({signal:t}),n.prefetchResources&&await n.prefetchResources({signal:t}),Cve(n))o=await n.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(n))throw new Y("layer:view-not-supported","No layerview implementation was found");const _=await this.layerViewImporter.importLayerView(n);xn(t),o="default"in _?new _.default({layer:n,view:r}):new _({layer:n,view:r})}const h=()=>{a=wn(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=lo(t,h),xn(t);try{await o.when()}catch(_){throw h(),_}if(!((s=(i=this._map)==null?void 0:i.allLayers)==null?void 0:s.includes(n)))return h(),void this._deferred.reject(new Y("view:no-layerview-for-layer","The layer has been removed from the map",{layer:n}));this.layerView=o,n.emit("layerview-create",{view:r,layerView:o}),r.emit("layerview-create",{layer:n,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){n.emit("layerview-create-error",{view:r,error:o}),r.emit("layerview-create-error",{layer:n,error:o}),this.done=!0,this._deferred.reject(new Y("layerview:create-error","layerview creation failed",{layer:n,error:o}))}}},eo=class extends Fe{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new nf,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r;const n=(r=this.view.map)==null?void 0:r.allLayers;if(n)for(const i of n)this.layerViewImporter.hasLayerViewModule(i)&&this.layerViewImporter.importLayerView(i)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=xs(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(P0(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var h,f,_;if(this.destroyed)return;const n=this.view.map;if(this._map!==n&&(this.clear(),this._map=n),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,i=[],s=this.view.ready,o=w=>{if(w!=null){for(const b of w)if(b){r.add(b);const T=this._layerLayerViewInfoMap.get(b);T&&s?T.start():T||this._recyclingInfoMap.has(b)||i.push(b),"layers"in b&&b.layers&&o(b.layers)}}};for(const w of this._rootCollectionNames)o(ia(this,w));for(const[w,b]of this._layerLayerViewInfoMap)if(!r.has(w)){this._layerLayerViewInfoMap.delete(b.layer);const T=b.tryRecycle(i);T?(this.notifyChange("updating"),this._recyclingInfoMap.set(b.layer,b),T.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(b.layer),this._layerLayerViewInfoMap.set(b.layer,b),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(b.layer),b.destroy(),this._reschedule()})):b.destroy()}for(const[w,b]of this._recyclingInfoMap)r.has(w)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(b.layer),b.destroy());for(const w of i)this._createLayerView(w);this._refreshCollections();const a=[(h=n==null?void 0:n.ground)==null?void 0:h.layers,(f=n==null?void 0:n.basemap)==null?void 0:f.baseLayers,(_=n==null?void 0:n.basemap)==null?void 0:_.referenceLayers,n==null?void 0:n.layers].filter(w=>!!w);r.forEach(w=>"layers"in w&&a.push(w.layers)),this.addHandles(a.map(w=>this._watchUpdatingTracking.addOnCollectionChange(()=>w,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([ff(()=>{var t,n;return(n=(t=this.view)==null?void 0:t.map)==null?void 0:n.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),ct(()=>{const t=this.view,n=t==null?void 0:t.map;return[n==null?void 0:n.basemap,n==null?void 0:n.ground,n==null?void 0:n.layers,t==null?void 0:t.ready]},()=>this._reschedule(),ws)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),wM(this._recyclingInfoMap),wM(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(rn()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||rQ(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const n of this._layerLayerViewInfoMap.values())n.done||++t;return t}clear(){this.destroyed||(wM(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new Y("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,n){var s;this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(t);if(!(r!=null&&r.done))return!0;const i=r.layerView;return!(!i||!n||i.parent===n)||!!(r.done&&i&&"layers"in t&&((s=t.layers)!=null&&s.length))&&t.layers.some(o=>this.isCreatingLayerViewsForLayer(o,i))}_refreshCollections(){for(const[t,n]of this._layersToLayerViews)this._populateLayerViewsOwners(ia(this,t),ia(this,n),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,n,r){if(!t||!n)return void(n&&n.removeAll());let i=0;for(const s of t){const o=this._layerLayerViewInfoMap.get(s);if(!(o!=null&&o.layerView))continue;const a=o.layerView;a.layer=s,a.parent=r,n.at(i)!==a&&n.splice(i,0,a),"layers"in s&&Mve(a)&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),i+=1}i<n.length&&n.splice(i,n.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const n=new Ive(t,this.view,this.layerViewImporter);n.promise.then(()=>this._refreshCollections(),r=>{r&&(li(r)||r.name==="cancelled:layerview-create")||fe.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,n),this.view.ready&&n.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};l([p()],eo.prototype,"_workPromise",void 0),l([p({readOnly:!0})],eo.prototype,"_watchUpdatingTracking",void 0),l([p({readOnly:!0})],eo.prototype,"_layersToLayerViews",null),l([p({readOnly:!0})],eo.prototype,"_rootCollectionNames",null),l([p()],eo.prototype,"layerViewImporter",void 0),l([p()],eo.prototype,"supportsGround",void 0),l([p({readOnly:!0})],eo.prototype,"updating",null),l([p({readOnly:!0})],eo.prototype,"updatingRemaining",null),l([p({constructOnly:!0})],eo.prototype,"view",void 0),eo=l([k("esri.views.LayerViewManager")],eo);const Pve=eo;function Cve(e){return"createLayerView"in e&&e.createLayerView!=null}let ys=class extends Fe{constructor(t){super(t),this.factor=1.5,this.offset=Er(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};l([p({type:Number})],ys.prototype,"factor",void 0),l([p({nonNullable:!0})],ys.prototype,"offset",void 0),l([p()],ys.prototype,"position",void 0),l([p({type:Number,range:{min:0}})],ys.prototype,"size",void 0),l([p()],ys.prototype,"maskUrl",void 0),l([p()],ys.prototype,"maskEnabled",void 0),l([p()],ys.prototype,"overlayUrl",void 0),l([p()],ys.prototype,"overlayEnabled",void 0),l([p({readOnly:!0})],ys.prototype,"version",null),l([p({type:Boolean})],ys.prototype,"visible",void 0),ys=l([k("esri.views.Magnifier")],ys);const IW=ys;let L2=class{constructor(t){this._observable=new O0,this._map=new Map(t)}get size(){return tt(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const n=this._map.delete(t);return n&&this._observable.notify(),n}entries(){return tt(this._observable),this._map.entries()}forEach(t,n){tt(this._observable),this._map.forEach((r,i)=>t.call(n,r,i,this),n)}get(t){return tt(this._observable),this._map.get(t)}has(t){return tt(this._observable),this._map.has(t)}keys(){return tt(this._observable),this._map.keys()}set(t,n){return this._map.set(t,n),this._observable.notify(),this}values(){return tt(this._observable),this._map.values()}[Symbol.iterator](){return tt(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};function sS(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let mu=class extends ju.EventedAccessor{constructor(t){super(t),this._selectionMap=new L2,this._sources=new Ae,this._trashCan=[],this._layerEditHandles=new Ae,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([ct(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),ff(()=>this.sources,"change",n=>{const r=this._selectionMap;for(const i of n.removed)r.delete(i);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const t=new Ae;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(n=>"sublayers"in n&&n.sublayers?n.sublayers:null).forEach(n=>{(sS(n)&&!wne(n)||Qh(n))&&t.add(n)}),this.sources=t)})}destroy(){this._layerEditHandles.drain(wn)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{const[n,r]=t;return{layer:n,selection:[...r.selection]}})}get count(){let t=0;for(const n of this._selectionMap.values())t+=n.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){Fd(t,this._sources)}async getSelectedFeatures(t,n={},r="layerView"){const{view:i,selections:s}=this,o=(t!==void 0?s.filter(a=>t.includes(a.layer)):s).filter(a=>a.selection.length>0).map(async a=>{const{layer:h,selection:f}=a,_=Qh(h)?h.parent:h;if(_==null||!z6(_))return null;if(r==="layer")return V6(_,f,n);if(j6(_))return null;const w=await i.whenLayerView(_).catch(()=>null);return w?V6(w,f,n):null});return(await Promise.all(o)).filter(a=>a!=null)}updateSelection(t){const n=new Map;for(const[s,o]of this._selectionMap)n.set(s,[...o.selection]);let r=!1;const i=t.current.concat(t.added);for(const s of i){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(sS(o)||Qh(o))&&a!==null){const h=vx(n,o,()=>[]);h.includes(a)||(h.push(a),r=!0)}}for(const s of t.removed){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(sS(o)||Qh(o))&&a!==null){const h=n.get(o),f=h==null?void 0:h.indexOf(a);f!==void 0&&f>=0&&(h==null||h.splice(f,1),r=!0)}}if(r){const{_selectionMap:s,_trashCan:o}=this,a=[];for(const[h,f]of n){const _=s.get(h);_!==void 0&&o.push(_),s.set(h,{selection:f}),a.push({layer:h,selection:f,...dD(_!==void 0?_.selection:[],f)})}this._onSelectionChange(a)}}setSelection(t,n){this._setSelection(t,n)}getSelection(t){const n=this._selectionMap.get(t);return n==null?void 0:n.selection}appendToSelection(t,n){const r=this._selectionMap.get(t),i=r!==void 0?[...r.selection]:[];for(const s of n)i.includes(s)||i.push(s);this._setSelection(t,i)}removeFromSelection(t,n){const r=this._selectionMap.get(t);if(!r)return;const i=[];for(const s of r.selection)n.includes(s)||i.push(s);this._setSelection(t,i)}toggleInSelection(t,n){const r=this._selectionMap.get(t);if(!r||r.selection.length===0)return void this._setSelection(t,n);const i=new Set(r.selection),s=new Set(n),o=UX(i,s);this._setSelection(t,Array.from(o))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const n=[];for(const[r,i]of this._selectionMap.entries())n.push({layer:r,added:[],removed:[...i.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(n)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){var o;if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;){const a=this._trashCan.pop();(o=a==null?void 0:a.highlightHandle)==null||o.remove()}const{sources:t,view:n,_selectionMap:r,showHighlight:i}=this,s=this._vizTaskId;for(const a of t){const h=r.get(a),f=Qh(a)?a.parent:a;if(f!=null&&z6(f)){if(j6(f))continue;n.whenLayerView(f).then(_=>{var w;(w=h==null?void 0:h.highlightHandle)==null||w.remove(),h!=null&&i&&s===this._vizTaskId&&"highlight"in _&&typeof _.highlight=="function"&&h.selection.length>0&&(h.highlightHandle=_.highlight(h.selection,"selection"))}).catch(()=>{var _;(_=h==null?void 0:h.highlightHandle)==null||_.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(wn);for(const t of this.sources){const n=Qh(t)?t.parent:t;if(n!=null&&sS(n)){const r=n.on("edits",i=>{this._handleEditChanges(i,t)});this._layerEditHandles.push(r)}}}_handleEditChanges(t,n){if(t.deletedFeatures!==void 0&&t.deletedFeatures.length>0&&this._selectionMap.has(n)){const r=t.deletedFeatures.filter(i=>i.error==null).map(i=>i.objectId).filter(Dd);this.removeFromSelection(n,r)}}_setSelection(t,n){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const r=this._selectionMap.get(t);if(r===void 0||!Ave(r,{selection:n})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(t,{selection:[...n]});const i={layer:t,selection:[...n],...dD(r!==void 0?r.selection:[],n)};this._onSelectionChange([i])}}};l([p({readOnly:!0,nonNullable:!0})],mu.prototype,"selections",null),l([p({readOnly:!0,nonNullable:!0})],mu.prototype,"count",null),l([p({constructOnly:!0,nonNullable:!0})],mu.prototype,"view",void 0),l([p({readOnly:!0,nonNullable:!0})],mu.prototype,"hasSelection",null),l([p()],mu.prototype,"showHighlight",void 0),l([p()],mu.prototype,"sources",null),mu=l([k("esri.views.SelectionManager")],mu);const j6=e=>{var t;return Qh(e)?((t=e.parent)==null?void 0:t.isTable)===!0:e.isTable},Ove=e=>e.layer!==void 0,z6=e=>(e==null?void 0:e.when)!==void 0,Ave=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const n=[...e.selection],r=[...t.selection];if(n.length!==r.length)return!1;n.sort(),r.sort();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1}return!0},V6=async(e,t,n={})=>{let r;if(Ove(e)){const i=e;r=i===void 0?null:await i.queryFeatures(new gl({...n,objectIds:t})).then(s=>({data:s,layer:e.layer}))}else{const i=e;r=i===void 0?null:await i.queryFeatures(new gl({...n,objectIds:t})).then(s=>({data:s,layer:i}))}return r},kve=mu;let uv=class extends vt(Fe){constructor(t){super(t),this.accentColor=new Ze([255,127,0]),this.textColor=new Ze([255,255,255])}};l([p({type:Ze,nonNullable:!0})],uv.prototype,"accentColor",void 0),l([p({type:Ze,nonNullable:!0})],uv.prototype,"textColor",void 0),uv=l([k("esri.views.Theme")],uv);const lA=uv;var U6;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(U6||(U6={}));const PW=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],CW={};function OW(e){return!!CW[e]}function Rve(e){for(const t of e)if(!OW(t))return!1;return!0}PW.forEach(e=>{CW[e]=!0});let Lve=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:n,priority:r},i)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(i,[n],r)})}disconnect(){this.inputManager&&this._handlers.forEach((t,n)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(n)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,n,r,i){const s=Array.isArray(t)?t:t.split(",");if(!Rve(s))return s.some(OW)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(n)?a=n:(o=n,a=[]),typeof r=="function"?o=r:i=r,i=i??Ld.DEFAULT;const h=this._createUniqueGroupName(),f=new Nve(this.view,s,a,o);this._handlers.set(h,{handler:f,priority:i});for(const _ of s){const w=this._handlerCounts.get(_)||0;this._handlerCounts.set(_,w+1)}return this.inputManager&&this.inputManager.installHandlers(h,[f],i),Ft(()=>this._removeHandler(h,s))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,n){if(this._handlers.has(t)){this._handlers.delete(t);for(const r of n){const i=this._handlerCounts.get(r);i===void 0||(i===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,i-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Nve=class extends pr{constructor(t,n,r,i){super(!0),this._latestDragStart=void 0,this.view=t;for(const s of n)switch(s){case"click":this.registerIncoming("click",r,o=>i(jve(t,o)));break;case"double-click":this.registerIncoming("double-click",r,o=>i(zve(t,o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>i(Vve(t,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>i(Uve(t,o)));break;case"hold":this.registerIncoming("hold",r,o=>i(Gve(t,o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&i(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>i(Bve(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>i(qve(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>i(Q_(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>i(Q_(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>i(Q_(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>i(Hve(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>i(Wve(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>i(Q_(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>i(Q_(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{i(Zve(o))});break;case"focus":this.registerIncoming("focus",r,o=>{i(Dve(o))});break;case"blur":this.registerIncoming("blur",r,o=>{i(Fve(o))})}}_wrapDrag(t){const n=t.data,{x:r,y:i}=n.center,{action:s,pointerType:o,button:a}=n;if(s==="start"&&(this._latestDragStart=n),!this._latestDragStart)return;const h=n.pointer.native,f=n.buttons,{cancelable:_,timestamp:w}=t,b={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:r,y:i,origin:b,pointerType:o,button:a,buttons:f,radius:n.radius,angle:w9(n.angle),native:h,timestamp:w,cancelable:_,stopPropagation:()=>t.stopPropagation(),async:T=>t.async(T),preventDefault:()=>t.preventDefault()}}};function Dve(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function Fve(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function jve(e,t){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:h}=t.data,{cancelable:f,timestamp:_}=t;return{type:"click",pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:_,screenPoint:Er(s,o),mapPoint:K0(e,s,o),eventId:h,cancelable:f,stopPropagation:()=>t.stopPropagation(),async:w=>t.async(w),preventDefault:()=>t.preventDefault()}}function zve(e,t){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:h}=t.data,{cancelable:f,timestamp:_}=t;return{type:"double-click",pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:_,mapPoint:K0(e,s,o),eventId:h,cancelable:f,stopPropagation:()=>t.stopPropagation(),async:w=>t.async(w),preventDefault:()=>t.preventDefault()}}function Vve(e,t){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:h}=t.data,f=a.pointerId,{cancelable:_,timestamp:w}=t;return{type:"immediate-click",pointerId:f,pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:w,mapPoint:K0(e,s,o),eventId:h,cancelable:_,stopPropagation:()=>t.stopPropagation(),async:b=>t.async(b),preventDefault:()=>t.preventDefault()}}function Uve(e,t){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:h}=t.data,f=a.pointerId,{cancelable:_,timestamp:w}=t;return{type:"immediate-double-click",pointerId:f,pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:w,mapPoint:K0(e,s,o),eventId:h,cancelable:_,stopPropagation:()=>t.stopPropagation(),async:b=>t.async(b),preventDefault:()=>t.preventDefault()}}function Gve(e,t){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a}=t.data,{cancelable:h,timestamp:f}=t;return{type:"hold",pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:f,mapPoint:K0(e,s,o),cancelable:h,stopPropagation:()=>t.stopPropagation(),async:_=>t.async(_),preventDefault:()=>t.preventDefault()}}function K0(e,t,n){return e.toMap(Er(t,n),{exclude:[]})}function Bve(e){const{key:t,repeat:n,native:r}=e.data,{cancelable:i,timestamp:s}=e;return{type:"key-down",key:t,repeat:n,native:r,timestamp:s,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function qve(e){const{key:t,native:n}=e.data,{cancelable:r,timestamp:i}=e;return{type:"key-up",key:t,native:n,timestamp:i,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:s=>e.async(s),preventDefault:()=>e.preventDefault()}}function Q_(e,t){const{x:n,y:r,button:i,buttons:s,native:o,eventId:a}=e.data,h=o.pointerId,f=o.pointerType,{cancelable:_,timestamp:w}=e;return{type:t,x:n,y:r,pointerId:h,pointerType:f,button:i,buttons:s,native:o,timestamp:w,eventId:a,cancelable:_,stopPropagation:()=>e.stopPropagation(),async:b=>e.async(b),preventDefault:()=>e.preventDefault()}}function Hve(e){const{x:t,y:n,buttons:r,native:i,eventId:s}=e.data.currentEvent,{button:o}=e.data.startEvent,a=e.data.startEvent.native.pointerId,h=e.data.startEvent.native.pointerType,f=e.data.action,_={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:w,timestamp:b}=e;return{type:"pointer-drag",x:t,y:n,pointerId:a,pointerType:h,button:o,buttons:r,action:f,origin:_,native:i,timestamp:b,eventId:s,cancelable:w,stopPropagation:()=>e.stopPropagation(),async:T=>e.async(T),preventDefault:()=>e.preventDefault()}}function Wve(e){const{cancelable:t,data:n,timestamp:r}=e,{x:i,y:s,deltaY:o,native:a}=n;return{type:"mouse-wheel",x:i,y:s,deltaY:o,native:a,timestamp:r,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:h=>e.async(h),preventDefault:()=>e.preventDefault()}}function Zve(e){const{action:t,state:n,device:r}=e.data,{cancelable:i,timestamp:s}=e,{buttons:o,axes:a}=n;return{type:"gamepad",device:r,timestamp:s,action:t,buttons:o,axes:a,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:h=>e.async(h),preventDefault:()=>e.preventDefault()}}var g0,G6,B6;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(g0||(g0={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(G6||(G6={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(B6||(B6={}));function Jve(e){return[e.on("before-add",t=>{const n=t.item;if(n==null||e.includes(n))return fe.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();n.onAdd()}),e.on("after-remove",t=>{const n=t.item;n.active&&(n.view.activeTool=null),n.destroy()})]}function uA(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(g0.USER)&&e.getEditableFlag(g0.MANAGER)}function Za(e){return Er(e.x,e.y)}function AW(e,t){var r;const n=(r=e instanceof HTMLElement?e:e.surface)==null?void 0:r.getBoundingClientRect();return n?Er(t.clientX-n.left,t.clientY-n.top):Er(0,0)}function kW(e,t){return t instanceof Event?AW(e,t):Za(t)}function RW(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let Yve=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,n){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":H6(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:t.action==="start"?this._externallyDragging=!0:t.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!W6(t))break;const i=Za(t),s=Nm(i,t.pointerType,n.forEachTool);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,t,n),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:a,start:i,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&n.activeTool==null&&(this._revertToNullActiveTool=!0,n.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:i}),r());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,n);break;case"pointer-drag":{if(!W6(t))break;const i=this._grabbedManipulators.get(t.pointerId),s=i==null?void 0:i.manipulator,o=i==null?void 0:i.tool;if(s==null||o==null)break;const a=Za(t);a.x=po(a.x,0,n.view.width),a.y=po(a.y,0,n.view.height);const h=i.start,f=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,f?s.events.emit("drag",{action:"update",start:h,screenPoint:a}):s.events.emit("drag",{action:"start",start:h,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:s,start:h}));break;case"end":s.dragging=!1,f&&s.events.emit("drag",{action:"end",start:h,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,n)}r();break}case"immediate-click":{const i=Za(t),s=Nm(i,t.pointerType,n.forEachTool);if(Kve(t)||n.forEachTool(f=>{if((s==null||s.tool!==f||f.automaticManipulatorSelection)&&f.manipulators){let _=!1;f.manipulators.forEach(({manipulator:w})=>{w.selected&&(w.selected=!1,_=!0)}),_&&f.onManipulatorSelectionChanged&&f.onManipulatorSelectionChanged()}}),s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const h=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:i,button:t.button,pointerType:t.pointerType,shiftKey:h,stopPropagation:r}),mI(o,r);break}case"click":{const i=Za(t),s=Nm(i,t.pointerType,n.forEachTool),o=s==null?void 0:s.manipulator;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:i,button:t.button,pointerType:t.pointerType,shiftKey:a}),r();break}case"double-click":{const i=Za(t),s=Nm(i,t.pointerType,n.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:i,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r}),mI(o,r);break}case"immediate-double-click":{const i=Za(t),s=Nm(i,t.pointerType,n.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:i,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r}),t.pointerType==="mouse"&&mI(o,r);break}}this._onFocusChange(n.forEachTool)}_releaseManipulatorBeforeDragging(t,n,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:n.pointerType,screenPoint:Za(n)}),this._grabbedManipulators.forEach(({manipulator:i},s)=>{i===t&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(t,n){var i;const r=(i=this._grabbedManipulators.get(t.pointerId))==null?void 0:i.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Za(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(n.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=q6(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=q6(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const n=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:i})=>{n.add(i)}),this._hoveredManipulators.forEach(({tool:i})=>{r.add(i)}),t(i=>{i.hasGrabbedManipulators=n.has(i),i.hasHoveredManipulators=r.has(i);const s=this._grabbedManipulators.values(),o=JK(s,({tool:a})=>a===i);i.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(t,{forEachTool:n,setActiveTool:r},i=!0,s){const o=(a,h)=>a===t&&(s==null||s===h);this._grabbedManipulators.forEach(({tool:a,manipulator:h,pointerType:f},_)=>{o(a,h)&&(this._grabbedManipulators.delete(_),h.grabbing=!1,h.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:f}))}),this._draggedManipulators.forEach(({tool:a,manipulator:h},f)=>{o(a,h)&&(this._draggedManipulators.delete(f),h.dragging=!1,h.events.emit("drag",{action:"cancel"}))}),i&&this._hoveredManipulators.forEach(({tool:a,manipulator:h},f)=>{o(a,h)&&(this._hoveredManipulators.delete(f),h.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(n)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((n,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Er(n.x,n.y),r,n.pointerType,t)})}handleHoverEvent(t,n){const r=t.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!H6(t.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(t.pointerId):this._updateHoveredStateForPointerAtScreenPosition(Za(t),t.pointerId,t.pointerType,n))}_updateHoveredStateForPointerAtScreenPosition(t,n,r,i){var a;let s=Nm(t,r,i);const o=(a=this._hoveredManipulators.get(n))==null?void 0:a.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(n,s)):this._hoveredManipulators.delete(n),this._onFocusChange(i))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(t){this._hoveredManipulators.forEach(({manipulator:n},r)=>{t===r&&(this._hoveredManipulators.delete(t),n.hovering=!1)})}};function q6(e){for(const{manipulator:t}of e.values())if(t!=null&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function Nm(e,t,n){let r=null;return n(i=>{if(i.manipulators==null||!uA(i))return!1;const s=i.manipulators.intersect(e,t);return s!=null&&(r={tool:i,manipulator:s},!0)}),r}function H6(e){return e==="mouse"}function W6(e){return e.pointerType!=="mouse"||e.button===0}function Kve(e){return!!e.native.shiftKey}function mI(e,t){e!=null&&e.consumesClicks&&t()}const Z6="attached",yI="tools",Xve=1e3;let Ja=class extends Fe{constructor(t){super(t),this._updatingHandles=new nf,this._clock=Cg,this._manipulatorState=new Yve,this.tools=new Ae,this.cursor=null,this._interacting=!1,this._interactingTimeout=Xve,this._interactingTimeoutHandle=null,this._forEachTool=n=>{for(const r of this.tools.items)if(n(r))return}}initialize(){this.addHandles([this.view.on(PW,t=>{this._handleInputEvent(t)},Ld.TOOL),...Jve(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void fe.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const n=this.activeTool;this._set("activeTool",t),n!=null&&n.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const r of this.tools){this._updateToolEditableFlag(r);const i=uA(r);this.activeTool!=null&&i||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!i)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=wn(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var t;this.view.type==="3d"?this.addHandles([ct(()=>{const{state:n}=this.view;return"camera"in n&&n.camera},()=>this._forEachManipulator(n=>n.onViewChange())),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",n=>this._forEachManipulator(r=>r.onElevationChange(n)))],Z6):this.addHandles(ct(()=>this.view.extent,()=>this._forEachManipulator(n=>n.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(Z6),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(n=>{n.manipulators&&n.manipulators.forEach(({manipulator:r})=>t(r,n))})}_handleInputEvent(t){let n=!1;const r={...t,stopPropagation:()=>{n=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(i=>{!n&&i.visible&&i.handleInputEvent(r)}),!n&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),n||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(yI),this._forEachTool(t=>{if(t instanceof Fe){const n=ct(()=>[t.cursor,t.visible,t.editable],()=>{uA(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(n,yI)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",n=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,n.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],yI)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var n;(n=t.setEditableFlag)==null||n.call(t,g0.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(n=>!(n.cursor==null||!n.visible)&&(t=n.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(n=>(t==null||n!==t)&&!n.created&&n.removeIncompleteOnCancel).forEach(n=>{this.tools.remove(n)})}get test(){}};l([p({constructOnly:!0,nonNullable:!0})],Ja.prototype,"view",void 0),l([p({value:null})],Ja.prototype,"activeTool",null),l([p({readOnly:!0,type:Ae})],Ja.prototype,"tools",void 0),l([p({readOnly:!0})],Ja.prototype,"cursor",void 0),l([p({readOnly:!0})],Ja.prototype,"updating",null),l([p()],Ja.prototype,"_interacting",void 0),l([p({readOnly:!0})],Ja.prototype,"interacting",null),Ja=l([k("esri.views.ToolViewManager")],Ja);let Ay=class extends Fe{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":Qve.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return e0e[this.deviceType]}};l([p({nonNullable:!0,readOnly:!0})],Ay.prototype,"nativeIndex",void 0),l([p({type:String,readOnly:!0})],Ay.prototype,"deviceType",null),l([p({type:Number,readOnly:!0})],Ay.prototype,"axisThreshold",null),Ay=l([k("esri.views.input.gamepad.GamepadInputDevice")],Ay);const tL=Ay,Qve=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),e0e={standard:.15,spacemouse:.025,unknown:0};let cv=class extends Fe{constructor(...t){super(...t),this.devices=new Ae,this.enabledFocusMode="document"}};l([p({type:Ae.ofType(tL),readOnly:!0})],cv.prototype,"devices",void 0),l([p({type:["document","view","none"]})],cv.prototype,"enabledFocusMode",void 0),cv=l([k("esri.views.input.gamepad.GamepadSettings")],cv);const t0e=cv;let N2=class extends Fe{constructor(){super(...arguments),this.gamepad=new t0e}};l([p({readOnly:!0})],N2.prototype,"gamepad",void 0),N2=l([k("esri.views.input.Input")],N2);const n0e=N2,LW=()=>Bt.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;let ud=class extends Fe{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};l([p({type:Boolean,nonNullable:!0})],ud.prototype,"enabled",void 0),l([p({type:tL})],ud.prototype,"device",void 0),l([p({type:["pan","zoom"],nonNullable:!0})],ud.prototype,"mode",void 0),l([p({type:["forward-down","forward-up"],nonNullable:!0})],ud.prototype,"tiltDirection",void 0),l([p({type:Number,nonNullable:!0})],ud.prototype,"velocityFactor",void 0),ud=l([k("esri.views.navigation.gamepad.GamepadSettings")],ud);const NW=ud;let kp=class extends Fe{constructor(t){super(t),this.browserTouchPanEnabled=!0,this.gamepad=new NW,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!LW()}};l([p({type:Boolean})],kp.prototype,"browserTouchPanEnabled",void 0),l([p({type:NW,nonNullable:!0})],kp.prototype,"gamepad",void 0),l([p({type:Boolean})],kp.prototype,"momentumEnabled",void 0),l([p({type:Boolean})],kp.prototype,"mouseWheelZoomEnabled",void 0),kp=l([k("esri.views.navigation.Navigation")],kp);const DW=kp;var J6;function r0e(e){var r;if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?Hd(e.url):void 0;return!(((r=e.spatialReference)==null?void 0:r.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&FW(e)&&e.heightModelInfo?e.heightModelInfo:i0e(e)?gE.deriveUnitFromSR(o0e,e.spatialReference):null}function FW(e){return"heightModelInfo"in e}function jW(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function i0e(e){return jW(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):zW(e)}function s0e(e){return e.layers!=null||zW(e)||jW(e)||FW(e)}function zW(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"focusArea":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(J6||(J6={}));const o0e=new gE({heightModel:"gravity-related-height"});var BT;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(BT||(BT={}));let cA,gI=null;async function a0e(e){gI||(gI=pe(()=>import("./geometryServiceUtils-BccF8_EG.js"),[]).then(t=>cA=t)),await gI,xn(e)}async function VW(e,t,n,r){if(!e)return null;const i=e.spatialReference;return Xd()||fl(i,t)?Qd(e,t):cA?cA.projectGeometry(e,t,n,r):(await Promise.race([a0e(r),Gd(r)]),VW(e,t,n,r))}let tn=class extends Fe{constructor(t){super(t),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Wv(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,i,s,o;const t=(r=this.map)==null?void 0:r.call(this),n=[];return this.priorityCollection!=null&&n.push(this.priorityCollection),n.push({parent:t==null?void 0:t.basemap,layers:(i=t==null?void 0:t.basemap)==null?void 0:i.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(s=t==null?void 0:t.ground)==null?void 0:s.layers},{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.referenceLayers}),n}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let t;if(this._collectLayers(this.mapCollections,r=>{const i=this._getSupportedSpatialReferences(r);if(i.length>0){const s=this._narrowDownSpatialReferenceCandidates(t,i);s!=null&&(t=s)}return(t==null?void 0:t.length)===1})&&(t==null?void 0:t.length)!==1)return{updating:!0};const n=this._pickSpatialReferenceCandidate(t);return{spatialReference:(n==null?void 0:n.spatialReference)??null,viewingMode:(n==null?void 0:n.viewingMode)??null,updating:!1}}get _tileInfoTask(){var s,o;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const t=(s=this.map)==null?void 0:s.call(this),n=this.spatialReference;if(!n)return{updating:this._spatialReferenceTask.updating};let r;const i=this._collectLayers([{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.baseLayers},{layers:t==null?void 0:t.layers}],a=>{var h;return!(!("tileInfo"in a)||!((h=a.tileInfo)!=null&&h.spatialReference.equals(n)))&&(r=a,!0)},a=>"tileInfo"in a);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:i}}get _heightModelInfoTask(){var r;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let t={};const n=this._collectLayers(this.mapCollections,i=>{var o,a;const s=r0e(i);return!!s&&(t={heightModelInfo:s,vcsWkid:(o=i.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(a=i.spatialReference)==null?void 0:a.latestVcsWkid},!0)},i=>s0e(i));return{...t,updating:n}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=[],n=this._collectLayers(this.mapCollections,r=>{const i="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:i[0],o=i.find(a=>a.spatialReference.equals(this.spatialReference))??s;if(o)return t.push({extent:o,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const a of i)t.push({extent:a,layer:r});return!1});return{candidates:t,updating:n}}get _extentTask(){const{candidates:t,updating:n}=this._extentCandidatesTask;if(n)return{updating:n};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(t),i=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&i.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=Wv(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:i.clone(),task:dk(async s=>{try{const o=await VW(r.extent,i,"portalItem"in r.layer?r.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(la(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,n){if(t==null)return n;const r=new Array;for(const i of t)for(const s of n){if(!i.spatialReference.equals(s.spatialReference))continue;const o=u0e(i.viewingMode,s.viewingMode);if(o!==!1){r.push({spatialReference:i.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(t){const n=this.defaultSpatialReference;return t==null||t.length<1?n?{spatialReference:n,viewingMode:null}:null:(n!=null&&t.length>1&&t.some(({spatialReference:r})=>r.equals(n))&&(t=t.filter(({spatialReference:r})=>r.equals(n))),t.length>1&&t.some(({viewingMode:r})=>r!==BT.Local)&&(t=t.filter(({viewingMode:r})=>r!==BT.Local)),t[0])}_getSupportedSpatialReferences(t){const n="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(n.length===0)return[];const r=[];for(const i of n){const s=this.getSpatialReferenceSupport(i,t);if(s!=null){const o=s.constraints??[{spatialReference:i,viewingMode:null}];for(const{spatialReference:a,viewingMode:h}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||r.push({spatialReference:a,viewingMode:h})}}return r}_pickExtentCandidate(t){const n=this.spatialReference;return t.find(({extent:r})=>n.equals(r.spatialReference))||t[0]}_collectLayers(t,n,r=()=>!0){var s;if(this._loadMaybe((s=this.map)==null?void 0:s.call(this))!=="loaded")return!0;const i=new l0e(r,n);for(const o of t)if(this._collectCollection(o,i),i.done||i.preloading===this.sourcePreloadCount)break;return i.updating}_collectCollection(t,n){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return n.updating=!0,void++n.preloading;case"failed":return}for(const r of t.layers)if(n.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":n.updating=!0,++n.preloading;break;case"loaded":if(n.updating||(n.done=n.pushLayer(r)),n.done||n.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},n)}if(n.done||n.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(n=>{li(n)}),"loading"):t.loadStatus:"loaded"}};l([p()],tn.prototype,"required",void 0),l([p({constructOnly:!0})],tn.prototype,"map",void 0),l([p({constructOnly:!0})],tn.prototype,"getSpatialReferenceSupport",void 0),l([p()],tn.prototype,"defaultSpatialReference",void 0),l([p()],tn.prototype,"userSpatialReference",void 0),l([p()],tn.prototype,"sourcePreloadCount",void 0),l([p()],tn.prototype,"priorityCollection",void 0),l([p()],tn.prototype,"requiresExtentInSpatialReference",void 0),l([p()],tn.prototype,"suspended",void 0),l([p({readOnly:!0})],tn.prototype,"ready",null),l([p({readOnly:!0})],tn.prototype,"heightModelInfoReady",null),l([p({readOnly:!0})],tn.prototype,"spatialReference",null),l([p({readOnly:!0})],tn.prototype,"extent",null),l([p({readOnly:!0})],tn.prototype,"heightModelInfo",null),l([p({readOnly:!0})],tn.prototype,"vcsWkid",null),l([p({readOnly:!0})],tn.prototype,"latestVcsWkid",null),l([p({readOnly:!0})],tn.prototype,"viewingMode",null),l([p({readOnly:!0})],tn.prototype,"tileInfo",null),l([p({readOnly:!0})],tn.prototype,"mapCollections",null),l([p({readOnly:!0})],tn.prototype,"_spatialReferenceTask",null),l([p({readOnly:!0})],tn.prototype,"_tileInfoTask",null),l([p({readOnly:!0})],tn.prototype,"_heightModelInfoTask",null),l([p({readOnly:!0})],tn.prototype,"_extentCandidatesTask",null),l([p()],tn.prototype,"_extentTask",null),l([p()],tn.prototype,"_projectExtentTask",void 0),tn=l([k("esri.views.support.DefaultsFromMap")],tn);let l0e=class{constructor(t,n){this.layerFilter=t,this.pushLayer=n,this.preloading=-1,this.updating=!1,this.done=!1}};function u0e(e,t){return e!=null?t!=null?e===t&&e:e:t}var dv;let He=dv=class extends ju.EventedMixin(A0(Fe)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new Pg,this.updatingHandles=new nf,this.allLayerViews=new n0({getCollections:()=>{var t,n,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(n=this.groundView)==null?void 0:n.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:d0e}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new Gv,this.analyses=new GT,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Ae,this.magnifier=new IW,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new n0e,this.navigation=new DW,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Lve(this),this.persistableViewModels=new Ae,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(ct(()=>this.preconditionsReady,t=>{var r,i;const n=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,dv.views.add(this)):(this._lockedSpatialReference=null,dv.views.remove(this)),this.notifyChange("spatialReference"),!t&&n)(r=this.toolViewManager)==null||r.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(i=this.layerViewManager)==null||i.clear(),this._teardown();else if(t&&!n){try{this._startup()}catch(s){return void queueMicrotask(()=>{this.fatalError=new Y("startup-error",null,s)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},pl))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,Nx(()=>this.ready)))),this.basemapView=new Eve({view:this}),this.layerViewManager=new Pve({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Ja({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new kve({view:this}),this.addHandles([ct(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},ws),ct(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},pl),ct(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},ws)])}_setupSpatialReferenceLogger(){let e=null;this.addHandles([ct(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var r;const n=((r=this.map)==null?void 0:r.allLayers.length)>0;if(t&&!this.spatialReference&&n){if(e!=null)return;const i=Ft(()=>e=Wv(e));e=dk(async s=>{try{await DV(this.spatialReferenceWarningDelay,null,s)}catch{return}finally{e=null}fe.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.addHandles(i,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){var e,t;this.destroyed||(dv.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=cn(this.graphics),this.analyses=cn(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),cn(this.analysisViewManager),this.toolViewManager=cn(this.toolViewManager),this.layerViewManager=cn(this.layerViewManager),this.selectionManager=cn(this.selectionManager),this.basemapView=cn(this.basemapView),(e=this.groundView)==null||e.destroy(),(t=this.layerViews)==null||t.forEach(n=>n.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=cn(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return fe.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new tn({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||ho.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(fe.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),ho.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get spatialReference(){var t,n;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((n=(t=this.defaultsFromMap)==null?void 0:t.required)!=null&&n.heightModelInfo)){const r=e.clone();return r.vcsWkid=this.defaultsFromMap.vcsWkid,r.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,r}return e}set spatialReference(e){const t=!dr(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??ca}set timeZone(e){this._userTimeZone=e,sae(e)||fe.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new lA}whenLayerView(e){var t;return((t=this.layerViewManager)==null?void 0:t.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new Y("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&fe.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(hl(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};He.views=new Ae,l([p()],He.prototype,"_userSpatialReference",void 0),l([p()],He.prototype,"activeTool",null),l([p({readOnly:!0})],He.prototype,"allLayerViews",void 0),l([p()],He.prototype,"groundView",void 0),l([p()],He.prototype,"animation",null),l([p()],He.prototype,"basemapView",void 0),l([p()],He.prototype,"center",null),l([p()],He.prototype,"defaultsFromMapSettings",null),l([p()],He.prototype,"defaultsFromMap",null),l([p()],He.prototype,"fatalError",void 0),l([p({type:Xt})],He.prototype,"extent",null),l([p(F6(Gv,"graphics"))],He.prototype,"graphics",void 0),l([p(F6(GT,"analyses"))],He.prototype,"analyses",void 0),l([p({readOnly:!0,type:gE})],He.prototype,"heightModelInfo",null),l([p({readOnly:!0})],He.prototype,"interacting",null),l([p({readOnly:!0})],He.prototype,"navigating",null),l([p({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],He.prototype,"preconditionsReady",null),l([p({readOnly:!0})],He.prototype,"typeSpecificPreconditionsReady",void 0),l([p({type:Ae,readOnly:!0})],He.prototype,"layerViews",void 0),l([p()],He.prototype,"resolution",null),l([p({type:IW})],He.prototype,"magnifier",void 0),l([p({value:null,type:xG})],He.prototype,"map",null),l([p()],He.prototype,"padding",void 0),l([p({readOnly:!0})],He.prototype,"ready",void 0),l([p({type:dt})],He.prototype,"spatialReference",null),l([p()],He.prototype,"spatialReferenceWarningDelay",void 0),l([p()],He.prototype,"stationary",null),l([p({readOnly:!0})],He.prototype,"supportsGround",void 0),l([p({type:ur})],He.prototype,"timeExtent",null),l([p({type:String,nonNullable:!0})],He.prototype,"timeZone",null),l([p()],He.prototype,"tools",null),l([p()],He.prototype,"toolViewManager",void 0),l([p({readOnly:!0})],He.prototype,"type",void 0),l([p({type:Number})],He.prototype,"scale",void 0),l([p({readOnly:!0})],He.prototype,"updating",void 0),l([p({readOnly:!0})],He.prototype,"initialExtentRequired",void 0),l([p({readOnly:!0})],He.prototype,"initialExtent",null),l([p()],He.prototype,"cursor",null),l([p({readOnly:!0})],He.prototype,"input",void 0),l([p({type:DW,nonNullable:!0})],He.prototype,"navigation",void 0),l([p()],He.prototype,"layerViewManager",void 0),l([p()],He.prototype,"analysisViewManager",void 0),l([p()],He.prototype,"selectionManager",void 0),l([p()],He.prototype,"width",void 0),l([p()],He.prototype,"height",void 0),l([p({readOnly:!0})],He.prototype,"resizing",void 0),l([p({value:null,readOnly:!0})],He.prototype,"size",null),l([p({readOnly:!0})],He.prototype,"suspended",void 0),l([p({readOnly:!0})],He.prototype,"viewEvents",void 0),l([p({readOnly:!0})],He.prototype,"persistableViewModels",void 0),l([p()],He.prototype,"_isValid",void 0),l([p()],He.prototype,"_readyCycleForced",void 0),l([p()],He.prototype,"_lockedSpatialReference",void 0),l([p()],He.prototype,"_userTimeZone",void 0),l([p()],He.prototype,"_lockedTimeZone",void 0),l([p()],He.prototype,"_userTimeExtent",void 0),l([p()],He.prototype,"_lockedTimeExtent",void 0),l([p({type:lA})],He.prototype,"theme",void 0),l([p({readOnly:!0,type:lA})],He.prototype,"effectiveTheme",null),He=dv=l([k("esri.views.View")],He);const _I=globalThis.$arcgis;_I&&!_I.views&&Object.defineProperty(_I,"views",{configurable:!1,enumerable:!0,writable:!1,value:He.views});const c0e=He;function d0e(e){return e.layerViews}function Pn(){return[0,0]}function h0e(e){return[e[0],e[1]]}function X0(e,t){return[e,t]}function p0e(e,t=Pn()){const n=Math.min(2,e.length);for(let r=0;r<n;++r)t[r]=e[r];return t}function f0e(e,t){return new Float64Array(e,t,2)}function UW(){return Pn()}function GW(){return X0(1,1)}function BW(){return X0(1,0)}function qW(){return X0(0,1)}const m0e=UW(),y0e=GW(),g0e=BW(),_0e=qW();Object.freeze(Object.defineProperty({__proto__:null,ONES:y0e,UNIT_X:g0e,UNIT_Y:_0e,ZEROS:m0e,clone:h0e,create:Pn,createView:f0e,fromArray:p0e,fromValues:X0,ones:GW,unitX:BW,unitY:qW,zeros:UW},Symbol.toStringTag,{value:"Module"}));let cd=class extends pT{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=xs(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new Y("ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,n){n||(n=_l(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",n)}};l([p({readOnly:!0})],cd.prototype,"done",null),l([p({readOnly:!0,type:String})],cd.prototype,"state",void 0),l([p()],cd.prototype,"target",void 0),cd=l([k("esri.views.ViewAnimation")],cd),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(cd||(cd={}));const dA=cd;function dg(e,t){return e[0]=t[0],e[1]=t[1],e}function Tr(e,t,n){return e[0]=t,e[1]=n,e}function HW(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function _0(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function WW(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function ZW(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function w0e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function v0e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function b0e(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function S0e(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function T0e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function Q0(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function x0e(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function TE(e,t){const n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function qT(e,t){const n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function HT(e){const t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function JW(e){const t=e[0],n=e[1];return t*t+n*n}function YW(e,t){return e[0]=-t[0],e[1]=-t[1],e}function E0e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function hA(e,t){const n=t[0],r=t[1];let i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}function KW(e,t){return e[0]*t[0]+e[1]*t[1]}function XW(e,t,n){const r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function $0e(e,t,n,r){const i=t[0],s=t[1];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e}function M0e(e,t=1){const n=2*Fx()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function I0e(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e}function il(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}function P0e(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}function C0e(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}function O0e(e,t,n,r){const i=t[0]-n[0],s=t[1]-n[1],o=Math.sin(r),a=Math.cos(r);return e[0]=i*a-s*o+n[0],e[1]=i*o+s*a+n[1],e}function A0e(e,t){const n=e[0],r=e[1],i=t[0],s=t[1];let o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));let a=i*i+s*s;a>0&&(a=1/Math.sqrt(a));const h=(n*i+r*s)*o*a;return h>1?0:h<-1?Math.PI:Math.acos(h)}function k0e(e){return"vec2("+e[0]+", "+e[1]+")"}function R0e(e,t){return e[0]===t[0]&&e[1]===t[1]}function L0e(e,t){const n=e[0],r=e[1],i=t[0],s=t[1],o=Si();return Math.abs(n-i)<=o*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))}function N0e(e,t,n,r,i){let s=t[0]-n[0],o=t[1]-n[1];const a=(r[0]*s+r[1]*o)*(i-1);return s=r[0]*a,o=r[1]*a,e[0]=t[0]+s,e[1]=t[1]+o,e}const D0e=HT,nL=_0,F0e=WW,j0e=ZW,z0e=TE,V0e=qT,U0e=JW;Object.freeze(Object.defineProperty({__proto__:null,add:HW,angle:A0e,ceil:w0e,copy:dg,cross:XW,dist:z0e,distance:TE,div:j0e,divide:ZW,dot:KW,equals:L0e,exactEquals:R0e,floor:v0e,inverse:E0e,len:D0e,length:HT,lerp:$0e,max:S0e,min:b0e,mul:F0e,multiply:WW,negate:YW,normalize:hA,projectAndScale:N0e,random:M0e,rotate:O0e,round:T0e,scale:Q0,scaleAndAdd:x0e,set:Tr,sqrDist:V0e,sqrLen:U0e,squaredDistance:qT,squaredLength:JW,str:k0e,sub:nL,subtract:_0,transformMat2:I0e,transformMat2d:il,transformMat3:P0e,transformMat4:C0e},Symbol.toStringTag,{value:"Module"}));function G0e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function B0e(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function q0e(e,t,n,r,i,s,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e}function rL(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5];let h=n*s-r*i;return h?(h=1/h,e[0]=s*h,e[1]=-r*h,e[2]=-i*h,e[3]=n*h,e[4]=(i*a-s*o)*h,e[5]=(r*o-n*a)*h,e):null}function H0e(e){return e[0]*e[3]-e[1]*e[2]}function QW(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],h=t[5],f=n[0],_=n[1],w=n[2],b=n[3],T=n[4],M=n[5];return e[0]=r*f+s*_,e[1]=i*f+o*_,e[2]=r*w+s*b,e[3]=i*w+o*b,e[4]=r*T+s*M+a,e[5]=i*T+o*M+h,e}function xE(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],h=t[5],f=Math.sin(n),_=Math.cos(n);return e[0]=r*_+s*f,e[1]=i*_+o*f,e[2]=r*-f+s*_,e[3]=i*-f+o*_,e[4]=a,e[5]=h,e}function iL(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],h=t[5],f=n[0],_=n[1];return e[0]=r*f,e[1]=i*f,e[2]=s*_,e[3]=o*_,e[4]=a,e[5]=h,e}function w0(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],h=t[5],f=n[0],_=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=r*f+s*_+a,e[5]=i*f+o*_+h,e}function eZ(e,t){const n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e}function tZ(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function sL(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function W0e(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function Z0e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function J0e(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e}function nZ(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}function Y0e(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e}function K0e(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e}function X0e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function Q0e(e,t){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],h=t[0],f=t[1],_=t[2],w=t[3],b=t[4],T=t[5],M=Si();return Math.abs(n-h)<=M*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-f)<=M*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-_)<=M*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(s-w)<=M*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(o-b)<=M*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-T)<=M*Math.max(1,Math.abs(a),Math.abs(T))}const e1e=QW,t1e=nZ;Object.freeze(Object.defineProperty({__proto__:null,add:J0e,copy:G0e,determinant:H0e,equals:Q0e,exactEquals:X0e,frob:Z0e,fromRotation:eZ,fromScaling:tZ,fromTranslation:sL,identity:B0e,invert:rL,mul:e1e,multiply:QW,multiplyScalar:Y0e,multiplyScalarAndAdd:K0e,rotate:xE,scale:iL,set:q0e,str:W0e,sub:t1e,subtract:nZ,translate:w0},Symbol.toStringTag,{value:"Module"}));function Ru(){return[1,0,0,1,0,0]}function n1e(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function r1e(e,t,n,r,i,s){return[e,t,n,r,i,s]}function i1e(e,t){return new Float64Array(e,t,6)}const s1e=Ru();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s1e,clone:n1e,create:Ru,createView:i1e,fromValues:r1e},Symbol.toStringTag,{value:"Module"}));const oS={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new so({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:dt.WebMercator}),minus180Line:new so({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:dt.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new so({paths:[[[180,-180],[180,180]]],spatialReference:dt.WGS84}),minus180Line:new so({paths:[[[-180,-180],[-180,180]]],spatialReference:dt.WGS84})}};function Yp(e,t){return Math.ceil((e-t)/(2*t))}function rZ(e,t){const n=Bv(e);for(const r of n)for(const i of r)i[0]+=t;return e}function Bv(e){return ef(e)?e.rings:e.paths}async function o1e(e,t,n,r){const i=HG(e),s=t[0].spatialReference,o={...r,responseType:"json",query:{...i.query,f:"json",sr:_T(s),target:JSON.stringify({geometryType:D0(t[0]),geometries:t}),cutter:JSON.stringify(n)}},a=await Lt(i.path+"/cut",o),{cutIndexes:h,geometries:f=[]}=a.data;return{cutIndexes:h,geometries:f.map(_=>{const w=Du(_);return w.spatialReference=s,w})}}async function a1e(e,t,n){const r=typeof e=="string"?cr(e):e,i=t[0].spatialReference,s=D0(t[0]),o={...n,query:{...r.query,f:"json",sr:_T(i),geometries:JSON.stringify(mle(t))}},{data:a}=await Lt(r.path+"/simplify",o);return WG(a.geometries,s,i)}const iZ=()=>fe.getLogger("esri.geometry.support.normalizeUtils");function l1e(e){return e.type==="polygon"}function u1e(e){return e[0].type==="polygon"}function c1e(e){return e[0].type==="polyline"}function Y6(e){const t=[];let n=0,r=0;for(let i=0;i<e.length;i++){const s=e[i];let o=null;for(let a=0;a<s.length;a++)o=s[a],t.push(o),a===0?(n=o[0],r=n):(n=Math.min(n,o[0]),r=Math.max(r,o[0]));o&&t.push([(n+r)/2,0])}return t}function d1e(e,t){if(!(e instanceof so||e instanceof mo)){const i="straightLineDensify: the input geometry is neither polyline nor polygon";throw iZ().error(i),new Y(i)}const n=Bv(e),r=[];for(const i of n){const s=[];r.push(s),s.push([i[0][0],i[0][1]]);for(let o=0;o<i.length-1;o++){const a=i[o][0],h=i[o][1],f=i[o+1][0],_=i[o+1][1],w=Math.sqrt((f-a)*(f-a)+(_-h)*(_-h)),b=(_-h)/w,T=(f-a)/w,M=w/t;if(M>1){for(let j=1;j<=M-1;j++){const z=j*t,U=T*z+a,K=b*z+h;s.push([U,K])}const I=(w+Math.floor(M-1)*t)/2,C=T*I+a,N=b*I+h;s.push([C,N])}s.push([f,_])}}return l1e(e)?new mo({rings:r,spatialReference:e.spatialReference}):new so({paths:r,spatialReference:e.spatialReference})}function K6(e,t,n){if(t){const r=d1e(e,1e6);e=Uy(r,!0)}return n&&(e=rZ(e,n)),e}function X6(e,t,n){if(Array.isArray(e)){const r=e[0];if(r>t){const i=Yp(r,t);e[0]=r+i*(-2*t)}else if(r<n){const i=Yp(r,n);e[0]=r+i*(-2*n)}}else{const r=e.x;if(r>t){const i=Yp(r,t);e=e.clone().offset(i*(-2*t),0)}else if(r<n){const i=Yp(r,n);e=e.clone().offset(i*(-2*n),0)}}return e}function h1e(e,t){let n=-1;for(let r=0;r<t.cutIndexes.length;r++){const i=t.cutIndexes[r],s=t.geometries[r],o=Bv(s);for(let a=0;a<o.length;a++){const h=o[a];h.some(f=>{if(f[0]<180)return!0;{let _=0;for(let b=0;b<h.length;b++){const T=h[b][0];_=T>_?T:_}_=Number(_.toFixed(9));const w=-360*Yp(_,180);for(let b=0;b<h.length;b++){const T=s.getPoint(a,b);s.setPoint(a,b,T.clone().offset(w,0))}return!0}})}if(i===n){if(u1e(e))for(const a of Bv(s))e[i]=e[i].addRing(a);else if(c1e(e))for(const a of Bv(s))e[i]=e[i].addPath(a)}else n=i,e[i]=s}return e}async function p1e(e,t,n){if(!Array.isArray(e))return p1e([e],t);t&&typeof t!="string"&&iZ().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:(t==null?void 0:t.url)??Bt.geometryServiceUrl;let i,s,o,a,h,f,_,w,b=0;const T=[],M=[];for(const U of e)if(U!=null)if(i||(i=U.spatialReference,s=bi(i),o=i.isWebMercator,f=o?102100:4326,a=oS[f].maxX,h=oS[f].minX,_=oS[f].plus180Line,w=oS[f].minus180Line),s)if(U.type==="mesh")M.push(U);else if(U.type==="point")M.push(X6(U.clone(),a,h));else if(U.type==="multipoint"){const K=U.clone();K.points=K.points.map(J=>X6(J,a,h)),M.push(K)}else if(U.type==="extent"){const K=U.clone()._normalize(!1,!1,s);M.push(K.rings?new mo(K):K)}else if(U.extent){const K=U.extent,J=Yp(K.xmin,h)*(2*a);let le=J===0?U.clone():rZ(U.clone(),J);K.offset(J,0);let{xmin:ue,xmax:be}=K;ue=Number(ue.toFixed(9)),be=Number(be.toFixed(9)),K.intersects(_)&&be!==a?(b=be>b?be:b,le=K6(le,o),T.push(le),M.push("cut")):K.intersects(w)&&ue!==h?(b=be*(2*a)>b?be*(2*a):b,le=K6(le,o,360),T.push(le),M.push("cut")):M.push(le)}else M.push(U.clone());else M.push(U);else M.push(U);let I=Yp(b,a),C=-90;const N=I,j=new so;for(;I>0;){const U=360*I-180;j.addPath([[U,C],[U,-1*C]]),C*=-1,I--}if(T.length>0&&N>0){const U=h1e(T,await o1e(r,T,j,n)),K=[],J=[];for(let be=0;be<M.length;be++){const xe=M[be];if(xe!=="cut")J.push(xe);else{const _e=U.shift(),$e=e[be];$e!=null&&$e.type==="polygon"&&$e.rings&&$e.rings.length>1&&_e.rings.length>=$e.rings.length?(K.push(_e),J.push("simplify")):J.push(o?Ad(_e):_e)}}if(!K.length)return J;const le=await a1e(r,K,n),ue=[];for(let be=0;be<J.length;be++){const xe=J[be];xe!=="simplify"?ue.push(xe):ue.push(o?Ad(le.shift()):le.shift())}return ue}const z=[];for(let U=0;U<M.length;U++){const K=M[U];if(K!=="cut")z.push(K);else{const J=T.shift();z.push(o===!0?Ad(J):J)}}return z}function f1e(e){if(!e)return null;const t=e.extent;if(!t)return null;const n=e.spatialReference&&bi(e.spatialReference);if(!n)return t;const[r,i]=n.valid,s=2*i,{width:o}=t;let a,{xmin:h,xmax:f}=t;if([h,f]=[f,h],e.type==="extent"||o===0||o<=i||o>s||h<r||f>i)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;a=Y6(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;a=Y6(e.paths);break;case"multipoint":a=e.points}const _=t.clone();for(let w=0;w<a.length;w++){let b=a[w][0];b<0?(b+=i,f=Math.max(b,f)):(b-=i,h=Math.min(b,h))}return _.xmin=h,_.xmax=f,_.width<o?(_.xmin-=i,_.xmax-=i,_):t}function oL(e,t,n){const r=bi(n);if(r==null)return e;const[i,s]=r.valid,o=2*s;let a=0,h=0;t>s?a=Math.ceil(Math.abs(t-s)/o):t<i&&(a=-Math.ceil(Math.abs(t-i)/o)),e>s?h=Math.ceil(Math.abs(e-s)/o):e<i&&(h=-Math.ceil(Math.abs(e-i)/o));let f=e+(a-h)*o;const _=f-t;return _>s?f-=o:_<i&&(f+=o),f}function nke(e,t){const n=bi(t);if(n){const[r,i]=n.valid,s=i-r;if(e<r)for(;e<r;)e+=s;if(e>i)for(;e>i;)e-=s}return e}const sZ=96,oZ=39.37,m1e=180/Math.PI;function aZ(e){return e.wkid?e:e.spatialReference||dt.WGS84}function aL(e,t){return t.type?Tr(e,t.x,t.y):dg(e,t)}function lZ(e){return Zd(e)}function EE(e,t,n=0){let r=e.width,i=e.height;if(n!==0){const a=Rx(n),h=Math.abs(Math.cos(a)),f=Math.abs(Math.sin(a));r=e.width*h+e.height*f,i=e.width*f+e.height*h}const s=Math.max(1,t[0]),o=Math.max(1,t[1]);return Math.max(r/s,i/o)*T1e(e.spatialReference)}async function hv(e,t,n,r){var a,h;let i,s;if(!e||Array.isArray(e)&&!e.length)return null;if(Ae.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const f=e.every(b=>"attributes"in b),_=e.some(b=>!b.geometry);let w=e;if(f&&_&&t&&t.allLayerViews){const b=new Map;for(const C of e){const N=C.layer,j=b.get(N)||[],z=C.attributes[N.objectIdField];z!=null&&j.push(z),b.set(N,j)}const T=[];b.forEach((C,N)=>{const j=t.allLayerViews.find(z=>z.layer.id===N.id);if(j&&"queryFeatures"in j){const z=N.createQuery();z.objectIds=C,z.returnGeometry=!0,T.push(j.queryFeatures(z))}});const M=await Promise.all(T),I=[];for(const C of M)if(C&&C.features&&C.features.length)for(const N of C.features)N.geometry!=null&&I.push(N.geometry);w=I}for(const b of w)r=await hv(b,t,n,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")i=new gt(e);else if(e instanceof zu)i=e;else if("geometry"in e){if(e.geometry)i=e.geometry;else if(e.layer){const f=e.layer,_=t.allLayerViews.find(w=>w.layer.id===f.id);if(_&&"queryFeatures"in _){const w=f.createQuery();w.objectIds=[e.attributes[f.objectIdField]],w.returnGeometry=!0;const b=await _.queryFeatures(w);i=(h=(a=b==null?void 0:b.features)==null?void 0:a[0])==null?void 0:h.geometry}}}if(i==null)return null;switch(i.type){case"point":s=new Xt({xmin:i.x,ymin:i.y,xmax:i.x,ymax:i.y,spatialReference:i.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=f1e(i);break;default:s=i.extent}if(!s)return null;Xd()||fl(s.spatialReference,n)||await Gd();const o=Qd(s,n);if(!o)return null;if(r){const f=o.center,_=f.clone();_.x=oL(f.x,r.center.x,n),_.x!==f.x&&o.centerAt(_),r=r.union(o)}else r=o;return r}function y1e(e){var t;if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&((t=e.layer)==null?void 0:t.minScale)!=null&&e.layer.maxScale!=null){const n=e.layer;return{min:n.minScale,max:n.maxScale}}if(Array.isArray(e)&&e.length&&e.every(n=>"layer"in n)){let n=0,r=0;for(const i of e){const s=i.layer;s!=null&&s.minScale&&s.maxScale&&(n=s.minScale<n?s.minScale:n,r=s.maxScale>r?s.maxScale:r)}return n&&r?{min:n,max:r}:null}}}function Q6(e,t){const n=aZ(e);return dr(n,t)||n.imageCoordinateSystem||t.imageCoordinateSystem?e:Qd(e,t)}async function g1e(e,t){var C;if(!e||!t)return new $r({targetGeometry:new gt,scale:0,rotation:0});let n=t.spatialReference;const{constraints:r,padding:i,viewpoint:s,size:o}=t,a=[i?o[0]-i.left-i.right:o[0],i?o[1]-i.top-i.bottom:o[1]];let h=null;e instanceof $r?h=e:e.viewpoint?h=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(h=e.target);let f=null;h!=null&&h.targetGeometry?f=h.targetGeometry:e instanceof Xt?f=e:e instanceof zu?f=await hv(e,t,n):e&&(f=await hv(e.center,t,n)||await hv(e.target,t,n)||await hv(e,t,n)),!f&&(s!=null&&s.targetGeometry)?f=s.targetGeometry:!f&&t.extent&&(f=t.extent),n||(n=aZ(t.spatialReference||t.extent||f)),Xd()||dr(f.spatialReference,n)||fl(f.spatialReference,n)||await Gd();const _=Q6(f,n),w="center"in _?_.center:_;t.pickClosestTarget!==!1&&w.type==="point"&&((C=s.targetGeometry)==null?void 0:C.type)==="point"&&(w.x=oL(w.x,s.targetGeometry.x,w.spatialReference));let b=0;h?b=h.rotation:e.hasOwnProperty("rotation")?b=e.rotation:s&&(b=s.rotation);let T=0;T=(h==null?void 0:h.targetGeometry)!=null&&h.targetGeometry.type==="point"?h.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(e.zoom):Array.isArray(f)||f.type==="point"||f.type==="extent"&&f.width===0&&f.height===0?s.scale:EE(Q6(f.extent,n),a,b);const M=y1e(e.target??e);M&&(M.min&&M.min<T?T=M.min:M.max&&M.max>T&&(T=M.max));let I=new $r({targetGeometry:w,scale:T,rotation:b});return r&&(I=r.fit(I),r.constrainByGeometry(I),r.rotationEnabled||(I.rotation=s.rotation)),I}function ii(e,t){const n=e.targetGeometry,r=t.targetGeometry;return n.x=r.x,n.y=r.y,n.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function _1e(e,t,n){return n?Tr(e,.5*(t[0]-n.right+n.left),.5*(t[1]-n.bottom+n.top)):Q0(e,t,.5)}const w1e=function(){const e=Pn();return function(t,n,r){const i=n.targetGeometry;aL(e,i);const s=.5*Yg(n);return t.xmin=e[0]-s*r[0],t.ymin=e[1]-s*r[1],t.xmax=e[0]+s*r[0],t.ymax=e[1]+s*r[1],t.spatialReference=i.spatialReference,t}}();function v1e(e,t,n,r,i){var s;return pA(e,t,n.center),e.scale=EE(n,r),(s=i==null?void 0:i.constraints)==null||s.constrain(e),e}function b1e(e,t,n,r){return cL(e,t,n,r),rL(e,e)}const uZ=function(){const e=Pn();return function(t,n,r){return nL(t,x1e(t,n),_1e(e,n,r))}}(),S1e=function(){const e=Ru(),t=Pn();return function(n,r,i,s){const o=Yg(r),a=lL(r);return Tr(t,o,o),tZ(e,t),xE(e,e,a),w0(e,e,uZ(t,i,s)),w0(e,e,[0,s.top-s.bottom]),Tr(n,e[4],e[5])}}();function Yg(e){var t;return e.scale*cZ((t=e.targetGeometry)==null?void 0:t.spatialReference)}function cZ(e){return e!=null&&vs(e)?1/(lZ(e)*oZ*sZ):1}function lL(e){return Mk(e.rotation)||0}function T1e(e){return vs(e)?lZ(e)*oZ*sZ:1}function x1e(e,t){return Q0(e,t,.5)}const uL=function(){const e=Pn(),t=Pn(),n=Pn();return function(r,i,s,o,a,h){return YW(e,i),Q0(t,s,.5*h),Tr(n,1/o*h,-1/o*h),sL(r,t),a&&xE(r,r,a),iL(r,r,n),w0(r,r,e),r}}(),cL=function(){const e=Pn();return function(t,n,r,i){const s=Yg(n),o=lL(n);return aL(e,n.targetGeometry),uL(t,e,r,s,o,i)}}(),E1e=function(){const e=Pn();return function(t,n,r,i){const s=Yg(n);return aL(e,n.targetGeometry),uL(t,e,r,s,0,i)}}();function dZ(e){const t=bi(e);return t?t.valid[1]-t.valid[0]:0}function $1e(e,t){return Math.round(dZ(e)/t)}const M1e=function(){const e=Pn(),t=Pn(),n=[0,0,0];return function(r,i,s){_0(e,r,i),hA(e,e),_0(t,r,s),hA(t,t),XW(n,e,t);let o=Math.acos(KW(e,t)/(HT(e)*HT(t)))*m1e;return n[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),I1e=function(){const e=Pn();return function(t,n,r,i){const s=t.targetGeometry;return ii(t,n),S1e(e,n,r,i),s.x+=e[0],s.y+=e[1],t}}(),pA=function(e,t,n){ii(e,t);const r=e.targetGeometry;return r.x=n.x,r.y=n.y,r.spatialReference=n.spatialReference,e},P1e=function(){const e=Pn();return function(t,n,r,i,s){s||(s="center"),nL(e,r,i),Q0(e,e,.5);const o=e[0],a=e[1];switch(s){case"center":Tr(e,0,0);break;case"left":Tr(e,-o,0);break;case"top":Tr(e,0,a);break;case"right":Tr(e,o,0);break;case"bottom":Tr(e,0,-a);break;case"top-left":Tr(e,-o,a);break;case"bottom-left":Tr(e,-o,-a);break;case"top-right":Tr(e,o,a);break;case"bottom-right":Tr(e,o,-a)}return $E(t,n,e),t}}();function rke(e,t,n){return ii(e,t),e.rotation+=n,e}function C1e(e,t,n){return ii(e,t),e.rotation=n,e}const O1e=function(){const e=Pn();return function(t,n,r,i,s){return ii(t,n),isNaN(r)||r===0||(pZ(e,i,n,s),t.scale=n.scale*r,fZ(e,e,t,s),$E(t,t,Tr(e,e[0]-i[0],i[1]-e[1]))),t}}();function e8(e,t,n){return ii(e,t),e.scale=n,e}const hZ=function(){const e=Pn();return function(t,n,r,i,s,o){return ii(t,n),isNaN(r)||r===0||(pZ(e,s,n,o),t.scale=n.scale*r,t.rotation+=i,fZ(e,e,t,o),$E(t,t,Tr(e,e[0]-s[0],s[1]-e[1]))),t}}(),ike=function(){const e=Pn(),t=Pn();return function(n,r,i,s,o,a,h){return uZ(t,a,h),HW(e,o,t),s?hZ(n,r,i,s,e,a):O1e(n,r,i,e,a)}}(),pZ=function(){const e=Ru();return function(t,n,r,i){return il(t,n,b1e(e,r,i,1))}}(),fZ=function(){const e=Ru();return function(t,n,r,i){return il(t,n,cL(e,r,i,1))}}(),$E=function(){const e=Pn(),t=Ru();return function(n,r,i){ii(n,r);const s=Yg(r),o=n.targetGeometry;return eZ(t,lL(r)),iL(t,t,X0(s,s)),il(e,i,t),o.x+=e[0],o.y+=e[1],n}}();function mZ(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function A1e(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function k1e(e,t,n,r,i,s){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o[4]=i,o[5]=s,o}function R1e(e,t){return new Float32Array(e,t,6)}function yZ(e,t,n,r){const i=t[r],s=t[r+1];e[r]=n[0]*i+n[2]*s+n[4],e[r+1]=n[1]*i+n[3]*s+n[5]}function L1e(e,t,n,r=0,i=0,s=2){const o=i||t.length/s;for(let a=r;a<o;a++)yZ(e,t,n,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:A1e,create:mZ,createView:R1e,fromValues:k1e,transform:yZ,transformMany:L1e},Symbol.toStringTag,{value:"Module"}));function N1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function D1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function gZ(e,t,n,r,i,s,o,a,h,f){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=h,e[8]=f,e}function _Z(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function F1e(e,t){if(e===t){const n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function j1e(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],h=t[6],f=t[7],_=t[8],w=_*o-a*f,b=-_*s+a*h,T=f*s-o*h;let M=n*w+r*b+i*T;return M?(M=1/M,e[0]=w*M,e[1]=(-_*r+i*f)*M,e[2]=(a*r-i*o)*M,e[3]=b*M,e[4]=(_*n-i*h)*M,e[5]=(-a*n+i*s)*M,e[6]=T*M,e[7]=(-f*n+r*h)*M,e[8]=(o*n-r*s)*M,e):null}function z1e(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],h=t[6],f=t[7],_=t[8];return e[0]=o*_-a*f,e[1]=i*f-r*_,e[2]=r*a-i*o,e[3]=a*h-s*_,e[4]=n*_-i*h,e[5]=i*s-n*a,e[6]=s*f-o*h,e[7]=r*h-n*f,e[8]=n*o-r*s,e}function V1e(e){const t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],h=e[7],f=e[8];return t*(f*s-o*h)+n*(-f*i+o*a)+r*(h*i-s*a)}function dL(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],h=t[5],f=t[6],_=t[7],w=t[8],b=n[0],T=n[1],M=n[2],I=n[3],C=n[4],N=n[5],j=n[6],z=n[7],U=n[8];return e[0]=b*r+T*o+M*f,e[1]=b*i+T*a+M*_,e[2]=b*s+T*h+M*w,e[3]=I*r+C*o+N*f,e[4]=I*i+C*a+N*_,e[5]=I*s+C*h+N*w,e[6]=j*r+z*o+U*f,e[7]=j*i+z*a+U*_,e[8]=j*s+z*h+U*w,e}function fA(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],h=t[5],f=t[6],_=t[7],w=t[8],b=n[0],T=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=a,e[5]=h,e[6]=b*r+T*o+f,e[7]=b*i+T*a+_,e[8]=b*s+T*h+w,e}function wZ(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],h=t[5],f=t[6],_=t[7],w=t[8],b=Math.sin(n),T=Math.cos(n);return e[0]=T*r+b*o,e[1]=T*i+b*a,e[2]=T*s+b*h,e[3]=T*o-b*r,e[4]=T*a-b*i,e[5]=T*h-b*s,e[6]=f,e[7]=_,e[8]=w,e}function U1e(e,t,n){const r=n[0],i=n[1],s=n[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=s*t[6],e[7]=s*t[7],e[8]=s*t[8],e}function G1e(e,t,n){const r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e}function B1e(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function q1e(e,t){const n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function H1e(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function W1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Z1e(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,a=r+r,h=i+i,f=n*o,_=r*o,w=r*a,b=i*o,T=i*a,M=i*h,I=s*o,C=s*a,N=s*h;return e[0]=1-w-M,e[3]=_-N,e[6]=b+C,e[1]=_+N,e[4]=1-f-M,e[7]=T-I,e[2]=b-C,e[5]=T+I,e[8]=1-f-w,e}function J1e(e,t){const n=t[0],r=t[1],i=t[2],s=t[4],o=t[5],a=t[6],h=t[8],f=t[9],_=t[10],w=_*o-a*f,b=-_*s+a*h,T=f*s-o*h,M=n*w+r*b+i*T;if(!M)return null;const I=1/M;return e[0]=w*I,e[1]=(-_*r+i*f)*I,e[2]=(a*r-i*o)*I,e[3]=b*I,e[4]=(_*n-i*h)*I,e[5]=(-a*n+i*s)*I,e[6]=T*I,e[7]=(-f*n+r*h)*I,e[8]=(o*n-r*s)*I,e}function Y1e(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],h=t[6],f=t[7],_=t[8],w=t[9],b=t[10],T=t[11],M=t[12],I=t[13],C=t[14],N=t[15],j=n*a-r*o,z=n*h-i*o,U=n*f-s*o,K=r*h-i*a,J=r*f-s*a,le=i*f-s*h,ue=_*I-w*M,be=_*C-b*M,xe=_*N-T*M,_e=w*C-b*I,$e=w*N-T*I,je=b*N-T*C;let Me=j*je-z*$e+U*_e+K*xe-J*be+le*ue;return Me?(Me=1/Me,e[0]=(a*je-h*$e+f*_e)*Me,e[1]=(h*xe-o*je-f*be)*Me,e[2]=(o*$e-a*xe+f*ue)*Me,e[3]=(i*$e-r*je-s*_e)*Me,e[4]=(n*je-i*xe+s*be)*Me,e[5]=(r*xe-n*$e-s*ue)*Me,e[6]=(I*le-C*J+N*K)*Me,e[7]=(C*U-M*le-N*z)*Me,e[8]=(M*J-I*U+N*j)*Me,e):null}function K1e(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function X1e(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Q1e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function ebe(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function vZ(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function tbe(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function nbe(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function rbe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function ibe(e,t){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],h=e[6],f=e[7],_=e[8],w=t[0],b=t[1],T=t[2],M=t[3],I=t[4],C=t[5],N=t[6],j=t[7],z=t[8],U=Si();return Math.abs(n-w)<=U*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(r-b)<=U*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-T)<=U*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(s-M)<=U*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(o-I)<=U*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(a-C)<=U*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(h-N)<=U*Math.max(1,Math.abs(h),Math.abs(N))&&Math.abs(f-j)<=U*Math.max(1,Math.abs(f),Math.abs(j))&&Math.abs(_-z)<=U*Math.max(1,Math.abs(_),Math.abs(z))}function sbe(e){const t=Si(),n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],h=e[6],f=e[7],_=e[8];return Math.abs(1-(n*n+s*s+h*h))<=t&&Math.abs(1-(r*r+o*o+f*f))<=t&&Math.abs(1-(i*i+a*a+_*_))<=t}const obe=dL,abe=vZ;Object.freeze(Object.defineProperty({__proto__:null,add:ebe,adjoint:z1e,copy:D1e,determinant:V1e,equals:ibe,exactEquals:rbe,frob:Q1e,fromMat2d:W1e,fromMat4:N1e,fromQuat:Z1e,fromRotation:q1e,fromScaling:H1e,fromTranslation:B1e,identity:_Z,invert:j1e,isOrthoNormal:sbe,mul:obe,multiply:dL,multiplyScalar:tbe,multiplyScalarAndAdd:nbe,normalFromMat4:Y1e,normalFromMat4Legacy:J1e,projection:K1e,rotate:wZ,scale:U1e,scaleByVec2:G1e,set:gZ,str:X1e,sub:abe,subtract:vZ,translate:fA,transpose:F1e},Symbol.toStringTag,{value:"Module"}));function D2(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function lbe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function ube(e,t,n,r,i,s,o,a,h){const f=new Float32Array(9);return f[0]=e,f[1]=t,f[2]=n,f[3]=r,f[4]=i,f[5]=s,f[6]=o,f[7]=a,f[8]=h,f}function cbe(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:lbe,create:D2,createView:cbe,fromValues:ube},Symbol.toStringTag,{value:"Module"}));function bZ(){return new Float32Array(2)}function dbe(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function Ig(e,t){const n=new Float32Array(2);return n[0]=e,n[1]=t,n}function hbe(e,t){return new Float32Array(e,t,2)}function SZ(){return bZ()}function TZ(){return Ig(1,1)}function xZ(){return Ig(1,0)}function EZ(){return Ig(0,1)}const pbe=SZ(),fbe=TZ(),mbe=xZ(),ybe=EZ();Object.freeze(Object.defineProperty({__proto__:null,ONES:fbe,UNIT_X:mbe,UNIT_Y:ybe,ZEROS:pbe,clone:dbe,create:bZ,createView:hbe,fromValues:Ig,ones:TZ,unitX:xZ,unitY:EZ,zeros:SZ},Symbol.toStringTag,{value:"Module"}));function gbe(e){return e instanceof Float32Array&&e.length>=2}function _be(e){return Array.isArray(e)&&e.length>=2}function wI(e){return gbe(e)||_be(e)}var mA;const Hl=[0,0];let yu=mA=class extends ne{constructor(e){super(e),this._viewpoint2D={center:Pn(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Xt,this.id=0,this.inverseTransform=Ru(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Ru(),this.transformNoRotation=Ru(),this.displayMat3=D2(),this.displayViewMat3=D2(),this.viewMat3=D2(),this.viewMat2d=mZ(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,n=e.targetGeometry;t.center[0]=n.x,t.center[1]=n.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=n.spatialReference}this._update()}get visibleArea(){const[e,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],e,t),this.toMap([0,0],e,0)]}copy(e){const t=this.size,n=this.viewpoint;return n&&t?(this.viewpoint=ii(n,e.viewpoint),this._set("size",dg(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new mA({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,n){return wI(t)?il(e,t,this.inverseTransform):(Hl[0]=t,Hl[1]=n,il(e,Hl,this.inverseTransform))}toScreen(e,t,n){return wI(t)?il(e,t,this.transform):(Hl[0]=t,Hl[1]=n,il(e,Hl,this.transform))}toScreenNoRotation(e,t,n){return wI(t)?il(e,t,this.transformNoRotation):(Hl[0]=t,Hl[1]=n,il(e,Hl,this.transformNoRotation))}wrapMapCoordinate(e,t){dg(e,t);const[n]=t,[r]=this.center,{extent:i,spatialReference:s}=this;let{xmin:o,xmax:a}=i;if(s.isWrappable){const h=dZ(s)/2;o=Math.max(o,r-h),a=Math.min(a,r+h)}return(n<o||n>a)&&(e[0]=oL(n,r,s)),e}getScreenTransform(e,t){const{center:n}=this._viewpoint2D,r=this._get("pixelRatio")||1,i=this._get("size");return uL(e,n,i,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:n,rotation:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,s=this._get("size"),o=new $r({targetGeometry:new gt(e[0],e[1],t),scale:n,rotation:r});if(this._set("viewpoint",o),!s||!t||!n)return;this.resolution=Yg(o),this.rotation=r,this.scale=n,this.spatialReference=t,dg(this.center,e);const a=s[0]!==0?2/s[0]:0,h=s[1]!==0?-2/s[1]:0;gZ(this.displayMat3,a,0,0,0,h,0,-1,1,1);const f=_Z(this.viewMat3),_=Ig(s[0]/2,s[1]/2),w=Ig(-s[0]/2,-s[1]/2),b=Mk(r);fA(f,f,_),wZ(f,f,b),fA(f,f,w),dL(this.displayViewMat3,this.displayMat3,f);const T=sL(this.viewMat2d,_);return xE(T,T,b),w0(T,T,w),w1e(this.extent,o,s),cL(this.transform,o,s,i),rL(this.inverseTransform,this.transform),E1e(this.transformNoRotation,o,s,i),this.worldScreenWidth=$1e(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};l([p({readOnly:!0})],yu.prototype,"id",void 0),l([p({value:1,json:{write:!0}})],yu.prototype,"pixelRatio",null),l([p({json:{write:!0}})],yu.prototype,"size",null),l([p()],yu.prototype,"spatialReference",void 0),l([p({type:$r,json:{write:!0}})],yu.prototype,"viewpoint",null),l([p({readOnly:!0})],yu.prototype,"visibleArea",null),yu=mA=l([k("esri.views.2d.ViewState")],yu);const t8=yu;var yA,gA;let Iu=yA=class extends Fe{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new yA({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};l([p()],Iu.prototype,"left",void 0),l([p()],Iu.prototype,"top",void 0),l([p()],Iu.prototype,"right",void 0),l([p()],Iu.prototype,"bottom",void 0),Iu=yA=l([k("esri.views.2d.PaddedViewState.Padding")],Iu);let ky=gA=class extends t8{constructor(...e){super(...e),this.paddedViewState=new t8,this._updateContent=(()=>{const t=Pn();return()=>{const n=this._get("size"),r=this._get("padding");if(!n||!r)return;const i=this.paddedViewState;Tr(t,r.left+r.right,r.top+r.bottom),_0(t,n,t),dg(i.size,t);const s=i.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(ct(()=>[this.size,this.padding],()=>this._updateContent(),pl)),this.padding=new Iu,this.size=[0,0]}set padding(e){this._set("padding",e||new Iu)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=e;const n=this._get("padding");n&&(t=I1e(e.clone(),e,this._get("size"),n));const{targetGeometry:r,rotation:i,scale:s}=t,{x:o,y:a,spatialReference:h}=r,f=this._viewpoint2D;f.center[0]=o,f.center[1]=a,f.rotation=i,f.scale=s,f.spatialReference=h,this._update()}}clone(){return new gA({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};l([p()],ky.prototype,"paddedViewState",void 0),l([p({type:Iu})],ky.prototype,"padding",null),l([p()],ky.prototype,"viewpoint",null),ky=gA=l([k("esri.views.2d.PaddedViewState")],ky);const hL=ky;function Bp(e,t,n,r){const i=3*e,s=3*(n-e)-i,o=1-i-s,a=3*t,h=3*(r-t)-a,f=1-a-h;function _(M){return((o*M+s)*M+i)*M}function w(M){return((f*M+h)*M+a)*M}function b(M){return(3*o*M+2*s)*M+i}function T(M,I){let C,N,j,z,U,K;for(j=M,K=0;K<8;K++){if(z=_(j)-M,Math.abs(z)<I)return j;if(U=b(j),Math.abs(U)<1e-6)break;j-=z/U}if(C=0,N=1,j=M,j<C)return C;if(j>N)return N;for(;C<N;){if(z=_(j),Math.abs(z-M)<I)return j;M>z?C=j:N=j,j=.5*(N-C)+C}return j}return function(M,I=1e-6){return w(T(M,I))}}const wbe=/^cubic-bezier\((.*)\)/,tl={};function vbe(e){let t=tl[e]||null;if(!t){const n=wbe.exec(e);if(n){const r=n[1].split(",").map(i=>parseFloat(i.trim()));r.length!==4||r.some(i=>isNaN(i))||(t=Bp.apply(Bp,r))}}return t}tl.ease=Bp(.25,.1,.25,1),tl.linear=Bp(0,0,1,1),tl.easeIn=tl["ease-in"]=Bp(.42,0,1,1),tl.easeOut=tl["ease-out"]=Bp(0,0,.58,1),tl.easeInOut=tl["ease-in-out"]=Bp(.42,0,.58,1);let n8=class{constructor(t){this._view=t,this.viewpoint=new $r({targetGeometry:new gt,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,n]=this._view.size;return Math.sqrt(t*t+n*n)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return cZ(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,n){n.pan=i9(this.center,t.center);let r=Math.abs(t.rotation-this.rotation);r=r>=180?360-r:r,n.rotate=Rx(r),n.sourceZoom=this.scale,n.targetZoom=t.scale}interpolate(t,n,r){const{pan:i,rotate:s,zoom:o,zoomOffset:a}=r,{center:h}=this;h.spatialReference=t.center.spatialReference,h.x=fw(t.center.x,n.center.x,i),h.y=fw(t.center.y,n.center.y,i),this.viewpoint.scale=fw(t.scale,n.scale+a,o);let f=t.rotation;const _=n.rotation;Math.abs(_-f)>=180&&(f+=360*(f<_?1:-1)),this.viewpoint.rotation=fw(f,_,s)}copyFrom(t){ii(this.viewpoint,t.viewpoint),this._view=t.view}};const $Z=e=>e*e,bbe=e=>1-$Z(1-e),Sbe=e=>2**(10*(e-1)),Tbe=e=>1-Sbe(1-e);function xbe(e){const t=2*(e-Math.sqrt((e-1)*e)),n=t/2/e;return r=>r<n?e*r*r:t*r-t+1}function Ebe(e,t){return(n,r)=>n<t?t*e(n/t,r):1-e((1-n)/(1-t),r)*(1-t)}const r8=Ebe(xbe(1),.5);let $be=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const WT={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},MZ={maxDuration:4e3};let Mbe=class IZ{constructor(t){this._createCamera=t,this.compared=new $be,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:WT.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new IZ(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,n,r){this.source!==t&&this.source.copyFrom(t),this.target!==n&&this.target.copyFrom(n),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??WT.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const n=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/n}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Si()}get hasFov(){return Math.abs(this.compared.fov)>Si()}get hasRotate(){return this.compared.rotate>Si()}},Ibe=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},Pbe=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((t,n)=>t+n.time,0)}interpolateComponentsAt(t,n){t=Math.min(Math.max(t,0),1),t*=this.time;let r=0,i=0;const s=this.definition,o=this.segments.reduce((a,h)=>a||h.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const h=this.segments[a],f=h.definition;if(t<=h.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(h,h.time===0?0:t/h.time,n),s.hasPan&&!isNaN(n.pan)&&isFinite(s.compared.pan)?n.pan=(r+f.compared.pan*n.pan)/s.compared.pan:n.pan=1,s.hasRotate&&!isNaN(n.rotate)&&isFinite(s.compared.rotate)?n.rotate=(i+f.compared.rotate*n.rotate)/s.compared.rotate:n.rotate=1,o&&!isNaN(n.zoom)&&isFinite(f.compared.targetZoom)){const{sourceZoom:_,targetZoom:w}=f.compared,b=n.zoom*(w-_)+_,T=this.segments[0].definition.compared.sourceZoom,M=this.segments[this.segments.length-1].definition.compared.targetZoom,I=Math.abs(w-T)>Math.abs(_-T)?w:_;n.zoomOffset=I-M,n.zoom=(b-T)/(I-T)}else n.zoom=1;return n}t-=h.time,r+=f.compared.pan,i+=f.compared.rotate}}segmentInterpolateComponentsAt(t,n,r){t.interpolateComponentsAt(n,r)}},vI=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,n=t.compared,r=n.sourceZoom,i=n.targetZoom;this._zoomSign=r>i?1:-1,this._panPixelsAtSource=n.pan*t.source.pixelsPerPanAtZoom(r);const s=(t.source.pixelsPerRotate()+t.target.pixelsPerRotate())/2;this._rotatePixels=n.rotate*s}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,n=this.definition.compared.targetZoom,{hasZoom:r,hasPan:i,hasRotate:s}=this.definition;let o=0,a=0;r&&(i&&(o=(n/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(a=this._zoomSign*(Math.log(t/n)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const h=this.definition.desiredPixelFlow;if(r&&i&&s){const f=o+a+o*a;this._zoomPixelFlow=o*a/f*h,this._panPixelFlow=a/f*h,this._rotatePixelFlow=o/f*h}else if(r&&i){const f=1+o;this._zoomPixelFlow=o/f*h,this._panPixelFlow=1/f*h}else if(r&&s){const f=1+a;this._zoomPixelFlow=a/f*h,this._rotatePixelFlow=1/f*h}else if(i&&s){const f=this._panPixelsAtSource/this._rotatePixels,_=1+f;this._panPixelFlow=f/_*h,this._rotatePixelFlow=1/_*h}else i?this._panPixelFlow=h:r?this._zoomPixelFlow=h:s&&(this._rotatePixelFlow=h);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const f=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=f,this._panPixelFlow/=f,this._rotatePixelFlow/=f}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/Cbe:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,n=t*this._panPixelsAtSource;return Math.log(n*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const n=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(n*(n/r)**-t-n)/(r-n)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:n,segmentEnd:r}=this.definition;return n+t*(r-n)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const n=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(n*t*this._time)-1))/(n*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,n){t=Math.min(Math.max(t,0),1),n.zoom=this._interpolateComponentsZoom(t),n.pan=this._interpolateComponentsPan(t),n.rotate=this._interpolateComponentsRotate(t),n.zoomOffset=0,n.fov=this._interpolateComponentsFov(t)}};const Cbe=Rx(45);function Obe(e,t,n){const r=t-e.compared.sourceZoom,i=e.halfWindowPanAtZoom(r);return-e.halfWindowSize*(n.ascensionFactor*Math.LN2*e.compared.pan+i)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*i)}function Abe(e,t,n){const r=1/t,i=Math.log(e.compared.sourceZoom*r),s=1/e.desiredPixelFlow,o=1/Math.LN2,a=t-e.compared.sourceZoom,h=1/a,f=(n.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(a))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*r*s*o*h*f-e.halfWindowSize*i*s*o*h+e.halfWindowSize*i*s*o*f/(a*a)}function kbe(e,t,n){const r=t-e.compared.sourceZoom,i=1/r,s=1/t,o=Math.log(e.compared.sourceZoom*s),a=(n.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(r))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*(-2*i*s*a+2*i*o+2*s-2*o*a/(r*r)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function Rbe(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function Lbe(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function Nbe(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function Dbe(e,t,n){return-e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function Fbe(e,t,n){return e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function jbe(e,t,n){return-2*e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function zbe(e,t,n){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-n.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function Vbe(e,t,n){const r=Math.log(t/e.compared.targetZoom),i=1/e.desiredPixelFlow,s=1/Math.LN2,o=-t+e.compared.targetZoom,a=1/o,h=(-e.halfWindowPanAtZoom(t)-n.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*r*i*s*a+e.halfWindowSize*r*i*s*h/(o*o)+e.halfWindowSize*i*s*a*h/t}function Ube(e,t,n){const r=t-e.compared.targetZoom,i=1/r,s=1/t,o=Math.log(t/e.compared.targetZoom),a=(e.halfWindowPanAtZoom(t)+n.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*(-2*i*s*a-2*i*o+2*s+2*o*a/(r*r)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function Gbe(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function Bbe(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function qbe(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function Hbe(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const n=Math.LN2*e.compared.pan,r=t,i=e.halfWindowPanAtZoom(r),s=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*i);return e.compared.sourceZoom<=e.compared.targetZoom?s*(n-i):s*(n+i)}function Wbe(e,t){let n=Zbe(e,t);const r={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},i=r.ascensionFactor===0,s=r.descensionFactor===0,o=i?Rbe:Obe,a=i?Lbe:Abe,h=i?Nbe:kbe,f=s?Gbe:zbe,_=s?Bbe:Vbe,w=s?qbe:Ube,b=U=>o(e,U,r)+Dbe(e,U,r)+f(e,U,r),T=U=>a(e,U,r)+Fbe(e,U,r)+_(e,U,r),M=U=>h(e,U,r)+jbe(e,U,r)+w(e,U,r);let I=b(n);const C=Hbe(e);let N;const j=t.maximumIterations||20,z=t.maximumDistance!=null?t.maximumDistance:1/0;for(N=0;N<j;N++){const U=t.desiredSlope??1e-6;let K=T(n);Math.abs(K)>U&&(K+=U);const J=K/M(n);if(isNaN(J)||n>=z&&J<0){if(!isFinite(z))return null;n=z,I=b(n);break}if(n-=J,n<e.compared.sourceZoom||n<e.compared.targetZoom)return null;const le=b(n);if(Math.abs(le-I)/I<=.005)break;I=le}return I>C*(1-.3)||n<e.compared.sourceZoom||n<e.compared.targetZoom?null:n}function Zbe(e,t){const n=Math.max(e.compared.sourceZoom,e.compared.targetZoom),r=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return r<n?t.maximumDistance!=null?n+(t.maximumDistance-n)/2:1.5*n:t.maximumDistance?Math.min(t.maximumDistance,r):r}let Jbe=class extends Pbe{constructor(t,n){super(),this._preallocSegments=[new vI,new vI,new vI],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,n)}update(t,n){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const r=n!=null&&n.apex?Wbe(t,n.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,n==null?void 0:n.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,n,r){t.interpolateComponentsAt(n,r),t===this._ascensionSegment?r.zoom=bbe(r.zoom):t===this._descensionSegment&&(r.zoom=$Z(r.zoom))}_updateWithApex(t,n){const[r,i,s]=this._preallocSegments,o=(n==null?void 0:n.ascensionFactor)??.5,a=Math.min(1-o,(n==null?void 0:n.ascensionFactor)!=null&&n.descensionFactor!=null?n.descensionFactor:.5),h=1-o-a;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=t,r.definition.compared.pan=this.definition.compared.pan*o,r.definition.compared.rotate=this.definition.compared.rotate*o,r.definition.segmentEnd=o,r.update(),this._ascensionSegment=r,this.segments.push(r),h>0&&(i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.copyFrom(this.definition),i.definition.compared.sourceZoom=t,i.definition.compared.targetZoom=t,i.definition.compared.pan=this.definition.compared.pan*h,i.definition.compared.rotate=this.definition.compared.rotate*h,i.definition.segmentStart=r.definition.segmentEnd,i.definition.segmentEnd=r.definition.segmentEnd+h,i.update(),this.segments.push(i)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=t,s.definition.compared.pan=this.definition.compared.pan*a,s.definition.compared.rotate=this.definition.compared.rotate*a,s.definition.segmentStart=o+h,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const Ybe=new Ibe;let Kbe=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=r8,this.definition=new Mbe(t),this.path=new Jbe}update(t,n,r){this.definition.update(t,n,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(IX(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?r8:Tbe)}cameraAt(t,n){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const r=this.path.interpolateComponentsAt(t,Ybe);n.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(t){const n=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(t,this._time)-n)/(r-n)}_applyTimeSettings(t,n){const r=n.speedFactor!=null?n.speedFactor:1,i=n.minDuration??WT.minDuration/r,s=n.maxDuration??WT.maxDuration/r;return t=n.duration!=null?n.duration:Math.min(Math.max(t/r,i),s)}};const i8=2e3,Xbe=64;let Qbe=class{constructor(t){this._view=t,this._animation=new Kbe(()=>new n8(this._view)),this._current=new n8(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,n,r={}){ii(this._current.viewpoint,t),ii(this._source.viewpoint,t),ii(this._target.viewpoint,n),this._animation.update(this._source,this._target,r)}applyRatio(t,n){this._animation.cameraAt(n,this._current),ii(t,this._current.viewpoint)}},Ry=class extends Fe{constructor(t){super(t),this._animation=null,this._destinationViewState=new hL,this.updateFunction=null,this.easing=tl.ease,this.viewpoint=new $r({targetGeometry:new gt,scale:0,rotation:0}),this._updateTask=pg({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new Qbe(t.view)}destroy(){this._updateTask=wn(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,n,r){this.stop();const i=this.viewpoint;ii(i,n);const s=(typeof(r==null?void 0:r.easing)=="string"?vbe(r.easing):r==null?void 0:r.easing)||this.easing,o=t.target;this._transition.update(this.viewpoint,o,{apex:{maximumDistance:Math.min(Math.min(n.scale,o.scale)*Xbe,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r==null?void 0:r.duration,maxDuration:(r==null?void 0:r.animationMode)==="auto"?1/0:(r==null?void 0:r.maxDuration)??MZ.maxDuration,speedFactor:r==null?void 0:r.speedFactor,easing:typeof s=="function"?h=>s(h):void 0}),(r==null?void 0:r.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=o,eSe(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,o,{duration:0}));const a=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,n){this.stop(),this.updateFunction=n,this.viewpoint=t;const r=new dA({target:t.clone()}),i=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(i,i),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var r,i;const n=this.animation;if(n&&n.state!==dA.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),(r=this.animation)==null||r.update(this.viewpoint);else{const s=performance.now()-this._startTime,o=this._transition.duration,a=o>0?s/o:1,h=a>=1;this._transition.applyRatio(this.viewpoint,a),h&&((i=this.animation)==null||i.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function eSe(e,t,n,r){if((t==null?void 0:t.duration)!=null)return!0;const{time:i,isLinear:s}=e,o=(t==null?void 0:t.speedFactor)||1,a=(t==null?void 0:t.maxDuration)??MZ.maxDuration/o;if(te("esri-goto-debug")&&(console.log("speed factor:",o),console.log("adjusted duration:		",i),console.log("adjusted max duration:	",a),console.log("is linear:",s)),i>a)return te("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${a/1e3}s`),!1;if(s){const f=Pn(),_=Er(...r.toScreen(f,...n.center)),w=Er(...n.toScreen(f,...r.center)),b=w!=null&&w.x>-1*n.size[0]&&w.x<(1.5+.5)*n.size[0]&&w.y>-1*n.size[1]&&w.y<(1.5+.5)*n.size[1],T=_!=null&&_.x>-1*r.size[0]&&_.x<(1.5+.5)*r.size[0]&&_.y>-1*r.size[1]&&_.y<(1.5+.5)*r.size[1];if(te("esri-goto-debug")&&(console.log(`dest is within ${1.5} screens at start view:`,b),console.log(`start is within ${1.5} screens at dest view:`,T)),i>i8/o&&!b&&!T)return te("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${i8/1e3/o}s, or
  - shorter than ${a/1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${a/1e3}s and the start point is close enough to the destination screen`),!1}return!0}l([p()],Ry.prototype,"easing",void 0),l([p()],Ry.prototype,"view",void 0),l([p()],Ry.prototype,"viewpoint",void 0),Ry=l([k("esri.views.2d.AnimationManager")],Ry);const tSe=Ry;var Qr;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(Qr||(Qr={}));const PZ=Symbol("Yield");let nSe=class{constructor(){this._tasks=new Array,this._runningTasks=y0(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(t){if(this.length===0)return PZ;for(;!t.done&&this._process(t);)t.madeProgress()}push(t,n,r){return++this._runningTasks.value,new Promise((i,s)=>this._tasks.push(new s8(i,s,t,n,r))).finally(()=>--this._runningTasks.value)}unshift(t,n,r){return++this._runningTasks.value,new Promise((i,s)=>this._tasks.unshift(new s8(i,s,t,n,r))).finally(()=>--this._runningTasks.value)}_process(t){var r;if(this._tasks.length===0)return!1;const n=this._tasks.shift();try{const i=la(n.signal);if(i&&!n.abortCallback)n.reject(rn());else{const s=i?(r=n.abortCallback)==null?void 0:r.call(n,rn()):n.callback(t);_l(s)?s.then(n.resolve,n.reject):n.resolve(s)}}catch(i){n.reject(i)}return!0}cancelAll(){const t=rn();for(const n of this._tasks)if(n.abortCallback){const r=n.abortCallback(t);n.resolve(r)}else n.reject(t);this._tasks.length=0}},s8=class{constructor(t,n,r,i=void 0,s=void 0){this.resolve=t,this.reject=n,this.callback=r,this.signal=i,this.abortCallback=s}},pv=class extends Fe{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};l([p()],pv.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),l([p()],pv.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),pv=l([k("esri.views.support.debugFlags")],pv);const rSe=new pv;function iSe(){return new ZT.Scheduler}var _t;(function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"})(_t||(_t={}));const no=0,o8=new Map([[_t.RESOURCE_CONTROLLER_IMMEDIATE,no],[_t.RESOURCE_CONTROLLER,4],[_t.SLIDE,no],[_t.STREAM_DATA_LOADER,no],[_t.ELEVATION_QUERY,no],[_t.TERRAIN_SURFACE,1],[_t.SURFACE_GEOMETRY_UPDATES,1],[_t.LOD_RENDERER,2],[_t.GRAPHICS_CORE,2],[_t.I3S_CONTROLLER,2],[_t.POINT_CLOUD_LAYER,2],[_t.FEATURE_TILE_FETCHER,2],[_t.CLOUDS_GENERATOR,2],[_t.OVERLAY,4],[_t.STAGE,4],[_t.GRAPHICS_DECONFLICTOR,4],[_t.FILTER_VISIBILITY,4],[_t.SCALE_VISIBILITY,4],[_t.FRUSTUM_VISIBILITY,4],[_t.POINT_OF_INTEREST_FREQUENT,6],[_t.POINT_OF_INTEREST_INFREQUENT,30],[_t.LABELER,8],[_t.FEATURE_QUERY_ENGINE,8],[_t.FEATURE_TILE_TREE,16],[_t.FEATURE_TILE_TREE_ACTIVE,no],[_t.ELEVATION_ALIGNMENT,12],[_t.ELEVATION_ALIGNMENT_SCENE,14],[_t.TEXT_TEXTURE_ATLAS,12],[_t.TEXTURE_UNLOAD,12],[_t.LINE_OF_SIGHT_TOOL,16],[_t.LINE_OF_SIGHT_TOOL_INTERACTIVE,no],[_t.SNAPPING,no],[_t.SHADOW_ACCUMULATOR,30],[_t.MAPVIEW_FETCH_QUEUE,no],[_t.MAPVIEW_LAYERVIEW_UPDATE,2],[_t.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,no]]);function a8(e){return o8.has(e)?o8.get(e):typeof e=="number"?e:1}const sSe=6.5,l8=1,oSe=30,aSe=1e3/30,lSe=100,u8=.9;var ZT,qh;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(s=>s.needsUpdate)}constructor(){this._updating=y0(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new bv("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=Qr.INTERACTING,this._tasks=new Kp,this._runQueue=new Kp,this._load=0,this._idleStateCallbacks=new Kp,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=ct(()=>rSe.SCHEDULER_LOG_SLOW_TASKS,s=>this._debug=s,si);for(const s of Object.keys(_t))this.performanceInfo.tasks.set(_t[s],new bv(_t[s]))}destroy(){this._tasks.toArray().forEach(s=>s.remove()),this._tasks.clear(),wn(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(s){this._updatingChanged(),s&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(s,o){const a=new n(this,s,o);return this._tasks.push(a),this._updatingChanged(),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new bv(s)),a}registerIdleStateCallbacks(s,o){const a={idleBegin:s,idleEnd:o};this._idleStateCallbacks.push(a),this.state===Qr.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const h=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(f){h._idleUpdatesStartFired&&(a.idleEnd(),h._state===Qr.IDLE&&f()),a.idleBegin=f},set idleEnd(f){a.idleEnd=f}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==Qr.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}updateBudget(s){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=sSe,a=s.frameDuration,h=l8;switch(this.state){case Qr.IDLE:o=0,a=Math.max(lSe,s.frameDuration),h=oSe;break;case Qr.INTERACTING:a=Math.max(aSe,s.frameDuration);case Qr.ANIMATING:}return a=a-s.elapsedFrameTime-o,this.state!==Qr.IDLE&&a<l8&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,h),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Qr.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(s=>s.idleBegin())),this._runIdle();break;case Qr.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s),this._updatingChanged()}_updateTask(s){this._tasks.forAll(o=>{o.name===s&&o.setPriority(s)})}_getState(s){if(this._runQueue.some(a=>a.name===s))return qh.SCHEDULED;let o=qh.IDLE;return this._tasks.forAll(a=>{a.name===s&&a.needsUpdate&&(a.schedulePriority<=1?o=qh.READY:o!==qh.READY&&(o=qh.WAITING))}),o}_getRuntime(s){let o=0;return this._tasks.forAll(a=>{a.name===s&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(s=>s.runtime=0)}_getRunning(){const s=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&s.set(a.name,(s.get(a.name)||0)+1)}),s.size===0)return null;let o="";return s.forEach((a,h)=>{o+=a>1?` ${a}x ${h}`:` ${h}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*u8+s*(1-u8)}_schedule(){for(this._runQueue.filterInPlace(s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1)),this._tasks.forAll(s=>{s.basePriority===no&&s.needsUpdate&&!this._runQueue.includes(s)&&s.blockFrame!==this._frameNumber&&this._runQueue.unshift(s)});this._runQueue.length===0;){let s=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==no&&a.blockFrame!==this._frameNumber&&(s=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!s)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const s=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),a=this._runQueue.pop();this._budget.resetProgress();try{a.task.runTask(this._budget)===PZ&&(a.blockFrame=this._frameNumber)}catch(f){fe.getLogger("esri.views.support.Scheduler").error(`Exception in task "${a.name}"`,f),a.blockFrame=this._frameNumber}!this._budget.hasProgressed&&a.blockFrame!==this._frameNumber&&a.needsUpdate&&(a.name,_t.I3S_CONTROLLER,a.blockFrame=this._frameNumber),a.schedulePriority=a.basePriority;const h=this._budget.now()-o;if(a.runtime+=h,this._frameTaskTimes.set(a.priority,this._frameTaskTimes.get(a.priority)+h),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-s)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-s)}_startFrameTaskTimes(){for(const s of Object.keys(_t))this._frameTaskTimes.set(_t[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).push(o)),this.performanceInfo.total.push(s)}get test(){return this._test}}e.Scheduler=t;class n{get task(){return this._task.value}get updating(){return this._queue.running}constructor(s,o,a){this._scheduler=s,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new nSe,this._handles=new Pg,this._basePriority=a8(o),this.schedulePriority=this._basePriority,this._task=y0(a??this._queue),this._handles.add(hl(()=>this.task.running,h=>s.taskRunningChanged(h)))}remove(){this.processQueue(CZ),this._scheduler.removeTask(this),this.schedule=c8.schedule,this.reschedule=c8.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){if(this.name===s)return;this.name=s;const o=a8(s);this._basePriority!==no&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,o,a){return this._queue.push(s,o,a)}reschedule(s,o,a){return this._queue.unshift(s,o,a)}processQueue(s){return this._queue.runTask(s)}}class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=Qr.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s,o){this._begin=this.now(),this._budget=s,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=r})(ZT||(ZT={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(qh||(qh={}));const CZ=(()=>{const e=new ZT.Budget;return e.enabled=!1,e})();let uSe=class{remove(){}processQueue(){}schedule(t,n,r){try{if(la(n)){const i=rn();return r?Promise.resolve(r(i)):Promise.reject(i)}return GI(t(CZ))}catch(i){return Promise.reject(i)}}reschedule(t,n,r){return this.schedule(t,n,r)}};const c8=new uSe;let cSe=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=iSe(),this.stationary=!0,this.prepare=()=>{var n;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((n=this.view.animation)==null?void 0:n.target)==null||_l(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=n=>{var a;if(this._updateRequested=!1,(a=this.view)==null?void 0:a.destroyed)return;const{allLayerViews:r,graphicsView:i,labelManager:s,state:{id:o}}=this.view;r.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),i!=null&&(i.lastUpdateId!==o&&(i.viewChange(),i.lastUpdateId=o),i.updateRequested&&i.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=Qr.ANIMATING:this.view.interacting?this._scheduler.state=Qr.INTERACTING:this._scheduler.state=Qr.IDLE,this._scheduler.updateBudget(n)&&this._scheduler.frame()}}destroy(){this.stop(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new hL,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=ct(()=>t.stationary,n=>{this.stationary=n,this.requestFrame()}),this._frameTaskHandle=pg(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var i;if(!t.attached)return void this.requestUpdate();const n=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0),r!==n.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=n.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((i=t.layerViews)==null||i.forEach(this._updateLayerView,this))}},F2=class extends Fe{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,n){if(!t)return void fe.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new dA;this.view.animation=r,await Nx(()=>this.view.ready,n);const i={...n,animate:(n==null?void 0:n.animate)??!LW(),animationMode:(n==null?void 0:n.animationMode)??"auto"},{extent:s,spatialReference:o,size:a,viewpoint:h,constraints:f,padding:_,allLayerViews:w}=this.view,b=g1e(t,{extent:s,spatialReference:o,size:a,viewpoint:h,constraints:f,padding:_,allLayerViews:w,pickClosestTarget:(n==null?void 0:n.pickClosestTarget)??!0});return r==null||r.update(b),this._gotoTask={},i.animate?this._gotoAnimated(b,i):this._gotoImmediate(b,i)}_gotoImmediate(t,n){const r=this._gotoTask,i=this.view.animation,s=t.then(o=>{if(xn(n),r!==this._gotoTask)throw new Y("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=i.target=o,i.finish()});return this._cancellableGoTo(r,i,s,n)}_gotoAnimated(t,n){const r=this._gotoTask,i=this.view.animation;if(!i)return Promise.resolve();const s=t.then(o=>{if(xn(n),r!==this._gotoTask)throw new Y("view:goto-interrupted","Goto was interrupted");return i.update(o),this.view.animationManager.animate(i,this.view.viewpoint,n),i.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,i,s,n)}_cancellableGoTo(t,n,r,i){const s=()=>t===this._gotoTask;return NV(r,i).finally(()=>{s()&&(n.done||n.stop())})}};l([p({constructOnly:!0})],F2.prototype,"view",void 0),F2=l([k("esri.views.2d.GoToManager")],F2);function ln(){return Promise.all([pe(()=>import("./webglDeps-DMj04D61.js"),__vite__mapDeps([168,89,88,143,169,145])),pe(()=>import("./mapViewDeps-CJhIge4Y.js"),__vite__mapDeps([170,90,91,29,92,93,87,88,89,63,94,57,171,145,99,172,169,107,173,133,132,98,28,30,174,124,96,97,131,168,143,175,102,176,86,22,46,47,34,177,141,139,126,142,178,77,179,100,95,180,181,182,183,184,185,138,186,187]))])}const ew=()=>ln().then(()=>pe(()=>import("./TileLayerView2D-CWroaeZq.js"),__vite__mapDeps([188,124,90,91,29,92,93,87,88,89,63,94,57,173,172,145,169,107,133,132,98,28,30,131,175,102,176,86,22,46,47,34,77,171,99,96,97,141,139,126,180,181,189,190,185,191,167,192,183,184,193,194,24,25,26,27,186,195,196,197,198]))),Hh=()=>ln().then(()=>pe(()=>import("./FeatureLayerView2D-JRnJ02Tg.js").then(e=>e.F),__vite__mapDeps([199,173,28,29,30,200,191,167,184,90,91,92,93,87,88,89,63,94,57,185,172,145,169,107,133,132,98,171,99,102,174,124,201,195,198,193]))),d8={"base-dynamic":()=>ln().then(()=>pe(()=>import("./BaseDynamicLayerView2D-DBNz-Z7N.js"),__vite__mapDeps([202,203,172,87,88,89,63,145,169,107,173,133,132,98,28,29,30,191,167,204,190,193]))),"base-tile":ew,"bing-maps":ew,catalog:()=>ln().then(()=>pe(()=>import("./CatalogLayerView2D-C_-fvgCl.js"),__vite__mapDeps([205,191,173,167]))),"catalog-dynamic-group":()=>ln().then(()=>pe(()=>import("./CatalogDynamicGroupLayerView2D-Dw2P64OU.js"),__vite__mapDeps([206,191,173,167]))),"catalog-footprint":()=>ln().then(()=>pe(()=>import("./CatalogFootprintLayerView2D-o5mUFmdG.js"),__vite__mapDeps([207,199,173,28,29,30,200,191,167,184,90,91,92,93,87,88,89,63,94,57,185,172,145,169,107,133,132,98,171,99,102,174,124,201,195,198,193]))),csv:Hh,"geo-rss":()=>ln().then(()=>pe(()=>import("./GeoRSSLayerView2D-BlGOIoDf.js"),__vite__mapDeps([208,191,173,167,182,183,184,90,91,29,92,93,87,88,89,63,94,57,185,172,145,169,107,133,132,98,28,30,171,99,180,86,22,46,47,34,181]))),feature:Hh,geojson:Hh,parquet:Hh,graphics:()=>ln().then(()=>pe(()=>import("./GraphicsLayerView2D-COkMVM1o.js"),__vite__mapDeps([209,191,173,167,182,183,184,90,91,29,92,93,87,88,89,63,94,57,185,172,145,169,107,133,132,98,28,30,171,99,180,86,22,46,47,34,181,201]))),group:()=>ln().then(()=>pe(()=>import("./GroupLayerView2D-DgI_-j29.js"),__vite__mapDeps([210,191,173,167]))),imagery:()=>ln().then(()=>pe(()=>import("./ImageryLayerView2D-DN9vFYx_.js"),__vite__mapDeps([211,212,89,145,63,113,172,87,88,169,107,173,133,132,98,28,29,30,191,167,180,90,91,92,93,94,57,86,22,46,47,34,171,99,181,192,183,184,185,203,190,204,116,200,198,193]))),"imagery-tile":()=>ln().then(()=>pe(()=>import("./ImageryTileLayerView2D-Br5p7yTr.js"),__vite__mapDeps([213,214,212,89,145,63,113,172,87,88,169,107,173,133,132,98,28,29,30,191,167,215,185,216,116,200,198,193]))),kml:()=>ln().then(()=>pe(()=>import("./KMLLayerView2D-D9Y4qSLD.js"),__vite__mapDeps([217,218,190,173,203,172,87,88,89,63,145,169,107,133,132,98,28,29,30,191,167,182,183,184,90,91,92,93,94,57,185,171,99,180,86,22,46,47,34,181,116,177,168,143,141,139,126,176,124,142,215]))),"knowledge-graph":()=>ln().then(()=>pe(()=>import("./KnowledgeGraphLayerView2D-58ECuTFd.js"),__vite__mapDeps([219,191,173,167]))),"link-chart":()=>ln().then(()=>pe(()=>import("./KnowledgeGraphLayerView2D-58ECuTFd.js"),__vite__mapDeps([219,191,173,167]))),"knowledge-graph-sublayer":Hh,"map-image":()=>ln().then(()=>pe(()=>import("./MapImageLayerView2D-sbHaz4G5.js"),__vite__mapDeps([220,203,172,87,88,89,63,145,169,107,173,133,132,98,28,29,30,191,167,180,90,91,92,93,94,57,86,22,46,47,34,171,99,181,192,183,184,185,204,190,221,186,195,197,200,193,194,24,25,26,27,196,198]))),"map-notes":()=>ln().then(()=>pe(()=>import("./MapNotesLayerView2D-CDjdipt3.js"),__vite__mapDeps([222,191,173,167,182,183,184,90,91,29,92,93,87,88,89,63,94,57,185,172,145,169,107,133,132,98,28,30,171,99,180,86,22,46,47,34,181]))),media:()=>ln().then(()=>pe(()=>import("./MediaLayerView2D-BhkSW6yA.js"),__vite__mapDeps([223,224,181,67,124,90,91,29,92,93,87,88,89,63,94,57,173,172,145,169,107,133,132,98,28,30,131,175,102,176,86,22,46,47,34,77,171,99,96,97,141,139,126,180,179,100,225,191,167]))),"ogc-feature":()=>ln().then(()=>pe(()=>import("./OGCFeatureLayerView2D-Bm-bXpnC.js"),__vite__mapDeps([226,199,173,28,29,30,200,191,167,184,90,91,92,93,87,88,89,63,94,57,185,172,145,169,107,133,132,98,171,99,102,174,124,201,195,198,193]))),"open-street-map":ew,"oriented-imagery":Hh,route:()=>ln().then(()=>pe(()=>import("./RouteLayerView2D-Cy9hVeKA.js"),__vite__mapDeps([227,228,191,173,167,182,183,184,90,91,29,92,93,87,88,89,63,94,57,185,172,145,169,107,133,132,98,28,30,171,99,180,86,22,46,47,34,181]))),stream:()=>ln().then(()=>pe(()=>import("./StreamLayerView2D-CiFsy-nA.js"),__vite__mapDeps([229,199,173,28,29,30,200,191,167,184,90,91,92,93,87,88,89,63,94,57,185,172,145,169,107,133,132,98,171,99,102,174,124,201,195,198,193]))),"subtype-group":()=>ln().then(()=>pe(()=>import("./SubtypeGroupLayerView2D-CrfDmDKr.js"),__vite__mapDeps([230,199,173,28,29,30,200,191,167,184,90,91,92,93,87,88,89,63,94,57,185,172,145,169,107,133,132,98,171,99,102,174,124,201,195,198,193]))),tile:ew,"vector-tile":()=>ln().then(()=>pe(()=>import("./VectorTileLayerView2D-CYjwJTqu.js"),__vite__mapDeps([231,131,93,77,178,124,99,92,89,145,132,172,87,88,63,169,107,173,133,98,28,29,30,185,45,134,135,191,167,193]))),video:()=>ln().then(()=>pe(()=>import("./VideoLayerView2D-mcxIoioO.js"),__vite__mapDeps([232,233,234,225,107,172,87,88,89,63,145,169,173,133,132,98,28,29,30,171,90,91,92,93,94,57,99,191,167,182,183,184,185,180,86,22,46,47,34,181]))),wcs:()=>ln().then(()=>pe(()=>import("./ImageryTileLayerView2D-Br5p7yTr.js"),__vite__mapDeps([213,214,212,89,145,63,113,172,87,88,169,107,173,133,132,98,28,29,30,191,167,215,185,216,116,200,198,193]))),"web-tile":ew,wfs:Hh,wms:()=>ln().then(()=>pe(()=>import("./WMSLayerView2D-s63Opylc.js"),__vite__mapDeps([235,203,172,87,88,89,63,145,169,107,173,133,132,98,28,29,30,191,167,204,190,193,236,200]))),wmts:()=>ln().then(()=>pe(()=>import("./WMTSLayerView2D-Ds6Vxumw.js"),__vite__mapDeps([237,189,190,173,172,87,88,89,63,145,169,107,133,132,98,28,29,30,185,191,167,193]))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,focusArea:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function dSe(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",n=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new Y(`${n}:view-not-supported`,`${t} is not supported in 2D`)}const h8={hasLayerViewModule:e=>d8[e.type]!=null,importLayerView:e=>{const t=d8[e.type];if(t==null)throw dSe(e);return t(e)}};function hSe(e,t){const{spatialReference:n}=t,r=[t.x,t.y];let i=Number.POSITIVE_INFINITY,s=0,o=0;const a=[0,0],h=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const f of h)for(let _=0;_<f.length-1;_++){gie(a,r,f,_);const w=TE(r,a);w<i&&(i=w,s=a[0],o=a[1])}return{coordinate:new gt({x:s,y:o,spatialReference:n}),distance:i}}var _A;let qp=_A=class extends kk(Fe){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Qd(this.geometry,this.spatialReference)}catch(e){return fe.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const n=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?R0(this.normalizedGeometry,n):gk(this.normalizedGeometry,n))return e;const{coordinate:r}=hSe(this.normalizedGeometry,n);return r&&(e.targetGeometry=r),e}clone(){var e,t;return new _A({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};l([p({constructOnly:!0})],qp.prototype,"geometry",void 0),l([p({readOnly:!0})],qp.prototype,"normalizedGeometry",null),l([p({constructOnly:!0})],qp.prototype,"spatialReference",void 0),qp=_A=l([k("esri.views.2d.constraints.GeometryConstraint")],qp);var wA;let fv=wA=class extends kk(Fe){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new wA({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};l([p()],fv.prototype,"enabled",void 0),l([p()],fv.prototype,"rotationEnabled",void 0),fv=wA=l([k("esri.views.2d.constraints.RotationConstraint")],fv);const OZ=fv;var vA;let Ui=vA=class extends kk(Fe){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:n,maxScale:r,minZoom:i,maxZoom:s}=this,o=-1,a=-1,h=!1,f=!1;if(n!==0&&r!==0&&n<r&&([n,r]=[r,n]),!(t!=null&&t.length))return this._set("effectiveMinScale",n),void this._set("effectiveMaxScale",r);t=t.map(_=>_.clone()),t.sort((_,w)=>w.scale-_.scale),t.forEach((_,w)=>_.level=w);for(const _ of t)!h&&n>0&&n>=_.scale&&(o=_.level,h=!0),!f&&r>0&&r>=_.scale&&(a=e?e.level:-1,f=!0),e=_;i===-1&&(i=n===0?0:o),s===-1&&(s=r===0?t.length-1:a),i=Math.max(i,0),i=Math.min(i,t.length-1),s=Math.max(s,0),s=Math.min(s,t.length-1),i>s&&([i,s]=[s,i]),n=t[i].scale,r=t[s].scale,t.splice(0,i),t.splice(s-i+1,t.length),t.forEach((_,w)=>{this._lodByScale[_.scale]=_,this._scales[w]=_.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",i),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",n),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const n=this.effectiveMinScale,r=this.effectiveMaxScale,i=e.targetGeometry,s=t&&t.targetGeometry,o=r!==0&&e.scale<r,a=n!==0&&e.scale>n;if(o||a){const h=a?n:r;if(t&&s){const f=(h-t.scale)/(e.scale-t.scale);i.x=s.x+(i.x-s.x)*f,i.y=s.y+(i.y-s.y)*f}e.scale=h}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),n=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(n>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const n=Math.floor(e),r=Math.ceil(e);return t[n]+(e-n)*(t[r]-t[n])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let n,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let i=0;i<t.length-1;i++){if(n=t[i],r=t[i+1],r===e)return i+this.effectiveMinZoom+1;if(n>e&&r<e)return i+this.effectiveMinZoom+1-(e-r)/(n-r)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const n=Math.round(this.scaleToZoom(e));return this.zoomToScale(n+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const n=Math.round(this.scaleToZoom(e));return this.zoomToScale(n-1)}clone(){return new vA({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,n)=>Math.abs(n-e)<=Math.abs(t-e)?n:t,this._scales[0])),this._lodByScale[e].scale}};l([p({readOnly:!0})],Ui.prototype,"effectiveLODs",void 0),l([p({readOnly:!0})],Ui.prototype,"effectiveMinZoom",void 0),l([p({readOnly:!0})],Ui.prototype,"effectiveMaxZoom",void 0),l([p({readOnly:!0})],Ui.prototype,"effectiveMinScale",void 0),l([p({readOnly:!0})],Ui.prototype,"effectiveMaxScale",void 0),l([p()],Ui.prototype,"lods",void 0),l([p()],Ui.prototype,"minZoom",void 0),l([p()],Ui.prototype,"maxZoom",void 0),l([p()],Ui.prototype,"minScale",void 0),l([p()],Ui.prototype,"maxScale",void 0),l([p()],Ui.prototype,"snapToZoom",void 0),Ui=vA=l([k("esri.views.2d.constraints.ZoomConstraint")],Ui);const AZ=Ui,pSe={base:null,key:"type",typeMap:{extent:Xt,polygon:mo}};let Nn=class extends Fe{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Ae}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,n,r;return`${(t=this._zoom)==null?void 0:t.uid}/${(n=this._rotation)==null?void 0:n.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var n,r;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((n=this.view)==null?void 0:n.constraintsInfo.spatialReference)===t.spatialReference?t:new qp({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new OZ({rotationEnabled:this.rotationEnabled})}get _zoom(){var h;const t=this._get("_zoom"),n=this.lods||((h=this.view)==null?void 0:h.constraintsInfo.lods),r=this.minZoom,i=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return t&&t.lods===n&&t.minZoom===r&&t.maxZoom===i&&t.minScale===s&&t.maxScale===o&&t.snapToZoom===a?t:new AZ({lods:n,minZoom:r,maxZoom:i,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(t){const n=this.effectiveMaxScale;return n===0||t>=n}canZoomOutTo(t){const n=this.effectiveMinScale;return n===0||t<=n}constrain(t,n){return this._zoom.constrain(t,n),this._rotation.constrain(t,n),this._geometry.constrain(t,n),this.customConstraints.forEach(r=>r.constrain(t,n)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(n=>{var r;return(r=n.applyPanConstraint)==null?void 0:r.call(n,t)}),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};l([p({readOnly:!0})],Nn.prototype,"effectiveLODs",null),l([p({readOnly:!0})],Nn.prototype,"effectiveMinScale",null),l([p({readOnly:!0})],Nn.prototype,"effectiveMaxScale",null),l([p({readOnly:!0})],Nn.prototype,"effectiveMinZoom",null),l([p({readOnly:!0})],Nn.prototype,"effectiveMaxZoom",null),l([p({types:pSe,value:null})],Nn.prototype,"geometry",null),l([p({type:[gd]})],Nn.prototype,"lods",void 0),l([p()],Nn.prototype,"minScale",void 0),l([p()],Nn.prototype,"maxScale",void 0),l([p()],Nn.prototype,"minZoom",void 0),l([p()],Nn.prototype,"maxZoom",void 0),l([p()],Nn.prototype,"rotationEnabled",void 0),l([p()],Nn.prototype,"snapToZoom",void 0),l([p({type:Ae})],Nn.prototype,"customConstraints",void 0),l([p()],Nn.prototype,"view",void 0),l([p({readOnly:!0})],Nn.prototype,"version",null),l([p({type:qp,readOnly:!0})],Nn.prototype,"_geometry",null),l([p({type:OZ})],Nn.prototype,"_rotation",null),l([p({readOnly:!0,type:AZ})],Nn.prototype,"_zoom",null),Nn=l([k("esri.views.2d.MapViewConstraints")],Nn);const kZ=Nn;let Wd=class Rp{static getId(t,n,r,i){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${n}/${r}/${i}`}constructor(t,n,r,i){this.set(t,n,r,i)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,n=4095&this.col,r=63&this.level;return(3&this.world)<<30|n<<22|t<<8|r}acquire(t,n,r,i){this.set(t,n,r,i)}contains(t){const n=t.level-this.level;return n>=0&&this.row===t.row>>n&&this.col===t.col>>n&&this.world===t.world}containsChild(t){const n=t.level-this.level;return n>0&&this.row===t.row>>n&&this.col===t.col>>n&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Rp(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,n,r,i){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[s,o,a,h]=t.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(h)}else this.level=+t,this.row=+n,this.col=+r,this.world=+i||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Rp(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(t,n,r){const i=this.clone();return i.col+=t,i.row+=n,r.normalizeKey(i),i}getChildKeys(){const t=this.level+1,n=this.row<<1,r=this.col<<1,i=this.world;return[new Rp(t,n,r,i),new Rp(t,n,r+1,i),new Rp(t,n+1,r,i),new Rp(t,n+1,r+1,i)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};Wd.pool=new Sf(Wd,null,null,25,50);function Dm(e,t){return[e,t]}function Wh(e,t,n){return e[0]=t,e[1]=n,e}function fSe(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}const ko=new Wd("0/0/0/0");let mSe=class RZ{static create(t,n,r=null){const i=bi(t.spatialReference),s=n.origin||Dm(t.origin.x,t.origin.y),o=Dm(t.size[0]*n.resolution,t.size[1]*n.resolution),a=Dm(-1/0,-1/0),h=Dm(1/0,1/0),f=Dm(1/0,1/0);r!=null&&(Wh(a,Math.max(0,Math.floor((r.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymax)/o[1]))),Wh(h,Math.max(0,Math.floor((r.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymin)/o[1]))),Wh(f,h[0]-a[0]+1,h[1]-a[1]+1));const{cols:_,rows:w}=n;let b,T,M,I;return!r&&_&&w&&(Wh(a,_[0],w[0]),Wh(h,_[1],w[1]),Wh(f,_[1]-_[0]+1,w[1]-w[0]+1)),t.isWrappable?(b=Dm(Math.ceil(Math.round((i.valid[1]-i.valid[0])/n.resolution)/t.size[0]),f[1]),T=!0,M=i.origin,I=i.valid):(b=f,T=!1),new RZ(n.level,n.resolution,n.scale,s,a,h,f,o,b,T,M,I)}constructor(t,n,r,i,s,o,a,h,f,_,w,b){this.level=t,this.resolution=n,this.scale=r,this.origin=i,this.first=s,this.last=o,this.size=a,this.norm=h,this.worldSize=f,this.wrap=_,this._spatialReferenceOrigin=w,this._spatialReferenceValid=b}normalizeCol(t){if(!this.wrap)return t;const n=this.worldSize[0];return t<0?n-1-Math.abs((t+1)%n):t%n}normalizeKey(t){if(!this.wrap)return;const n=this.worldSize[0],r=t.col;r<0?(t.col=r+n,t.world-=1):r>=n&&(t.col=r-n,t.world+=1)}denormalizeCol(t,n){return this.wrap?this.worldSize[0]*n+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){const n=this.origin[0]+t*this.norm[0],r=this._spatialReferenceOrigin,i=this._spatialReferenceValid;return this.wrap&&r&&i?n===r[0]?i[0]:this.origin[0]===r[0]&&t===this.worldSize[0]?i[1]:n:n}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,n,r=!1){ko.set(n);const i=r?ko.col:this.denormalizeCol(ko.col,ko.world),s=ko.row;return fSe(t,this.getXForColumn(i),this.getYForRow(s+1),this.getXForColumn(i+1),this.getYForRow(s)),t}getTileCoords(t,n,r=!1){ko.set(n);const i=r?ko.col:this.denormalizeCol(ko.col,ko.world);return Array.isArray(t)?Wh(t,this.getXForColumn(i),this.getYForRow(ko.row)):(t.x=this.getXForColumn(i),t.y=this.getYForRow(ko.row)),t}},v0=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:n,colFrom:r,colTo:i}of this.spans)for(let s=r;s<=i;s++){const o=t.getWorldForColumn(s);yield new Wd(t.level,n,t.normalizeCol(s),o)}}forEach(t,n){const{spans:r,lodInfo:i}=this,{level:s}=i;if(r.length!==0)for(const{row:o,colFrom:a,colTo:h}of r)for(let f=a;f<=h;f++)t.call(n,s,o,i.normalizeCol(f),i.getWorldForColumn(f))}};v0.pool=new Sf(v0);let bI=class{constructor(t,n,r){this.row=t,this.colFrom=n,this.colTo=r}};const fn=new Wd("0/0/0/0");let ySe=class LZ{static create(t,n){t[1]>n[1]&&([t,n]=[n,t]);const[r,i]=t,[s,o]=n,a=s-r,h=o-i,f=h!==0?a/h:0,_=(Math.ceil(i)-i)*f,w=(Math.floor(i)-i)*f;return new LZ(r,Math.floor(i),Math.ceil(o),f,a<0?_:w,a<0?w:_,a<0?s:r,a<0?r:s)}constructor(t,n,r,i,s,o,a,h){this.x=t,this.ymin=n,this.ymax=r,this.invM=i,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=h}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const us=[[0,0],[0,0],[0,0],[0,0]],gSe=1e-6;let _Se=class{constructor(t,n=null,r=t.lods[0].level,i=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=n,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=t.lods.filter(a=>a.level>=r&&a.level<=i);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(a=>mSe.create(t,a,n));s.forEach((a,h)=>{this._infoByLevel[a.level]=o[h],this._infoByScale[a.scale]=o[h],this.scales[h]=a.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,n,r=!1){fn.set(n);const i=this._infoByLevel[fn.level];return i?i.getTileBounds(t,fn,r):t}getTileCoords(t,n,r=!1){fn.set(n);const i=this._infoByLevel[fn.level];return i?i.getTileCoords(t,fn,r):t}getTileCoverage(t,n=192,r=!0,i="closest"){if(!r&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const s=i==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=v0.pool.acquire(s),a=this._wrap;let h,f,_,w=1/0,b=-1/0;const T=o.spans;us[0][0]=us[0][1]=us[1][1]=us[3][0]=-n,us[1][0]=us[2][0]=t.size[0]+n,us[2][1]=us[3][1]=t.size[1]+n;for(const N of us)t.toMap(N,N),N[0]=s.getColumnForX(N[0]),N[1]=s.getRowForY(N[1]);const M=[];let I=3;for(let N=0;N<4;N++){if(us[N][1]===us[I][1]){I=N;continue}const j=ySe.create(us[N],us[I]);w=Math.min(j.ymin,w),b=Math.max(j.ymax,b),M[j.ymin]===void 0&&(M[j.ymin]=[]),M[j.ymin].push(j),I=N}if(w==null||b==null||b-w>100)return null;let C=[];for(h=w;h<b;){M[h]!=null&&(C=C.concat(M[h])),f=1/0,_=-1/0;for(let N=C.length-1;N>=0;N--){const j=C[N];f=Math.min(f,j.getLeftCol()),_=Math.max(_,j.getRightCol())}if(f=Math.floor(f),_=Math.floor(_),h>=s.first[1]&&h<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const N=Math.floor(_/s.worldSize[0]);for(let j=Math.floor(f/s.worldSize[0]);j<=N;j++)T.push(new bI(h,Math.max(s.getFirstColumnForWorld(j),f),Math.min(s.getLastColumnForWorld(j),_)))}else T.push(new bI(h,f,_));else f>s.last[0]||_<s.first[0]||(f=Math.max(f,s.first[0]),_=Math.min(_,s.last[0]),T.push(new bI(h,f,_)));h+=1;for(let N=C.length-1;N>=0;N--){const j=C[N];j.ymax>=h?j.incrRow():C.splice(N,1)}}return o}getTileParentId(t){fn.set(t);const n=this._infoByLevel[fn.level],r=this._lodInfos.indexOf(n)-1;return r<0?null:(this._getTileIdAtLOD(fn,this._lodInfos[r],fn),fn.id)}getTileResolution(t){const n=this._infoByLevel[typeof t=="object"?t.level:t];return n?n.resolution:-1}getTileScale(t){const n=this._infoByLevel[t.level];return n?n.scale:-1}intersects(t,n){fn.set(n);const r=this._infoByLevel[fn.level],i=t.lodInfo;if(i.resolution>r.resolution){this._getTileIdAtLOD(fn,i,fn);const o=i.denormalizeCol(fn.col,fn.world);for(const a of t.spans)if(a.row===fn.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(i.resolution<r.resolution){const[o,a,h,f]=t.spans.reduce((I,C)=>(I[0]=Math.min(I[0],C.row),I[1]=Math.max(I[1],C.row),I[2]=Math.min(I[2],C.colFrom),I[3]=Math.max(I[3],C.colTo),I),[1/0,-1/0,1/0,-1/0]),_=r.denormalizeCol(fn.col,fn.world),w=i.getColumnForX(r.getXForColumn(_)),b=i.getRowForY(r.getYForRow(fn.row)),T=i.getColumnForX(r.getXForColumn(_+1))-1,M=i.getRowForY(r.getYForRow(fn.row+1))-1;return!(w>f||T<h||b>a||M<o)}const s=i.denormalizeCol(fn.col,fn.world);return t.spans.some(o=>o.row===fn.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(t,n,r){if(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],this._wrap){const i=bi(this.tileInfo.spatialReference),s=-r*(i.valid[1]-i.valid[0]);t[0]+=s,t[2]+=s}return t}getSmallestInfoForScale(t){const n=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>n[0])return this._infoByScale[n[0]];for(let r=1;r<n.length-1;r++)if(t>n[r]+gSe)return this._infoByScale[n[r-1]];return this._infoByScale[n[n.length-1]]}getClosestInfoForScale(t){const n=this.scales;return this._infoByScale[t]||(t=n.reduce((r,i)=>Math.abs(i-t)<Math.abs(r-t)?i:r,n[0])),this._infoByScale[t]}scaleToLevel(t){const n=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=n.length-1;r>=0;r--)if(t<n[r])return r===n.length-1?this._infoByScale[n[n.length-1]].level:this._infoByScale[n[r]].level+(n[r]-t)/(n[r]-n[r+1]);return this._infoByScale[n[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,n,r){const i=this._infoByLevel[r.level];return t.set(r),n.resolution<i.resolution?null:(n.resolution===i.resolution||(t.level=n.level,t.col=Math.floor(r.col*i.resolution/n.resolution+.01),t.row=Math.floor(r.row*i.resolution/n.resolution+.01)),t)}},wSe=class{constructor(t,n){this.item=t,this.controller=n,this.promise=null}},vSe=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new L2,this._controllers=new L2,this._processingItems=new L2,this._pausedSignal=y0(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new DT(t.peeker),this.process=t.process;const n=t.scheduler;t.priority&&n&&(this._task=n.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=wn(this._schedule),this._task=wn(this._task)}get updating(){var t;return!!((t=this._task)!=null&&t.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const n=this._controllers.get(t);n&&n.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(n=>t.push(n)),this._controllers.clear(),t.forEach(n=>n.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((n,r)=>t(r))}get(t){const n=this._deferreds.get(t);return n?n.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,n){const r=this.get(t);if(r)return r;const i=new AbortController;let s=null;n&&(s=lo(n,()=>i.abort()));const o=()=>{const _=this._processingItems.get(t);_&&_.controller.abort(),a(),f.reject(rn())},a=()=>{h.remove(),s!=null&&s.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},h=HA(i.signal,o),f=xs();return this._deferreds.set(t,f),this._controllers.set(t,i),f.promise.then(a,a),this._queue.push(t),this._scheduleNext(),f.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){var n;const t=this._queue.popLast();return t&&((n=this._deferreds.get(t))==null||n.reject(rn()),this._removeItem(t)),t}reset(){const t=Array.from(this._processingItems.values());this._processingItems.clear();for(const n of t)this._queue.push(n.item),n.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=P0(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,n){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(n))}_processError(t,n){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(n))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let n;const r=new AbortController,i=new wSe(t,r);this._processingItems.set(t,i);try{n=this.process(t,r.signal)}catch(s){this._processError(i,s)}_l(n)?(i.promise=n,n.then(s=>this._processResult(i,s),s=>this._processError(i,s))):this._processResult(i,n)}get test(){}};const p8=[0,0];let gu=class extends Fe{constructor(t){super(t),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:t,process:n,scheduler:r,priority:i}=this;this._queue=new vSe({concurrency:t,scheduler:r,priority:i,process:(s,o)=>{const a=this._keyToItem.get(s);return n(a,{signal:o})},peeker:s=>this._peek(s)})}destroy(){this.clear(),this._queue=cn(this._queue)}get length(){return this._queue?this._queue.length:0}abort(t){const n=typeof t=="string"?t:t.id;this._queue.abort(n)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}pause(){this._queue.pause()}push(t){const n=t.key.id;if(this._queue.has(n))return this._queue.get(n);const r=this._queue.push(n),i=this.tileInfoView.getTileScale(t.key),s=vx(this._tilesByScale,i,()=>new Set),o=()=>{s.delete(t.key),s.size===0&&this._tilesByScale.delete(i),this._keyToItem.delete(n)};return s.add(t.key),this._keyToItem.set(n,t),r.then(o,o),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(t){if(!this.state)return t.values().next().value;const n=new Set;for(const o of t)n.add(this._keyToItem.get(o).key);const r=this.state.scale;let i,s=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(zV(a,h=>n.has(h))){const h=Math.abs(o-r);h<s&&(i=a,s=h)}return this._getClosestTileKey(i,t).id}_getClosestTileKey(t,n){const r=this.tileInfoView,i=this.state.center;let s,o=Number.POSITIVE_INFINITY;for(const a of t)if(n.has(a.id)){r.getTileCoords(p8,a);const h=TE(p8,i);h<o&&(o=h,s=a)}return s}};l([p({constructOnly:!0})],gu.prototype,"concurrency",void 0),l([p({constructOnly:!0})],gu.prototype,"priority",void 0),l([p({constructOnly:!0})],gu.prototype,"process",void 0),l([p({constructOnly:!0})],gu.prototype,"scheduler",void 0),l([p()],gu.prototype,"state",void 0),l([p({constructOnly:!0})],gu.prototype,"tileInfoView",void 0),gu=l([k("esri.views.2d.tiling.TileQueue")],gu);const Mke=gu;let bSe=class{constructor(t,n,r){this.maxSize=t,this._tileInfoView=n,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const n=this._tilePerId.get(t);if(!n)return;const r=n.key.level,i=this._tileKeysPerLevel[r];f8(this._tilePerId,t);for(let s=0;s<i.length;s++)if(i[s].id===t){i.splice(s,1);break}return n.visible=!0,n}add(t){t.visible=!1;const n=t.key,r=n.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const i=n.level;this._tileKeysPerLevel[i]||(this._tileKeysPerLevel[i]=[]),this._tileKeysPerLevel[i].push(n)}prune(t,n,r){let i=this._tilePerId.size;if(i<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;i>this.maxSize&&s>=0;)s!==t&&(i=this._pruneAroundCenterTile(i,n,r,s)),s--;i>this.maxSize&&(i=this._pruneAroundCenterTile(i,n,r,t))}_pruneAroundCenterTile(t,n,r,i){const s=this._tileKeysPerLevel[i];if(!s||s.length===0)return t;const{size:o,origin:a}=this._tileInfoView.tileInfo,h=r*o[0],f=r*o[1],_=[0,0],w=[0,0];for(s.sort((b,T)=>(_[0]=a.x+h*(b.col+.5),_[1]=a.y-f*(b.row+.5),w[0]=a.x+h*(T.col+.5),w[1]=a.y-f*(T.row+.5),qT(_,n)-qT(w,n)));s.length>0;){const b=s.pop();if(this._removeTile(b.id),--t===this.maxSize)break}return t}_removeTile(t){const n=this._tilePerId.get(t);this._removedFunc&&n&&this._removedFunc(n),f8(this._tilePerId,t)}};function f8(e,t){e.delete(t)}const Zh=new Wd(0,0,0,0),Wl=new Map,tw=[],SI=[];let Pke=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new bSe(t.cacheSize,this.tileInfoView,n=>{this.releaseTile(n)}))}destroy(){this.tileIndex.clear()}update(t){var N,j;const{resampling:n,tileIndex:r}=this,{scale:i,center:s,resolution:o}=t.state,{minScale:a,maxScale:h}=this.tileInfoView,f=!t.stationary&&i>this._previousScale;if(this._previousScale=i,!n&&(i>a||i<h))return this.tiles.length=0,void this.clear();const _=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!_)return this.tiles.length=0,void this.clear();const{spans:w,lodInfo:b}=_,{level:T}=b;this.tiles.length=0,r.forEach(z=>z.visible=!0);let M=0,I=0;if(w.length>0)for(const{row:z,colFrom:U,colTo:K}of w)for(let J=U;J<=K;J++){M++;const le=Zh.set(T,z,b.normalizeCol(J),b.getWorldForColumn(J)).id;let ue=r.get(le);if(ue)ue.isReady?(Wl.set(le,ue),I++):f||this._addParentTile(le,Wl);else{if((N=this._tileCache)!=null&&N.has(le)){if(ue=this._tileCache.pop(le),this.tileIndex.set(le,ue),ue.isReady){Wl.set(le,ue),I++;continue}}else ue=this.acquireTile(Zh),this.tileIndex.set(le,ue);f||this._addParentTile(le,Wl)}}const C=I===M;for(const[z,U]of r){if(Wl.has(z))continue;Zh.set(z);const K=this.tileInfoView.intersects(_,Zh),J=this.cachePolicy==="purge"?Zh.level!==T:Zh.level>T;!K||!f&&C?!J&&K||tw.push(U):U.isReady?J&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Zh,T)?tw.push(U):SI.push(U):J&&tw.push(U)}for(const z of SI)z.isReady&&Wl.set(z.key.id,z);for(const z of tw)this._tileCache?this._tileCache.add(z):this.releaseTile(z),r.delete(z.key.id);for(const z of Wl.values())this.tiles.push(z);for(const z of r.values())Wl.has(z.key.id)||(z.visible=!1);(j=this._tileCache)==null||j.prune(T,s,o),v0.pool.release(_),SI.length=0,tw.length=0,Wl.clear()}clear(){const{tileIndex:t}=this;for(const n of t.values())this.releaseTile(n);t.clear()}refresh(t){var n;for(const r of this.tileIndex.values())t(r);(n=this._tileCache)==null||n.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,n){var s;let r=t,i=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(i=this.tileIndex.get(r),i==null?void 0:i.isReady){n.has(i.key.id)||n.set(i.key.id,i);break}}else if((s=this._tileCache)!=null&&s.has(r)&&(i=this._tileCache.pop(r),this.tileIndex.set(r,i),i==null?void 0:i.isReady)){n.has(i.key.id)||n.set(i.key.id,i);break}}_hasReadyAncestor(t,n){const r=Hi();this.tileInfoView.getTileBounds(r,t,!0);for(const i of this.tileIndex.values())if(i.isReady&&i.key.level>=n&&i.key.level<t.level){const s=Hi();if(this.tileInfoView.getTileBounds(s,i.key,!0),Oie(s,r))return!0}return!1}},Xr=class extends Fe{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([ct(()=>{var n;return(n=this.constraints)==null?void 0:n.version},n=>{this.constraints&&n&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},pl)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:n}=this.state.paddedViewState;return this.state.commitProperty("id"),new gt({x:t[0],y:t[1],spatialReference:n})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let n;try{n=this._project(t,this.state.spatialReference)}catch(i){return void fe.getLogger(this).error(new Y("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:i}))}const r=this.viewpoint;pA(r,r,n),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void fe.getLogger(this).error(new Y("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let n;try{n=this._project(t,this.state.spatialReference)}catch(i){return void fe.getLogger(this).error(new Y("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:i}))}const r=this.viewpoint;v1e(r,r,n,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const n=this.viewpoint;C1e(n,n,t),this.viewpoint=n}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const n=this.viewpoint;e8(n,n,t),this.viewpoint=n}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var s;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let n,r;try{n=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?r=new Y("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(r=new Y("mapview:invalid-viewpoint","geometry not defined"))}catch(o){r=new Y("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(r)return void fe.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const i=new $r({targetGeometry:new gt,scale:0,rotation:0});ii(i,n),(s=this.constraints)==null||s.constrain(i,this.state.paddedViewState.viewpoint),this.state.viewpoint=i,this._set("viewpoint",i)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var i,s;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const n=((i=this.constraints)==null?void 0:i.zoomToScale(t))??0;if(!n)return void this._set("zoom",-1);const r=this.viewpoint;e8(r,r,n),this.viewpoint=r,this._set("zoom",((s=this.constraints)==null?void 0:s.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:n,constraints:r}=this,i=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),h=this._get("viewpoint"),f=this._get("zoom"),_=f!=null&&r!=null&&r.zoomToScale(f)||void 0;let w,b,T;const M=h==null?void 0:h.rotation,I=h==null?void 0:h.targetGeometry;(I==null?void 0:I.type)==="extent"?w=I:(I==null?void 0:I.type)==="point"&&(b=I,T=h==null?void 0:h.scale);const C=s??w;return{center:i??b??(C==null?void 0:C.center),rotation:a??M,scale:(o??_??T??(C&&EE(C,[t[0]-n.left-n.right,t[1]-n.top-n.bottom])))||void 0}}startup(t,n,r,i){var o;const s=t.targetGeometry;try{this._project(t,r)}catch(a){fe.getLogger(this).warn(new Es("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:r,error:a})),t.targetGeometry=i||new gt({x:0,y:0,spatialReference:r})}(o=this.constraints)==null||o.fit(t),this._set("state",new hL({padding:this.padding,size:n,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,n],spatialReference:r,rotation:i,scale:s}=this.state.paddedViewState,o=new gt({x:t,y:n,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",i),this._set("scale",s),this._set("state",null)}changeSpatialReference(t){var h;const n=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=n.scale;else{const f=n.viewpoint.clone();f.scale=this._scaleBeforeChangingSpatialReference,n.viewpoint=f}const r=n.clone(),[i,s]=n.center;let o=null;try{o=this._project(new gt({x:i,y:s,spatialReference:n.spatialReference}),t)}catch(f){pk()||fe.getLogger(this).warn(new Es("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:t,error:f}))}o||(o=new gt({x:0,y:0,spatialReference:t}));const a=pA(new $r({targetGeometry:new gt,scale:0,rotation:0}),n.viewpoint,o);r.viewpoint=a;try{const _=[n.size[0]/2,n.size[1]/2],w=[_[0]+20,_[1]],b=n.toMap([0,0],w),{x:T,y:M}=this._project(new gt({x:b[0],y:b[1],spatialReference:n.spatialReference}),t);b[0]=T,b[1]=M,r.toScreen(b,b);const I=M1e(_,b,w),C=Math.hypot(b[0]-_[0],b[1]-_[1])/20;!Number.isFinite(C)||Math.abs(C)>4?(a.rotation=0,a.targetGeometry=new gt({x:0,y:0,spatialReference:t})):(a.scale*=C,a.scale>te("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(I)?I:0)}catch{}(h=this._get("constraints"))==null||h.constrain(a,void 0),this._get("state").viewpoint=a}resize(t,n){var o;if(!this.ready)return;const r=this.state;let i=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();r.size=[t,n],P1e(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=((o=this.constraints)==null?void 0:o.constrain(i,void 0))??i,this.state.viewpoint=i}toMap(t){if(!this.ready)return null;const n=[0,0],[r,i]=this.state.toMap(n,[t.x,t.y]),s=this.state.spatialReference;return new gt({x:r,y:i,spatialReference:s})}toScreen(t,n){if(!this.ready)return null;const r=this._project(t,this.state.spatialReference),i=[r.x,r.y];return(n==null?void 0:n.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(i,i),this.state.toScreen(i,i),Er(i[0],i[1])}_project(t,n){var s;const r=(t==null?void 0:t.targetGeometry)||t;if(!n)return t;if(!r)return null;if(n.imageCoordinateSystem||(s=r.spatialReference)!=null&&s.imageCoordinateSystem||dr(n,r.spatialReference))return t;const i=Qd(r,n);if(!i)throw new Y("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:n});return SSe(t)?(t.targetGeometry=i,t):i}};function SSe(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}l([p({type:gt})],Xr.prototype,"center",null),l([p()],Xr.prototype,"constraints",void 0),l([p({type:Xt})],Xr.prototype,"extent",null),l([p({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Xr.prototype,"padding",null),l([p()],Xr.prototype,"ready",void 0),l([p()],Xr.prototype,"resizeAlign",void 0),l([p({readOnly:!0})],Xr.prototype,"resolution",null),l([p({type:Number})],Xr.prototype,"rotation",null),l([p({type:Number})],Xr.prototype,"scale",null),l([p({readOnly:!0})],Xr.prototype,"state",void 0),l([p({type:$r})],Xr.prototype,"viewpoint",null),l([p({readOnly:!0})],Xr.prototype,"visibleArea",null),l([p()],Xr.prototype,"zoom",null),Xr=l([k("esri.views.2d.ViewStateManager")],Xr);function pL(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}let m8=class extends pr{constructor(t,n){super(!0),this._view=t,this.registerIncoming("double-click",n,r=>this._handleDoubleClick(r,n))}_handleDoubleClick(t,n){pL(t.data,"primary")&&(t.stopPropagation(),n?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},TSe=class extends pr{constructor(t,n,r){super(!0),this.view=t,this.pointerType=n,this.registerIncoming("double-tap-drag",r,i=>this._handleDoubleTapDrag(i))}_handleDoubleTapDrag(t){const{data:n}=t,{pointerType:r}=n;if(r!==this.pointerType)return;t.stopPropagation();const{action:i,delta:s}=n,{view:o}=this,{mapViewNavigation:a}=o;switch(i){case"begin":{const{scale:h}=o;this._startScale=h,this._currentScale=h,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const h=1.015**s.y,f=this._startScale*h,_=f/this._currentScale;a.setViewpointImmediate(_),this._currentScale=f;break}case"end":{const{constraints:h}=o,{effectiveLODs:f,snapToZoom:_}=h;if(!_||!f)return void a.end();const w=h.snapScale(this._currentScale),b=(s.y>0?Math.max(w,h.snapToPreviousScale(this._startScale)):Math.min(w,h.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(b).then(()=>{a.end()});break}}}},ME=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const n=t.data,r=n.pointers.size;switch(n.action){case"start":this._currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var n,r;this._startEvent=t,(r=(n=this._callbacks).condition)!=null&&r.call(n,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var n,r;(r=(n=this._callbacks).condition)!=null&&r.call(n,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var n,r;(r=(n=this._callbacks).condition)!=null&&r.call(n,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},xSe=class extends pr{constructor(t,n,r){super(!0),this.view=t,this.pointerAction=n,this.registerIncoming("drag",r,i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new ME({start:(n,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(n,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(n,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(n,r)=>n===1&&pL(r.data,this.pointerAction)})}_handleDrag(t){const n=this.view.mapViewNavigation;n.pinch.zoomMomentum||n.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},ESe=class extends pr{constructor(t,n,r){super(!0),this._view=t,this.pointerAction=n;const i=this._view.mapViewNavigation;this._dragEventSeparator=new ME({start:(s,o)=>{i.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{i.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{i.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&pL(o.data,this.pointerAction)}),this.registerIncoming("drag",r,s=>this._dragEventSeparator.handle(s))}};function NZ(e){const t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function $Se(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function MSe(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function ISe(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function DZ(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function FZ(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function jZ(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function PSe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function CSe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function OSe(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function ASe(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function kSe(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function RSe(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function LSe(e,t=0,n=1){return e[0]=Math.min(Math.max(e[0],t),n),e[1]=Math.min(Math.max(e[1],t),n),e[2]=Math.min(Math.max(e[2],t),n),e}function NSe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function zZ(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function DSe(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function VZ(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function UZ(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function GZ(e){const t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function FSe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function jSe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function bA(e,t){const n=t[0],r=t[1],i=t[2];let s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function BZ(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function zSe(e,t,n){const r=t[0],i=t[1],s=t[2],o=n[0],a=n[1],h=n[2];return e[0]=i*h-s*a,e[1]=s*o-r*h,e[2]=r*a-i*o,e}function VSe(e,t,n){const r=t[0],i=t[1],s=t[2],o=n[0],a=n[1],h=n[2],f=i*h-s*a,_=s*o-r*h,w=r*a-i*o,b=Math.sqrt(f*f+_*_+w*w);return e[0]=f/b,e[1]=_/b,e[2]=w/b,e}function USe(e,t,n,r){const i=t[0],s=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e}function GSe(e,t,n,r,i,s){const o=s*s,a=o*(2*s-3)+1,h=o*(s-2)+s,f=o*(s-1),_=o*(3-2*s);return e[0]=t[0]*a+n[0]*h+r[0]*f+i[0]*_,e[1]=t[1]*a+n[1]*h+r[1]*f+i[1]*_,e[2]=t[2]*a+n[2]*h+r[2]*f+i[2]*_,e}function BSe(e,t,n,r,i,s){const o=1-s,a=o*o,h=s*s,f=a*o,_=3*s*a,w=3*h*o,b=h*s;return e[0]=t[0]*f+n[0]*_+r[0]*w+i[0]*b,e[1]=t[1]*f+n[1]*_+r[1]*w+i[1]*b,e[2]=t[2]*f+n[2]*_+r[2]*w+i[2]*b,e}function qSe(e,t=1){const n=Fx,r=2*n()*Math.PI,i=2*n()-1,s=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(r)*s,e[1]=Math.sin(r)*s,e[2]=i*t,e}function HSe(e,t,n){const r=t[0],i=t[1],s=t[2];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12],e[1]=n[1]*r+n[5]*i+n[9]*s+n[13],e[2]=n[2]*r+n[6]*i+n[10]*s+n[14],e}function WSe(e,t,n){const r=t[0],i=t[1],s=t[2];return e[0]=r*n[0]+i*n[3]+s*n[6],e[1]=r*n[1]+i*n[4]+s*n[7],e[2]=r*n[2]+i*n[5]+s*n[8],e}function ZSe(e,t,n){const r=n[0],i=n[1],s=n[2],o=n[3],a=t[0],h=t[1],f=t[2],_=i*f-s*h,w=s*a-r*f,b=r*h-i*a,T=i*b-s*w,M=s*_-r*b,I=r*w-i*_,C=2*o;return e[0]=a+_*C+2*T,e[1]=h+w*C+2*M,e[2]=f+b*C+2*I,e}function JSe(e,t,n,r){const i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function YSe(e,t,n,r){const i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function KSe(e,t,n,r){const i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function XSe(e,t){bA(y8,e),bA(g8,t);const n=BZ(y8,g8);return n>1?0:n<-1?Math.PI:Math.acos(n)}const y8=Jd(),g8=Jd();function QSe(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function e2e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function t2e(e,t){if(e===t)return!0;const n=e[0],r=e[1],i=e[2],s=t[0],o=t[1],a=t[2],h=Si();return Math.abs(n-s)<=h*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-o)<=h*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=h*Math.max(1,Math.abs(i),Math.abs(a))}function n2e(e,t,n){const r=n[0]-t[0],i=n[1]-t[1],s=n[2]-t[2];let o=r*r+i*i+s*s;return o>0?(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=s*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const r2e=DZ,i2e=FZ,s2e=jZ,o2e=VZ,a2e=UZ,l2e=NZ,u2e=GZ;Object.freeze(Object.defineProperty({__proto__:null,abs:OSe,add:ISe,angle:XSe,bezier:BSe,ceil:PSe,clamp:LSe,copy:$Se,cross:zSe,crossAndNormalize:VSe,direction:n2e,dist:o2e,distance:VZ,div:s2e,divide:jZ,dot:BZ,equals:t2e,exactEquals:e2e,floor:CSe,hermite:GSe,inverse:jSe,len:l2e,length:NZ,lerp:USe,max:RSe,min:kSe,mul:i2e,multiply:FZ,negate:FSe,normalize:bA,random:qSe,rotateX:JSe,rotateY:YSe,rotateZ:KSe,round:NSe,scale:zZ,scaleAndAdd:DSe,set:MSe,sign:ASe,sqrDist:a2e,sqrLen:u2e,squaredDistance:UZ,squaredLength:GZ,str:QSe,sub:r2e,subtract:DZ,transformMat3:WSe,transformMat4:HSe,transformQuat:ZSe},Symbol.toStringTag,{value:"Module"}));function Ro(e){let t=e*e;return e<0&&(t*=-1),t}function c2e(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function d2e(e,t,n){const r=n,i=e.state,s=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(r.translation[0]=Ro(i.axes[0]),r.translation[1]=Ro(i.axes[1]),r.translation[2]=Ro(i.buttons[7])-Ro(i.buttons[6]),r.heading=Ro(i.axes[2]),r.tilt=Ro(i.axes[3])):s.deviceType==="spacemouse"&&(r.translation[0]=1.2*Ro(i.axes[0]),r.translation[1]=1.2*Ro(i.axes[1]),r.translation[2]=2*-Ro(i.axes[2]),r.heading=1.2*Ro(i.axes[5]),r.tilt=1.2*Ro(i.axes[3])),r.tilt*=o,zZ(r.translation,r.translation,a),r}function h2e(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let p2e=class extends pr{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new Pg,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",n=>this._handleGamePadEvent(n)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([ct(()=>{var n;return(n=this._view.navigation.gamepad)==null?void 0:n.enabled},n=>{n?(this._handle.resume(),this._frameTask||(this._frameTask=pg({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},si)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const n=this._view.navigation.gamepad.device;n&&t.data.device!==n||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,c2e(this._transformation)):(this._currentDevice=t.data.device,d2e(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const n=this._transformation;if(h2e(n))return;const r=this._view.viewpoint.clone(),i=this._view.navigation.gamepad.velocityFactor,s=m2e*i*t;$E(r,r,[n.translation[0]*s,-n.translation[1]*s]);const o=1+n.translation[2]*y2e*t,a=this._view.constraints.rotationEnabled?-n.heading*f2e*t:0,h=this._view.size,f=[h[0]/2,h[1]];hZ(r,r,o,a,f,h);const _=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=_}};const f2e=.06,m2e=.7,y2e=6e-4;function qZ(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),Ft(()=>document.removeEventListener("visibilitychange",t))}let g2e=class extends pr{constructor(t,n,r){super(!0),this.view=t,this.keys=n,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=i=>{const s=this._keyMap[i.data.key];if(i.modifiers.has("Meta")||i.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;i.stopPropagation(),i.preventDefault();const o=i.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,h=this._pressedKeys.size>0;a||h?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[n.left]:"left",[n.right]:"right",[n.up]:"up",[n.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=qZ(i=>i?null:this._stopMovement())}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const n=this._currentDirection!=null;if(t!=null){if(n||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else n&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},_2e=class extends pr{constructor(t,n,r){super(!0),this.view=t,this.keys=n,this._pressed=!1,this._keyToDirection={[n.clockwiseOption1]:"clockwise",[n.clockwiseOption2]:"clockwise",[n.counterClockwiseOption1]:"counterClockwise",[n.counterClockwiseOption2]:"counterClockwise",[n.resetOption1]:"reset",[n.resetOption2]:"reset"},this.registerIncoming("key-down",r,i=>this._handleKeyDown(i)),this.registerIncoming("key-up",r,i=>this._handleKeyUp(i)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=qZ(i=>i?null:this._handleStop())}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,n){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const i=this._keyToDirection[t.data.key];if(this._pressed=i!=null,this._pressed){if(t.preventDefault(),n)switch(this.view.mapViewNavigation.begin(),i){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var Wy;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(Wy||(Wy={}));let w2e=class extends pr{constructor(t,n,r){super(!0),this.view=t,this.keys=n,this._keysToZoomAction={},this.registerIncoming("key-down",r,i=>this._handleKeyDown(i)),n.zoomIn.forEach(i=>this._keysToZoomAction[i]=Wy.IN),n.zoomOut.forEach(i=>this._keysToZoomAction[i]=Wy.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const n=t.modifiers;if(n.size>0&&!n.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const i=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let o=null;switch(i){case Wy.IN:o=s.zoomIn();break;case Wy.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),t.stopPropagation()}};const v2e=.6;let b2e=class extends pr{constructor(t,n){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",n,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const n=this._view.mapViewNavigation,{x:r,y:i,deltaY:s}=t.data,o=1/v2e**(1/60*s),a=n.zoom(o,[r,i]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,n.end()}))}},S2e=class extends pr{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const n=this.view.mapViewNavigation;this._dragEventSeparator=new ME({start:(r,i)=>{n.pinch.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{n.pinch.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{n.pinch.end(this.view),i.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function _8(e){const t=e.native;return t?{buttons:t.buttons.map(n=>n.pressed?n.value||1:0),axes:t.axes.map(n=>E2e(n,e.axisThreshold))}:{buttons:[],axes:[]}}function T2e(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let n=0;n<e.axes.length;n++)if(e.axes[n]!==t.axes[n])return!1;for(let n=0;n<e.buttons.length;n++)if(e.buttons[n]!==t.buttons[n])return!1;return!0}function x2e(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function E2e(e,t){const n=Math.abs(e);return n<t?0:Math.sign(e)*(n-t)/(1-t)}let $2e=class{constructor(t,n){this._element=t,this._input=n,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,h=this._inputDevices[a];h&&(this._emitGamepadEvent(o,_8(h),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(h),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,i=window.isSecureContext;this.supported=r&&i,this.supported&&(w8(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const n=new tL(t);n.deviceType!=="unknown"&&(this._inputDevices[t.index]=n,this._input.gamepad.devices.add(n)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=pg({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),n=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!n;w8(i=>{const s=this._inputDevices[i.index];if(!s)return;const o=this._latestUpdate[i.index],a=_8(s),h=r||x2e(a);o&&(o.timestamp===i.timestamp||!o.active&&h||T2e(o.state,a))||this._emitGamepadEvent(i,a,!h)})}_emitGamepadEvent(t,n,r){const i=this._latestUpdate[t.index],s=i&&i.active;if(!s&&!r)return;const o=!s&&r?"start":s&&r?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:n,active:r},this._callback&&this._callback({device:this._inputDevices[t.index],state:n,action:o})}};function M2e(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function w8(e){for(const t of navigator.getGamepads())M2e(t)&&e(t)}const v8=te("edge"),I2e=te("chrome"),P2e=te("ff"),C2e=te("safari"),b8="esri-view-surface",Fm={touchNone:`${b8}--touch-none`,touchPan:`${b8}--touch-pan`};let HZ=class WZ{constructor(t,n){this._input=n,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new $2e(t,this._input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=cn(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const n in this._active)if(!t||!t.has(n)){const r=this._active[n];this._element.removeEventListener(TI[n],r),delete this._active[n]}t&&t.forEach(n=>{if(!this._active[n]&&TI[n]){const r=(this._eventHandlers[n]||this._handleDefault).bind(this,n);this._element.addEventListener(TI[n],r),this._active[n]=r}}),this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1}setPointerCapture(t,n){n?this._setPointerCatpureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Fm.touchNone:Fm.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Fm.touchPan:Fm.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Fm.touchNone),this._element.classList.remove(Fm.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,n){const r=AW(this._element,t);return WZ.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),n.x=r.x,n.y=r.y,n}_handleKey(t,n){const{key:r}=n;r&&t==="key-up"&&this._keyDownState.delete(r);const i={native:n,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(i.key),this._callback(t,i)}_handlePointer(t,n){const r=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,pointerType:n.pointerType,button:n.button,buttons:n.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,n){const r=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,pointerType:n.pointerType,button:n.button,buttons:n.buttons,eventId:this._eventId++});n.preventDefault(),this._callback(t,r)}_getDeltaFromTrackpadOrMouseWheel(t){return t.shiftKey&&te("mac")&&t.deltaY===0?t.deltaX:t.deltaY}_handleMouseWheel(t,n){let r=this._getDeltaFromTrackpadOrMouseWheel(n);switch(n.deltaMode){case 0:v8&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}v8?r*=.7:I2e||C2e?r*=.6:P2e&&(r*=1.375);const i=100,s=Math.abs(r);s>i&&(r=r/s*200/(1+Math.exp(-.02*(s-i))));const o=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,deltaY:r});this._callback(t,o)}_handlePointerCaptureLost(t,n){this._activePointerCaptures.delete(n.pointerId),this._handleDefault(t,n)}_handleDefault(t,n){const r={native:n};n.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};HZ.test={disableSubpixelCoordinates:!1};const TI={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let O2e=class extends pr{constructor(){super(!0),this.registerIncoming("context-menu",t=>t.data.native.preventDefault())}};const Lr={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function JT(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function A2e(e,t){const n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function k2e(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Er()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[z,U]=e,[K,J]=[U.x-z.x,U.y-z.y];return t.radius=Math.sqrt(K*K+J*J)/2,t.center.x=(z.x+U.x)/2,t.center.y=(z.y+U.y)/2,t}let n=0,r=0;for(let z=0;z<e.length;z++)n+=e[z].x,r+=e[z].y;n/=e.length,r/=e.length;const i=e.map(z=>z.x-n),s=e.map(z=>z.y-r);let o=0,a=0,h=0,f=0,_=0,w=0,b=0;for(let z=0;z<i.length;z++){const U=i[z],K=s[z],J=U*U,le=K*K;o+=J,a+=le,h+=U*K,f+=J*U,_+=le*K,w+=U*le,b+=K*J}const T=.5*(f+w),M=.5*(_+b),I=o*a-h*h,C=(T*a-M*h)/I,N=(o*M-h*T)/I,j=Er(C+n,N+r);return{radius:Math.sqrt(C*C+N*N+(o+a)/e.length),center:j}}function rf(e){const{native:t}=e,{pointerId:n,button:r,pointerType:i}=t;return i==="mouse"?`${n}:${r}`:`${i}`}let R2e=class extends pr{constructor(t=Lr.maximumDoubleClickDelay,n=Lr.maximumDoubleClickDistance,r=Lr.maximumDoubleTouchDelay,i=Lr.maximumDoubleTouchDistance,s=Cg){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=i,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Er(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new ME({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=wn(t.doubleTapTimeout)})}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(t){const n=this._pointerState.get(t);n&&(n.doubleTapTimeout=wn(n.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,n){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:i}=n,{center:s}=r;this._dragStartCenter=s;const o=xI("begin",Er(0,0),r);this._doubleTapDrag.emit(o,void 0,i),n.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:n,modifiers:r}=t,{center:i}=n,s=xI("update",Er(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),n);this._doubleTapDrag.emit(s,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:n,modifiers:r}=t,{center:i}=n,s=xI("end",Er(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),n);this._doubleTapDrag.emit(s,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:n}=t,r=rf(n),i=this._pointerState.get(r),{pointerType:s}=n.native;if(i){const o=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),JT(i.event.data,n)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:n}=t,{pointerType:r}=n.native,i=rf(n),s=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(i),s);this._pointerState.set(i,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function xI(e,t,n){const{button:r,buttons:i,pointer:s,pointers:o,pointerType:a,timestamp:h}=n;return{action:e,delta:t,button:r,buttons:i,pointer:s,pointers:o,pointerType:a,timestamp:h}}let L2e=class extends pr{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,n,r,i){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:n.buttons,timestamp:i,pointers:N2e(this._activePointerMap),pointer:n,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const n=t.native.pointerId,r=aS(this._activePointerMap).angle,i={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(n,i);const s=j2(i,ZZ(this._activePointerMap));i.initialAngle=s,i.lastAngle=s,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const n=t.native.pointerId,r=this._activePointerMap.get(n);r?r.event=t:this._addPointer(t)}_removePointer(t){const n=aS(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(n)}_updatePointerAngles(t){const n=aS(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=j2(r,n)-t,r.lastAngle=j2(r,n)-t})}_emitEvent(t,n,r){const i=aS(this._activePointerMap);this._drag.emit(this._createPayload(t,n,i,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const n=t.data.native.pointerId,r=t.timestamp;this._activePointerMap.get(n)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(n)):(this._removePointer(n),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const n=t.data,r=n.currentEvent,i=t.timestamp;switch(n.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,i)):(this._addPointer(r),this._emitEvent("added",r,i),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,i))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function ZZ(e){const t=[];return e.forEach(n=>{t.push(Er(n.event.x,n.event.y))}),k2e(t)}function aS(e){const t=ZZ(e);let n=0;return e.forEach(r=>{let i=j2(r,t),s=i-r.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;i=r.lastAngle+s,r.lastAngle=i;const o=i-r.initialAngle;n+=o}),n/=e.size||1,{angle:n,radius:t.radius,center:t.center}}function N2e(e){const t=new Map;return e.forEach((n,r)=>t.set(r,n.event)),t}function j2(e,t){const n=e.event,r=n.x-t.center.x,i=n.y-t.center.y;return Math.atan2(i,r)}var S8;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(S8||(S8={}));let D2e=class extends pr{constructor(t=Lr.maximumDoubleClickDelay,n=Lr.maximumDoubleClickDistance,r=Lr.maximumDoubleTouchDelay,i=Lr.maximumDoubleTouchDistance,s=Cg){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=i,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const n=t.data,r=rf(n);if(!this._pointerState.has(r)){const i={downButton:n.native.button,x:n.x,y:n.y,immediateDoubleClick:null};this._pointerState.set(r,i),this.startCapturingPointer(n.native)}}_handlePointerUp(t){const n=t.data,r=rf(n),i=this._pointerState.get(r);if(i&&i.downButton===n.native.button){const s=i.immediateDoubleClick,o=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),JT(s,t.data)>o?this._startImmediateDoubleClick(t,i):(this._immediateDoubleClick.emit(t.data,void 0,s.modifiers),this._removeState(n))):JT(i,t.data)>o?this._removeState(n):this._startImmediateDoubleClick(t,i)}}_startImmediateDoubleClick(t,n){const r=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;n.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_removeState(t){const n=rf(t);this._pointerState.delete(n),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},F2e=class extends pr{constructor(t=Lr.maximumClickDelay,n=Lr.movementUntilMouseDrag,r=Lr.movementUntilPenDrag,i=Lr.movementUntilTouchDrag,s=Lr.holdDelay,o=Cg){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=n,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=i,this._holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",a=>this._handlePointerDown(a)),this.registerIncoming("pointer-up",a=>this._handlePointerLoss(a,"pointer-up")),this.registerIncoming("pointer-capture-lost",a=>this._handlePointerLoss(a,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",a=>this._handlePointerLoss(a,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",a=>this._handlePointerMove(a)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=wn(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const n=t.data,r=n.native.pointerId;let i=null;this._pointerState.size===0&&(i=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const s={startEvent:n,previousEvent:n,startTimestamp:t.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:i,modifiers:new Set};this._pointerState.set(r,s),this.startCapturingPointer(n.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const n=t.data,r=n.native.pointerId,i=this._pointerState.get(r);i&&(i.isDragging?this._pointerDrag.emit(lS("update",i,n),void 0,i.modifiers):A2e(n,i.startEvent)>this._getDragThreshold(n.native.pointerType)&&this._startDragging(t),i.previousEvent=n)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const n=t.data,r=n.native.pointerId;this._pointerState.forEach(i=>{i.holdTimeout!=null&&(i.holdTimeout.remove(),i.holdTimeout=null),i.isDragging||(i.modifiers=t.modifiers,i.isDragging=!0,r===i.startEvent.native.pointerId?this._pointerDrag.emit(lS("start",i,n)):this._pointerDrag.emit(lS("start",i,i.previousEvent),t.timestamp))})}_handlePointerLoss(t,n){const r=t.data,i=r.native.pointerId,s=this._pointerState.get(i);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(lS("end",s,n==="pointer-up"?r:s.previousEvent),void 0,s.modifiers):n==="pointer-up"&&s.downButton===r.native.button&&t.timestamp-s.startTimestamp<=this._maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(i),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function lS(e,t,n){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:n}}let j2e=class extends pr{constructor(t=Lr.maximumDoubleClickDelay,n=Lr.maximumDoubleClickDistance,r=Lr.maximumDoubleTouchDelay,i=Lr.maximumDoubleTouchDistance,s=Cg){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=i,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",o=>this._handleImmediateClick(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=wn(t.doubleClickTimer))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(t,n){const r=this._pointerState.get(t);r&&(r.doubleClickTimer=wn(r.doubleClickTimer),n&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const n=this._pointerState.get(t);n.pointerDownCount===1&&this._click.emit(n.event.data,void 0,n.event.modifiers),n.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const n=t.data,{pointerType:r}=n.native,i=z2e(n);if(!this._pointerState.has(i))return void this._startClick(t);const s=this._pointerState.get(i),{data:o,modifiers:a}=s.event,h=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;JT(o,n)>h?(this._clearDoubleClickTimer(i,!0),this._startClick(t)):(this._clearDoubleClickTimer(i,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(t){const n=rf(t.data),r=this._pointerState.get(n);r&&(r.pointerDownCount+=1)}_startClick(t){const{data:n}=t,{native:{pointerType:r}}=n,i=rf(n),s=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(i),s);this._pointerState.set(i,{event:t,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function z2e(e){const{pointerId:t,pointerType:n,button:r}=e.native;return n==="mouse"?`${t}:${r}`:`${n}`}const uS={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Lp=class extends Fe{initialize(){const t=()=>{var n;return(n=this.view)==null?void 0:n.ready};this.addHandles([hl(()=>!t(),()=>this._disconnect()),hl(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}isModifierKeyDown(t){var n;return((n=this._inputManager)==null?void 0:n.isModifierKeyDown(t))??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=cn(this._inputManager)}_connect(){const t=this.view.surface,n=new HZ(t,this.view.input),r=[new D2e,new F2e,new j2e,new L2e(this.view.navigation),new R2e],i=new Qs({eventSource:n,recognizers:r});i.installHandlers("prevent-context-menu",[new O2e],Ld.INTERNAL),i.installHandlers("navigation",[new S2e(this.view),new p2e(this.view),new b2e(this.view),new m8(this.view),new m8(this.view,[uS.counter]),new xSe(this.view,"primary"),new g2e(this.view,uS.pan),new w2e(this.view,uS.zoom),new _2e(this.view,uS.rotate),new ESe(this.view,"secondary"),new TSe(this.view,"touch")],Ld.INTERNAL),this.view.viewEvents.connect(i),this._source=n,this._inputManager=i,ct(()=>{var s,o;return(o=(s=this.view)==null?void 0:s.navigation)==null?void 0:o.browserTouchPanEnabled},s=>{this._source&&(this._source.browserTouchPanningEnabled=!s)},si)}get test(){}};l([p()],Lp.prototype,"view",void 0),l([p()],Lp.prototype,"latestPointerType",null),l([p()],Lp.prototype,"latestPointerLocation",null),l([p()],Lp.prototype,"multiTouchActive",null),Lp=l([k("esri.views.2d.input.MapViewInputManager")],Lp);const V2e=Lp;function U2e(e,t,n,r,i){JZ(e,t,n||0,r||e.length-1,i||G2e)}function JZ(e,t,n,r,i){for(;r>n;){if(r-n>600){var s=r-n+1,o=t-n+1,a=Math.log(s),h=.5*Math.exp(2*a/3),f=.5*Math.sqrt(a*h*(s-h)/s)*(o-s/2<0?-1:1);JZ(e,t,Math.max(n,Math.floor(t-o*h/s+f)),Math.min(r,Math.floor(t+(s-o)*h/s+f)),i)}var _=e[t],w=n,b=r;for(nw(e,n,t),i(e[r],_)>0&&nw(e,n,r);w<b;){for(nw(e,w,b),w++,b--;i(e[w],_)<0;)w++;for(;i(e[b],_)>0;)b--}i(e[n],_)===0?nw(e,n,b):nw(e,++b,r),b<=t&&(n=b+1),t<=b&&(r=b-1)}}function nw(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function G2e(e,t){return e<t?-1:e>t?1:0}function YT(e,t){if(!(this instanceof YT))return new YT(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function B2e(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function jm(e,t){mv(e,0,e.children.length,t,e)}function mv(e,t,n,r,i){i||(i=Ly(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var s,o=t;o<n;o++)s=e.children[o],yv(i,e.leaf?r(s):s);return i}function yv(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function T8(e,t){return e.minX-t.minX}function x8(e,t){return e.minY-t.minY}function EI(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function cS(e){return e.maxX-e.minX+(e.maxY-e.minY)}function q2e(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function H2e(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,s-r)}function $I(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function dS(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Ly(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function E8(e,t,n,r,i){for(var s,o=[t,n];o.length;)(n=o.pop())-(t=o.pop())<=r||(s=t+Math.ceil((n-t)/r/2)*r,U2e(e,s,t,n,i),o.push(t,s,s,n))}YT.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],r=this.toBBox;if(!dS(e,t))return n;for(var i,s,o,a,h=[];t;){for(i=0,s=t.children.length;i<s;i++)o=t.children[i],dS(e,a=t.leaf?r(o):o)&&(t.leaf?n.push(o):$I(e,a)?this._all(o,n):h.push(o));t=h.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!dS(e,t))return!1;for(var r,i,s,o,a=[];t;){for(r=0,i=t.children.length;r<i;r++)if(s=t.children[r],dS(e,o=t.leaf?n(s):s)){if(t.leaf||$I(e,o))return!0;a.push(s)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Ly([]),this},remove:function(e,t){if(e==null)return this;for(var n,r,i,s,o=this.data,a=this.toBBox(e),h=[],f=[];o||h.length;){if(o||(o=h.pop(),r=h[h.length-1],n=f.pop(),s=!0),o.leaf&&(i=B2e(e,o.children,t))!==-1)return o.children.splice(i,1),h.push(o),this._condense(h),this;s||o.leaf||!$I(o,a)?r?(n++,o=r.children[n],s=!1):o=null:(h.push(o),f.push(n),n=0,r=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:T8,compareMinY:x8,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,r){var i,s=n-t+1,o=this._maxEntries;if(s<=o)return jm(i=Ly(e.slice(t,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),(i=Ly([])).leaf=!1,i.height=r;var a,h,f,_,w=Math.ceil(s/o),b=w*Math.ceil(Math.sqrt(o));for(E8(e,t,n,b,this.compareMinX),a=t;a<=n;a+=b)for(E8(e,a,f=Math.min(a+b-1,n),w,this.compareMinY),h=a;h<=f;h+=w)_=Math.min(h+w-1,f),i.children.push(this._build(e,h,_,r-1));return jm(i,this.toBBox),i},_chooseSubtree:function(e,t,n,r){for(var i,s,o,a,h,f,_,w;r.push(t),!t.leaf&&r.length-1!==n;){for(_=w=1/0,i=0,s=t.children.length;i<s;i++)h=EI(o=t.children[i]),(f=q2e(e,o)-h)<w?(w=f,_=h<_?h:_,a=o):f===w&&h<_&&(_=h,a=o);t=a||t.children[0]}return t},_insert:function(e,t,n){var r=this.toBBox,i=n?e:r(e),s=[],o=this._chooseSubtree(i,this.data,t,s);for(o.children.push(e),yv(o,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)},_split:function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var s=this._chooseSplitIndex(n,i,r),o=Ly(n.children.splice(s,n.children.length-s));o.height=n.height,o.leaf=n.leaf,jm(n,this.toBBox),jm(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(n,o)},_splitRoot:function(e,t){this.data=Ly([e,t]),this.data.height=e.height+1,this.data.leaf=!1,jm(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){var r,i,s,o,a,h,f,_;for(h=f=1/0,r=t;r<=n-t;r++)o=H2e(i=mv(e,0,r,this.toBBox),s=mv(e,r,n,this.toBBox)),a=EI(i)+EI(s),o<h?(h=o,_=r,f=a<f?a:f):o===h&&a<f&&(f=a,_=r);return _},_chooseSplitAxis:function(e,t,n){var r=e.leaf?this.compareMinX:T8,i=e.leaf?this.compareMinY:x8;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)},_allDistMargin:function(e,t,n,r){e.children.sort(r);var i,s,o=this.toBBox,a=mv(e,0,t,o),h=mv(e,n-t,n,o),f=cS(a)+cS(h);for(i=t;i<n-t;i++)s=e.children[i],yv(a,e.leaf?o(s):s),f+=cS(a);for(i=n-t-1;i>=t;i--)s=e.children[i],yv(h,e.leaf?o(s):s),f+=cS(h);return f},_adjustParentBBoxes:function(e,t,n){for(var r=n;r>=0;r--)yv(t[r],e)},_condense:function(e){for(var t,n=e.length-1;n>=0;n--)e[n].children.length===0?n>0?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():jm(e[n],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};let $8=class YZ{constructor(t,n){this.key=new Wd(0,0,0,0),this.bounds=Hi(),this.objectIds=new Set,this.key.set(n);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=t.zoomToScale(r.level-1),this.maxScale=t.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return Xt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return{$view:{scale:this.scale,timeZone:t}}}createChildTiles(){const t=this.key.getChildKeys(),n=wi.acquire();for(let r=0;r<t.length;r++)n[r]=new YZ(this.tileInfoView,t[r]);return n}getQuantizationParameters(){return IH.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Jh={added:[],removed:[]},MI=new Set,W2e=new Wd(0,0,0,0);function Z2e(e,t){const n=bi(t);if(!n)return null;const[r,i]=n.valid;return e[2]>i?[Hi([e[0],e[1],i,e[3]]),Hi([r,e[1],r+e[2]-i,e[3]])]:e[0]<r?[Hi([r,e[1],e[2],e[3]]),Hi([i-(r-e[0]),e[1],i,e[3]])]:null}let J2e=class extends ju{constructor(t){super(),this._tiles=new Map,this._index=YT(9,te("esri-csp-restrictions")?n=>({minX:n.bounds[0],minY:n.bounds[1],maxX:n.bounds[2],maxY:n.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||X9(t)===0||Q9(t)===0)return[];const n=Z2e(t,this.tileScheme.spatialReference);return n!=null?[...new Set([...this.boundsIntersections(n[0]),...this.boundsIntersections(n[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const n={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const i=new $8(this.tileScheme,r);this._tiles.set(r,i),this._index.insert(i),n.added.push(i)}for(const r of t.removed)if(this.has(r)){const i=this.get(r);this._tiles.delete(r),this._index.remove(i),n.removed.push(i)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(n.added.length||n.removed.length)&&this.emit("update",n)}setViewState(t){const n=this.tileScheme.getTileCoverage(t,0);if(!n)return;const{spans:r,lodInfo:i}=n,{level:s}=i;if(r.length>0)for(const{row:o,colFrom:a,colTo:h}of r)for(let f=a;f<=h;f++){const _=W2e.set(s,o,i.normalizeCol(f),i.getWorldForColumn(f)).id;if(MI.add(_),!this.has(_)){const w=new $8(this.tileScheme,_);this._tiles.set(_,w),this._index.insert(w),this.tiles.push(w),Jh.added.push(w)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];MI.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Jh.removed.push(a))}(Jh.added.length||Jh.removed.length)&&this.emit("update",Jh),v0.pool.release(n),MI.clear(),Jh.added.length=0,Jh.removed.length=0}};const Xke=1e-30,M8=512,hS=16777216,Qke=8,eRe=29,tRe=24,nRe=4,rRe=0,iRe=0,sRe=0,oRe=1,aRe=2,lRe=3,uRe=4,cRe=5,dRe=6,hRe=12,pRe=13,fRe=5,Y2e=6,mRe=5,yRe=6;var I8;(function(e){e[e.FilterFlags=0]="FilterFlags",e[e.Animation=1]="Animation",e[e.GPGPU=2]="GPGPU",e[e.VV=3]="VV",e[e.DD0=4]="DD0",e[e.DD1=5]="DD1",e[e.DD2=6]="DD2",e[e.LocalTimeOrigin=7]="LocalTimeOrigin"})(I8||(I8={}));const KZ=6,K2e=1<<KZ,gRe=K2e<<1,_Re=1.05,wRe=3,vRe=1,bRe=3,SRe=3,TRe=5,xRe=6,ERe=1.15,X2e=2,$Re=128,Q2e=256,MRe=Q2e-2*X2e,IRe=2,PRe=128,CRe=10,ORe=1024,ARe=128,kRe=4,RRe=1,LRe=1<<20,NRe=.75,DRe=10,FRe=.75,jRe=256,zRe=32,VRe=512,URe=0,GRe=1,eTe=1,BRe=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],qRe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],rw=256,tTe=new Ze("cyan"),nTe=1,rTe=.25;new Ze("black");const iTe="default",sTe="temporary",oTe=new Ze("yellow");let Np=class extends Fe{constructor(t){super(t),this.color=tTe.clone(),this.haloOpacity=nTe,this.fillOpacity=rTe}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity}};l([p({type:Ze})],Np.prototype,"color",void 0),l([p({type:Ze})],Np.prototype,"haloColor",void 0),l([p()],Np.prototype,"haloOpacity",void 0),l([p()],Np.prototype,"fillOpacity",void 0),Np=l([k("esri.views.support.HighlightOptions")],Np);const aTe=Np;var SA;let gv=SA=class extends aTe{constructor(e){super(e),this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return super.equals(e)&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur}get optionsKey(){return`${this.color};${this.haloColor};${this.haloOpacity};${this.fillOpacity};${this.haloWidth};${this.haloBlur}`}clone(){var e;return new SA({color:this.color.clone(),haloColor:(e=this.haloColor)==null?void 0:e.clone(),haloOpacity:this.haloOpacity,fillOpacity:this.fillOpacity,haloWidth:this.haloWidth,haloBlur:this.haloBlur})}};l([p()],gv.prototype,"haloWidth",void 0),l([p()],gv.prototype,"haloBlur",void 0),gv=SA=l([k("esri.views.2d.support.HighlightOptions")],gv);const vf=gv;var P8,C8,O8,A8,TA,k8,R8,nl,xA,qv,ar,KT,io,un,Ge,b0,Eu,L8,N8,D8;(function(e){e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e[e.COLOR=16384]="COLOR"})(P8||(P8={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(C8||(C8={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(O8||(O8={})),function(e){e[e.ADD=32774]="ADD",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(A8||(A8={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(TA||(TA={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(k8||(k8={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(R8||(R8={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=5131]="HALF_FLOAT"}(nl||(nl={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(xA||(xA={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(qv||(qv={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(ar||(ar={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(KT||(KT={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(io||(io={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(un||(un={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(Ge||(Ge={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(b0||(b0={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(Eu||(Eu={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(L8||(L8={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(N8||(N8={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(D8||(D8={}));const WRe=33984;var XT,F8,j8;(function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.TransformFeedback=7]="TransformFeedback",e[e.Sync=8]="Sync",e[e.UNCOUNTED=9]="UNCOUNTED",e[e.LinesOfCode=9]="LinesOfCode",e[e.Uniform=10]="Uniform",e[e.COUNT=11]="COUNT"})(XT||(XT={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(F8||(F8={})),function(e){e[e.NONE=0]="NONE",e[e.BACK=1029]="BACK"}(j8||(j8={}));const ZRe=33306;var Rr,z8,V8,U8,G8,B8,q8;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(Rr||(Rr={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(z8||(z8={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(V8||(V8={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(U8||(U8={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(G8||(G8={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(B8||(B8={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(q8||(q8={}));const lTe=()=>fe.getLogger("esri.views.webgl.checkWebGLError");function uTe(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const XZ=!!te("enable-feature:webgl-debug");function QZ(){return XZ}function JRe(){return XZ}function zm(e){if(QZ()){const t=e.getError();if(t){const n=uTe(e,t),r=new Error().stack;lTe().error(new Y("webgl-error","WebGL error occurred",{message:n,stack:r}))}}}var EA;(function(e){e[e.Texture=0]="Texture",e[e.RenderBuffer=1]="RenderBuffer"})(EA||(EA={}));function cTe(e){switch(e){case nl.BYTE:case nl.UNSIGNED_BYTE:return 1;case nl.SHORT:case nl.UNSIGNED_SHORT:case nl.HALF_FLOAT:return 2;case nl.FLOAT:case nl.INT:case nl.UNSIGNED_INT:return 4}}function dTe(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function YRe(e,t,n,r,i=0){var o;const s=e.gl;e.bindBuffer(n);for(const a of r){const h=t.get(a.name);if(h==null){console.warn(`There is no location for vertex attribute '${a.name}' defined.`);continue}const f=i*a.stride;if(a.count<=4)s.vertexAttribPointer(h,a.count,a.type,a.normalized,a.stride,a.offset+f),s.enableVertexAttribArray(h),a.divisor>0&&e.gl.vertexAttribDivisor(h,a.divisor);else if(a.count===9)for(let _=0;_<3;_++)s.vertexAttribPointer(h+_,3,a.type,a.normalized,a.stride,a.offset+12*_+f),s.enableVertexAttribArray(h+_),a.divisor>0&&e.gl.vertexAttribDivisor(h+_,a.divisor);else if(a.count===16)for(let _=0;_<4;_++)s.vertexAttribPointer(h+_,4,a.type,a.normalized,a.stride,a.offset+16*_+f),s.enableVertexAttribArray(h+_),a.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(h+_,a.divisor));else console.error("Unsupported vertex attribute element count: "+a.count);if(QZ()){const _=dTe(e),w=cTe(a.type),b=a.offset,T=Math.round(w/b)!==w/b?`. Offset not a multiple of stride. DataType requires ${w} bytes, but descriptor has an offset of ${b}`:"";_&&console.error(`Unable to bind vertex attribute "${a.name}" with baseInstanceOffset ${f}${T}:`,_,a)}}}function KRe(e,t,n,r){var s,o,a;const i=e.gl;e.bindBuffer(n);for(const h of r){const f=t.get(h.name);if(h.count<=4)i.disableVertexAttribArray(f),h.divisor&&h.divisor>0&&((s=e.gl)==null||s.vertexAttribDivisor(f,0));else if(h.count===9)for(let _=0;_<3;_++)i.disableVertexAttribArray(f+_),h.divisor&&h.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(f+_,0));else if(h.count===16)for(let _=0;_<4;_++)i.disableVertexAttribArray(f+_),h.divisor&&h.divisor>0&&((a=e.gl)==null||a.vertexAttribDivisor(f+_,0));else console.error("Unsupported vertex attribute element count: "+h.count)}e.unbindBuffer(TA.ARRAY_BUFFER)}function hTe(e){switch(e){case un.ALPHA:case un.LUMINANCE:case un.RED:case un.RED_INTEGER:case Ge.R8:case Ge.R8I:case Ge.R8UI:case Ge.R8_SNORM:case Eu.STENCIL_INDEX8:return 1;case un.LUMINANCE_ALPHA:case un.RG:case un.RG_INTEGER:case Ge.RGBA4:case Ge.R16F:case Ge.R16I:case Ge.R16UI:case Ge.RG8:case Ge.RG8I:case Ge.RG8UI:case Ge.RG8_SNORM:case Ge.RGB565:case Ge.RGB5_A1:case Eu.DEPTH_COMPONENT16:return 2;case un.DEPTH_COMPONENT:case un.RGB:case un.RGB_INTEGER:case Ge.RGB8:case Ge.RGB8I:case Ge.RGB8UI:case Ge.RGB8_SNORM:case Ge.SRGB8:case Eu.DEPTH_COMPONENT24:return 3;case un.DEPTH_STENCIL:case un.DEPTH24_STENCIL8:case un.RGBA:case un.RGBA_INTEGER:case Ge.RGBA8:case Ge.R32F:case Ge.R11F_G11F_B10F:case Ge.RG16F:case Ge.R32I:case Ge.R32UI:case Ge.RG16I:case Ge.RG16UI:case Ge.RGBA8I:case Ge.RGBA8UI:case Ge.RGBA8_SNORM:case Ge.SRGB8_ALPHA8:case Ge.RGB9_E5:case Ge.RGB10_A2UI:case Ge.RGB10_A2:case Eu.DEPTH_STENCIL:case Eu.DEPTH_COMPONENT32F:case Eu.DEPTH24_STENCIL8:return 4;case Eu.DEPTH32F_STENCIL8:return 5;case Ge.RGB16F:case Ge.RGB16I:case Ge.RGB16UI:return 6;case Ge.RG32F:case Ge.RG32I:case Ge.RG32UI:case Ge.RGBA16F:case Ge.RGBA16I:case Ge.RGBA16UI:return 8;case Ge.RGB32F:case Ge.RGB32I:case Ge.RGB32UI:return 12;case Ge.RGBA32F:case Ge.RGBA32I:case Ge.RGBA32UI:return 16;case Rr.COMPRESSED_RGB_S3TC_DXT1_EXT:case Rr.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Rr.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Rr.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Rr.COMPRESSED_R11_EAC:case Rr.COMPRESSED_SIGNED_R11_EAC:case Rr.COMPRESSED_RGB8_ETC2:case Rr.COMPRESSED_SRGB8_ETC2:case Rr.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Rr.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Rr.COMPRESSED_RG11_EAC:case Rr.COMPRESSED_SIGNED_RG11_EAC:case Rr.COMPRESSED_RGBA8_ETC2_EAC:case Rr.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let eJ=class{constructor(t=0,n=t){this.width=t,this.height=n,this.target=io.TEXTURE_2D,this.pixelFormat=un.RGBA,this.dataType=b0.UNSIGNED_BYTE,this.samplingMode=ar.LINEAR,this.wrapMode=KT.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.depth=1,this.isImmutable=!1}};function pTe(e){return e.width<=0||e.height<=0?0:Math.round(e.width*e.height*(e.hasMipmap?4/3:1)*(e.internalFormat==null?4:hTe(e.internalFormat))*(e.target===io.TEXTURE_CUBE_MAP?6:1))}let fTe=class tJ extends eJ{constructor(t,n){switch(super(),this.context=t,Object.assign(this,n),this.internalFormat){case Ge.R16F:case Ge.R16I:case Ge.R16UI:case Ge.R32F:case Ge.R32I:case Ge.R32UI:case Ge.R8_SNORM:case Ge.R8:case Ge.R8I:case Ge.R8UI:this.pixelFormat=un.RED}}static validate(t,n){return new tJ(t,n)}},nJ=class to{constructor(t,n=null,r=null){if(this.type=EA.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,"context"in t)this._descriptor=t,r=n;else{const i=fTe.validate(t,n);if(!i)throw new Y("Texture descriptor invalid");this._descriptor=i}this._descriptor.target===io.TEXTURE_CUBE_MAP?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return pTe(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._glName&&this._descriptor.context.instanceCounter.decrement(XT.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(t,n){const r=this._descriptor;if(r.width!==t||r.height!==n){if(this._wasImmutablyAllocated)throw new Y("Immutable textures can't be resized!");r.width=t,r.height=n,this._descriptor.target===io.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}_setDataCubeMap(t=null){for(let n=io.TEXTURE_CUBE_MAP_POSITIVE_X;n<=io.TEXTURE_CUBE_MAP_NEGATIVE_Z;n++)this._setData(t,n)}setData(t){this._setData(t)}_setData(t,n){var f;const r=(f=this._descriptor.context)==null?void 0:f.gl;if(!r)return;zm(r),this._glName||(this._glName=r.createTexture(),this._glName&&this._descriptor.context.instanceCounter.increment(XT.Texture,this));const i=this._descriptor,s=n??i.target,o=iw(s),a=this._descriptor.context.bindTexture(this,to.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(to.TEXTURE_UNIT_FOR_UPDATES),pS(i),this._configurePixelStorage(),zm(r);const h=this._deriveInternalFormat();if(Z8(t)){let _="width"in t?t.width:t.codedWidth,w="height"in t?t.height:t.codedHeight;const b=1;t instanceof HTMLVideoElement&&(_=t.videoWidth,w=t.videoHeight),i.width&&i.height,o&&i.depth,i.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(s,h,i.hasMipmap,_,w,b),this._texImage(s,0,h,_,w,b,t),zm(r),i.hasMipmap&&(this.generateMipmap(),zm(r)),i.width||(i.width=_),i.height||(i.height=w),o&&!i.depth&&(i.depth=b)}else{const{width:_,height:w,depth:b}=i;if(_==null||w==null)throw new Y("Width and height must be specified!");if(o&&b==null)throw new Y("Depth must be specified!");if(i.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(s,h,i.hasMipmap,_,w,b),z2(t)){const T=t.levels,M=J8(s,_,w,b),I=Math.min(M-1,T.length-1);r.texParameteri(i.target,this._descriptor.context.gl.TEXTURE_MAX_LEVEL,I);const C=h;if(!gTe(C))throw new Y("Attempting to use compressed data with an uncompressed format!");this._forEachMipmapLevel((N,j,z,U)=>{const K=T[Math.min(N,T.length-1)];this._compressedTexImage(s,N,C,j,z,U,K)},I)}else this._texImage(s,0,h,_,w,b,t),zm(r),i.hasMipmap&&this.generateMipmap()}H8(r,this._descriptor),W8(r,this._descriptor),mTe(this._descriptor.context,this._descriptor),zm(r),this._descriptor.context.bindTexture(a,to.TEXTURE_UNIT_FOR_UPDATES)}updateData(t,n,r,i,s,o,a=0){o||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const h=this._descriptor,f=this._deriveInternalFormat(),{context:_,pixelFormat:w,dataType:b,target:T,isImmutable:M}=h;if(M&&!this._wasImmutablyAllocated)throw new Y("Cannot update immutable texture before allocation!");const I=_.bindTexture(this,to.TEXTURE_UNIT_FOR_UPDATES,!0);(n<0||r<0||n+i>h.width||r+s>h.height)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:C}=_;a&&C.pixelStorei(C.UNPACK_SKIP_ROWS,a),Z8(o)?C.texSubImage2D(T,t,n,r,i,s,w,b,o):z2(o)?C.compressedTexSubImage2D(T,t,n,r,i,s,f,o.levels[t]):C.texSubImage2D(T,t,n,r,i,s,w,b,o),a&&C.pixelStorei(C.UNPACK_SKIP_ROWS,0),_.bindTexture(I,to.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(t,n,r,i,s,o,a,h){h||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const f=this._descriptor,_=this._deriveInternalFormat(),{context:w,pixelFormat:b,dataType:T,isImmutable:M,target:I}=f;if(M&&!this._wasImmutablyAllocated)throw new Y("Cannot update immutable texture before allocation!");iw(I)||console.warn("Attempting to set 3D texture data on a non-3D texture");const C=w.bindTexture(this,to.TEXTURE_UNIT_FOR_UPDATES);w.setActiveTexture(to.TEXTURE_UNIT_FOR_UPDATES),(n<0||r<0||i<0||n+s>f.width||r+o>f.height||i+a>f.depth)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:N}=w;if(z2(h))h=h.levels[t],N.compressedTexSubImage3D(I,t,n,r,i,s,o,a,_,h);else{const j=h;N.texSubImage3D(I,t,n,r,i,s,o,a,b,T,j)}w.bindTexture(C,to.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new Y("Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,pS(t)}t.samplingMode===ar.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=ar.LINEAR_MIPMAP_NEAREST):t.samplingMode===ar.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=ar.NEAREST_MIPMAP_NEAREST);const n=this._descriptor.context.bindTexture(this,to.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(to.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(t.target),this._descriptor.context.bindTexture(n,to.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const t=this._descriptor;if(t.hasMipmap){if(this._wasImmutablyAllocated)throw new Y("Cannot delete mipmaps to immutable texture after allocation");t.hasMipmap=!1,this._samplingModeDirty=!0,pS(t)}t.samplingMode===ar.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,t.samplingMode=ar.LINEAR):t.samplingMode===ar.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=ar.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,pS(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._descriptor,n=t.context.gl;this._samplingModeDirty&&(H8(n,t),this._samplingModeDirty=!1),this._wrapModeDirty&&(W8(n,t),this._wrapModeDirty=!1)}_deriveInternalFormat(){if(this._descriptor.internalFormat!=null)return this._descriptor.internalFormat===un.DEPTH_STENCIL&&(this._descriptor.internalFormat=un.DEPTH24_STENCIL8),this._descriptor.internalFormat;switch(this._descriptor.dataType){case b0.FLOAT:switch(this._descriptor.pixelFormat){case un.RGBA:return this._descriptor.internalFormat=Ge.RGBA32F;case un.RGB:return this._descriptor.internalFormat=Ge.RGB32F;default:throw new Y("Unable to derive format")}case b0.UNSIGNED_BYTE:switch(this._descriptor.pixelFormat){case un.RGBA:return this._descriptor.internalFormat=Ge.RGBA8;case un.RGB:return this._descriptor.internalFormat=Ge.RGB8}}return this._descriptor.internalFormat=this._descriptor.pixelFormat===un.DEPTH_STENCIL?un.DEPTH24_STENCIL8:this._descriptor.pixelFormat}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:n,flipped:r,preMultiplyAlpha:i}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,n),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i?1:0)}_texStorage(t,n,r,i,s,o){const{gl:a}=this._descriptor.context;if(!yTe(n))throw new Y("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const h=r?J8(t,i,s,o):1;if(iw(t)){if(o==null)throw new Y("Missing depth dimension for 3D texture upload");a.texStorage3D(t,h,n,i,s,o)}else a.texStorage2D(t,h,n,i,s);this._wasImmutablyAllocated=!0}_texImage(t,n,r,i,s,o,a){const h=this._descriptor.context.gl,f=iw(t),{isImmutable:_,pixelFormat:w,dataType:b}=this._descriptor;if(_){if(a!=null){const T=a;if(f){if(o==null)throw new Y("Missing depth dimension for 3D texture upload");h.texSubImage3D(t,n,0,0,0,i,s,o,w,b,T)}else h.texSubImage2D(t,n,0,0,i,s,w,b,T)}}else{const T=a;if(f){if(o==null)throw new Y("Missing depth dimension for 3D texture upload");h.texImage3D(t,n,r,i,s,o,0,w,b,T)}else h.texImage2D(t,n,r,i,s,0,w,b,T)}}_compressedTexImage(t,n,r,i,s,o,a){const h=this._descriptor.context.gl,f=iw(t);if(this._descriptor.isImmutable){if(a!=null)if(f){if(o==null)throw new Y("Missing depth dimension for 3D texture upload");h.compressedTexSubImage3D(t,n,0,0,0,i,s,o,r,a)}else h.compressedTexSubImage2D(t,n,0,0,i,s,r,a)}else if(f){if(o==null)throw new Y("Missing depth dimension for 3D texture upload");h.compressedTexImage3D(t,n,r,i,s,o,0,a)}else h.compressedTexImage2D(t,n,r,i,s,0,a)}_forEachMipmapLevel(t,n=1/0){let{width:r,height:i,depth:s,hasMipmap:o,target:a}=this._descriptor;const h=a===io.TEXTURE_3D;if(r==null||i==null||h&&s==null)throw new Y("Missing texture dimensions for mipmap calculation");for(let f=0;t(f,r,i,s),o&&(r!==1||i!==1||h&&s!==1)&&!(f>=n);++f)r=Math.max(1,r>>1),i=Math.max(1,i>>1),h&&(s=Math.max(1,s>>1))}};function pS(e){(e.width!=null&&e.width<0||e.height!=null&&e.height<0||e.depth!=null&&e.depth<0)&&console.error("Negative dimension parameters are not allowed!")}function H8(e,t){let n=t.samplingMode,r=t.samplingMode;n===ar.LINEAR_MIPMAP_NEAREST||n===ar.LINEAR_MIPMAP_LINEAR?(n=ar.LINEAR,t.hasMipmap||(r=ar.LINEAR)):n!==ar.NEAREST_MIPMAP_NEAREST&&n!==ar.NEAREST_MIPMAP_LINEAR||(n=ar.NEAREST,t.hasMipmap||(r=ar.NEAREST)),e.texParameteri(t.target,e.TEXTURE_MAG_FILTER,n),e.texParameteri(t.target,e.TEXTURE_MIN_FILTER,r)}function W8(e,t){typeof t.wrapMode=="number"?(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode.t))}function mTe(e,t){const n=e.capabilities.textureFilterAnisotropic;n&&e.gl.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}function yTe(e){return e in Ge}function gTe(e){return e in Rr}function z2(e){return e!=null&&"type"in e&&e.type==="compressed"}function _Te(e){return e!=null&&"byteLength"in e}function Z8(e){return e!=null&&!z2(e)&&!_Te(e)}function iw(e){return e===io.TEXTURE_3D||e===io.TEXTURE_2D_ARRAY}function J8(e,t,n,r=1){let i=Math.max(t,n);return e===io.TEXTURE_3D&&(i=Math.max(i,r)),Math.round(Math.log(i)/Math.LN2)+1}nJ.TEXTURE_UNIT_FOR_UPDATES=0;const II=()=>fe.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function wTe(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-e.haloBlur)*e.haloWidth,t.outerHaloWidth=e.haloBlur*e.haloWidth/2,t.innerHaloWidth=e.haloBlur*e.haloWidth/2,t.outlinePosition=0}const vTe=[0,0,0,0];let rJ=class{constructor(){this.type="single",this._highlightOptions=new vf,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*rw),this._minMaxDistance=[0,0]}setHighlightOptions(t){this._highlightOptions=t}applyHighlightOptions(t,n){this._updateGradientTexture(t),t.bindTexture(this._shadeTex,Y2e),n.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var t;(t=this._shadeTex)==null||t.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<KZ)-1,activeGradient:this}]}_updateGradientTexture(t){const{optionsKey:n}=this._highlightOptions;if(n===this._optionsShadeTexKey)return;this._optionsShadeTexKey=n,wTe(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,i=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,s=r.outlinePosition-r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,h=Math.sqrt(Math.PI/2)*eTe,f=Math.abs(i)>h?Math.round(10*(Math.abs(i)-h))/10:0,_=Math.abs(a)>h?Math.round(10*(Math.abs(a)-h))/10:0;let w;f&&!_?II().error("The outer rim of the highlight is "+f+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!f&&_?II().error("The inner rim of the highlight is "+_+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):f&&_&&II().error("The highlight is "+Math.max(f,_)+"px away from the edge of the feature; consider reducing some width values.");const b=[void 0,void 0,void 0,void 0];function T(I,C,N){b[0]=(1-N)*I[0]+N*C[0],b[1]=(1-N)*I[1]+N*C[1],b[2]=(1-N)*I[2]+N*C[2],b[3]=(1-N)*I[3]+N*C[3]}const{_texelData:M}=this;for(let I=0;I<rw;++I)w=i+I/(rw-1)*(a-i),w<i?(b[0]=0,b[1]=0,b[2]=0,b[3]=0):w<s?T(vTe,r.outlineColor,(w-i)/(s-i)):w<o?[b[0],b[1],b[2],b[3]]=r.outlineColor:w<a?T(r.outlineColor,r.fillColor,(w-o)/(a-o)):[b[0],b[1],b[2],b[3]]=r.fillColor,M[4*I]=255*b[0],M[4*I+1]=255*b[1],M[4*I+2]=255*b[2],M[4*I+3]=255*b[3];if(this._minMaxDistance[0]=i,this._minMaxDistance[1]=a,!this._shadeTex){const I=new eJ;I.wrapMode=KT.CLAMP_TO_EDGE,I.width=rw,I.height=1,this._shadeTex=new nJ(t,I)}this._shadeTex.updateData(0,0,0,rw,1,this._texelData)}},bTe=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(t){for(let n=0;n<t.length;n++)this.gradients[n]||(this.gradients[n]=new rJ),this.gradients[n].setHighlightOptions(t[n].options);for(let n=t.length+1;n<this.gradients.length;n++)this.gradients[n].destroy();this.gradients.length=t.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const n=[];for(let r=0;r<this.gradients.length;r++){const i=this.gradients[r];n.push({activeReasons:t,activeGradient:i}),t<<=1}return n}};var Y8,K8,X8,Q8,ez,tz,QT,nz,rz;(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"})(Y8||(Y8={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(K8||(K8={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}(X8||(X8={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(Q8||(Q8={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(ez||(ez={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIMPLE=1]="SIMPLE",e[e.DOT_DENSITY=2]="DOT_DENSITY",e[e.OUTLINE_FILL=3]="OUTLINE_FILL",e[e.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",e[e.HEATMAP=5]="HEATMAP",e[e.PIE_CHART=6]="PIE_CHART"}(tz||(tz={})),function(e){e[e.All=0]="All",e[e.Highlight=1]="Highlight",e[e.InsideEffect=2]="InsideEffect",e[e.OutsideEffect=3]="OutsideEffect"}(QT||(QT={})),function(e){e[e.BATCHING=0]="BATCHING",e[e.STRICT_ORDER=1]="STRICT_ORDER",e[e.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(nz||(nz={})),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT"}(rz||(rz={}));const iJ={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:xA.EQUAL,mask:255,op:{fail:qv.KEEP,zFail:qv.KEEP,zPass:qv.REPLACE}}}},STe={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},TTe={...iJ,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function xTe({pixelRatio:e,state:t,displayLevel:n,requiredLevel:r},i){const s=1/2**(n-i.key.level),o=1/2**(r-i.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:i.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:i.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:o,tileOffset:[i.x,i.y],currentScale:t.scale,currentZoom:n,metersPerSRUnit:Zd(t.spatialReference),rotation:t.rotation,pixelRatio:e}}function sJ(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="highlight"}function oJ(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="hittest"}function ETe(e){if(!oJ(e))return null;const{position:t,distance:n,smallSymbolDistance:r,smallSymbolSizeThreshold:i}=e.passOptions;return{position:t,distance:n,smallSymbolDistance:r,smallSymbolSizeThreshold:i}}function $Te(e){if(!sJ(e))return null;const{activeReasons:t,highlightAll:n}=e.passOptions;return{activeReasons:t,highlightAll:n?1:0}}function tLe(e,t,n){const r={};for(const i in n)n[i]instanceof Function?r[i]=n[i](e,t):r[i]=n[i];return r}function nLe(e,t){const{attributeView:n,context:r}=e;return{storage:n.getUniforms(r),view:xTe(e,t),hittestRequest:ETe(e),highlight:$Te(e)}}function rLe(e){return{inside:e.selection===QT.InsideEffect,outside:e.selection===QT.OutsideEffect}}function MTe(e){return oJ(e)?STe:sJ(e)&&e.passOptions.stepType==="clear"?TTe:iJ}function iLe(e){const{row:t,col:n}=e.key,r=n*M8,i=t*M8;return{tileOffsetFromLocalOrigin:[r%hS,i%hS],maxIntsToLocalOrigin:[Math.floor(r/hS),Math.floor(i/hS)]}}const ITe=new pt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function sLe(e){return ITe.toJSON(e)}function oLe(e){const{bandCount:t,attributeTable:n,colormap:r,pixelType:i}=e.raster.rasterInfo;return t===1&&(n!=null||r!=null||i==="u8"||i==="s8")}function PTe(e,t){return t==null?(e==null||e.destroy(),null):((e==null?void 0:e.type)==="single"&&Array.isArray(t)&&(e.destroy(),e=null),(e==null?void 0:e.type)!=="multi"||Array.isArray(t)||(e.destroy(),e=null),e||(e=Array.isArray(t)?new bTe:new rJ),Array.isArray(t)?e.type==="multi"&&e.setHighlightOptions(t):e.type==="single"&&e.setHighlightOptions(t),e)}function aLe(e,t,n,r){const{painter:i,highlightGradient:s}=e,{highlight:o}=i.effects;if(!s)return;const a=e.passOptions,h=s.getReasonsWithGradients();for(let f=0;f<h.length;f++){const _={...e,passOptions:{type:"highlight",activeGradient:r!=null?h[r].activeGradient:h[f].activeGradient,activeReasons:h[f].activeReasons,stepType:"burn",highlightAll:t}};if(o.bind(_),n(_),f<h.length-1){let b=0;for(let T=f+1;T<h.length;T++)b|=h[T].activeReasons;n({...e,passOptions:{type:"highlight",activeGradient:r!=null?h[r].activeGradient:h[f].activeGradient,activeReasons:b,stepType:"clear",highlightAll:t}})}const w={...e,passOptions:{type:"highlight",activeGradient:r!=null?h[r].activeGradient:h[f].activeGradient,activeReasons:h[f].activeReasons,stepType:"draw",highlightAll:t}};i.setPipelineState(MTe(e)),i.updatePipelineState(e.context),o.draw(w),o.unbind()}e.passOptions=a}const fS=e=>parseFloat(e)/100;function CTe(e,t,n){const r=typeof e.left=="string"?fS(e.left)*t:e.left,i=typeof e.right=="string"?fS(e.right)*t:e.right,s=typeof e.top=="string"?fS(e.top)*n:e.top,o=typeof e.bottom=="string"?fS(e.bottom)*n:e.bottom,a=s;return{xmin:r,xmax:Math.max(t-i,r),ymin:a,ymax:Math.max(n-o,s)}}function aJ(e,t,n,r){switch(t.type){case"rect":{const{width:i,height:s}=e,{xmin:o,xmax:a,ymin:h,ymax:f}=CTe(t,i,s),{x:_,y:w}=n;return _>o&&_<a&&w>h&&w<f}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||_k(t.path,[n.x,n.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?gk(t.geometry,r):R0(t.geometry,r))}}var $A;let Zy=$A=class extends Fe{constructor(...e){super(...e),this.name="default",this.options=new vf}clone(){return new $A({name:this.name,options:this.options.clone()})}};l([p({type:String})],Zy.prototype,"name",void 0),l([p({type:vf})],Zy.prototype,"options",void 0),Zy=$A=l([k("esri.views.2d.support.HighlightGroup")],Zy);const lJ=Ae.ofType(Zy);function uJ(){return new lJ([{name:iTe,options:new vf},{name:sTe,options:new vf({color:oTe})}])}uJ().items.map(e=>e.name);function OTe(e){if(!e.highlights)return null;const t=e.highlights.findIndex(n=>n.name==="default");return t===-1?null:e.highlights.items[t].options}function ATe(e,t){if(!e.highlights){if(!t)return;e.highlights=new lJ([{name:"default",options:new vf}])}const n=e.highlights.findIndex(r=>r.name==="default");t?e.highlights.items[n].options=t:e.highlights.removeAt(n)}async function kTe(e,t,n){const r=RW(t)?kW(e,t):t;if(!e.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let i=new Set;const s=new Set;let o=!1,a=null,h=null;n!=null&&n.include?sz(n.include,iz(e,b=>{i.add(b),PI(b,T=>s.add(T))},(b,T)=>{s.add(b),i.add(T)},b=>{a||(a=new Set),a.add(b)},b=>i.add(b),()=>o=!0)):(o=!0,i=new Set(e.allLayerViews),i.forEach(b=>{PI(b,T=>s.add(T))})),n!=null&&n.exclude&&sz(n.exclude,iz(e,b=>{i.delete(b),PI(b,T=>s.delete(T))},b=>s.delete(b),b=>{h||(h=new Set),h.add(b)}));const f=e.toMap(r),_=e.allLayerViews.filter(b=>!b.suspended&&i.has(b)&&b.clips.every(T=>aJ(e,T,r,f))).reverse();let w=[...o?e.graphicsView.hitTest(f).map(b=>({type:"graphic",graphic:b,layer:null,mapPoint:f})):[],...await Promise.all(_.map(b=>b.hitTest(f,r)).toArray())].filter(Dd).flat().filter(Dd);return w=w.filter(b=>{var T;return b.type!=="graphic"||((T=b.layer)==null?void 0:T.type)!=="subtype-group"||s.has(b.graphic.layer)}),a&&(w=w.filter(b=>!("graphic"in b)||!b.graphic||(a==null?void 0:a.has(MA(b.graphic))))),h&&(w=w.filter(b=>!("graphic"in b)||!b.graphic||!(h!=null&&h.has(MA(b.graphic))))),{screenPoint:r,results:w}}function iz(e,t,n,r,i,s){return o=>{if(o instanceof yl){if(o.layer===e)s==null||s();else{const a=e.allLayerViews.find(h=>h.layer===o.layer);a&&(i==null||i(a))}r(MA(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=e.allLayerViews.find(h=>h.layer===o.parent);a&&n(o,a)}else{const a=e.allLayerViews.find(h=>h.layer===o);a&&t(a)}}}function sz(e,t){if(e)if(W2(e))for(const n of e)if(W2(n))for(const r of n)t(r);else t(n);else t(e)}function MA(e){var n,r;const t=e.getObjectId();return t?`${((n=e.layer)==null?void 0:n.uid)??((r=e.sourceLayer)==null?void 0:r.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function PI({layer:e},t){(e==null?void 0:e.type)==="subtype-group"&&e.sublayers.forEach(n=>{t(n)})}let sw=null,ex=!0;function RTe(e,t,n){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(ex)try{return new ImageData(e,t)}catch{ex=!1}return cJ(e,t,n)}function lLe(e,t,n,r){if(!t||!n)throw new Error("Cannot construct image data without dimensions");if(ex)try{return new ImageData(e,t,n)}catch{ex=!1}const i=cJ(t,n,r);return i.data.set(e,0),i}function LTe(){return sw||(sw=document.createElement("canvas"),sw.width=1,sw.height=1),sw}function cJ(e,t,n){return n||(n=LTe()),n.getContext("2d").createImageData(e,t)}async function NTe(e,t){const n=window.URL.createObjectURL(e);try{const{data:r}=await Lt(n,{...t,responseType:"image"});return r}catch(r){throw li(r)?r:new Y("invalid-image",`Could not fetch requested image at ${n}`)}finally{window.URL.revokeObjectURL(n)}}async function uLe(e,t){const{arrayBuffer:n,mediaType:r}=await DTe(e,t),i=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:s,parseGif:o}=await pe(()=>import("./gif-YRK0T5jm.js"),[]);if(s(n))return o(n,t)}if(i){const{isAnimatedPNG:s,parseApng:o}=await pe(()=>import("./apng-DK0vyQ6X.js"),__vite__mapDeps([238,3]));if(s(n))return o(n,t)}return NTe(new Blob([n],{type:r}),t)}async function DTe(e,t){var i;const n=of(e);if(n!=null&&n.isBase64)return{arrayBuffer:gU(n.data),mediaType:n.mediaType};const r=await Lt(e,{responseType:"array-buffer",...t});return{arrayBuffer:r.data,mediaType:((i=r.getHeader)==null?void 0:i.call(r,"Content-Type"))??""}}function dJ(e,t,n){const{ctx:r,canvas:i}=pJ(e,n),s=r.getImageData(0,0,e.width,e.height),o=mJ(i,t);return fJ(i),{dataUrl:o,data:s}}function hJ(e,t){const{ctx:n,canvas:r}=pJ(e,t),i=n.getImageData(0,0,e.width,e.height);return fJ(r),i}function pJ(e,t){const n=FTe();t.premultipliedAlpha&&UTe(e),n.width=e.width,n.height=e.height;const r=n.getContext("2d",{willReadFrequently:!0});return r.putImageData(e,0,0),t.flipY&&VTe(r),{ctx:r,canvas:n}}function fJ(e){e.width=0,e.height=0}function FTe(){return CI==null&&(CI=document.createElement("canvas")),CI}let CI=null;function mJ(e,t){const n=GTe[t.format],r=t.quality/100;return e.toDataURL(n,r)}function yJ(e,t){const n=zTe(e),r=qTe[n];return{format:n,quality:po(t??r,0,100)}}function gJ(e,t){return t/Math.max(e[0],e[1])}function jTe(e,t,n,r=0,i=0,s=e.width-r,o=e.height-i,a=!1){const{data:h}=e,{width:f,height:_,data:w}=t,b=s/f,T=o/_,M=Math.ceil(b/2),I=Math.ceil(T/2),C=e.width;for(let N=0;N<_;N++)for(let j=0;j<f;j++){const z=4*(j+(a?_-N-1:N)*f);let U=0,K=0,J=0,le=0,ue=0,be=0;const xe=(N+.5)*T;for(let _e=Math.floor(N*T);_e<(N+1)*T;_e++){const $e=Math.abs(xe-(_e+.5))/I,je=(j+.5)*b,Me=$e*$e;for(let Et=Math.floor(j*b);Et<(j+1)*b;Et++){const wt=Math.abs(je-(Et+.5))/M,Je=Math.sqrt(Me+wt*wt);if(Je>=1)continue;let re=2*Je*Je*Je-3*Je*Je+1;const Ne=4*(r+Et+(i+_e)*C);be+=re*h[Ne+3],K+=re,!n&&h[Ne+3]<255&&(re=re*h[Ne+3]/255),J+=re*h[Ne],le+=re*h[Ne+1],ue+=re*h[Ne+2],U+=re}}w[z]=J/U,w[z+1]=le/U,w[z+2]=ue/U,w[z+3]=be/K}return t}function zTe(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return BTe}}function VTe(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function UTe(e){const t=e.data,n=t.length;for(let r=0;r<n;r+=4){const i=t[r+3];if(i!==255&&i>0){const s=255/i;t[r]=t[r]*s,t[r+1]=t[r+1]*s,t[r+2]=t[r+2]*s}}}const GTe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},oz=98,BTe="png",qTe={png:100,jpg:oz,jpeg:oz},cLe=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:RTe,encode:dJ,encodeData:hJ,getFormatAndQuality:yJ,getMaximumResolutionScale:gJ,resampleHermite:jTe,toDataUrl:mJ},Symbol.toStringTag,{value:"Module"})),_J={flipY:!0,premultipliedAlpha:!0};async function HTe(e,t){const n=await wJ(e,t),{format:r,quality:i}=yJ(t==null?void 0:t.format,t==null?void 0:t.quality);return dJ(n,{format:r,quality:i},_J)}async function WTe(e,t){const n=await wJ(e,t);return hJ(n,_J)}function wJ(e,t){const n=YTe(t||{},JTe(e.stage,e.size),e.size,e.padding),r=ZTe(t,e.allLayerViews);return e.stage.takeScreenshot(n,r,e.backgroundColor,t==null?void 0:t.rotation)}function ZTe(e={},t){if(!e.layers)return;const n=[];return e.layers.forEach(r=>{const i=t.find(s=>s.layer.id===r.id);i!=null&&i.container&&n.push(i.container)}),n}function JTe(e,t){return Math.min(4,gJ(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function YTe(e,t,n,r){e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let i=null;e.width!=null&&e.height!=null?i=[e.width,e.height]:e.width==null&&e.height!=null?i=[e.height,e.height]:e.width!=null&&e.height==null?i=[e.width,e.width]:e.width==null&&e.height==null&&(i=null);const s=n[0]-(r.left+r.right),o=n[1]-(r.top+r.bottom);let a,h,f=e.area||{x:0,y:0,width:s,height:o};if(i){const _=s/o,w=i[0]/i[1];if(w>_){const b=f.width/w;f={x:f.x,y:Math.round(f.y+(f.height-b)/2),width:f.width,height:Math.round(b)}}else{const b=f.height*w;f={x:Math.round(f.x+(f.width-b)/2),y:f.y,width:Math.round(b),height:f.height}}}else i=[f.width,f.height];return i[0]>f.width?(a=Math.min(i[0]/f.width,t),h=i[0]/f.width/a):(a=1,h=i[0]/f.width),{cropArea:{x:Math.round((f.x+r.left)*a),y:Math.round((f.y+r.top)*a),width:Math.round(f.width*a),height:Math.round(f.height*a)},outputScale:h,resolutionScale:a}}const az=160;let _v=class extends Fe{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=az&&this.clear()},az))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};l([p()],_v.prototype,"_timer",void 0),l([p()],_v.prototype,"stationary",null),_v=l([k("esri.views.2d.support.StationaryManager")],_v);const KTe=e=>e.includes("Brush");let vJ=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),KTe(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}},OI;function XTe(){return OI||(OI=txe()),OI}let QTe=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}};function exe(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let n=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(n==null&&(n=t.getContext("webgl2"),n!=null&&(e.majorPerformanceCaveat=!0)),n==null)return n;e.available=!0,e.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);return r&&(e.supportsHighPrecisionFragment=r.precision>0),n}function txe(){const e=new QTe,t=exe(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function nxe(e){const t=XTe();return t.available?e==="3d"&&t.majorPerformanceCaveat?new Y("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new Y("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new Y("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new Y("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function rxe(e){return e&&"nodeType"in e}function ixe(e){return e&&typeof e.render=="function"}const lz={component:"esri-component"};let Dp=class extends Fe{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){var t,n;return this._get("id")??((t=this.widget)==null?void 0:t.id)??((n=this.node)==null?void 0:n.id)}set id(t){this._set("id",t)}set node(t){const n=this._get("node");t!==n&&(t&&t.classList.add(lz.component),n&&n.classList.remove(lz.component),this._set("node",t))}castNode(t){var n;return(n=this.widget)==null||n.destroy(),t?typeof t=="string"||rxe(t)?(this._set("widget",null),YR(t)):(ixe(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};l([p()],Dp.prototype,"id",null),l([p()],Dp.prototype,"node",null),l([kt("node")],Dp.prototype,"castNode",null),l([p({readOnly:!0})],Dp.prototype,"widget",void 0),Dp=l([k("esri.views.ui.Component")],Dp);const V2=Dp,bJ="calcite-mode-";function sxe(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function oxe(){return sxe().startsWith("dark")}function axe(){return`${bJ}${oxe()?"dark":"light"}`}function lxe(e){uxe(e),e.classList.add(axe())}function uxe(e){Array.from(e.classList).forEach(t=>{t.startsWith(bJ)&&e.classList.remove(t)})}const cxe={left:0,top:0,bottom:0,right:0},SJ={bottom:30,top:15,right:15,left:15},Zl="esri-ui",Li={ui:Zl,corner:`${Zl}-corner`,innerContainer:`${Zl}-inner-container`,manualContainer:`${Zl}-manual-container`,cornerContainer:`${Zl}-corner-container`,topLeft:`${Zl}-top-left`,topRight:`${Zl}-top-right`,bottomLeft:`${Zl}-bottom-left`,bottomRight:`${Zl}-bottom-right`};function dxe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function mS(e){return e===0?"0":`${e}px`}function AI(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function kI(e,{top:t,bottom:n,left:r,right:i}){e.style.top=t,e.style.bottom=n,e.style.left=r,e.style.right=i}let Ya=class extends ju.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Zi(),this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&kI(t,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&kI(t,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([ct(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,si),ct(()=>this.padding,this._applyUIPadding,si),ct(()=>[this.container,this._locale],([e,t])=>{e&&e.setAttribute("lang",t)},si),c9(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(Li.ui),lxe(e),this._attachContainers(e)),t&&(t.classList.remove(Li.ui),kI(t,{top:"",bottom:"",left:"",right:""}),t.textContent=""),this._set("container",e))}get height(){var i;const e=((i=this.view)==null?void 0:i.height)??0;if(e===0)return e;const t=this._getViewPadding(),{top:n,bottom:r}=t;return Math.max(e-n-r,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...SJ,...e}}get width(){var i;const e=((i=this.view)==null?void 0:i.width)??0;if(e===0)return e;const t=this._getViewPadding(),{left:n,right:r}=t;return Math.max(e-n-r,0)}add(e,t){let n,r,i;if(Array.isArray(e))return void e.forEach(o=>this.add(o,t));const s=AI(e);s&&({index:n,position:t,component:e,key:r}=s),t&&typeof t=="object"&&({index:n,key:r,position:t,internal:i}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,n,r,i)}remove(e,t){var r,i;if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,t));const n=this._find(e);if(n){if(this._componentMap.has(n)&&((r=this._componentMap.get(n))==null?void 0:r.key)!==t)return;const s=this._components.indexOf(n),o=n.node.parentNode;return o==null||o.removeChild(n.node),this._componentMap.delete(n),(i=n.widget)==null||i.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(s,1)[0]}}empty(e,t={removeInternal:!1}){if(Array.isArray(e)){for(const i of e)this.empty(i,t);return}const n=this._positionNameToContainerLookup[e??"manual"],r=Array.prototype.slice.call(n.children).map(i=>this._findByNode(i)).filter(i=>{var s;return i==null?!1:!(((s=this._componentMap.get(i))==null?void 0:s.internal)??!1)||t.removeInternal});for(const i of r)this.remove(i)}move(e,t){if(Array.isArray(e)&&e.forEach(s=>this.move(s,t)),!e)return;let n;const r=AI(e)||AI(t);if(r&&(n=r.index,t=r.position,e=r.component||e),t&&!this._isValidPosition(t))return;const i=this.remove(e);i&&this.add(i,{position:t,index:n})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getComponents(e,t={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(n=>this._getComponentsAtPosition(n,t)):this._getComponentsAtPosition(e,t):this._components.filter(n=>{var r;return t.includeInternal||!((r=this._componentMap.get(n))!=null&&r.internal)}).map(({widget:n,node:r})=>n??r)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,n,r,i){e instanceof V2||(e=new V2({node:e}));const{widget:s}=e;s!=null&&s instanceof Fe&&s.addHandles(Ft(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey),this._place({component:e,position:t,index:n}),this._components.push(e),this._componentMap.set(e,{key:r,internal:i})}_find(e){return e?e instanceof V2?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??cxe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Li.innerContainer,Li.cornerContainer);const t=document.createElement("div");t.classList.add(Li.innerContainer,Li.manualContainer);const n=document.createElement("div");n.classList.add(Li.topLeft,Li.corner),e.appendChild(n);const r=document.createElement("div");r.classList.add(Li.topRight,Li.corner),e.appendChild(r);const i=document.createElement("div");i.classList.add(Li.bottomLeft,Li.corner),e.appendChild(i);const s=document.createElement("div");s.classList.add(Li.bottomRight,Li.corner),e.appendChild(s),this._innerContainer=e,this._manualContainer=t;const o=Uwe();this._cornerNameToContainerLookup={"top-left":n,"top-right":r,"bottom-left":i,"bottom-right":s,"top-leading":o?r:n,"top-trailing":o?n:r,"bottom-leading":o?s:i,"bottom-trailing":o?i:s},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){var h,f;const t=e.position??"manual",{component:n,index:r}=e,i=this._positionNameToContainerLookup[t],s=r!=null&&r>-1;if(dxe(n.widget)&&n.widget.startup(),!s)return void i.appendChild(n.node);const o=Array.from(i.children);if(r===0){const{firstChild:_}=i;return void(_?(h=_.parentNode)==null?void 0:h.insertBefore(n.node,_):i.appendChild(n.node))}if(r>=o.length)return void i.appendChild(n.node);const a=o[r];(f=a.parentNode)==null||f.insertBefore(n.node,a)}_toPixelPosition(e){return{top:mS(e.top),left:mS(e.left),right:mS(e.right),bottom:mS(e.bottom)}}_findByComponent(e){return this._components.find(t=>t===e)??null}_findById(e){return this._components.find(({id:t})=>t===e)??null}_findByNode(e){return this._components.find(({node:t})=>t===e)??null}_getComponentsAtPosition(e,t){const n=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(n.children).map(r=>this._findByNode(r)).filter(Dd).filter(r=>{var i;return t.includeInternal||!((i=this._componentMap.get(r))!=null&&i.internal)}).map(({widget:r,node:i})=>r??i)}};l([p()],Ya.prototype,"_locale",void 0),l([p()],Ya.prototype,"container",null),l([p()],Ya.prototype,"height",null),l([p({value:SJ})],Ya.prototype,"padding",null),l([kt("padding")],Ya.prototype,"castPadding",null),l([p()],Ya.prototype,"view",void 0),l([p()],Ya.prototype,"width",null),Ya=l([k("esri.views.ui.UI")],Ya);const hxe=Ya,pxe={handleInterceptedEvent:(e,t,n,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||n,[r]))},fxe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,n)=>{t.charAt(0)==="-"?e.style.setProperty(t,n):e.style[t]=n}},mxe=e=>({...fxe,...e}),yxe=(e,t)=>{const n=[];for(;e&&e!==t;)n.push(e),e=e.parentNode;return n},gxe=(e,t)=>e.find(t),uz=(e,t,n=!1)=>{let r=e;return t.forEach((i,s)=>{const o=r!=null&&r.children?gxe(r.children,a=>a.domNode===i):void 0;n&&!o&&s!==t.length-1||(r=o)}),r},_xe=e=>{let t;const n={...pxe,...e},r=mxe(n),i=r.performanceLogger;let s,o=!0,a=!1;const h=[],f=[],_=(b,T,M)=>{var N;let I;r.eventHandlerInterceptor=(j,z,U,K)=>function(J){let le;i("domEvent",J);const ue=yxe(J.currentTarget,I.domNode),be=ue.some(_e=>{var $e;return customElements.get(($e=_e==null?void 0:_e.tagName)==null?void 0:$e.toLowerCase())});if(J.eventPhase===Event.CAPTURING_PHASE||!be)ue.reverse(),le=uz(I.getLastRender(),ue);else{const _e=J.composedPath(),$e=_e.slice(_e.indexOf(J.currentTarget),_e.indexOf(I.domNode)).reverse();le=uz(I.getLastRender(),$e,!0)}let xe;return le&&(xe=n.handleInterceptedEvent(t,le,this,J)),i("domEventProcessed",J),xe},(N=n.postProcessProjectionOptions)==null||N.call(n,r);const C=M();I=b(T,C,r),r.eventHandlerInterceptor=void 0,h.push(I),f.push(M),n.afterFirstVNodeRendered&&n.afterFirstVNodeRendered(I,C)};let w=()=>{if(s=void 0,o){o=!1,i("renderStart",void 0);for(let b=0;b<h.length;b++){const T=f[b]();i("rendered",void 0);try{h[b].update(T)}catch(M){console.error(M)}i("patched",void 0)}i("renderDone",void 0),o=!0}};return n.modifyDoRenderImplementation&&(w=n.modifyDoRenderImplementation(w,h,f)),t={renderNow:w,scheduleRender:()=>{s||a||(s=requestAnimationFrame(w))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(b,T)=>{_(Pd.append,b,T)},insertBefore:(b,T)=>{_(Pd.insertBefore,b,T)},merge:(b,T)=>{_(Pd.merge,b,T)},replace:(b,T)=>{_(Pd.replace,b,T)},detach:b=>{for(let T=0;T<f.length;T++)if(f[T]===b)return f.splice(T,1),h.splice(T,1)[0];throw new Error("renderFunction was not found")}},t};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const wxe="calcite-mode-auto",vxe="calcite-mode-dark",mLe={rtl:"calcite--rtl"},yLe={filter:250,resize:150,reposition:100};var na={hasRenderFn:!0,reflect:!0,scoped:!0,updatable:!0,vdomRender:!0,hydrateServerSide:!1,lazyLoad:!1,slotRelocation:!0,experimentalSlotFixes:!1},bxe=Object.defineProperty,Sxe=(e,t)=>{for(var n in t)bxe(e,n,{get:t[n],enumerable:!0})},TJ=new WeakMap,Of=e=>TJ.get(e),Txe=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return TJ.set(e,n)},cz=(e,t)=>t in e,e1=(e,t)=>(0,console.error)(e,t),tx=new Map,xxe=[],Exe="slot-fb{display:contents}slot-fb[hidden]{display:none}",dz="http://www.w3.org/1999/xlink",t1=typeof window<"u"?window:{},aa=t1.document||{head:{}},gLe=t1.HTMLElement||class{},Ir={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},$xe=(()=>{let e=!1;try{aa.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),Mxe=e=>Promise.resolve(e),Ixe=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),IA=!1,PA=[],xJ=[],EJ=(e,t)=>n=>{e.push(n),IA||(IA=!0,t&&Ir.$flags$&4?Pxe(CA):Ir.raf(CA))},hz=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){e1(n)}e.length=0},CA=()=>{hz(PA),hz(xJ),(IA=PA.length>0)&&Ir.raf(CA)},Pxe=e=>Mxe().then(e),_Le=EJ(PA,!1),Cxe=EJ(xJ,!0),Oxe=e=>{const t=new URL(e,Ir.$resourcesUrl$);return t.origin!==t1.location.origin?t.href:t.pathname},Axe=e=>Ir.$resourcesUrl$=e,pz={},kxe="http://www.w3.org/2000/svg",Rxe="http://www.w3.org/1999/xhtml",Lxe=e=>e!=null,fL=e=>(e=typeof e,e==="object"||e==="function");function Nxe(e){var t,n,r;return(r=(n=(t=e.head)==null?void 0:t.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?r:void 0}var Dxe={};Sxe(Dxe,{err:()=>$J,map:()=>Fxe,ok:()=>OA,unwrap:()=>jxe,unwrapErr:()=>zxe});var OA=e=>({isOk:!0,isErr:!1,value:e}),$J=e=>({isOk:!1,isErr:!0,value:e});function Fxe(e,t){if(e.isOk){const n=t(e.value);return n instanceof Promise?n.then(r=>OA(r)):OA(n)}if(e.isErr){const n=e.value;return $J(n)}throw"should never get here"}var jxe=e=>{if(e.isOk)return e.value;throw e.value},zxe=e=>{if(e.isErr)return e.value;throw e.value},bf=(e,t="")=>()=>{},MJ=(e,t,...n)=>{let r=null,i=null,s=null,o=!1,a=!1;const h=[],f=w=>{for(let b=0;b<w.length;b++)r=w[b],Array.isArray(r)?f(r):r!=null&&typeof r!="boolean"&&((o=typeof e!="function"&&!fL(r))&&(r=String(r)),o&&a?h[h.length-1].$text$+=r:h.push(o?nx(null,r):r),a=o)};if(f(n),t){t.key&&(i=t.key),t.name&&(s=t.name);{const w=t.className||t.class;w&&(t.class=typeof w!="object"?w:Object.keys(w).filter(b=>w[b]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,h,Gxe);const _=nx(e,null);return _.$attrs$=t,h.length>0&&(_.$children$=h),_.$key$=i,_.$name$=s,_},nx=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return n.$attrs$=null,n.$key$=null,n.$name$=null,n},Vxe={},Uxe=e=>e&&e.$tag$===Vxe,Gxe={forEach:(e,t)=>e.map(fz).forEach(t),map:(e,t)=>e.map(fz).map(t).map(Bxe)},fz=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),Bxe=e=>{if(typeof e.vtag=="function"){const n={...e.vattrs};return e.vkey&&(n.key=e.vkey),e.vname&&(n.name=e.vname),MJ(e.vtag,n,...e.vchildren||[])}const t=nx(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},qxe=e=>xxe.map(t=>t(e)).find(t=>!!t),Hxe=(e,t)=>e!=null&&!fL(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,Wxe=e=>e,wLe=(e,t,n)=>{const r=Wxe(e);return{emit:i=>Zxe(r,t,{bubbles:!!(n&4),composed:!!(n&2),cancelable:!!(n&1),detail:i})}},Zxe=(e,t,n)=>{const r=Ir.ce(t,n);return e.dispatchEvent(r),r},mz=new WeakMap,Jxe=(e,t,n)=>{let r=tx.get(e);Ixe&&n?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,tx.set(e,r)},Yxe=(e,t,n)=>{var r;const i=IJ(t,n),s=tx.get(i);if(e=e.nodeType===11?e:aa,s)if(typeof s=="string"){e=e.head||e;let o=mz.get(e),a;if(o||mz.set(e,o=new Set),!o.has(i)){{a=aa.createElement("style"),a.innerHTML=s;const h=(r=Ir.$nonce$)!=null?r:Nxe(aa);h!=null&&a.setAttribute("nonce",h),(!(t.$flags$&1)||t.$flags$&1&&e.nodeName!=="HEAD")&&e.insertBefore(a,e.querySelector("link"))}t.$flags$&4&&(a.innerHTML+=Exe),o&&o.add(i)}}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return i},Kxe=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,i=bf("attachStyles",t.$tagName$),s=Yxe(n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$);r&10&&r&2&&(n["s-sc"]=s,n.classList.add(s+"-h"),r&2&&n.classList.add(s+"-s")),i()},IJ=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),yz=(e,t,n,r,i,s)=>{if(n!==r){let o=cz(e,t),a=t.toLowerCase();if(t==="class"){const h=e.classList,f=gz(n),_=gz(r);h.remove(...f.filter(w=>w&&!_.includes(w))),h.add(..._.filter(w=>w&&!f.includes(w)))}else if(t==="style"){for(const h in n)(!r||r[h]==null)&&(h.includes("-")?e.style.removeProperty(h):e.style[h]="");for(const h in r)(!n||r[h]!==n[h])&&(h.includes("-")?e.style.setProperty(h,r[h]):e.style[h]=r[h])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n"){if(t[2]==="-"?t=t.slice(3):cz(t1,a)?t=a.slice(2):t=a[2]+t.slice(3),n||r){const h=t.endsWith(PJ);t=t.replace(Qxe,""),n&&Ir.rel(e,t,n,h),r&&Ir.ael(e,t,r,h)}}else{const h=fL(r);if((o||h&&r!==null)&&!i)try{if(e.tagName.includes("-"))e[t]=r;else{const _=r??"";t==="list"?o=!1:(n==null||e[t]!=_)&&(e[t]=_)}}catch{}let f=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,f=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(f?e.removeAttributeNS(dz,t):e.removeAttribute(t)):(!o||s&4||i)&&!h&&(r=r===!0?"":r,f?e.setAttributeNS(dz,t,r):e.setAttribute(t,r))}}},Xxe=/\s/,gz=e=>e?e.split(Xxe):[],PJ="Capture",Qxe=new RegExp(PJ+"$"),CJ=(e,t,n)=>{const r=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,i=e&&e.$attrs$||pz,s=t.$attrs$||pz;for(const o of _z(Object.keys(i)))o in s||yz(r,o,i[o],void 0,n,t.$flags$);for(const o of _z(Object.keys(s)))yz(r,o,i[o],s[o],n,t.$flags$)};function _z(e){return e.includes("ref")?[...e.filter(t=>t!=="ref"),"ref"]:e}var Ny,AA,S0,rx=!1,ix=!1,mL=!1,_s=!1,sx=(e,t,n,r)=>{var i;const s=t.$children$[n];let o=0,a,h,f;if(rx||(mL=!0,s.$tag$==="slot"&&(Ny&&r.classList.add(Ny+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)a=s.$elm$=aa.createTextNode(s.$text$);else if(s.$flags$&1)a=s.$elm$=aa.createTextNode("");else{if(_s||(_s=s.$tag$==="svg"),a=s.$elm$=aa.createElementNS(_s?kxe:Rxe,!rx&&na.slotRelocation&&s.$flags$&2?"slot-fb":s.$tag$),_s&&s.$tag$==="foreignObject"&&(_s=!1),CJ(null,s,_s),!!a.getRootNode().querySelector("body")&&na.scoped&&Lxe(Ny)&&a["s-si"]!==Ny&&a.classList.add(a["s-si"]=Ny),gL(a,r),s.$children$)for(o=0;o<s.$children$.length;++o)h=sx(e,s,o,a),h&&a.appendChild(h);s.$tag$==="svg"?_s=!1:a.tagName==="foreignObject"&&(_s=!0)}return a["s-hn"]=S0,s.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=AA,a["s-sn"]=s.$name$||"",a["s-rf"]=(i=s.$attrs$)==null?void 0:i.ref,f=e&&e.$children$&&e.$children$[n],f&&f.$tag$===s.$tag$&&e.$elm$&&T0(e.$elm$,!1)),a},T0=(e,t)=>{Ir.$flags$|=1;const n=Array.from(e.childNodes);e["s-sr"]&&na.experimentalSlotFixes;for(let r=n.length-1;r>=0;r--){const i=n[r];i["s-hn"]!==S0&&i["s-ol"]&&(Nd(kJ(i),i,yL(i)),i["s-ol"].remove(),i["s-ol"]=void 0,i["s-sh"]=void 0,mL=!0),t&&T0(i,t)}Ir.$flags$&=-2},OJ=(e,t,n,r,i,s)=>{let o=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(o.shadowRoot&&o.tagName===S0&&(o=o.shadowRoot);i<=s;++i)r[i]&&(a=sx(null,n,i,e),a&&(r[i].$elm$=a,Nd(o,a,yL(t))))},AJ=(e,t,n)=>{for(let r=t;r<=n;++r){const i=e[r];if(i){const s=i.$elm$;NJ(i),s&&(ix=!0,s["s-ol"]?s["s-ol"].remove():T0(s,!0),s.remove())}}},eEe=(e,t,n,r,i=!1)=>{let s=0,o=0,a=0,h=0,f=t.length-1,_=t[0],w=t[f],b=r.length-1,T=r[0],M=r[b],I,C;for(;s<=f&&o<=b;)if(_==null)_=t[++s];else if(w==null)w=t[--f];else if(T==null)T=r[++o];else if(M==null)M=r[--b];else if(yS(_,T,i))Dy(_,T,i),_=t[++s],T=r[++o];else if(yS(w,M,i))Dy(w,M,i),w=t[--f],M=r[--b];else if(yS(_,M,i))(_.$tag$==="slot"||M.$tag$==="slot")&&T0(_.$elm$.parentNode,!1),Dy(_,M,i),Nd(e,_.$elm$,w.$elm$.nextSibling),_=t[++s],M=r[--b];else if(yS(w,T,i))(_.$tag$==="slot"||M.$tag$==="slot")&&T0(w.$elm$.parentNode,!1),Dy(w,T,i),Nd(e,w.$elm$,_.$elm$),w=t[--f],T=r[++o];else{for(a=-1,h=s;h<=f;++h)if(t[h]&&t[h].$key$!==null&&t[h].$key$===T.$key$){a=h;break}a>=0?(C=t[a],C.$tag$!==T.$tag$?I=sx(t&&t[o],n,a,e):(Dy(C,T,i),t[a]=void 0,I=C.$elm$),T=r[++o]):(I=sx(t&&t[o],n,o,e),T=r[++o]),I&&Nd(kJ(_.$elm$),I,yL(_.$elm$))}s>f?OJ(e,r[b+1]==null?null:r[b+1].$elm$,n,r,o,b):o>b&&AJ(t,s,f)},yS=(e,t,n=!1)=>e.$tag$===t.$tag$?e.$tag$==="slot"?"$nodeId$"in e&&n&&e.$elm$.nodeType!==8?!1:e.$name$===t.$name$:n?!0:e.$key$===t.$key$:!1,yL=e=>e&&e["s-ol"]||e,kJ=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Dy=(e,t,n=!1)=>{const r=t.$elm$=e.$elm$,i=e.$children$,s=t.$children$,o=t.$tag$,a=t.$text$;let h;a===null?(_s=o==="svg"?!0:o==="foreignObject"?!1:_s,o==="slot"&&!rx||CJ(e,t,_s),i!==null&&s!==null?eEe(r,i,t,s,n):s!==null?(e.$text$!==null&&(r.textContent=""),OJ(r,null,t,s,0,s.length-1)):!n&&na.updatable&&i!==null&&AJ(i,0,i.length-1),_s&&o==="svg"&&(_s=!1)):(h=r["s-cr"])?h.parentNode.textContent=a:e.$text$!==a&&(r.data=a)},RJ=e=>{const t=e.childNodes;for(const n of t)if(n.nodeType===1){if(n["s-sr"]){const r=n["s-sn"];n.hidden=!1;for(const i of t)if(i!==n){if(i["s-hn"]!==n["s-hn"]||r!==""){if(i.nodeType===1&&(r===i.getAttribute("slot")||r===i["s-sn"])||i.nodeType===3&&r===i["s-sn"]){n.hidden=!0;break}}else if(i.nodeType===1||i.nodeType===3&&i.textContent.trim()!==""){n.hidden=!0;break}}}RJ(n)}},Pu=[],LJ=e=>{let t,n,r;for(const i of e.childNodes){if(i["s-sr"]&&(t=i["s-cr"])&&t.parentNode){n=t.parentNode.childNodes;const s=i["s-sn"];for(r=n.length-1;r>=0;r--)if(t=n[r],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==i["s-hn"])if(wz(t,s)){let o=Pu.find(a=>a.$nodeToRelocate$===t);ix=!0,t["s-sn"]=t["s-sn"]||s,o?(o.$nodeToRelocate$["s-sh"]=i["s-hn"],o.$slotRefNode$=i):(t["s-sh"]=i["s-hn"],Pu.push({$slotRefNode$:i,$nodeToRelocate$:t})),t["s-sr"]&&Pu.map(a=>{wz(a.$nodeToRelocate$,t["s-sn"])&&(o=Pu.find(h=>h.$nodeToRelocate$===t),o&&!a.$slotRefNode$&&(a.$slotRefNode$=o.$slotRefNode$))})}else Pu.some(o=>o.$nodeToRelocate$===t)||Pu.push({$nodeToRelocate$:t})}i.nodeType===1&&LJ(i)}},wz=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",NJ=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(NJ)},Nd=(e,t,n)=>{const r=e==null?void 0:e.insertBefore(t,n);return gL(t,e),r},DJ=e=>{const t=[];return e&&t.push(...e["s-scs"]||[],e["s-si"],e["s-sc"],...DJ(e.parentElement)),t},gL=(e,t,n=!1)=>{var r;if(e&&t&&e.nodeType===1){const i=new Set(DJ(t).filter(Boolean));if(i.size&&((r=e.classList)==null||r.add(...e["s-scs"]=[...i]),e["s-ol"]||n))for(const s of Array.from(e.childNodes))gL(s,e,!0)}},tEe=(e,t,n=!1)=>{var r,i,s,o,a;const h=e.$hostElement$,f=e.$cmpMeta$,_=e.$vnode$||nx(null,null),w=Uxe(t)?t:MJ(null,null,t);if(S0=h.tagName,f.$attrsToReflect$&&(w.$attrs$=w.$attrs$||{},f.$attrsToReflect$.map(([b,T])=>w.$attrs$[T]=h[b])),n&&w.$attrs$)for(const b of Object.keys(w.$attrs$))h.hasAttribute(b)&&!["key","ref","style","class"].includes(b)&&(w.$attrs$[b]=h[b]);w.$tag$=null,w.$flags$|=4,e.$vnode$=w,w.$elm$=_.$elm$=h.shadowRoot||h,Ny=h["s-sc"],rx=(f.$flags$&1)!==0,AA=h["s-cr"],ix=!1,Dy(_,w,n);{if(Ir.$flags$|=1,mL){LJ(w.$elm$);for(const b of Pu){const T=b.$nodeToRelocate$;if(!T["s-ol"]){const M=aa.createTextNode("");M["s-nr"]=T,Nd(T.parentNode,T["s-ol"]=M,T)}}for(const b of Pu){const T=b.$nodeToRelocate$,M=b.$slotRefNode$;if(M){const I=M.parentNode;let C=M.nextSibling;{let N=(r=T["s-ol"])==null?void 0:r.previousSibling;for(;N;){let j=(i=N["s-nr"])!=null?i:null;if(j&&j["s-sn"]===T["s-sn"]&&I===j.parentNode){for(j=j.nextSibling;j===T||j!=null&&j["s-sr"];)j=j==null?void 0:j.nextSibling;if(!j||!j["s-nr"]){C=j;break}}N=N.previousSibling}}(!C&&I!==T.parentNode||T.nextSibling!==C)&&T!==C&&(!T["s-hn"]&&T["s-ol"]&&(T["s-hn"]=T["s-ol"].parentNode.nodeName),Nd(I,T,C),T.nodeType===1&&(T.hidden=(s=T["s-ih"])!=null?s:!1)),T&&typeof M["s-rf"]=="function"&&M["s-rf"](T)}else T.nodeType===1&&(n&&(T["s-ih"]=(o=T.hidden)!=null?o:!1),T.hidden=!0)}}ix&&RJ(w.$elm$),Ir.$flags$&=-2,Pu.length=0}if(na.experimentalScopedSlotChanges&&f.$flags$&2)for(const b of w.$elm$.childNodes)b["s-hn"]!==S0&&!b["s-sh"]&&(n&&b["s-ih"]==null&&(b["s-ih"]=(a=b.hidden)!=null?a:!1),b.hidden=!0);AA=void 0},nEe=(e,t)=>{},_L=(e,t)=>(e.$flags$|=16,nEe(e,e.$ancestorComponent$),Cxe(()=>rEe(e,t))),rEe=(e,t)=>{const n=e.$hostElement$,r=bf("scheduleUpdate",e.$cmpMeta$.$tagName$),i=n;if(!i)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let s;return t?s=hg(i,"componentWillLoad"):s=hg(i,"componentWillUpdate"),s=vz(s,()=>hg(i,"componentWillRender")),r(),vz(s,()=>sEe(e,i,t))},vz=(e,t)=>iEe(e)?e.then(t).catch(n=>{console.error(n),t()}):t(),iEe=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",sEe=async(e,t,n)=>{const r=e.$hostElement$,i=bf("update",e.$cmpMeta$.$tagName$);r["s-rc"],n&&Kxe(e);const s=bf("render",e.$cmpMeta$.$tagName$);oEe(e,t,r,n),s(),i(),aEe(e)},bz=null,oEe=(e,t,n,r)=>{try{bz=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(na.hasRenderFn||na.reflect)&&(na.vdomRender||na.reflect)&&(na.hydrateServerSide||tEe(e,t,r))}catch(h){e1(h,e.$hostElement$)}return bz=null,null},aEe=e=>{const t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,r=bf("postUpdate",t),i=n;e.$ancestorComponent$,hg(i,"componentDidRender"),e.$flags$&64?(hg(i,"componentDidUpdate"),r()):(e.$flags$|=64,hg(i,"componentDidLoad"),r())},vLe=e=>{{const t=Of(e),n=t.$hostElement$.isConnected;return n&&(t.$flags$&18)===2&&_L(t,!1),n}},hg=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch(r){e1(r)}},lEe=(e,t)=>Of(e).$instanceValues$.get(t),uEe=(e,t,n,r)=>{const i=Of(e),s=e,o=i.$instanceValues$.get(t),a=i.$flags$,h=s;n=Hxe(n,r.$members$[t][0]);const f=Number.isNaN(o)&&Number.isNaN(n);if(n!==o&&!f){i.$instanceValues$.set(t,n);{if(r.$watchers$&&a&128){const w=r.$watchers$[t];w&&w.map(b=>{try{h[b](n,o,t)}catch(T){e1(T,s)}})}if((a&18)===2){if(h.componentShouldUpdate&&h.componentShouldUpdate(n,o,t)===!1)return;_L(i,!1)}}}},cEe=(e,t,n)=>{var r,i;const s=e.prototype;if(t.$members$||t.$watchers$||e.watchers){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers);const o=Object.entries((r=t.$members$)!=null?r:{});o.map(([a,[h]])=>{(h&31||h&32)&&Object.defineProperty(s,a,{get(){return lEe(this,a)},set(f){uEe(this,a,f,t)},configurable:!0,enumerable:!0})});{const a=new Map;s.attributeChangedCallback=function(h,f,_){Ir.jmp(()=>{var w;const b=a.get(h);if(this.hasOwnProperty(b))_=this[b],delete this[b];else{if(s.hasOwnProperty(b)&&typeof this[b]=="number"&&this[b]==_)return;if(b==null){const T=Of(this),M=T==null?void 0:T.$flags$;if(M&&!(M&8)&&M&128&&_!==f){const C=this,N=(w=t.$watchers$)==null?void 0:w[h];N==null||N.forEach(j=>{C[j]!=null&&C[j].call(C,_,f,h)})}return}}this[b]=_===null&&typeof this[b]=="boolean"?!1:_})},e.observedAttributes=Array.from(new Set([...Object.keys((i=t.$watchers$)!=null?i:{}),...o.filter(([h,f])=>f[0]&15).map(([h,f])=>{var _;const w=f[1]||h;return a.set(w,h),f[0]&512&&((_=t.$attrsToReflect$)==null||_.push([h,w])),w})]))}}return e},dEe=async(e,t,n,r)=>{let i;if(!(t.$flags$&32)){t.$flags$|=32,n.$lazyBundleId$;{i=e.constructor;const o=e.localName;customElements.whenDefined(o).then(()=>t.$flags$|=128)}if(i&&i.style){let o;typeof i.style=="string"?o=i.style:typeof i.style!="string"&&(t.$modeName$=qxe(e),t.$modeName$&&(o=i.style[t.$modeName$]));const a=IJ(n,t.$modeName$);if(!tx.has(a)){const h=bf("registerStyles",n.$tagName$);Jxe(a,o,!!(n.$flags$&1)),h()}}}t.$ancestorComponent$,_L(t,!0)},Sz=e=>{},hEe=e=>{if(!(Ir.$flags$&1)){const t=Of(e),n=t.$cmpMeta$,r=bf("connectedCallback",n.$tagName$);t.$flags$&1?(FJ(e,t,n.$listeners$),t!=null&&t.$lazyInstance$?Sz(t.$lazyInstance$):t!=null&&t.$onReadyPromise$&&t.$onReadyPromise$.then(()=>Sz(t.$lazyInstance$))):(t.$flags$|=1,n.$flags$&12&&pEe(e),n.$members$&&Object.entries(n.$members$).map(([i,[s]])=>{if(s&31&&e.hasOwnProperty(i)){const o=e[i];delete e[i],e[i]=o}}),dEe(e,t,n)),r()}},pEe=e=>{const t=e["s-cr"]=aa.createComment("");t["s-cn"]=!0,Nd(e,t,e.firstChild)},fEe=async e=>{if(!(Ir.$flags$&1)){const t=Of(e);t.$rmListeners$&&(t.$rmListeners$.map(n=>n()),t.$rmListeners$=void 0)}},bLe=(e,t)=>{const n={$flags$:t[0],$tagName$:t[1]};n.$members$=t[2],n.$listeners$=t[3],n.$watchers$=e.$watchers$,n.$attrsToReflect$=[];const r=e.prototype.connectedCallback,i=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){Txe(this,n)},connectedCallback(){const s=Of(this);FJ(this,s,n.$listeners$),hEe(this),r&&r.call(this)},disconnectedCallback(){fEe(this),i&&i.call(this)},__attachShadow(){if(!this.shadowRoot)this.attachShadow({mode:"open",delegatesFocus:!!(n.$flags$&16)});else if(this.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${n.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}),e.is=n.$tagName$,cEe(e,n)},SLe=(e,t)=>t,FJ=(e,t,n,r)=>{n&&n.map(([i,s,o])=>{const a=yEe(e,i),h=mEe(t,o),f=gEe(i);Ir.ael(a,s,h,f),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Ir.rel(a,s,h,f))})},mEe=(e,t)=>n=>{var r;try{na.lazyLoad||e.$hostElement$[t](n)}catch(i){e1(i)}},yEe=(e,t)=>t&4?aa:t&8?t1:t&16?aa.body:e,gEe=e=>$xe?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Lu=globalThis.calciteConfig,TLe=(Lu==null?void 0:Lu.focusTrapStack)||[];Lu!=null&&Lu.logLevel;const Tz="2.13.2",_Ee="2024-10-24",wEe="e38e2977d";function vEe(){if(Lu&&Lu.version)return;console.info(`Using Calcite Components ${Tz} [Date: ${_Ee}, Revision: ${wEe}]`);const e=Lu||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:Tz,writable:!1}),globalThis.calciteConfig=e}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const bEe=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function xz(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,n=()=>e.contains(vxe)||e.contains(wxe)&&t?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),i=o=>{s!==o&&r(o),s=o};let s=n();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>i(o.matches?"dark":"light")),new MutationObserver(()=>i(n())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function SEe(){bEe()&&(document.readyState==="interactive"?xz():document.addEventListener("DOMContentLoaded",()=>xz(),{once:!0})),vEe()}const TEe=SEe;TEe();let jJ;function xEe(){try{Oxe(".")}catch{Axe(qi(Gt(jJ)))}}function wL(e){var n;const t=[];for(const r of Object.keys(e))customElements.get(`calcite-${r}`)||t.push((n=e[r])==null?void 0:n.call(e));return t.length>0?Promise.all(t):null}jJ="components/assets";const zJ=Symbol("widget"),VJ=Symbol("widget-test-data"),EEe=[],$Ee={},ox=new WeakMap;function UJ(e,t){let n=t.children;if(n!=null&&n.length)for(let i=0;i<n.length;++i)n[i]=UJ(e,n[i]);else n=EEe;const r=t.vnodeSelector;if(ax(r)){const i=t.properties||$Ee,s=i.key||r,o={key:s,afterCreate:MEe,afterUpdate:IEe,afterRemoved:GJ,parentWidget:e,widgetConstructor:r,widgetProperties:{...i,key:s,children:n}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return t}function MEe(e,t,n,{parentWidget:r,widgetConstructor:i,widgetProperties:s}){var a;const o=new i(s);o.container=e,ox.set(e,o),(a=o.afterCreate)==null||a.call(o,o,e),r.addHandles(Ft(()=>GJ(e))),queueMicrotask(()=>{o[VJ].projector.renderNow()})}function IEe(e,t,n,{widgetProperties:r}){var s;const i=ox.get(e);i&&(i.set(r),(s=i.afterUpdate)==null||s.call(i,i,e))}function GJ(e){var n;const t=ox.get(e);t&&((n=t.afterRemoved)==null||n.call(t,t,e),t.destroy(),ox.delete(e))}function ax(e){return typeof e=="function"&&e[zJ]}const Ez=new Set;function PEe(e){Ez.add(e),e.finally(()=>Ez.delete(e))}var BJ;const CEe="esri.widgets.Widget";let OEe=0;function qJ(e,t){const n=Object.prototype.hasOwnProperty;for(const r in t)n.call(t,r)&&n.call(e,r)&&(e[r]!=null&&t[r]!=null&&typeof e[r]=="object"&&typeof t[r]=="object"?qJ(e[r],t[r]):e[r]=t[r]);return e}const AEe=_xe({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,n=/capture$/i;e.eventHandlerInterceptor=(r,i,s,o)=>{const a=t==null?void 0:t(r,i,s,o),h=n.test(r);if(!((r=r.replace(n,"")).toLowerCase()in s)||h){const f=r[2].toLowerCase()+r.slice(3),_=T=>a==null?void 0:a.call(s,T);s.addEventListener(f,_,h);const w=()=>s.removeEventListener(f,_,h),b=o.afterRemoved;o.afterRemoved=T=>{b==null||b(T),w()}}return a}},handleInterceptedEvent(e,t,n,r){const{eventPhase:i,type:s}=r,o=i===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const h=t.properties;(h&&a in h||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,h&&a in h))&&(vW(),e.scheduleRender(),h[a].call(h.bind||n,r))}});let RI=!1,Jn=class extends A0(ju.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._projector=AEe,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=_x(async()=>{var a;if((a=this._messageBundleProps)!=null&&a.length){const h=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:f,propertyName:_})=>{if(this.destroyed)return;let w=await f9(f);this.uiStrings&&Object.keys(this.uiStrings)&&(w=qJ(q(w),this.uiStrings)),this[_]=w}));if(this.destroyed)return;for(const f of h)f.status==="rejected"&&fe.getLogger(this).error("widget-intl:locale-error",this.declaredClass,f.reason)}await this.loadLocale()}),xEe();const n="esri-widget-uid-"+DR(),r=this.render.bind(this);this._trackingTarget=new wx(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const i=()=>({vnodeSelector:"div",properties:{key:`${n}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),s=()=>{var _,w;if(!this._readyForTrueRender||this.destroyed)return null;const a=r()??i(),h=a.properties??(a.properties={});if(h.key??(h.key=n),ax(a.vnodeSelector)){if(!this.visible)return i()}else this.visible?h.styles||(h.styles={}):(h.class="",h.styles={display:"none"}),(_=h.styles).display??(_.display="");let f=0;return(w=a.children)==null||w.forEach(b=>{var T;ax(b.vnodeSelector)||(b.properties??(b.properties={}),(T=b.properties).key??(T.key=`${this.id}--${f++}`))}),UJ(this,a)};this.render=()=>{if(RI)return s();let a=jwe(this)??null;if(a)return a;this._trackingTarget.clear(),RI=!0;try{a=Nu(this._trackingTarget,s)}catch(h){throw fe.getLogger(this).error(h),h}finally{RI=!1}return a&&zwe(this,a),a};const o=this.beforeFirstRender();o?this._resourcesFetch=o.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),PEe(this._resourcesFetch)}normalizeCtorArgs(e,t){const n={...e};return t&&(n.container=t),n}postInitialize(){}beforeFirstRender(){var t;const e=this.loadDependencies();return(t=this._messageBundleProps)!=null&&t.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(PD):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(cn(this._trackingTarget),cn(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,hI(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return YR(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){var e;return this._get("id")||((e=this.container)==null?void 0:e.id)||Date.now().toString(16)+"-widget-"+OEe++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(BJ=zJ,VJ)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(hI(this),this._projector.scheduleRender())}own(e){vV(fe.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(e)}classes(...e){return Vwe.apply(this,e)}renderNow(){hI(this),this._projector.renderNow()}_postInitialize(){var t;if(this.destroyed)return;this.scheduleRender(),(t=this._delegatedEventNames)!=null&&t.length&&this.addHandles(ct(()=>this.viewModel,(n,r)=>{r&&this.removeHandles("delegated-events"),n&&gx(n)&&this.addHandles(this._delegatedEventNames.map(i=>M0(n,i,s=>{this.emit(i,s)})),"delegated-events")},ws)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(PD),this.scheduleRender()};this.addHandles([c9(e),ct(()=>this.uiStrings,e),hl(()=>this.container,n=>{this.destroyed||this._attach(n)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var t;this._attached&&(this._projector.detach(this.render),this._attached=!1),(t=e==null?void 0:e.parentNode)==null||t.removeChild(e)}};Jn[BJ]=!0,Jn.vnodeSelector="div",l([p()],Jn.prototype,"_readyForTrueRender",void 0),l([p({value:null})],Jn.prototype,"container",null),l([kt("container")],Jn.prototype,"castContainer",null),l([p()],Jn.prototype,"icon",null),l([p()],Jn.prototype,"id",null),l([p()],Jn.prototype,"label",null),l([p()],Jn.prototype,"renderable",null),l([p()],Jn.prototype,"uiStrings",void 0),l([p()],Jn.prototype,"viewModel",void 0),l([p({value:!0})],Jn.prototype,"visible",null),l([p()],Jn.prototype,"key",void 0),l([p()],Jn.prototype,"children",void 0),l([p()],Jn.prototype,"afterCreate",void 0),l([p()],Jn.prototype,"afterUpdate",void 0),l([p()],Jn.prototype,"afterRemoved",void 0),Jn=l([k(CEe)],Jn);const IE=Jn,kEe=new Map;function REe(e){return kEe.get(e)}function $z(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function LEe(e,t){return e.length!==t.length||e.some((n,r)=>n.text!==t[r].text)}function ow(e,t,n){!n||!t||e.find(r=>r.layerView===t&&r.text===n)||e.push({text:n,layerView:t})}function NEe(e){return e.type==="bing-maps"}const Jl=[];let Fy=class extends Fe{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Ae,this.view=null,this._allLayerViewsChange=t=>{var r;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const n=(r=this.view)==null?void 0:r.allLayerViews;n&&(this.addHandles(n.map(i=>ct(()=>{var s;return[i.suspended,(s=i.layer)==null?void 0:s.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),n.forEach(i=>{i.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(i.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),t!=null&&t.removed&&t.removed.forEach(i=>{this._pendingAttributions.delete(i),this._fetchedAttributionData.delete(i)}),this._updateAttributionItems()},this.addHandles([ff(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),hl(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var e;return(e=this.view)!=null&&e.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,t=e==null?void 0:e.allLayerViews;if(Jl.length=0,!e||!t)return void this._clear();t.forEach(r=>{var o,a;if(r.suspended||!((o=r.layer)!=null&&o.attributionVisible))return;const i=r.layer;if($z(i,"user"))return void ow(Jl,r,i.copyright);if(i.hasAttributionData){if(this._fetchedAttributionData.has(r)){const h=this._fetchedAttributionData.get(r);return void(h?ow(Jl,r,this._getDynamicAttribution(h,e,i)):$z(i)&&ow(Jl,r,i.copyright))}return void this._fetchAttributionData(r)}const s="portalItem"in i?(a=i.portalItem)==null?void 0:a.accessInformation:void 0;ow(Jl,r,s||i.copyright)});const n=t.find(r=>{var i;return((i=r.layer)==null?void 0:i.type)==="integrated-mesh-3dtiles"});if(this.view&&n){const r=REe(this.view);if(r){const i=r.getAttributionText();for(let s=0;s<i.length;++s)ow(Jl,n,i[s])}}LEe(this.items,Jl)&&(this.items.removeAll(),this.items.addMany(Jl)),Jl.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await Ex(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const n=t.ok?this._createContributionIndex(t.value,NEe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,n)}this._updateAttributionItems()}_createContributionIndex(e,t){const n=e.contributors,r={};if(!n)return r;for(let i=0;i<n.length;i++){const s=n[i],o=s.coverageAreas;if(!o)return;for(const a of o){const h=a.bbox,f=a.zoomMin-(t&&a.zoomMin?1:0),_=a.zoomMax-(t&&a.zoomMax?1:0),w=new Xt({xmin:h[1],ymin:h[0],xmax:h[3],ymax:h[2],spatialReference:dt.WGS84}),b={extent:Ad(w),attribution:s.attribution||"",score:a.score!=null?a.score:100,id:i};for(let T=f;T<=_;T++)r[T]??(r[T]=[]),r[T].push(b)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(e,t,n){var f;const{extent:r,scale:i}=t;let s=((f=n.tileInfo)==null?void 0:f.scaleToZoom(i))??0;if(s=Math.min(e.maxKey??0,Math.round(s)),!r||s==null||s<=-1)return"";const o=e[s],a=Cx(r.center.clone().normalize(),dt.WebMercator),h=new Set;return o?o.filter(_=>{const w=_.id,b=!h.has(w)&&a&&_.extent&&R0(_.extent,a);return b&&h.add(w),b}).sort((_,w)=>w.score-_.score||_.objectId-w.objectId).map(_=>_.attribution).join(", "):""}};l([p({readOnly:!0,type:Ae})],Fy.prototype,"items",void 0),l([p({readOnly:!0})],Fy.prototype,"state",null),l([p()],Fy.prototype,"view",void 0),Fy=l([k("esri.widgets.Attribution.AttributionViewModel")],Fy);const HJ=Fy,ul={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function DEe(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:jEe(e[t])}}}function FEe(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function jEe(e){return function(t,...n){FEe(t)?Hwe(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...n)}}function PE(e){return(t,n)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:n})}}var zEe=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},WJ=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];Array.isArray(i)?WJ(i,t):i!=null&&i!==!1&&(i.hasOwnProperty("vnodeSelector")||(i=zEe(i)),t.push(i))}},VEe=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(n.length===1&&typeof n[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:n[0],domNode:null};var i=[];return WJ(n,i),{vnodeSelector:e,properties:t||void 0,children:i,text:void 0,domNode:null}};function Wi(e,t,...n){return typeof e!="function"||ax(e)?VEe(e,t,...n):e(t,...n)}function xLe(...e){return e}const Vm="esri-attribution",Um={base:Vm,poweredBy:`${Vm}__powered-by`,sources:`${Vm}__sources`,open:`${Vm}--open`,sourcesOpen:`${Vm}__sources--open`,link:`${Vm}__link`};let gi=class extends IE{constructor(t,n){super(t,n),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:i})=>this._checkSourceTextOverflow(i))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new HJ}initialize(){this.addHandles(ff(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,n)=>(t.includes(n.text)||t.push(n.text),t),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[Um.open]:this._isOpen};return Wi("div",{bind:this,class:this.classes(Um.base,ul.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return Wi("div",{class:Um.poweredBy},"Powered by"," ",Wi("a",{class:Um.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,n=this._isInteractive,r=n?0:void 0,{attributionText:i}=this,s={[Um.sourcesOpen]:t,[ul.interactive]:n};return Wi("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Um.sources,s),innerHTML:i,tabIndex:r})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let n=!1;const{clientHeight:r,clientWidth:i,scrollWidth:s}=t,o=s>i,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(n=!0),this._isOpen){const h=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,h&&(this._isOpen=!1,n=!0)}n&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};l([p()],gi.prototype,"_isOpen",void 0),l([p()],gi.prototype,"_isInteractive",null),l([p()],gi.prototype,"_attributionTextOverflowed",void 0),l([p()],gi.prototype,"_prevSourceNodeHeight",void 0),l([p({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],gi.prototype,"attributionText",null),l([p()],gi.prototype,"icon",null),l([p()],gi.prototype,"itemDelimiter",void 0),l([p()],gi.prototype,"label",null),l([p(),PE("esri/widgets/Attribution/t9n/Attribution")],gi.prototype,"messages",void 0),l([p()],gi.prototype,"view",null),l([p({type:HJ})],gi.prototype,"viewModel",void 0),l([DEe()],gi.prototype,"_toggleState",null),gi=l([k("esri.widgets.Attribution")],gi);const UEe=gi;function GEe(){const e=te("mapview-essential-goto-duration");return e==null?e:e}function BEe(e){var t,n;return((t=e==null?void 0:e.spatialReference)==null?void 0:t.isWebMercator)||((n=e==null?void 0:e.spatialReference)==null?void 0:n.isGeographic)||!1}const qEe=e=>{let t=class extends e{constructor(...n){super(...n),this.goToOverride=null,this.view=null}callGoTo(n){const{view:r}=this;return bV(r),this.goToOverride?this.goToOverride(r,n):r.goTo(n.target,n.options)}};return l([p()],t.prototype,"goToOverride",void 0),l([p()],t.prototype,"view",void 0),t=l([k("esri.widgets.support.GoTo")],t),t};let Fp=class extends qEe(Fe){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(ct(()=>this.view,this._updateRotationWatcher,si))}destroy(){this.view=null}get canShowNorth(){return BEe(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var t,n;(t=this.view)!=null&&t.ready&&(((n=this.view)==null?void 0:n.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:GEe()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const n=-t.heading;this._set("orientation",{x:0,y:0,z:n})}_updateRotationWatcher(t){this.removeAllHandles(),t&&this.addHandles(t.type==="2d"?ct(()=>t==null?void 0:t.rotation,this._updateForRotation,si):ct(()=>t==null?void 0:t.camera,this._updateForCamera,si))}};l([p({readOnly:!0})],Fp.prototype,"canShowNorth",null),l([p({readOnly:!0})],Fp.prototype,"orientation",void 0),l([p({readOnly:!0})],Fp.prototype,"state",null),l([p()],Fp.prototype,"view",void 0),Fp=l([k("esri.widgets.Compass.CompassViewModel")],Fp);const ZJ=Fp,Mz="esri-compass",Iz={base:Mz,iconContainer:`${Mz}__icon-container`};let _u=class extends IE{constructor(t,n){super(t,n),this.messages=null,this.viewModel=new ZJ,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return wL({button:()=>pe(()=>import("./calcite-button-i_RwumFW.js"),__vite__mapDeps([239,240,241,242,243,244,245,246,247,248,249,250,251,252])),icon:()=>pe(()=>import("./calcite-icon-J4sAtRdE.js"),__vite__mapDeps([253,250,241,248]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:n}=this.viewModel,{messages:r}=this;return Wi("div",{class:this.classes(Iz.base,ul.widget)},Wi("calcite-button",{class:ul.widgetButton,disabled:n==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},Wi("div",{"aria-hidden":"true",class:Iz.iconContainer,title:r.reset},Wi("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};l([p()],_u.prototype,"goToOverride",null),l([p()],_u.prototype,"icon",null),l([p()],_u.prototype,"label",null),l([p(),PE("esri/widgets/Compass/t9n/Compass")],_u.prototype,"messages",void 0),l([p()],_u.prototype,"view",null),l([p({type:ZJ})],_u.prototype,"viewModel",void 0),_u=l([k("esri.widgets.Compass")],_u);const HEe=_u,Pz="esri-navigation-toggle",Cz={base:Pz,isLayoutHorizontal:`${Pz}--horizontal`};let jy=class extends Fe{constructor(t){super(t),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(hl(()=>{var t;return(t=this.view)==null?void 0:t.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var t,n;return(t=this.view)!=null&&t.ready&&((n=this.view)==null?void 0:n.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._setNavigationMode()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_setNavigationMode(){var n;const t=(n=this.view)==null?void 0:n.inputManager;t&&(t.primaryDragAction=this._navigationMode==="pan"?"pan":"rotate")}};l([p({readOnly:!0})],jy.prototype,"state",null),l([p()],jy.prototype,"_navigationMode",void 0),l([p()],jy.prototype,"view",void 0),jy=l([k("esri.widgets.NavigationToggle.NavigationToggleViewModel")],jy);const JJ=jy;let wu=class extends IE{constructor(t,n){super(t,n),this.messages=null,this.viewModel=new JJ,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var i;const r=((i=this.viewModel)==null?void 0:i.navigationMode)==="pan"?this._rotateButton:this._panButton;Wwe(r),this.toggle()}}loadDependencies(){return wL({button:()=>pe(()=>import("./calcite-button-i_RwumFW.js"),__vite__mapDeps([239,240,241,242,243,244,245,246,247,248,249,250,251,252]))})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){var i,s;const t=((i=this.viewModel)==null?void 0:i.state)==="disabled",n=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan",r=this.messages.toggle;return Wi("div",{class:this.classes(Cz.base,ul.widget,{[Cz.isLayoutHorizontal]:this.layout==="horizontal"})},Wi("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:n?"outline-fill":"solid",class:ul.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:n?void 0:-1,title:r}),Wi("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:n?"solid":"outline-fill",class:ul.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:n?-1:void 0,title:r}))}};l([p()],wu.prototype,"icon",null),l([p()],wu.prototype,"label",null),l([p({value:"vertical"})],wu.prototype,"layout",null),l([p(),PE("esri/widgets/NavigationToggle/t9n/NavigationToggle")],wu.prototype,"messages",void 0),l([p()],wu.prototype,"view",null),l([p({type:JJ})],wu.prototype,"viewModel",void 0),wu=l([k("esri.widgets.NavigationToggle")],wu);const WEe=wu;let jp=class extends Fe{get canZoomIn(){var n,r,i;if(!((n=this.view)==null?void 0:n.ready))return!1;const t=(i=(r=this.view)==null?void 0:r.constraints)==null?void 0:i.effectiveMaxScale;return t===0||this._scale>t}get canZoomOut(){var r;const{view:e}=this;if(!(e==null?void 0:e.ready))return!1;const n=(r=e.constraints)==null?void 0:r.effectiveMinScale;return n===0||this._scale<n}get _scale(){var t,n,r;const e=(n=(t=this.view)==null?void 0:t.animation)==null?void 0:n.target;return(e&&"then"in e||e==null?void 0:e.scale)??((r=this.view)==null?void 0:r.scale)??0}};l([p({readOnly:!0})],jp.prototype,"canZoomIn",null),l([p({readOnly:!0})],jp.prototype,"canZoomOut",null),l([p()],jp.prototype,"view",void 0),l([p()],jp.prototype,"_scale",null),jp=l([k("esri.widgets.Zoom.ZoomConditions2D")],jp);const ZEe=jp;let zy=class extends Fe{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};l([p({readOnly:!0})],zy.prototype,"canZoomIn",null),l([p({readOnly:!0})],zy.prototype,"canZoomOut",null),l([p()],zy.prototype,"view",void 0),zy=l([k("esri.widgets.Zoom.ZoomConditions3D")],zy);const JEe=zy;let dd=class extends Fe{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new ZEe({view:t}):t.type==="3d"&&(this._zoomConditions=new JEe({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){if(!this.canZoomIn)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomIn():UI(t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomOut():UI(t.goTo({zoomFactor:.5}))}};l([p()],dd.prototype,"_zoomConditions",void 0),l([p()],dd.prototype,"canZoomIn",null),l([p()],dd.prototype,"canZoomOut",null),l([p({readOnly:!0})],dd.prototype,"state",null),l([p()],dd.prototype,"view",null),dd=l([k("esri.widgets.Zoom.ZoomViewModel")],dd);const YJ=dd,Oz={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let vu=class extends IE{constructor(t,n){super(t,n),this.messages=null,this.viewModel=new YJ,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return wL({button:()=>pe(()=>import("./calcite-button-i_RwumFW.js"),__vite__mapDeps([239,240,241,242,243,244,245,246,247,248,249,250,251,252]))})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[Oz.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:n,canZoomOut:r}=this.viewModel,{zoomIn:i,zoomOut:s}=this.messages;return Wi("div",{class:this.classes(Oz.base,ul.widget,t)},Wi("calcite-button",{class:ul.widgetButton,disabled:!n,iconStart:"plus",kind:"neutral",label:i,onclick:this.zoomIn,title:i}),Wi("calcite-button",{class:ul.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};l([p()],vu.prototype,"icon",null),l([p()],vu.prototype,"label",null),l([p({value:"vertical"})],vu.prototype,"layout",null),l([p(),PE("esri/widgets/Zoom/t9n/Zoom")],vu.prototype,"messages",void 0),l([p()],vu.prototype,"view",null),l([p({type:YJ})],vu.prototype,"viewModel",void 0),vu=l([k("esri.widgets.Zoom")],vu);const YEe=vu;function KEe(e){return(e==null?void 0:e.view)!==void 0}let U2=class extends hxe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=t=>{this.components.forEach(n=>{const r=this._find(n),i=r==null?void 0:r.widget;KEe(i)&&(i.view=t)})},this._componentsWatcher=(t,n)=>{this._removeComponents(n),this._addComponents(t),this._adjustPadding(t)}}initialize(){this.addHandles([ct(()=>this.components,this._componentsWatcher,si),ct(()=>this.view,this._updateViewAwareWidgets,si)])}_add(e,t,n,r,i){let s=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;s=this._createComponent(e)}super._add(s,t,n,r,i)}_removeComponents(e){e.forEach(t=>{const n=this._find(t);n&&(this.remove(n),n.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.constructed&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);return new V2({id:e,node:t})}_createWidget(e){const t=this.view;switch(e){case"attribution":return new UEe({view:t});case"compass":return new HEe({view:t});case"navigation-toggle":return new WEe({view:t});case"zoom":return new YEe({view:t})}}};l([p()],U2.prototype,"components",void 0),U2=l([k("esri.views.ui.DefaultUI")],U2);const KJ=U2;let G2=class extends KJ{constructor(e){super(e),this.components=["attribution","zoom"]}};l([p()],G2.prototype,"components",void 0),G2=l([k("esri.views.ui.2d.DefaultUI2D")],G2);const XJ=G2;let QJ,eY,tY,nY,rY,iY,sY;async function XEe(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:n,MapViewNavigation:r,MagnifierView2D:i,GridView2D:s,Stage:o}]=await Promise.all([pe(()=>import("./webglDeps-DMj04D61.js"),__vite__mapDeps([168,89,88,143,169,145])),pe(()=>import("./mapViewDeps-CJhIge4Y.js"),__vite__mapDeps([170,90,91,29,92,93,87,88,89,63,94,57,171,145,99,172,169,107,173,133,132,98,28,30,174,124,96,97,131,168,143,175,102,176,86,22,46,47,34,177,141,139,126,142,178,77,179,100,95,180,181,182,183,184,185,138,186,187]))]);eY=e,tY=t,nY=n,rY=r,iY=i,sY=s,QJ=o}let ot=class extends H_e(Sve(lve(c0e))){constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new n0({getCollections:()=>{var t,n;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(n=this.basemapView)==null?void 0:n.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new F2({view:this}),this.graphicsView=null,this.stateManager=new Xr({constraints:new kZ({view:this})}),this.stationaryManager=new _v,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new cSe(this),this.floors=new Ae,this.grid=null,this.highlights=uJ(),this.inputManager=new V2e({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new vJ,this.type="2d",this.view2dType=null,this.ui=new XJ,this.test={takeScreenshot:async t=>WTe(this._getScreenshotView(t),t)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([ct(()=>this.viewpoint,()=>this.stationaryManager.flip(),pl),this.on("resize",t=>this.stateManager.resize(t.width,t.height))]),Ufe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=cn(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new J2e(this.featuresTilingScheme)}get constraintsInfo(){var n,r;const e=(n=this.defaultsFromMap)==null?void 0:n.tileInfo,t=this.spatialReference;return{lods:(r=e==null?void 0:e.spatialReference)!=null&&r.equals(t)?e.lods:null,spatialReference:t}}get state(){return this.stateManager.state}get initialExtentRequired(){var o;if(!this.stateManager)return!1;const{scale:e,constraints:t,center:n,viewpoint:r,extent:i}=this;let s=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((o=this.map.initialViewProperties)!=null&&o.viewpoint))&&!i&&(t!=null&&t.effectiveLODs||(s=-1),(!n||e===0&&s===-1)&&((r==null?void 0:r.targetGeometry)==null||r.targetGeometry.type!=="extent"&&!r.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=e.targetGeometry,n=this.spatialReference;return RG(t.spatialReference,n)}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),e!==this.animationManager.animation&&this.animationManager.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e);const n=()=>{var r;this.destroyed||e===this._get("animation")&&(this._set("animation",null),(r=this.frameTask)==null||r.requestFrame())};e.when(n,n)}get background(){return uI(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get constraints(){var e;return(e=this.stateManager)==null?void 0:e.constraints}set constraints(e){e.view=this;const t=this.stateManager.constraints;this.stateManager.constraints=e,t==null||t.destroy()}get extent(){var e;return((e=this.stateManager)==null?void 0:e.extent)??null}set extent(e){this.stateManager.extent=e}get highlightOptions(){return OTe(this)}set highlightOptions(e){ATe(this,e)}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){var e;return((e=this.stage)==null?void 0:e.renderRequested)??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){const{rotationEnabled:t}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=e,this.constraints.rotationEnabled=t}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){var e;return(e=this.featuresTilingScheme)==null?void 0:e.tileInfo}get updating(){var n,r,i,s;const e=!(!this.magnifier.visible||this.magnifier.position===null||!((n=this._magnifierView)!=null&&n.updatingHandles.updating)),t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(o=>!o.destroyed&&!("layerViews"in o)&&o.updating===!0)||e);if(te("esri-2d-log-updating")){const o=this.allLayerViews.reduce((a,h)=>({...a,[`${h.layer.id}(${h.layer.type})`]:!h.destroyed&&!("layerViews"in h)&&h.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(r=this.layerViewManager)==null?void 0:r.updating}
-> labelManager.updating: ${(i=this.labelManager)==null?void 0:i.updating}
-> graphicsView.updating: ${(s=this.graphicsView)==null?void 0:s.updating}
-> allLayerViews: ${JSON.stringify(o)}
-> updatingMagnifier: ${e}
`)}return t}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new mo({rings:[e.map(t=>[t[0],t[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){var e;return((e=this.mapViewNavigation)==null?void 0:e.interacting)??!1}goTo(e,t){return this.goToManager.goTo(e,t)}async hitTest(e,t){return kTe(this,e,t)}async takeScreenshot(e){return HTe(this._getScreenshotView(e),e)}toMap(e){if(!this.ready)return null;const t=RW(e)?kW(this,e):e;return this.stateManager.toMap(t)}toScreen(e,t){return this.stateManager.toScreen(e,t)}on(e,t,n,r){return this.inputManager&&this.viewEvents.on(e,t,n,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((e=this.defaultsFromMap)==null?void 0:e.spatialReference)||null}getDefaultTimeZone(){return uI(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return uI(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(e){return h8.hasLayerViewModule(e)}importLayerView(e){return h8.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(fe.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){var h;const t=this.toMap(e),n=await this.hitTest(e),r=this.allLayerViews.toArray().filter(f=>f.clips.every(_=>aJ(this,_,e,t))).reverse(),i=new globalThis.Map(r.map(f=>[f.layer.uid,f])),s=[];let o=0,a=0;for(;o<n.results.length||a<r.length;){const f=n.results.at(o);if(f&&f.type!=="graphic"){++o;continue}const _=i.get((h=(f==null?void 0:f.layer)??(f==null?void 0:f.graphic.layer))==null?void 0:h.uid);if((!f||_)&&a<r.length&&r.at(a)!==_){const w=r.at(a);"fetchPopupFeaturesAtLocation"in w&&s.push({mapPoint:t,layerView:w}),++a}else f&&(s.push({graphic:f.graphic,layerView:_}),++o)}return{hits:s,location:t}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=nxe(this.type);if(te("safari")&&te("safari")<9&&(e=new Y("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:te("safari")})),e!=null)throw fe.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return XEe()}_getDefaultViewpoint(){var I;const{constraints:e,initialExtent:t,map:n,padding:r,size:i}=this;if(!e)return null;const s=n&&"initialViewProperties"in n?n.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),a=s==null?void 0:s.viewpoint,h=((I=a==null?void 0:a.targetGeometry)==null?void 0:I.extent)??t,f=h==null?void 0:h.center,_=(a==null?void 0:a.rotation)??0,w=(a==null?void 0:a.scale)||h&&EE(h,[i[0]-r.left-r.right,i[1]-r.top-r.bottom]),b=o.center??f,T=o.rotation??_,M=o.scale??w;return b&&M?new $r({targetGeometry:b,scale:M,rotation:T}):null}_startup(){var o;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(o=this.defaultsFromMap.extent)==null?void 0:o.center),this.graphics.owner=this;const t=new QJ(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=t,this._magnifierView=new iY,this._magnifierView.magnifier=this.magnifier,this._gridView=new sY;const n=new nY({view:this});this._set("labelManager",n);const r=new tSe({view:this});this._set("animationManager",r);const i=new rY({view:this,animationManager:r});this._set("mapViewNavigation",i),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("webgl-error",a=>this.fatalError=a.error),ct(()=>this.stationary,a=>t.stationary=a,ws),ct(()=>this.background,a=>{t.backgroundColor=a==null?void 0:a.color,this._magnifierView.backgroundColor=a==null?void 0:a.color},ws),ct(()=>this.magnifier,a=>this._magnifierView.magnifier=a,ws),ct(()=>this.grid,a=>this._gridView.grid=a,ws),ct(()=>this.renderingOptions,a=>t.renderingOptions=a,ws),ct(()=>this.highlights.items.map(a=>({name:a.name,options:{fillColor:a.options.color,haloColor:a.options.haloColor,fillOpacity:a.options.fillOpacity,haloOpacity:a.options.haloOpacity,haloWidth:a.options.haloWidth,haloBlur:a.options.haloBlur}})),()=>{t.highlightGradient=PTe(t.highlightGradient,this.highlights.items)},ws),ct(()=>this.state.id,()=>t.state=this.state,ws)],"map-view"),this._updateStageChildren();const s=this._resolveWhenReady;this._resolveWhenReady=[],s.forEach(a=>a(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this.stage.addChild(t.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new _Se(B_e.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new eY({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new tY(e)});this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){var s;const{allLayerViews:t,padding:n,size:r,stage:i}=this;return{allLayerViews:t,backgroundColor:e!=null&&e.ignoreBackground?null:(s=this.background)==null?void 0:s.color,padding:n,size:r,stage:i}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const t of this.allLayerViews)t.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const t of this.allLayerViews)t.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};ot.type="2d",l([p({readOnly:!0})],ot.prototype,"animationManager",void 0),l([p({constructOnly:!0})],ot.prototype,"deactivatedWebGLExtensions",void 0),l([p({constructOnly:!0})],ot.prototype,"debugWebGLExtensions",void 0),l([p({readOnly:!0})],ot.prototype,"featuresTilingScheme",void 0),l([p({readOnly:!0})],ot.prototype,"fullOpacity",void 0),l([p()],ot.prototype,"goToManager",void 0),l([p({readOnly:!0})],ot.prototype,"graphicsTileStore",null),l([p()],ot.prototype,"graphicsView",void 0),l([p()],ot.prototype,"stateManager",void 0),l([p()],ot.prototype,"constraintsInfo",null),l([p({readOnly:!0})],ot.prototype,"state",null),l([p()],ot.prototype,"initialExtentRequired",null),l([p()],ot.prototype,"labelManager",void 0),l([p({readOnly:!0})],ot.prototype,"mapViewNavigation",void 0),l([p({constructOnly:!0})],ot.prototype,"renderCanvas",void 0),l([p()],ot.prototype,"renderingOptions",void 0),l([p({constructOnly:!0})],ot.prototype,"supersampleScreenshotsEnabled",void 0),l([p({readOnly:!0})],ot.prototype,"supportsGround",void 0),l([p()],ot.prototype,"defaultsFromMapSettings",null),l([p({readOnly:!0})],ot.prototype,"typeSpecificPreconditionsReady",null),l([p()],ot.prototype,"animation",null),l([p({type:Yx})],ot.prototype,"background",null),l([p()],ot.prototype,"center",null),l([p({type:kZ})],ot.prototype,"constraints",null),l([p()],ot.prototype,"extent",null),l([p()],ot.prototype,"floors",void 0),l([p()],ot.prototype,"grid",void 0),l([p({type:vf})],ot.prototype,"highlightOptions",null),l([p({type:Ae.ofType(Zy)})],ot.prototype,"highlights",void 0),l([p({readOnly:!0})],ot.prototype,"inputManager",void 0),l([p()],ot.prototype,"map",void 0),l([p()],ot.prototype,"padding",null),l([p({readOnly:!0})],ot.prototype,"rendering",null),l([p()],ot.prototype,"resizeAlign",null),l([p({readOnly:!0})],ot.prototype,"resolution",null),l([p()],ot.prototype,"rotation",null),l([p()],ot.prototype,"scale",null),l([p({constructOnly:!0})],ot.prototype,"spatialReferenceLocked",void 0),l([p()],ot.prototype,"stationary",null),l([p({readOnly:!0})],ot.prototype,"tileInfo",null),l([p({type:vJ,readOnly:!0})],ot.prototype,"timeline",void 0),l([p({readOnly:!0})],ot.prototype,"type",void 0),l([p({readOnly:!0})],ot.prototype,"updating",null),l([p({readOnly:!0})],ot.prototype,"view2dType",void 0),l([p()],ot.prototype,"viewpoint",null),l([p({readOnly:!0})],ot.prototype,"visibleArea",null),l([p()],ot.prototype,"zoom",null),l([p({readOnly:!0})],ot.prototype,"navigating",null),l([p(),kt(e=>e instanceof KJ?e:bx(XJ,e))],ot.prototype,"ui",void 0),ot=l([k("esri.views.View2D")],ot);const QEe=ot;let B2=class extends QEe{constructor(e){super(e),this.view2dType="map"}};l([p({readOnly:!0})],B2.prototype,"view2dType",void 0),B2=l([k("esri.views.MapView")],B2);const e$e=B2,t$e=({optionSelected:e})=>{const t=[20,95],n=Cd.icon({iconUrl:"https://cdn-icons-png.flaticon.com/128/3944/3944427.png",iconSize:[32,32]}),r=Cd.icon({iconUrl:"https://cdn-icons-png.flaticon.com/128/9759/9759266.png",iconSize:[32,32]}),i=Cd.icon({iconUrl:"https://cdn-icons-png.flaticon.com/128/7945/7945007.png",iconSize:[32,32]}),s=[{id:1,position:[28.6448,77.216721],label:""},{id:2,position:[6.927079,79.861244],label:""},{id:3,position:[30.596069,114.297691],label:""}],o=[{id:4,position:[18.81266,95.28952],label:" (, )"},{id:5,position:[19.937312,93.8391687],label:", "},{id:7,position:[12.1758794,104.8560342],label:""},{id:8,position:[17.2301259,99.7281588],label:""},{id:11,position:[18.8036471,102.12129],label:""}],a=[...s],[h,f]=Ke.useState(s);Ke.useEffect(()=>{e==="option1"?f(s):e==="option3"?f(o):e==="option4"&&f(a)},[e]);const _=Ke.useRef(null);return Ke.useEffect(()=>{if(e==="option2"){const w=new U_e({portalItem:{id:"191d2e9af8034f6b980f5a3da63c2e3d"}}),b=new e$e({container:_.current,map:w});return()=>{b&&b.destroy()}}},[e]),Pe.jsx("div",{children:e==="option2"?Pe.jsx("div",{ref:_,style:{height:"50vh",width:"50vw"}}):Pe.jsxs(MK,{className:"h-[50vh] rounded-md",center:t,zoom:4,scrollWheelZoom:!0,style:{height:"50vh",width:"50vw",display:"flex"},children:[Pe.jsxs(wv,{children:[Pe.jsx(wv.BaseLayer,{name:"osm",checked:!0,children:Pe.jsx(uD,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),Pe.jsx(wv.BaseLayer,{name:"map",checked:!0,children:Pe.jsx(uD,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})})]}),h.map(w=>{let b=n;return e==="option2"&&w.id>=4?b=r:e==="option3"?b=i:b=n,Pe.jsx(IK,{icon:b,position:w.position,children:Pe.jsx(PK,{children:e==="option1"&&(w.id===1||w.id===2||w.id===3)?Pe.jsx("a",{href:"https://example.com",target:"_blank",rel:"noopener noreferrer",children:w.label}):w.label})},w.id)})]})})};var LI={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Az;function n$e(){return Az||(Az=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)t.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(LI)),LI.exports}var r$e=n$e();const xi=Uz(r$e),i$e=["xxl","xl","lg","md","sm","xs"],s$e="xs",CE=Ke.createContext({prefixes:{},breakpoints:i$e,minBreakpoint:s$e}),{Consumer:ALe,Provider:kLe}=CE;function Is(e,t){const{prefixes:n}=Ke.useContext(CE);return e||n[t]||t}function oY(){const{breakpoints:e}=Ke.useContext(CE);return e}function aY(){const{minBreakpoint:e}=Ke.useContext(CE);return e}const lY=e=>Ke.forwardRef((t,n)=>Pe.jsx("div",{...t,ref:n,className:xi(t.className,e)})),vL=Ke.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=Is(t,"card-body"),Pe.jsx(n,{ref:i,className:xi(e,t),...r})));vL.displayName="CardBody";const uY=Ke.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=Is(t,"card-footer"),Pe.jsx(n,{ref:i,className:xi(e,t),...r})));uY.displayName="CardFooter";const cY=Ke.createContext(null);cY.displayName="CardHeaderContext";const dY=Ke.forwardRef(({bsPrefix:e,className:t,as:n="div",...r},i)=>{const s=Is(e,"card-header"),o=Ke.useMemo(()=>({cardHeaderBsPrefix:s}),[s]);return Pe.jsx(cY.Provider,{value:o,children:Pe.jsx(n,{ref:i,...r,className:xi(t,s)})})});dY.displayName="CardHeader";const hY=Ke.forwardRef(({bsPrefix:e,className:t,variant:n,as:r="img",...i},s)=>{const o=Is(e,"card-img");return Pe.jsx(r,{ref:s,className:xi(n?`${o}-${n}`:o,t),...i})});hY.displayName="CardImg";const pY=Ke.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=Is(t,"card-img-overlay"),Pe.jsx(n,{ref:i,className:xi(e,t),...r})));pY.displayName="CardImgOverlay";const fY=Ke.forwardRef(({className:e,bsPrefix:t,as:n="a",...r},i)=>(t=Is(t,"card-link"),Pe.jsx(n,{ref:i,className:xi(e,t),...r})));fY.displayName="CardLink";const o$e=lY("h6"),mY=Ke.forwardRef(({className:e,bsPrefix:t,as:n=o$e,...r},i)=>(t=Is(t,"card-subtitle"),Pe.jsx(n,{ref:i,className:xi(e,t),...r})));mY.displayName="CardSubtitle";const yY=Ke.forwardRef(({className:e,bsPrefix:t,as:n="p",...r},i)=>(t=Is(t,"card-text"),Pe.jsx(n,{ref:i,className:xi(e,t),...r})));yY.displayName="CardText";const a$e=lY("h5"),gY=Ke.forwardRef(({className:e,bsPrefix:t,as:n=a$e,...r},i)=>(t=Is(t,"card-title"),Pe.jsx(n,{ref:i,className:xi(e,t),...r})));gY.displayName="CardTitle";const _Y=Ke.forwardRef(({bsPrefix:e,className:t,bg:n,text:r,border:i,body:s=!1,children:o,as:a="div",...h},f)=>{const _=Is(e,"card");return Pe.jsx(a,{ref:f,...h,className:xi(t,_,n&&`bg-${n}`,r&&`text-${r}`,i&&`border-${i}`),children:s?Pe.jsx(vL,{children:o}):o})});_Y.displayName="Card";const aw=Object.assign(_Y,{Img:hY,Title:gY,Subtitle:mY,Body:vL,Link:fY,Text:yY,Header:dY,Footer:uY,ImgOverlay:pY});function l$e({as:e,bsPrefix:t,className:n,...r}){t=Is(t,"col");const i=oY(),s=aY(),o=[],a=[];return i.forEach(h=>{const f=r[h];delete r[h];let _,w,b;typeof f=="object"&&f!=null?{span:_,offset:w,order:b}=f:_=f;const T=h!==s?`-${h}`:"";_&&o.push(_===!0?`${t}${T}`:`${t}${T}-${_}`),b!=null&&a.push(`order${T}-${b}`),w!=null&&a.push(`offset${T}-${w}`)}),[{...r,className:xi(n,...o,...a)},{as:e,bsPrefix:t,spans:o}]}const kA=Ke.forwardRef((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:s,spans:o}]=l$e(e);return Pe.jsx(i,{...r,ref:t,className:xi(n,!o.length&&s)})});kA.displayName="Col";const wY=Ke.forwardRef(({bsPrefix:e,fluid:t=!1,as:n="div",className:r,...i},s)=>{const o=Is(e,"container"),a=typeof t=="string"?`-${t}`:"-fluid";return Pe.jsx(n,{ref:s,...i,className:xi(r,t?`${o}${a}`:o)})});wY.displayName="Container";const vY=Ke.forwardRef(({bsPrefix:e,className:t,as:n="div",...r},i)=>{const s=Is(e,"row"),o=oY(),a=aY(),h=`${s}-cols`,f=[];return o.forEach(_=>{const w=r[_];delete r[_];let b;w!=null&&typeof w=="object"?{cols:b}=w:b=w;const T=_!==a?`-${_}`:"";b!=null&&f.push(`${h}${T}-${b}`)}),Pe.jsx(n,{ref:i,...r,className:xi(t,s,...f)})});vY.displayName="Row";function u$e(){const[e,t]=Ke.useState("option1");let n="";const r={option1:{title:"The Origin of Songkran",content:{"value/concept":{:["","","",""],:[""],:["",""]}}},option2:{title:" (Destination)",content:{"value/concept":{" >  > ":[" , , ,   "],"  >  > ":[" 2  "," 1 :   () , ,    "," 2 :    ()  "],:["   "]," ( -)":[" 2  "," , 12    ","   ()     "]," (-)":["     ","     "]}}},option3:{title:" (Localization)",content:{"value/concept":{:["    ","      "],:[""]},Element:{data1:["detail1"],data2:["detail2"]}}},option4:{title:" (Shared Value)",content:{"value/concept":{:["    ","      "],:[""]},Element:{data1:["detail1"],data2:["detail2"]}}}};return Pe.jsx(wY,{children:Pe.jsxs(vY,{children:[Pe.jsx(kA,{md:3,children:Pe.jsx("div",{className:"flex flex-col gap-2",children:Object.keys(r).map(i=>Pe.jsx("button",{className:`px-4 py-2 rounded-lg map ${e===i?"bg-blue-500 text-white":"bg-gray-300"}`,onClick:()=>t(i),children:n=r[i].title},n))})}),Pe.jsxs(kA,{md:9,children:[Pe.jsx(t$e,{optionSelected:e}),Pe.jsx("div",{children:Pe.jsxs(aw,{style:{width:"50vw",marginTop:"20px"},children:[Pe.jsx(aw.Header,{children:r[e].title}),Object.keys(r[e].content).map(i=>Pe.jsxs(aw.Body,{children:[Pe.jsx(aw.Title,{children:i}),Object.keys(r[e].content[i]).map(s=>Pe.jsxs(Pe.Fragment,{children:[Pe.jsx(aw.Subtitle,{children:s}),r[e].content[i][s].map((o,a)=>Pe.jsx("li",{style:{marginLeft:"20px"},children:o},a))]}))]}))]})})]})]})})}const c$e="/web-songkran/assets/chulalogo-C4Z6mNpT.png",d$e=()=>{const[e,t]=Ke.useState(!1),n=()=>{t(!0)},r=()=>{t(!1)};return Pe.jsx("div",{children:Pe.jsxs("div",{className:"header",children:[Pe.jsxs("nav",{className:"navbar",children:[Pe.jsx("img",{src:c$e}),Pe.jsxs("div",{className:`nav-links ${e?"show":""}`,id:"navLinks",children:[Pe.jsx("i",{className:"fa-solid fa-xmark",onClick:r}),Pe.jsxs("ul",{className:"flex gap-4",children:[Pe.jsx("li",{className:"rounded-3xl btn-start",children:Pe.jsx("a",{href:"/",children:" 1"})}),Pe.jsx("li",{className:"rounded-3xl btn-start",children:Pe.jsx("a",{href:"/",children:" 2"})}),Pe.jsx("li",{className:"rounded-3xl btn-start",children:Pe.jsx("a",{href:"/",children:" 3"})}),Pe.jsx("li",{className:"rounded-3xl btn-start",children:Pe.jsx("a",{href:"/",children:" 4"})}),Pe.jsx("li",{className:"rounded-3xl btn-start",children:Pe.jsx("a",{href:"/",children:" 5"})}),Pe.jsx("li",{className:"rounded-3xl btn-start ",children:Pe.jsx("a",{href:"/",children:" 6"})}),Pe.jsx("li",{className:"rounded-3xl btn-start",children:Pe.jsx("a",{href:"/",children:""})})]})]}),Pe.jsx("i",{className:"fa-solid fa-bars",onClick:n})]}),Pe.jsxs("div",{className:"text-box",children:[Pe.jsx("div",{className:"text-6xl font-medium text-emerald-500",children:Pe.jsxs("h1",{children:["SONGKRAN",Pe.jsx("br",{}),"GLOBAL FESTIVAL"]})}),Pe.jsxs("h4",{children:[" ",Pe.jsx("br",{})," "]}),Pe.jsx("div",{children:Pe.jsx("button",{className:"btn-start",children:Pe.jsx("a",{href:"/",children:""})})})]})]})})},h$e=()=>Pe.jsxs("div",{children:[Pe.jsx(d$e,{}),Pe.jsx(u$e,{})]});uK.createRoot(document.getElementById("root")).render(Pe.jsx(h$e,{}));export{Pke as $,HG as A,ple as B,fle as C,Lt as D,T_e as E,Bt as F,Hd as G,Dd as H,cr as I,v3e as J,w3e as K,lIe as L,dx as M,dD as N,u_e as O,qOe as P,de as Q,so as R,ll as S,TIe as T,cie as U,Gv as V,aee as W,_Se as X,Mke as Y,_t as Z,pe as _,dr as a,oS as a$,Ft as a0,li as a1,Wd as a2,fe as a3,ct as a4,si as a5,yH as a6,Ae as a7,U0 as a8,WCe as a9,gM as aA,p7 as aB,$Re as aC,X2e as aD,R8 as aE,k8 as aF,A8 as aG,O8 as aH,m7 as aI,ef as aJ,Ak as aK,f7 as aL,I5 as aM,EPe as aN,RIe as aO,bV as aP,Mx as aQ,Sr as aR,h3e as aS,c3e as aT,d3e as aU,dl as aV,mo as aW,po as aX,gV as aY,bi as aZ,lT as a_,Zg as aa,cn as ab,yl as ac,DR as ad,Z$e as ae,xn as af,WA as ag,mg as ah,vMe as ai,TA as aj,L8 as ak,XT as al,zm as am,nl as an,sV as ao,aV as ap,lV as aq,_$e as ar,FK as as,R$e as at,YRe as au,K8 as av,QT as aw,aLe as ax,Zd as ay,DMe as az,oi as b,Vd as b$,qIe as b0,rZ as b1,Hi as b2,Yp as b3,wie as b4,te as b5,Z5 as b6,W5 as b7,cIe as b8,Sf as b9,she as bA,zSe as bB,Ng as bC,Jd as bD,l2e as bE,bA as bF,Pq as bG,the as bH,Cq as bI,Iq as bJ,hhe as bK,ohe as bL,Hde as bM,Jde as bN,Fx as bO,N0 as bP,BA as bQ,fx as bR,A3e as bS,Uk as bT,Iue as bU,B3e as bV,q3e as bW,YIe as bX,KIe as bY,e3e as bZ,QIe as b_,FC as ba,J$e as bb,rl as bc,St as bd,gt as be,Hv as bf,e2e as bg,Tde as bh,xde as bi,Ede as bj,q as bk,gl as bl,gOe as bm,Hj as bn,xs as bo,p1e as bp,Tne as bq,bne as br,mOe as bs,of as bt,H3e as bu,lf as bv,Si as bw,Zde as bx,dhe as by,BZ as bz,tle as c,bEe as c$,XIe as c0,AR as c1,ut as c2,Ze as c3,cCe as c4,hCe as c5,dCe as c6,Yhe as c7,Jhe as c8,ff as c9,RB as cA,WIe as cB,yPe as cC,$Pe as cD,Fd as cE,FU as cF,Fe as cG,Dle as cH,n0 as cI,Kp as cJ,DI as cK,U2e as cL,Yz as cM,Pme as cN,Gge as cO,TG as cP,Zme as cQ,F6 as cR,vt as cS,B_e as cT,CD as cU,Xfe as cV,_Me as cW,aIe as cX,hle as cY,Xge as cZ,MJ as c_,V3e as ca,Kx as cb,Zi as cc,M$e as cd,xt as ce,Qd as cf,Xd as cg,Gd as ch,fl as ci,l3 as cj,_n as ck,gT as cl,a3 as cm,c3 as cn,NG as co,eJ as cp,Ge as cq,b0 as cr,ar as cs,KT as ct,nJ as cu,m0e as cv,un as cw,z8 as cx,sM as cy,G0 as cz,Uy as d,zZ as d$,vLe as d0,Oxe as d1,bLe as d2,gLe as d3,Vxe as d4,Lg as d5,mee as d6,jpe as d7,BCe as d8,YPe as d9,mk as dA,yk as dB,lte as dC,V0 as dD,i0 as dE,ZU as dF,bq as dG,Yk as dH,yue as dI,G3e as dJ,dk as dK,D0 as dL,eue as dM,mB as dN,Cue as dO,Z3e as dP,vs as dQ,W3e as dR,yB as dS,fIe as dT,qi as dU,Cx as dV,Ek as dW,$Se as dX,DZ as dY,GZ as dZ,ISe as d_,O5 as da,Rv as db,aC as dc,Fpe as dd,qCe as de,HCe as df,Pue as dg,yf as dh,ote as di,OCe as dj,NCe as dk,e5 as dl,LCe as dm,Hne as dn,pt as dp,ke as dq,ju as dr,xPe as ds,GIe as dt,uIe as du,uV as dv,cV as dw,ute as dx,Ix as dy,Px as dz,GG as e,Kge as e$,Es as e0,JK as e1,A$e as e2,xU as e3,fg as e4,ok as e5,Wk as e6,hOe as e7,Hie as e8,NZ as e9,Cme as eA,Jfe as eB,w9 as eC,kSe as eD,RSe as eE,r2e as eF,eye as eG,XV as eH,sIe as eI,mx as eJ,L0 as eK,e0 as eL,Td as eM,Ss as eN,ane as eO,xx as eP,bk as eQ,lne as eR,YH as eS,yMe as eT,pl as eU,J2 as eV,vx as eW,Hge as eX,_T as eY,ur as eZ,$x as e_,A9 as ea,Kd as eb,HSe as ec,bre as ed,MSe as ee,VZ as ef,n2e as eg,hIe as eh,ET as ei,wOe as ej,ZMe as ek,kg as el,zx as em,Uge as en,Pge as eo,Rge as ep,Wx as eq,nye as er,Qme as es,Ms as et,Dr as eu,vl as ev,q0 as ew,If as ex,Xme as ey,rme as ez,BG as f,Rx as f$,CT as f0,Mt as f1,Bg as f2,tW as f3,FIe as f4,Uae as f5,NIe as f6,BIe as f7,lr as f8,vF as f9,y_e as fA,Jb as fB,g_e as fC,x0 as fD,UI as fE,$Ie as fF,Gt as fG,_Re as fH,ES as fI,J3 as fJ,Vy as fK,Ox as fL,ZIe as fM,k0 as fN,Wae as fO,jS as fP,HMe as fQ,bMe as fR,ho as fS,Pye as fT,Bfe as fU,qj as fV,$2 as fW,yOe as fX,TO as fY,eV as fZ,DV as f_,gd as fa,Kv as fb,vH as fc,kt as fd,P0 as fe,fMe as ff,TMe as fg,Vj as fh,yLe as fi,_Le as fj,wLe as fk,Gfe as fl,Du as fm,f$e as fn,vPe as fo,IPe as fp,zde as fq,nf as fr,_x as fs,D$e as ft,Ld as fu,N$e as fv,zu as fw,_l as fx,Ad as fy,O$e as fz,dt as g,G_e as g$,Pre as g0,nre as g1,rre as g2,ire as g3,Xne as g4,Cre as g5,Bre as g6,Tf as g7,jn as g8,LPe as g9,Pn as gA,hl as gB,M0 as gC,Er as gD,QMe as gE,Y1e as gF,mIe as gG,N1e as gH,QD as gI,HU as gJ,WU as gK,pIe as gL,fre as gM,O9 as gN,FSe as gO,k9 as gP,ite as gQ,s5 as gR,p3e as gS,f3e as gT,Z as gU,wre as gV,vae as gW,jx as gX,S$e as gY,ZSe as gZ,DSe as g_,OMe as ga,bs as gb,tre as gc,HA as gd,_Z as ge,fA as gf,Ig as gg,wZ as gh,G1e as gi,dL as gj,PD as gk,D2 as gl,IM as gm,lMe as gn,F8 as go,Wv as gp,tk as gq,OU as gr,LIe as gs,Tr as gt,WSe as gu,F1e as gv,z1e as gw,gZ as gx,Vme as gy,Pg as gz,kx as h,Mk as h$,gE as h0,Qfe as h1,kR as h2,tme as h3,nme as h4,pf as h5,kge as h6,Mge as h7,Bme as h8,b5 as h9,sa as hA,d0 as hB,GR as hC,iye as hD,rye as hE,tye as hF,VR as hG,C8 as hH,nke as hI,U1e as hJ,nz as hK,P8 as hL,vT as hM,g3 as hN,mae as hO,VMe as hP,GMe as hQ,zMe as hR,UMe as hS,BMe as hT,qMe as hU,O0 as hV,tt as hW,p$e as hX,qv as hY,xA as hZ,dZ as h_,aB as ha,Qge as hb,sye as hc,Wge as hd,zR as he,oI as hf,_E as hg,UO as hh,jR as hi,Gpe as hj,dE as hk,Kme as hl,ZR as hm,pae as hn,hae as ho,hie as hp,ws as hq,M3 as hr,sl as hs,Yi as ht,I$e as hu,SF as hv,eW as hw,Od as hx,yee as hy,cl as hz,ele as i,cye as i$,T$e as i0,LX as i1,la as i2,lo as i3,rn as i4,AG as i5,gIe as i6,bS as i7,ere as i8,Kne as i9,kye as iA,Sye as iB,yU as iC,SU as iD,Kae as iE,XG as iF,_3e as iG,UH as iH,JA as iI,_y as iJ,uye as iK,NOe as iL,Dye as iM,Fye as iN,ea as iO,Ag as iP,vq as iQ,PR as iR,Uu as iS,aCe as iT,Tye as iU,$ye as iV,gq as iW,yq as iX,mq as iY,Yme as iZ,Cye as i_,OSe as ia,a2e as ib,u2e as ic,Z1e as id,uE as ie,lhe as ig,IG as ih,ste as ii,hte as ij,BT as ik,ASe as il,FZ as im,OT as io,Wg as ip,USe as iq,UZ as ir,L2 as is,KH as it,rQ as iu,y0 as iv,_fe as iw,Qye as ix,Rme as iy,hye as iz,xIe as j,N8 as j$,dye as j0,NV as j1,fye as j2,mye as j3,Eye as j4,yye as j5,gye as j6,_ye as j7,wye as j8,vye as j9,VIe as jA,Ex as jB,Oie as jC,L$e as jD,X2 as jE,Nne as jF,sR as jG,gPe as jH,mPe as jI,IX as jJ,Y$e as jK,zA as jL,VA as jM,fo as jN,At as jO,O as jP,NMe as jQ,TLe as jR,SLe as jS,mLe as jT,hTe as jU,EA as jV,ZRe as jW,D8 as jX,io as jY,QZ as jZ,Eu as j_,bye as ja,QH as jb,B3 as jc,YK as jd,vi as je,LG as jf,Nr as jg,pOe as jh,BQ as ji,bH as jj,iie as jk,sie as jl,I8 as jm,dRe as jn,cRe as jo,uRe as jp,lRe as jq,pRe as jr,hRe as js,aRe as jt,oRe as ju,lE as jv,Dg as jw,$s as jx,_k as jy,Hte as jz,fOe as k,VX as k$,JRe as k0,M8 as k1,xie as k2,Tie as k3,IIe as k4,UIe as k5,YT as k6,bRe as k7,wRe as k8,vRe as k9,uee as kA,Fu as kB,vf as kC,Zy as kD,PTe as kE,OTe as kF,ATe as kG,A0 as kH,o2e as kI,pbe as kJ,fbe as kK,LK as kL,TPe as kM,jZ as kN,y0e as kO,CCe as kP,d7 as kQ,OIe as kR,wn as kS,I0 as kT,yce as kU,CZ as kV,Yee as kW,VV as kX,tMe as kY,eMe as kZ,kme as k_,K2e as ka,ZPe as kb,JPe as kc,WPe as kd,Wq as ke,Gte as kf,Yte as kg,R0 as kh,eIe as ki,gf as kj,Z9 as kk,gS as kl,IE as km,wL as kn,Wi as ko,axe as kp,Wwe as kq,PE as kr,jK as ks,mMe as kt,ZQ as ku,Tx as kv,SMe as kw,E$e as kx,$$e as ky,x$e as kz,ne as l,ede as l$,zX as l0,jIe as l1,b$e as l2,DK as l3,Wue as l4,Tg as l5,L3e as l6,Aye as l7,d6 as l8,Rd as l9,Gme as lA,mge as lB,Age as lC,oV as lD,EU as lE,pMe as lF,JU as lG,UD as lH,d9 as lI,XTe as lJ,xMe as lK,Cn as lL,IOe as lM,nCe as lN,Vde as lO,yIe as lP,j1e as lQ,X0 as lR,$0e as lS,O0e as lT,dIe as lU,kk as lV,uLe as lW,gMe as lX,LV as lY,$d as lZ,xR as l_,t0 as la,qge as lb,Sre as lc,pre as ld,mre as le,$X as lf,CRe as lg,sMe as lh,eZ as li,mZ as lj,w0 as lk,nL as ll,hA as lm,HW as ln,Q0 as lo,cTe as lp,bZ as lq,hr as lr,sae as ls,jme as lt,IH as lu,Fme as lv,eB as lw,qd as lx,Mme as ly,Ime as lz,W3 as m,M1e as m$,Rm as m0,j8 as m1,WRe as m2,dTe as m3,B8 as m4,G8 as m5,B1e as m6,sCe as m7,$R as m8,iCe as m9,kpe as mA,Hg as mB,gR as mC,Zce as mD,Wce as mE,oE as mF,oq as mG,mde as mH,hq as mI,NT as mJ,rq as mK,Nv as mL,NPe as mM,DPe as mN,FPe as mO,ia as mP,gRe as mQ,X8 as mR,nRe as mS,GEe as mT,$r as mU,$E as mV,vIe as mW,uZ as mX,hZ as mY,_1e as mZ,rke as m_,Bp as ma,wi as mb,bOe as mc,Kee as md,$B as me,SOe as mf,vSe as mg,eme as mh,Qte as mi,LMe as mj,lLe as mk,hPe as ml,dPe as mm,pce as mn,fPe as mo,pPe as mp,ik as mq,Ore as mr,Ire as ms,jSe as mt,Mre as mu,vV as mv,gce as mw,v0 as mx,lbe as my,Rpe as mz,gle as n,zC as n$,dg as n0,ike as n1,rCe as n2,lre as n3,fw as n4,t3e as n5,ca as n6,mf as n7,Yle as n8,Wle as n9,ERe as nA,xRe as nB,CTe as nC,or as nD,wR as nE,RCe as nF,Qke as nG,K5 as nH,Ume as nI,U3e as nJ,D3e as nK,j3e as nL,F3e as nM,z3e as nN,Ti as nO,J3e as nP,sLe as nQ,fD as nR,N3e as nS,oLe as nT,Pte as nU,Ite as nV,KMe as nW,aQ as nX,PCe as nY,jC as nZ,mCe as n_,ige as na,jRe as nb,KZ as nc,M4 as nd,O4 as ne,EIe as nf,MCe as ng,VRe as nh,zRe as ni,eRe as nj,tRe as nk,J5 as nl,il as nm,B0e as nn,xE as no,w3 as np,sRe as nq,q0e as nr,QW as ns,rz as nt,oJ as nu,LRe as nv,NRe as nw,DRe as nx,FRe as ny,TRe as nz,$3e as o,O3e as o$,ICe as o0,Dq as o1,lCe as o2,gCe as o3,fCe as o4,rpe as o5,Qhe as o6,yCe as o7,nj as o8,ej as o9,Y2e as oA,eTe as oB,SRe as oC,vJ as oD,pg as oE,RRe as oF,wMe as oG,d1e as oH,RG as oI,q1e as oJ,oL as oK,rLe as oL,nLe as oM,tLe as oN,MTe as oO,sJ as oP,yRe as oQ,mRe as oR,xTe as oS,iLe as oT,Xke as oU,oOe as oV,Pfe as oW,zCe as oX,jCe as oY,$8 as oZ,Fue as o_,tj as oa,TCe as ob,SCe as oc,ECe as od,xCe as oe,Xhe as of,cE as og,ORe as oh,Ru as oi,iL as oj,tpe as ok,PRe as ol,IRe as om,uCe as on,fTe as oo,MRe as op,ez as oq,rRe as or,iRe as os,ARe as ot,kRe as ou,URe as ov,GRe as ow,fRe as ox,BRe as oy,qRe as oz,ZG as p,wCe as p$,ul as p0,wAe as p1,vAe as p2,Uwe as p3,Vwe as p4,Xk as p5,g2 as p6,g$e as p7,Vue as p8,LW as p9,w4 as pA,N4 as pB,D4 as pC,F4 as pD,kie as pE,AIe as pF,_ie as pG,j4 as pH,kIe as pI,PPe as pJ,L1e as pK,pCe as pL,$Ce as pM,bCe as pN,vCe as pO,Z4 as pP,l4 as pQ,Y4 as pR,W4 as pS,v4 as pT,t4 as pU,e4 as pV,Q5 as pW,a4 as pX,tE as pY,DIe as pZ,_Ce as p_,oxe as pa,s0 as pb,a0 as pc,$g as pd,zue as pe,P$e as pf,GOe as pg,BOe as ph,xLe as pi,DOe as pj,Jue as pk,Yue as pl,nR as pm,R6 as pn,qEe as po,DX as pp,mF as pq,y4 as pr,d4 as ps,mie as pt,h4 as pu,MIe as pv,npe as pw,I4 as px,p4 as py,HIe as pz,bx as q,v$e as q$,l_e as q0,Rr as q1,Tee as q2,bPe as q3,SPe as q4,Wre as q5,Hre as q6,_0 as q7,XW as q8,eh as q9,vte as qA,NX as qB,lxe as qC,wIe as qD,s9 as qE,wT as qF,JMe as qG,g0 as qH,BV as qI,She as qJ,TE as qK,p0e as qL,L0e as qM,N0e as qN,CIe as qO,c8 as qP,HPe as qQ,SIe as qR,b0e as qS,S0e as qT,KSe as qU,oCe as qV,Za as qW,g0e as qX,H0 as qY,kK as qZ,eT as q_,zU as qa,pk as qb,p3 as qc,k3e as qd,r9 as qe,Ste as qf,bte as qg,n1e as qh,rL as qi,bie as qj,PIe as qk,x0e as ql,JW as qm,KW as qn,HT as qo,t2e as qp,qT as qq,R0e as qr,fae as qs,A0e as qt,_0e as qu,WMe as qv,uve as qw,YMe as qx,jMe as qy,FMe as qz,l as r,kre as r0,qre as r1,Mq as r2,bIe as r3,Dre as r4,y$e as r5,AK as r6,m$e as r7,wPe as r8,_Pe as r9,KRe as ra,xhe as rb,bhe as rc,Ehe as rd,zIe as re,MPe as rf,Yd as rg,m3e as rh,g3e as ri,BPe as rj,EOe as rk,FOe as rl,cLe as rm,Y as s,p as t,S_e as u,UOe as v,Nx as w,k as x,Xt as y,ge as z};
