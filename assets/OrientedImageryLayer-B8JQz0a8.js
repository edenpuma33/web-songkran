import{r as e,t,x as S,cG as Z,dQ as q,cS as O,el as M,l as X,dp as k,f3 as B,hs as G,s as J,bk as ee,lb as te,eZ as ne,f8 as ie}from"./index-CorgkmYx.js";let v=class extends Z{set horizontalWKID(i){i?q({wkid:+i})?this._set("horizontalWKID",+i):this._set("horizontalWKID",i):this._set("horizontalWKID",null)}set verticalWKID(i){i?this._set("verticalWKID",isFinite(i)&&q({wkid:+i})?+i:null):this._set("verticalWKID",null)}get isAdvanced(){const{affineTransformations:i,focalLength:r,principalOffsetPoint:o,radialDistortionCoefficients:p,tangentialDistortionCoefficients:a}=this;return(i==null?void 0:i.length)>1&&!Number.isNaN(r)&&(o==null?void 0:o.length)>1&&(p==null?void 0:p.length)>1&&(a==null?void 0:a.length)>1}};e([t({json:{write:!0}})],v.prototype,"affineTransformations",void 0),e([t({json:{write:!0}})],v.prototype,"focalLength",void 0),e([t({json:{write:!0}})],v.prototype,"principalOffsetPoint",void 0),e([t({json:{write:!0}})],v.prototype,"radialDistortionCoefficients",void 0),e([t({json:{write:!0}})],v.prototype,"tangentialDistortionCoefficients",void 0),e([t({json:{write:!0}})],v.prototype,"horizontalWKID",null),e([t({json:{write:!0}})],v.prototype,"verticalWKID",null),e([t({json:{write:!0}})],v.prototype,"x",void 0),e([t({json:{write:!0}})],v.prototype,"y",void 0),e([t({json:{write:!0}})],v.prototype,"z",void 0),e([t({json:{write:!0}})],v.prototype,"type",void 0),v=e([S("esri.layers.orientedImagery.core.CameraOrientation")],v);const F=v;let j=class extends O(M(F)){constructor(){super(...arguments),this.type=1}toString(){const{type:i,horizontalWKID:r,verticalWKID:o,x:p,y:a,z:y,heading:d,pitch:h,roll:N,affineTransformations:m,focalLength:x,principalOffsetPoint:c,radialDistortionCoefficients:g,tangentialDistortionCoefficients:w}=this,l=[i,r,o,p,a,y,d,h,N];return this.isAdvanced&&(m==null||m.forEach(s=>l.push(s)),l.push(x),c==null||c.forEach(s=>l.push(s)),g==null||g.forEach(s=>l.push(s)),w==null||w.forEach(s=>l.push(s))),l.map(s=>Number.isNaN(s)?"":s).join("|")}};e([t({json:{write:!0}})],j.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],j.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],j.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],j.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],j.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"heading",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"pitch",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"roll",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"z",void 0),j=e([S("esri.layers.orientedImagery.core.CameraOrientationHPR")],j);const re=j;let I=class extends O(M(F)){constructor(){super(...arguments),this.type=4}toString(){const{type:i,latitude:r,longitude:o,ellipsoidRadius:p,squaredEccentricity:a,properties:y}=this,d=`${y}`.split("|");return d.splice(1,1),`${i}|${r}|${o}|${p}|${a}|${d.join("|")}`}};e([t({json:{write:!0}})],I.prototype,"type",void 0),e([t({json:{write:!0},type:Number})],I.prototype,"latitude",void 0),e([t({json:{write:!0},type:Number})],I.prototype,"longitude",void 0),e([t({json:{write:!0},type:Number})],I.prototype,"ellipsoidRadius",void 0),e([t({json:{write:!0},type:Number})],I.prototype,"squaredEccentricity",void 0),e([t({json:{write:!0}})],I.prototype,"properties",void 0),I=e([S("esri.layers.orientedImagery.core.CameraOrientationLTP")],I);const oe=I;let P=class extends O(M(F)){constructor(){super(...arguments),this.type=2}toString(){const{type:i,horizontalWKID:r,verticalWKID:o,x:p,y:a,z:y,omega:d,phi:h,kappa:N,affineTransformations:m,focalLength:x,principalOffsetPoint:c,radialDistortionCoefficients:g,tangentialDistortionCoefficients:w}=this,l=[i,r,o,p,a,y,d,h,N];return this.isAdvanced&&(m==null||m.forEach(s=>l.push(s)),l.push(x),c==null||c.forEach(s=>l.push(s)),g==null||g.forEach(s=>l.push(s)),w==null||w.forEach(s=>l.push(s))),l.map(s=>isNaN(s)?"":s).join("|")}};e([t({json:{write:!0}})],P.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],P.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],P.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],P.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],P.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"omega",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"phi",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"kappa",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"z",void 0),P=e([S("esri.layers.orientedImagery.core.CameraOrientationOPK")],P);const se=P;let b=class extends O(M(F)){constructor(){super(...arguments),this.type=3}get isAdvanced(){const{affineTransformations:i,focalLength:r,principalOffsetPoint:o,radialDistortionCoefficients:p,tangentialDistortionCoefficients:a}=this;return(i==null?void 0:i.length)>1||!Number.isNaN(r)||(o==null?void 0:o.length)>1||(p==null?void 0:p.length)>1||(a==null?void 0:a.length)>1}toString(){const{type:i,horizontalWKID:r,verticalWKID:o,x:p,y:a,z:y,yaw:d,pitch:h,roll:N,affineTransformations:m,focalLength:x,principalOffsetPoint:c,radialDistortionCoefficients:g,tangentialDistortionCoefficients:w}=this,l=[i,r,o,p,a,y,d,h,N];return this.isAdvanced&&(m==null||m.forEach(s=>l.push(s)),l.push(x),c==null||c.forEach(s=>l.push(s)),c==null||c.forEach(s=>l.push(s)),g==null||g.forEach(s=>l.push(s)),w==null||w.forEach(s=>l.push(s))),l.map(s=>Number.isNaN(s)?"":s).join("|")}};e([t({json:{write:!0}})],b.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],b.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],b.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],b.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],b.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"yaw",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"pitch",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"roll",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"z",void 0),b=e([S("esri.layers.orientedImagery.core.CameraOrientationYPR")],b);const ae=b;var D;(function(n){n[n.HPR=1]="HPR",n[n.OPK=2]="OPK",n[n.YPR=3]="YPR",n[n.LTP=4]="LTP"})(D||(D={}));const W=new Map;W.set(`${D.OPK}`,{desc:"Using Omega Phi Kappa",constructor:se}),W.set(`${D.HPR}`,{desc:"Using Heading, Pitch and Roll",constructor:re}),W.set(`${D.YPR}`,{desc:"Using Yaw, Pitch and Roll",constructor:ae}),W.set(`${D.LTP}`,{desc:"Using Local Tangent Plane",constructor:oe});let $=class extends O(X){constructor(){super(...arguments),this.url=null}};e([t({type:Number,json:{write:!0}})],$.prototype,"lod",void 0),e([t({type:String,json:{write:!0}})],$.prototype,"rasterFunction",void 0),e([t({type:String,json:{write:!0}})],$.prototype,"url",void 0),$=e([S("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ElevationSource")],$);let H=class extends O(X){constructor(){super(...arguments),this.constantElevation=null}};e([t({type:Number,json:{write:!0}})],H.prototype,"constantElevation",void 0),H=e([S("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ConstantElevation")],H);const ue=n=>n!=null&&typeof n.constantElevation=="number";function pe(n,i,r){return i&&(n=`${i}${n}`),r&&(n+=`${r}`),n}function de(n,i,r){let{url:o}=n;return o?(o=pe(o,i,r),new $({...n,url:o})):null}function le(n,i,r){return n&&(ue(n)?new H(n):de(n,i,r))}const A=new k({Minutes:"minutes",Hours:"hours",Days:"days",Weeks:"weeks",Months:"months",Years:"years"}),V=new k({Feet:"feet",Meter:"meter"}),_=new k({360:"360",Horizontal:"horizontal",Inspection:"inspection",Nadir:"nadir",Oblique:"oblique","":null}),R=new Map;function fe(n){const[i,r,o,p,a,y,d,h,N,m,x,c,g,w,l,s,z,T,E,K,C,L]=n.slice(1);return{horizontalWKID:i,verticalWKID:r,x:o,y:p,z:a,omega:y,phi:d,kappa:h,...Y([N,m,x,c,g,w],[s,z],[T,E,K],[C,L],l)}}R.set(`${D.HPR}`,ye),R.set(`${D.YPR}`,ce),R.set(`${D.OPK}`,fe),R.set(`${D.LTP}`,he);const U=n=>{const i=n.map(r=>parseFloat(r)).filter(r=>!isNaN(r));if(i.length===n.length)return i};function Y(n,i,r,o,p){const a=U(n),y=U(i),d=U(r),h=U(o);return{affineTransformations:(a==null?void 0:a.length)===6?a:void 0,focalLength:(a==null?void 0:a.length)===6?parseFloat(p):void 0,principalOffsetPoint:(y==null?void 0:y.length)!==2?[0,0]:y,radialDistortionCoefficients:(d==null?void 0:d.length)!==3?[0,0,0]:d,tangentialDistortionCoefficients:(h==null?void 0:h.length)!==2?[0,0]:h}}function ye(n){const[i,r,o,p,a,y,d,h,N,m,x,c,g,w,l,s,z,T,E,K,C,L]=n.slice(1);return{horizontalWKID:i,verticalWKID:r,x:o,y:p,z:a,heading:y,pitch:d,roll:h,...Y([N,m,x,c,g,w],[s,z],[T,E,K],[C,L],l)}}function ce(n){const[i,r,o,p,a,y,d,h,N,m,x,c,g,w,l,s,z,T,E,K,C,L]=n.slice(1);return{horizontalWKID:i,verticalWKID:r,x:o,y:p,z:a,yaw:y,pitch:d,roll:h,...Y([N,m,x,c,g,w],[s,z],[T,E,K],[C,L],l)}}function he(n){var N;const[i,r,o,p,a,...y]=n.slice(1),d=R.get(a),h=(N=W.get(a))==null?void 0:N.constructor;return!d||!h?null:{latitude:i,longitude:r,ellipsoidRadius:o,squaredEccentricity:p,properties:new h(d([a,"",...y]))}}function me(n){return Array.isArray(n)&&(n==null?void 0:n.length)===9&&!n.some(isNaN)}const ge=new Set(["demPathPrefix","demPathSuffix","depthImagePathPrefix","depthImagePathSuffix","elevationSource","horizontalMeasurementUnit","verticalMeasurementUnit","videoPathPrefix","videoPathSuffix","timeAnimation","visibilityTimeExtent"]),Q=(n,i)=>!ge.has(i)&&n,we=(n,i,r)=>{const o=`orientedImageryProperties.${n}`;return{name:o,write:i?{ignoreOrigin:!0,target:o,writer:i}:{ignoreOrigin:!0},read:r?{ignoreOrigin:!0,source:o,reader:r}:{ignoreOrigin:!0}}};function je(n){return n.json&&(n.json.origins=n.json.origins??{},n.json.origins["web-scene"]={write:!1,read:!1}),n}function f(n,i,r,o){const{name:p,write:a,read:y}=we(n,i,r),d={name:p,write:a,read:y,origins:{service:{name:`orientedImageryInfo.${p}`,write:i,read:r},"web-scene":{name:p,write:Q(a,n),read:Q(y,n)},"web-map":{name:p,write:a,read:y}}};return o&&d.origins&&(d.type=o,d.origins["web-map"].type=o,d.origins["web-scene"].type=o),d}let u=class extends B{constructor(){super(...arguments),this.cameraHeading=null,this.cameraHeight=null,this.cameraPitch=null,this.cameraRoll=null,this.coveragePercent=null,this.demPathPrefix=null,this.demPathSuffix=null,this.depthImagePathPrefix=null,this.depthImagePathSuffix=null,this.elevationSource=null,this.farDistance=null,this.geometryType="point",this.horizontalFieldOfView=null,this.horizontalMeasurementUnit=null,this.imagePathPrefix=null,this.imagePathSuffix=null,this.imageRotation=null,this.maximumDistance=null,this.nearDistance=null,this.operationalLayerType="OrientedImageryLayer",this.orientationAccuracy=null,this.orientedImageryType=null,this.supportedSourceTypes=new Set(["Oriented Imagery Layer"]),this.type="oriented-imagery",this.timeIntervalUnit="days",this.useViewTime=!0,this.verticalFieldOfView=null,this.verticalMeasurementUnit=null,this.videoPathPrefix=null,this.videoPathSuffix=null,this.visibilityTimeExtent=null}get effectiveElevationSource(){const{elevationSource:n,demPathPrefix:i,demPathSuffix:r}=this;return le(n,i,r)}async save(n){return this._debouncedSaveOperations(G.SAVE,n)}async saveAs(n,i){return this._debouncedSaveOperations(G.SAVE_AS,i,n)}findFirstValidLayerId(n){var i,r;return(r=(i=n.layers)==null?void 0:i.find(o=>this.supportedSourceTypes.has(o.type)))==null?void 0:r.id}_verifySource(){if(super._verifySource(),this.geometryType!=="point")throw new J("oriented-imagery-layer:invalid-geometry-type","OrientedImageryLayer only supports point geometry type")}};e([t({type:Number,json:f("cameraHeading")})],u.prototype,"cameraHeading",void 0),e([t({type:Number,json:f("cameraHeight")})],u.prototype,"cameraHeight",void 0),e([t({type:Number,json:f("cameraPitch")})],u.prototype,"cameraPitch",void 0),e([t({type:Number,json:f("cameraRoll")})],u.prototype,"cameraRoll",void 0),e([t({type:Number,json:f("coveragePercent")})],u.prototype,"coveragePercent",void 0),e([t({type:String,json:f("demPathPrefix")})],u.prototype,"demPathPrefix",void 0),e([t({type:String,json:f("demPathSuffix")})],u.prototype,"demPathSuffix",void 0),e([t({type:String,json:f("depthImagePathPrefix")})],u.prototype,"depthImagePathPrefix",void 0),e([t({type:String,json:f("depthImagePathSuffix")})],u.prototype,"depthImagePathSuffix",void 0),e([t({type:Object,json:f("elevationSource")})],u.prototype,"elevationSource",void 0),e([t({readOnly:!0})],u.prototype,"effectiveElevationSource",null),e([t({type:Number,json:f("farDistance")})],u.prototype,"farDistance",void 0),e([t()],u.prototype,"geometryType",void 0),e([t({type:Number,json:f("horizontalFieldOfView")})],u.prototype,"horizontalFieldOfView",void 0),e([t({type:String,json:f("horizontalMeasurementUnit")})],u.prototype,"horizontalMeasurementUnit",void 0),e([t({type:String,json:f("imagePathPrefix")})],u.prototype,"imagePathPrefix",void 0),e([t({type:String,json:f("imagePathSuffix")})],u.prototype,"imagePathSuffix",void 0),e([t({type:Number,json:f("imageRotation")})],u.prototype,"imageRotation",void 0),e([t({type:Number,json:f("maximumDistance")})],u.prototype,"maximumDistance",void 0),e([t({type:Number,json:f("nearDistance")})],u.prototype,"nearDistance",void 0),e([t({type:["OrientedImageryLayer"],json:{origins:{"portal-item":{name:"layerType",write:{enabled:!0,ignoreOrigin:!0}}}}})],u.prototype,"operationalLayerType",void 0),e([t({json:{...f("orientationAccuracy",(n,i,r)=>{ie(r,n.join(";"),i)},n=>{var r;const i=(r=n==null?void 0:n.split(";"))==null?void 0:r.map(Number);return me(i)?i:[0,0,0,0,0,0,0,0,0]},String)}})],u.prototype,"orientationAccuracy",void 0),e([t({json:{...f("orientedImageryType",_.write,_.read,_.jsonValues.slice(1))}})],u.prototype,"orientedImageryType",void 0),e([t({json:{read:!1},value:"oriented-imagery",readOnly:!0})],u.prototype,"type",void 0),e([t({type:A.apiValues,json:{...f("timeIntervalUnit",A.write,A.read,A.jsonValues)}})],u.prototype,"timeIntervalUnit",void 0),e([t(je(ee(te)))],u.prototype,"useViewTime",void 0),e([t({type:Number,json:f("verticalFieldOfView")})],u.prototype,"verticalFieldOfView",void 0),e([t({type:V.apiValues,json:{...f("verticalMeasurementUnit",V.write,V.read,V.jsonValues)}})],u.prototype,"verticalMeasurementUnit",void 0),e([t({type:String,json:f("videoPathPrefix")})],u.prototype,"videoPathPrefix",void 0),e([t({type:String,json:f("videoPathSuffix")})],u.prototype,"videoPathSuffix",void 0),e([t({type:ne,json:{origins:{"web-scene":{write:!1,read:!1}}}})],u.prototype,"visibilityTimeExtent",void 0),u=e([S("esri.layers.OrientedImageryLayer")],u);const $e=u;export{$e as default};
